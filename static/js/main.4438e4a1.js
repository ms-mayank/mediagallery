/*! For license information please see main.4438e4a1.js.LICENSE.txt */
(()=>{"use strict";var e={725:e=>{var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var s,o,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var l in s=Object(arguments[c]))n.call(s,l)&&(a[l]=s[l]);if(t){o=t(s);for(var u=0;u<o.length;u++)r.call(s,o[u])&&(a[o[u]]=s[o[u]])}}return a}},463:(e,t,n)=>{var r=n(791),i=n(725),s=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));function a(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var c=!1,l=null,u=!1,h=null,d={onError:function(e){c=!0,l=e}};function f(e,t,n,r,i,s,o,u,h){c=!1,l=null,a.apply(d,arguments)}var p=null,m=null,g=null;function v(e,t,n){var r=e.type||"unknown-event";e.currentTarget=g(n),function(e,t,n,r,i,s,a,d,p){if(f.apply(this,arguments),c){if(!c)throw Error(o(198));var m=l;c=!1,l=null,u||(u=!0,h=m)}}(r,t,void 0,e),e.currentTarget=null}var y=null,w={};function b(){if(y)for(var e in w){var t=w[e],n=y.indexOf(e);if(!(-1<n))throw Error(o(96,e));if(!T[n]){if(!t.extractEvents)throw Error(o(97,e));for(var r in T[n]=t,n=t.eventTypes){var i=void 0,s=n[r],a=t,c=r;if(E.hasOwnProperty(c))throw Error(o(99,c));E[c]=s;var l=s.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&_(l[i],a,c);i=!0}else s.registrationName?(_(s.registrationName,a,c),i=!0):i=!1;if(!i)throw Error(o(98,r,e))}}}}function _(e,t,n){if(I[e])throw Error(o(100,e));I[e]=t,S[e]=t.eventTypes[n].dependencies}var T=[],E={},I={},S={};function k(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!w.hasOwnProperty(t)||w[t]!==r){if(w[t])throw Error(o(102,t));w[t]=r,n=!0}}n&&b()}var C=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),A=null,x=null,P=null;function N(e){if(e=m(e)){if("function"!==typeof A)throw Error(o(280));var t=e.stateNode;t&&(t=p(t),A(e.stateNode,e.type,t))}}function R(e){x?P?P.push(e):P=[e]:x=e}function O(){if(x){var e=x,t=P;if(P=x=null,N(e),t)for(e=0;e<t.length;e++)N(t[e])}}function D(e,t){return e(t)}function L(e,t,n,r,i){return e(t,n,r,i)}function M(){}var U=D,F=!1,V=!1;function j(){null===x&&null===P||(M(),O())}function z(e,t,n){if(V)return e(t,n);V=!0;try{return U(e,t,n)}finally{V=!1,j()}}var B=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q=Object.prototype.hasOwnProperty,H={},W={};function K(e,t,n,r,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){G[e]=new K(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];G[t]=new K(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){G[e]=new K(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){G[e]=new K(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){G[e]=new K(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){G[e]=new K(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){G[e]=new K(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){G[e]=new K(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){G[e]=new K(e,5,!1,e.toLowerCase(),null,!1)}));var Q=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Q,Y);G[t]=new K(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Q,Y);G[t]=new K(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Q,Y);G[t]=new K(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){G[e]=new K(e,1,!1,e.toLowerCase(),null,!1)})),G.xlinkHref=new K("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){G[e]=new K(e,1,!1,e.toLowerCase(),null,!0)}));var X=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function J(e,t,n,r){var i=G.hasOwnProperty(t)?G[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!q.call(W,e)||!q.call(H,e)&&(B.test(e)?W[e]=!0:(H[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}X.hasOwnProperty("ReactCurrentDispatcher")||(X.ReactCurrentDispatcher={current:null}),X.hasOwnProperty("ReactCurrentBatchConfig")||(X.ReactCurrentBatchConfig={suspense:null});var $=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ie=Z?Symbol.for("react.profiler"):60114,se=Z?Symbol.for("react.provider"):60109,oe=Z?Symbol.for("react.context"):60110,ae=Z?Symbol.for("react.concurrent_mode"):60111,ce=Z?Symbol.for("react.forward_ref"):60112,le=Z?Symbol.for("react.suspense"):60113,ue=Z?Symbol.for("react.suspense_list"):60120,he=Z?Symbol.for("react.memo"):60115,de=Z?Symbol.for("react.lazy"):60116,fe=Z?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case le:return"Suspense";case ue:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case oe:return"Context.Consumer";case se:return"Context.Provider";case ce:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case he:return ge(e.type);case fe:return ge(e.render);case de:if(e=1===e._status?e._result:null)return ge(e)}return null}function ve(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,s=ge(e.type);n=null,r&&(n=ge(r.type)),r=s,s="",i?s=" (at "+i.fileName.replace($,"")+":"+i.lineNumber+")":n&&(s=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+s}t+=n,e=e.return}while(e);return t}function ye(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function we(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function be(e){e._valueTracker||(e._valueTracker=function(e){var t=we(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function _e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=we(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Te(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ye(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ie(e,t){null!=(t=t.checked)&&J(e,"checked",t,!1)}function Se(e,t){Ie(e,t);var n=ye(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ce(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ce(e,t.type,ye(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ke(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Ce(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function xe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ye(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Pe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ne(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ye(n)}}function Re(e,t){var n=ye(t.value),r=ye(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var De="http://www.w3.org/1999/xhtml",Le="http://www.w3.org/2000/svg";function Me(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Me(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Fe,Ve,je=(Ve=function(e,t){if(e.namespaceURI!==Le||"innerHTML"in e)e.innerHTML=t;else{for((Fe=Fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Ve(e,t)}))}:Ve);function ze(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Be(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qe={animationend:Be("Animation","AnimationEnd"),animationiteration:Be("Animation","AnimationIteration"),animationstart:Be("Animation","AnimationStart"),transitionend:Be("Transition","TransitionEnd")},He={},We={};function Ke(e){if(He[e])return He[e];if(!qe[e])return e;var t,n=qe[e];for(t in n)if(n.hasOwnProperty(t)&&t in We)return He[e]=n[t];return e}C&&(We=document.createElement("div").style,"AnimationEvent"in window||(delete qe.animationend.animation,delete qe.animationiteration.animation,delete qe.animationstart.animation),"TransitionEvent"in window||delete qe.transitionend.transition);var Ge=Ke("animationend"),Qe=Ke("animationiteration"),Ye=Ke("animationstart"),Xe=Ke("transitionend"),Je="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$e=new("function"===typeof WeakMap?WeakMap:Map);function Ze(e){var t=$e.get(e);return void 0===t&&(t=new Map,$e.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(o(188))}function rt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nt(i),e;if(s===r)return nt(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(o(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function st(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function at(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)v(e,t[r],n[r]);else t&&v(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function ct(e){if(null!==e&&(ot=it(ot,e)),e=ot,ot=null,e){if(st(e,at),ot)throw Error(o(95));if(u)throw e=h,u=!1,h=null,e}}function lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ut(e){if(!C)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ht=[];function dt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ht.length&&ht.push(e)}function ft(e,t,n,r){if(ht.length){var i=ht.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=On(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=lt(e.nativeEvent);r=e.topLevelType;var s=e.nativeEvent,o=e.eventSystemFlags;0===n&&(o|=64);for(var a=null,c=0;c<T.length;c++){var l=T[c];l&&(l=l.extractEvents(r,t,s,i,o))&&(a=it(a,l))}ct(a)}}function mt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Yt(t,"scroll",!0);break;case"focus":case"blur":Yt(t,"focus",!0),Yt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ut(e)&&Yt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Je.indexOf(e)&&Qt(e,t)}n.set(e,null)}}var gt,vt,yt,wt=!1,bt=[],_t=null,Tt=null,Et=null,It=new Map,St=new Map,kt=[],Ct="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),At="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function xt(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Pt(e,t){switch(e){case"focus":case"blur":_t=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":St.delete(t.pointerId)}}function Nt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e=xt(t,n,r,i,s),null!==t&&(null!==(t=Dn(t))&&vt(t)),e):(e.eventSystemFlags|=r,e)}function Rt(e){var t=On(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void s.unstable_runWithPriority(e.priority,(function(){yt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Dn(t);return null!==n&&vt(n),e.blockedOn=t,!1}return!0}function Dt(e,t,n){Ot(e)&&n.delete(t)}function Lt(){for(wt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=Dn(e.blockedOn))&&gt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==_t&&Ot(_t)&&(_t=null),null!==Tt&&Ot(Tt)&&(Tt=null),null!==Et&&Ot(Et)&&(Et=null),It.forEach(Dt),St.forEach(Dt)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,wt||(wt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Lt)))}function Ut(e){function t(t){return Mt(t,e)}if(0<bt.length){Mt(bt[0],e);for(var n=1;n<bt.length;n++){var r=bt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Mt(_t,e),null!==Tt&&Mt(Tt,e),null!==Et&&Mt(Et,e),It.forEach(t),St.forEach(t),n=0;n<kt.length;n++)(r=kt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<kt.length&&null===(n=kt[0]).blockedOn;)Rt(n),null===n.blockedOn&&kt.shift()}var Ft={},Vt=new Map,jt=new Map,zt=["abort","abort",Ge,"animationEnd",Qe,"animationIteration",Ye,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Xe,"transitionEnd","waiting","waiting"];function Bt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],s="on"+(i[0].toUpperCase()+i.slice(1));s={phasedRegistrationNames:{bubbled:s,captured:s+"Capture"},dependencies:[r],eventPriority:t},jt.set(r,t),Vt.set(r,s),Ft[i]=s}}Bt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Bt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Bt(zt,2);for(var qt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ht=0;Ht<qt.length;Ht++)jt.set(qt[Ht],0);var Wt=s.unstable_UserBlockingPriority,Kt=s.unstable_runWithPriority,Gt=!0;function Qt(e,t){Yt(t,e,!1)}function Yt(e,t,n){var r=jt.get(t);switch(void 0===r?2:r){case 0:r=Xt.bind(null,t,1,e);break;case 1:r=Jt.bind(null,t,1,e);break;default:r=$t.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Xt(e,t,n,r){F||M();var i=$t,s=F;F=!0;try{L(i,e,t,n,r)}finally{(F=s)||j()}}function Jt(e,t,n,r){Kt(Wt,$t.bind(null,e,t,n,r))}function $t(e,t,n,r){if(Gt)if(0<bt.length&&-1<Ct.indexOf(e))e=xt(null,e,t,n,r),bt.push(e);else{var i=Zt(e,t,n,r);if(null===i)Pt(e,r);else if(-1<Ct.indexOf(e))e=xt(i,e,t,n,r),bt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return _t=Nt(_t,e,t,n,r,i),!0;case"dragenter":return Tt=Nt(Tt,e,t,n,r,i),!0;case"mouseover":return Et=Nt(Et,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return It.set(s,Nt(It.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,St.set(s,Nt(St.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Pt(e,r),e=ft(e,r,null,t);try{z(pt,e)}finally{dt(e)}}}}function Zt(e,t,n,r){if(null!==(n=On(n=lt(r)))){var i=et(n);if(null===i)n=null;else{var s=i.tag;if(13===s){if(null!==(n=tt(i)))return n;n=null}else if(3===s){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ft(e,r,n,t);try{z(pt,e)}finally{dt(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var sn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(sn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62,""))}}function an(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cn=De;function ln(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=S[t];for(var r=0;r<t.length;r++)mt(t[r],e,n)}function un(){}function hn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fn(e,t){var n,r=dn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dn(r)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mn(){for(var e=window,t=hn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=hn((e=t.contentWindow).document)}return t}function gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vn="$",yn="/$",wn="$?",bn="$!",_n=null,Tn=null;function En(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function In(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Sn="function"===typeof setTimeout?setTimeout:void 0,kn="function"===typeof clearTimeout?clearTimeout:void 0;function Cn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function An(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===vn||n===bn||n===wn){if(0===t)return e;t--}else n===yn&&t++}e=e.previousSibling}return null}var xn=Math.random().toString(36).slice(2),Pn="__reactInternalInstance$"+xn,Nn="__reactEventHandlers$"+xn,Rn="__reactContainere$"+xn;function On(e){var t=e[Pn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Rn]||n[Pn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=An(e);null!==e;){if(n=e[Pn])return n;e=An(e)}return t}n=(e=n).parentNode}return null}function Dn(e){return!(e=e[Pn]||e[Rn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ln(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Mn(e){return e[Nn]||null}function Un(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Fn(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}function Vn(e,t,n){(t=Fn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function jn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Un(t);for(t=n.length;0<t--;)Vn(n[t],"captured",e);for(t=0;t<n.length;t++)Vn(n[t],"bubbled",e)}}function zn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Fn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Bn(e){e&&e.dispatchConfig.registrationName&&zn(e._targetInst,null,e)}function qn(e){st(e,jn)}var Hn=null,Wn=null,Kn=null;function Gn(){if(Kn)return Kn;var e,t,n=Wn,r=n.length,i="value"in Hn?Hn.value:Hn.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Kn=i.slice(e,1<t?1-t:void 0)}function Qn(){return!0}function Yn(){return!1}function Xn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Qn:Yn,this.isPropagationStopped=Yn,this}function Jn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function $n(e){if(!(e instanceof this))throw Error(o(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Zn(e){e.eventPool=[],e.getPooled=Jn,e.release=$n}i(Xn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){this.isPersistent=Qn},isPersistent:Yn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Yn,this._dispatchInstances=this._dispatchListeners=null}}),Xn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Xn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var s=new t;return i(s,n.prototype),n.prototype=s,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Zn(n),n},Zn(Xn);var er=Xn.extend({data:null}),tr=Xn.extend({data:null}),nr=[9,13,27,32],rr=C&&"CompositionEvent"in window,ir=null;C&&"documentMode"in document&&(ir=document.documentMode);var sr=C&&"TextEvent"in window&&!ir,or=C&&(!rr||ir&&8<ir&&11>=ir),ar=String.fromCharCode(32),cr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},lr=!1;function ur(e,t){switch(e){case"keyup":return-1!==nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function hr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var dr=!1;var fr={eventTypes:cr,extractEvents:function(e,t,n,r){var i;if(rr)e:{switch(e){case"compositionstart":var s=cr.compositionStart;break e;case"compositionend":s=cr.compositionEnd;break e;case"compositionupdate":s=cr.compositionUpdate;break e}s=void 0}else dr?ur(e,n)&&(s=cr.compositionEnd):"keydown"===e&&229===n.keyCode&&(s=cr.compositionStart);return s?(or&&"ko"!==n.locale&&(dr||s!==cr.compositionStart?s===cr.compositionEnd&&dr&&(i=Gn()):(Wn="value"in(Hn=r)?Hn.value:Hn.textContent,dr=!0)),s=er.getPooled(s,t,n,r),i?s.data=i:null!==(i=hr(n))&&(s.data=i),qn(s),i=s):i=null,(e=sr?function(e,t){switch(e){case"compositionend":return hr(t);case"keypress":return 32!==t.which?null:(lr=!0,ar);case"textInput":return(e=t.data)===ar&&lr?null:e;default:return null}}(e,n):function(e,t){if(dr)return"compositionend"===e||!rr&&ur(e,t)?(e=Gn(),Kn=Wn=Hn=null,dr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return or&&"ko"!==t.locale?null:t.data}}(e,n))?((t=tr.getPooled(cr.beforeInput,t,n,r)).data=e,qn(t)):t=null,null===i?t:null===t?i:[i,t]}},pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!pr[e.type]:"textarea"===t}var gr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function vr(e,t,n){return(e=Xn.getPooled(gr.change,e,t,n)).type="change",R(n),qn(e),e}var yr=null,wr=null;function br(e){ct(e)}function _r(e){if(_e(Ln(e)))return e}function Tr(e,t){if("change"===e)return t}var Er=!1;function Ir(){yr&&(yr.detachEvent("onpropertychange",Sr),wr=yr=null)}function Sr(e){if("value"===e.propertyName&&_r(wr))if(e=vr(wr,e,lt(e)),F)ct(e);else{F=!0;try{D(br,e)}finally{F=!1,j()}}}function kr(e,t,n){"focus"===e?(Ir(),wr=n,(yr=t).attachEvent("onpropertychange",Sr)):"blur"===e&&Ir()}function Cr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return _r(wr)}function Ar(e,t){if("click"===e)return _r(t)}function xr(e,t){if("input"===e||"change"===e)return _r(t)}C&&(Er=ut("input")&&(!document.documentMode||9<document.documentMode));var Pr={eventTypes:gr,_isInputEventSupported:Er,extractEvents:function(e,t,n,r){var i=t?Ln(t):window,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type)var o=Tr;else if(mr(i))if(Er)o=xr;else{o=Cr;var a=kr}else(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Ar);if(o&&(o=o(e,t)))return vr(o,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Ce(i,"number",i.value)}},Nr=Xn.extend({view:null,detail:null}),Rr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Or(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Rr[e])&&!!t[e]}function Dr(){return Or}var Lr=0,Mr=0,Ur=!1,Fr=!1,Vr=Nr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Dr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Lr;return Lr=e.screenX,Ur?"mousemove"===e.type?e.screenX-t:0:(Ur=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Mr;return Mr=e.screenY,Fr?"mousemove"===e.type?e.screenY-t:0:(Fr=!0,0)}}),jr=Vr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),zr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Br={eventTypes:zr,extractEvents:function(e,t,n,r,i){var s="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(s&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!o&&!s)return null;(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,o)?(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?On(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):o=null;if(o===t)return null;if("mouseout"===e||"mouseover"===e)var a=Vr,c=zr.mouseLeave,l=zr.mouseEnter,u="mouse";else"pointerout"!==e&&"pointerover"!==e||(a=jr,c=zr.pointerLeave,l=zr.pointerEnter,u="pointer");if(e=null==o?s:Ln(o),s=null==t?s:Ln(t),(c=a.getPooled(c,o,n,r)).type=u+"leave",c.target=e,c.relatedTarget=s,(n=a.getPooled(l,t,n,r)).type=u+"enter",n.target=s,n.relatedTarget=e,u=t,(r=o)&&u)e:{for(l=u,o=0,e=a=r;e;e=Un(e))o++;for(e=0,t=l;t;t=Un(t))e++;for(;0<o-e;)a=Un(a),o--;for(;0<e-o;)l=Un(l),e--;for(;o--;){if(a===l||a===l.alternate)break e;a=Un(a),l=Un(l)}a=null}else a=null;for(l=a,a=[];r&&r!==l&&(null===(o=r.alternate)||o!==l);)a.push(r),r=Un(r);for(r=[];u&&u!==l&&(null===(o=u.alternate)||o!==l);)r.push(u),u=Un(u);for(u=0;u<a.length;u++)zn(a[u],"bubbled",c);for(u=r.length;0<u--;)zn(r[u],"captured",n);return 0===(64&i)?[c]:[c,n]}};var qr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Hr=Object.prototype.hasOwnProperty;function Wr(e,t){if(qr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Hr.call(t,n[r])||!qr(e[n[r]],t[n[r]]))return!1;return!0}var Kr=C&&"documentMode"in document&&11>=document.documentMode,Gr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Qr=null,Yr=null,Xr=null,Jr=!1;function $r(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Jr||null==Qr||Qr!==hn(n)?null:("selectionStart"in(n=Qr)&&gn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Xr&&Wr(Xr,n)?null:(Xr=n,(e=Xn.getPooled(Gr.select,Yr,e,t)).type="select",e.target=Qr,qn(e),e))}var Zr={eventTypes:Gr,extractEvents:function(e,t,n,r,i,s){if(!(s=!(i=s||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ze(i),s=S.onSelect;for(var o=0;o<s.length;o++)if(!i.has(s[o])){i=!1;break e}i=!0}s=!i}if(s)return null;switch(i=t?Ln(t):window,e){case"focus":(mr(i)||"true"===i.contentEditable)&&(Qr=i,Yr=t,Xr=null);break;case"blur":Xr=Yr=Qr=null;break;case"mousedown":Jr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Jr=!1,$r(n,r);case"selectionchange":if(Kr)break;case"keydown":case"keyup":return $r(n,r)}return null}},ei=Xn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ti=Xn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ni=Nr.extend({relatedTarget:null});function ri(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ii={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},si={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oi=Nr.extend({key:function(e){if(e.key){var t=ii[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ri(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?si[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Dr,charCode:function(e){return"keypress"===e.type?ri(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ri(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ai=Vr.extend({dataTransfer:null}),ci=Nr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Dr}),li=Xn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ui=Vr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),hi={eventTypes:Ft,extractEvents:function(e,t,n,r){var i=Vt.get(e);if(!i)return null;switch(e){case"keypress":if(0===ri(n))return null;case"keydown":case"keyup":e=oi;break;case"blur":case"focus":e=ni;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Vr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ai;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ci;break;case Ge:case Qe:case Ye:e=ei;break;case Xe:e=li;break;case"scroll":e=Nr;break;case"wheel":e=ui;break;case"copy":case"cut":case"paste":e=ti;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=jr;break;default:e=Xn}return qn(t=e.getPooled(i,t,n,r)),t}};if(y)throw Error(o(101));y=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),p=Mn,m=Dn,g=Ln,k({SimpleEventPlugin:hi,EnterLeaveEventPlugin:Br,ChangeEventPlugin:Pr,SelectEventPlugin:Zr,BeforeInputEventPlugin:fr});var di=[],fi=-1;function pi(e){0>fi||(e.current=di[fi],di[fi]=null,fi--)}function mi(e,t){fi++,di[fi]=e.current,e.current=t}var gi={},vi={current:gi},yi={current:!1},wi=gi;function bi(e,t){var n=e.type.contextTypes;if(!n)return gi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function _i(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ti(){pi(yi),pi(vi)}function Ei(e,t,n){if(vi.current!==gi)throw Error(o(168));mi(vi,t),mi(yi,n)}function Ii(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in e))throw Error(o(108,ge(t)||"Unknown",s));return i({},n,{},r)}function Si(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gi,wi=vi.current,mi(vi,e),mi(yi,yi.current),!0}function ki(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ii(e,t,wi),r.__reactInternalMemoizedMergedChildContext=e,pi(yi),pi(vi),mi(vi,e)):pi(yi),mi(yi,n)}var Ci=s.unstable_runWithPriority,Ai=s.unstable_scheduleCallback,xi=s.unstable_cancelCallback,Pi=s.unstable_requestPaint,Ni=s.unstable_now,Ri=s.unstable_getCurrentPriorityLevel,Oi=s.unstable_ImmediatePriority,Di=s.unstable_UserBlockingPriority,Li=s.unstable_NormalPriority,Mi=s.unstable_LowPriority,Ui=s.unstable_IdlePriority,Fi={},Vi=s.unstable_shouldYield,ji=void 0!==Pi?Pi:function(){},zi=null,Bi=null,qi=!1,Hi=Ni(),Wi=1e4>Hi?Ni:function(){return Ni()-Hi};function Ki(){switch(Ri()){case Oi:return 99;case Di:return 98;case Li:return 97;case Mi:return 96;case Ui:return 95;default:throw Error(o(332))}}function Gi(e){switch(e){case 99:return Oi;case 98:return Di;case 97:return Li;case 96:return Mi;case 95:return Ui;default:throw Error(o(332))}}function Qi(e,t){return e=Gi(e),Ci(e,t)}function Yi(e,t,n){return e=Gi(e),Ai(e,t,n)}function Xi(e){return null===zi?(zi=[e],Bi=Ai(Oi,$i)):zi.push(e),Fi}function Ji(){if(null!==Bi){var e=Bi;Bi=null,xi(e)}$i()}function $i(){if(!qi&&null!==zi){qi=!0;var e=0;try{var t=zi;Qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),zi=null}catch(n){throw null!==zi&&(zi=zi.slice(e+1)),Ai(Oi,Ji),n}finally{qi=!1}}}function Zi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function es(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ts={current:null},ns=null,rs=null,is=null;function ss(){is=rs=ns=null}function os(e){var t=ts.current;pi(ts),e.type._context._currentValue=t}function as(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function cs(e,t){ns=e,is=rs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Mo=!0),e.firstContext=null)}function ls(e,t){if(is!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(is=e,t=1073741823),t={context:e,observedBits:t,next:null},null===rs){if(null===ns)throw Error(o(308));rs=t,ns.dependencies={expirationTime:0,firstContext:t,responders:null}}else rs=rs.next=t;return e._currentValue}var us=!1;function hs(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ds(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function fs(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function ps(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ms(e,t){var n=e.alternate;null!==n&&ds(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function gs(e,t,n,r){var s=e.updateQueue;us=!1;var o=s.baseQueue,a=s.shared.pending;if(null!==a){if(null!==o){var c=o.next;o.next=a.next,a.next=c}o=a,s.shared.pending=null,null!==(c=e.alternate)&&(null!==(c=c.updateQueue)&&(c.baseQueue=a))}if(null!==o){c=o.next;var l=s.baseState,u=0,h=null,d=null,f=null;if(null!==c)for(var p=c;;){if((a=p.expirationTime)<r){var m={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===f?(d=f=m,h=l):f=f.next=m,a>u&&(u=a)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),Tc(a,p.suspenseConfig);e:{var g=e,v=p;switch(a=t,m=n,v.tag){case 1:if("function"===typeof(g=v.payload)){l=g.call(m,l,a);break e}l=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null===(a="function"===typeof(g=v.payload)?g.call(m,l,a):g)||void 0===a)break e;l=i({},l,a);break e;case 2:us=!0}}null!==p.callback&&(e.effectTag|=32,null===(a=s.effects)?s.effects=[p]:a.push(p))}if(null===(p=p.next)||p===c){if(null===(a=s.shared.pending))break;p=o.next=a.next,a.next=c,s.baseQueue=o=a,s.shared.pending=null}}null===f?h=l:f.next=d,s.baseState=h,s.baseQueue=f,Ec(u),e.expirationTime=u,e.memoizedState=l}}function vs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var ys=X.ReactCurrentBatchConfig,ws=(new r.Component).refs;function bs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var _s={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=lc(),i=ys.suspense;(i=fs(r=uc(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),ps(e,i),hc(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=lc(),i=ys.suspense;(i=fs(r=uc(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ps(e,i),hc(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=lc(),r=ys.suspense;(r=fs(n=uc(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),ps(e,r),hc(e,n)}};function Ts(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Wr(n,r)||!Wr(i,s))}function Es(e,t,n){var r=!1,i=gi,s=t.contextType;return"object"===typeof s&&null!==s?s=ls(s):(i=_i(t)?wi:vi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?bi(e,i):gi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=_s,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Is(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_s.enqueueReplaceState(t,t.state,null)}function Ss(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ws,hs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=ls(s):(s=_i(t)?wi:vi.current,i.context=bi(e,s)),gs(e,n,i,r),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(bs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&_s.enqueueReplaceState(i,i.state,null),gs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var ks=Array.isArray;function Cs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ws&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function As(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function xs(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=qc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Kc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Cs(e,t,n),r.return=e,r):((r=Hc(n.type,n.key,n.props,null,e.mode,r)).ref=Cs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Wc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Kc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Hc(t.type,t.key,t.props,null,e.mode,n)).ref=Cs(e,null,t),n.return=e,n;case te:return(t=Gc(t,e.mode,n)).return=e,t}if(ks(t)||me(t))return(t=Wc(t,e.mode,n,null)).return=e,t;As(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?h(e,t,n.props.children,r,i):l(e,t,n,r):null;case te:return n.key===i?u(e,t,n,r):null}if(ks(n)||me(n))return null!==i?null:h(e,t,n,r,null);As(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?h(t,e,r.props.children,i,r.key):l(t,e,r,i);case te:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ks(r)||me(r))return h(t,e=e.get(n)||null,r,i,null);As(t,r)}return null}function m(i,o,a,c){for(var l=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],c);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),o=s(v,o,m),null===u?l=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(o=s(h,o,m),null===u?l=h:u.sibling=h,u=h);return l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),l}function g(i,a,c,l){var u=me(c);if("function"!==typeof u)throw Error(o(150));if(null==(c=u.call(c)))throw Error(o(151));for(var h=u=null,m=a,g=a=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,l);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=s(w,a,g),null===h?u=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),u;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=d(i,y.value,l))&&(a=s(y,a,g),null===h?u=y:h.sibling=y,h=y);return u}for(m=r(i,m);!y.done;g++,y=c.next())null!==(y=p(m,i,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),u}return function(e,r,s,c){var l="object"===typeof s&&null!==s&&s.type===ne&&null===s.key;l&&(s=s.props.children);var u="object"===typeof s&&null!==s;if(u)switch(s.$$typeof){case ee:e:{for(u=s.key,l=r;null!==l;){if(l.key===u){if(7===l.tag){if(s.type===ne){n(e,l.sibling),(r=i(l,s.props.children)).return=e,e=r;break e}}else if(l.elementType===s.type){n(e,l.sibling),(r=i(l,s.props)).ref=Cs(e,l,s),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}s.type===ne?((r=Wc(s.props.children,e.mode,c,s.key)).return=e,e=r):((c=Hc(s.type,s.key,s.props,null,e.mode,c)).ref=Cs(e,r,s),c.return=e,e=c)}return a(e);case te:e:{for(l=s.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Gc(s,e.mode,c)).return=e,e=r}return a(e)}if("string"===typeof s||"number"===typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=Kc(s,e.mode,c)).return=e,e=r),a(e);if(ks(s))return m(e,r,s,c);if(me(s))return g(e,r,s,c);if(u&&As(e,s),"undefined"===typeof s&&!l)switch(e.tag){case 1:case 0:throw e=e.type,Error(o(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Ps=xs(!0),Ns=xs(!1),Rs={},Os={current:Rs},Ds={current:Rs},Ls={current:Rs};function Ms(e){if(e===Rs)throw Error(o(174));return e}function Us(e,t){switch(mi(Ls,t),mi(Ds,e),mi(Os,Rs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ue(null,"");break;default:t=Ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}pi(Os),mi(Os,t)}function Fs(){pi(Os),pi(Ds),pi(Ls)}function Vs(e){Ms(Ls.current);var t=Ms(Os.current),n=Ue(t,e.type);t!==n&&(mi(Ds,e),mi(Os,n))}function js(e){Ds.current===e&&(pi(Os),pi(Ds))}var zs={current:0};function Bs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===wn||n.data===bn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function qs(e,t){return{responder:e,props:t}}var Hs=X.ReactCurrentDispatcher,Ws=X.ReactCurrentBatchConfig,Ks=0,Gs=null,Qs=null,Ys=null,Xs=!1;function Js(){throw Error(o(321))}function $s(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qr(e[n],t[n]))return!1;return!0}function Zs(e,t,n,r,i,s){if(Ks=s,Gs=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Hs.current=null===e||null===e.memoizedState?Eo:Io,e=n(r,i),t.expirationTime===Ks){s=0;do{if(t.expirationTime=0,!(25>s))throw Error(o(301));s+=1,Ys=Qs=null,t.updateQueue=null,Hs.current=So,e=n(r,i)}while(t.expirationTime===Ks)}if(Hs.current=To,t=null!==Qs&&null!==Qs.next,Ks=0,Ys=Qs=Gs=null,Xs=!1,t)throw Error(o(300));return e}function eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ys?Gs.memoizedState=Ys=e:Ys=Ys.next=e,Ys}function to(){if(null===Qs){var e=Gs.alternate;e=null!==e?e.memoizedState:null}else e=Qs.next;var t=null===Ys?Gs.memoizedState:Ys.next;if(null!==t)Ys=t,Qs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Qs=e).memoizedState,baseState:Qs.baseState,baseQueue:Qs.baseQueue,queue:Qs.queue,next:null},null===Ys?Gs.memoizedState=Ys=e:Ys=Ys.next=e}return Ys}function no(e,t){return"function"===typeof t?t(e):t}function ro(e){var t=to(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Qs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var c=a=s=null,l=i;do{var u=l.expirationTime;if(u<Ks){var h={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===c?(a=c=h,s=r):c=c.next=h,u>Gs.expirationTime&&(Gs.expirationTime=u,Ec(u))}else null!==c&&(c=c.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),Tc(u,l.suspenseConfig),r=l.eagerReducer===e?l.eagerState:e(r,l.action);l=l.next}while(null!==l&&l!==i);null===c?s=r:c.next=a,qr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function io(e){var t=to(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);qr(s,t.memoizedState)||(Mo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function so(e){var t=eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:no,lastRenderedState:e}).dispatch=_o.bind(null,Gs,e),[t.memoizedState,e]}function oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Gs.updateQueue)?(t={lastEffect:null},Gs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ao(){return to().memoizedState}function co(e,t,n,r){var i=eo();Gs.effectTag|=e,i.memoizedState=oo(1|t,n,void 0,void 0===r?null:r)}function lo(e,t,n,r){var i=to();r=void 0===r?null:r;var s=void 0;if(null!==Qs){var o=Qs.memoizedState;if(s=o.destroy,null!==r&&$s(r,o.deps))return void oo(t,n,s,r)}Gs.effectTag|=e,i.memoizedState=oo(1|t,n,s,r)}function uo(e,t){return co(516,4,e,t)}function ho(e,t){return lo(516,4,e,t)}function fo(e,t){return lo(4,2,e,t)}function po(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function mo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,lo(4,2,po.bind(null,t,e),n)}function go(){}function vo(e,t){return eo().memoizedState=[e,void 0===t?null:t],e}function yo(e,t){var n=to();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&$s(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function wo(e,t){var n=to();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&$s(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function bo(e,t,n){var r=Ki();Qi(98>r?98:r,(function(){e(!0)})),Qi(97<r?97:r,(function(){var r=Ws.suspense;Ws.suspense=void 0===t?null:t;try{e(!1),n()}finally{Ws.suspense=r}}))}function _o(e,t,n){var r=lc(),i=ys.suspense;i={expirationTime:r=uc(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var s=t.pending;if(null===s?i.next=i:(i.next=s.next,s.next=i),t.pending=i,s=e.alternate,e===Gs||null!==s&&s===Gs)Xs=!0,i.expirationTime=Ks,Gs.expirationTime=Ks;else{if(0===e.expirationTime&&(null===s||0===s.expirationTime)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.eagerReducer=s,i.eagerState=a,qr(a,o))return}catch(c){}hc(e,r)}}var To={readContext:ls,useCallback:Js,useContext:Js,useEffect:Js,useImperativeHandle:Js,useLayoutEffect:Js,useMemo:Js,useReducer:Js,useRef:Js,useState:Js,useDebugValue:Js,useResponder:Js,useDeferredValue:Js,useTransition:Js},Eo={readContext:ls,useCallback:vo,useContext:ls,useEffect:uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,co(4,2,po.bind(null,t,e),n)},useLayoutEffect:function(e,t){return co(4,2,e,t)},useMemo:function(e,t){var n=eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=_o.bind(null,Gs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},eo().memoizedState=e},useState:so,useDebugValue:go,useResponder:qs,useDeferredValue:function(e,t){var n=so(e),r=n[0],i=n[1];return uo((function(){var n=Ws.suspense;Ws.suspense=void 0===t?null:t;try{i(e)}finally{Ws.suspense=n}}),[e,t]),r},useTransition:function(e){var t=so(!1),n=t[0];return t=t[1],[vo(bo.bind(null,t,e),[t,e]),n]}},Io={readContext:ls,useCallback:yo,useContext:ls,useEffect:ho,useImperativeHandle:mo,useLayoutEffect:fo,useMemo:wo,useReducer:ro,useRef:ao,useState:function(){return ro(no)},useDebugValue:go,useResponder:qs,useDeferredValue:function(e,t){var n=ro(no),r=n[0],i=n[1];return ho((function(){var n=Ws.suspense;Ws.suspense=void 0===t?null:t;try{i(e)}finally{Ws.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ro(no),n=t[0];return t=t[1],[yo(bo.bind(null,t,e),[t,e]),n]}},So={readContext:ls,useCallback:yo,useContext:ls,useEffect:ho,useImperativeHandle:mo,useLayoutEffect:fo,useMemo:wo,useReducer:io,useRef:ao,useState:function(){return io(no)},useDebugValue:go,useResponder:qs,useDeferredValue:function(e,t){var n=io(no),r=n[0],i=n[1];return ho((function(){var n=Ws.suspense;Ws.suspense=void 0===t?null:t;try{i(e)}finally{Ws.suspense=n}}),[e,t]),r},useTransition:function(e){var t=io(no),n=t[0];return t=t[1],[yo(bo.bind(null,t,e),[t,e]),n]}},ko=null,Co=null,Ao=!1;function xo(e,t){var n=zc(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Po(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function No(e){if(Ao){var t=Co;if(t){var n=t;if(!Po(e,t)){if(!(t=Cn(n.nextSibling))||!Po(e,t))return e.effectTag=-1025&e.effectTag|2,Ao=!1,void(ko=e);xo(ko,n)}ko=e,Co=Cn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Ao=!1,ko=e}}function Ro(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ko=e}function Oo(e){if(e!==ko)return!1;if(!Ao)return Ro(e),Ao=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!In(t,e.memoizedProps))for(t=Co;t;)xo(e,t),t=Cn(t.nextSibling);if(Ro(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===yn){if(0===t){Co=Cn(e.nextSibling);break e}t--}else n!==vn&&n!==bn&&n!==wn||t++}e=e.nextSibling}Co=null}}else Co=ko?Cn(e.stateNode.nextSibling):null;return!0}function Do(){Co=ko=null,Ao=!1}var Lo=X.ReactCurrentOwner,Mo=!1;function Uo(e,t,n,r){t.child=null===e?Ns(t,null,n,r):Ps(t,e.child,n,r)}function Fo(e,t,n,r,i){n=n.render;var s=t.ref;return cs(t,i),r=Zs(e,t,n,r,s,i),null===e||Mo?(t.effectTag|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ta(e,t,i))}function Vo(e,t,n,r,i,s){if(null===e){var o=n.type;return"function"!==typeof o||Bc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hc(n.type,null,r,null,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,jo(e,t,o,r,i,s))}return o=e.child,i<s&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:Wr)(i,r)&&e.ref===t.ref)?ta(e,t,s):(t.effectTag|=1,(e=qc(o,r)).ref=t.ref,e.return=t,t.child=e)}function jo(e,t,n,r,i,s){return null!==e&&Wr(e.memoizedProps,r)&&e.ref===t.ref&&(Mo=!1,i<s)?(t.expirationTime=e.expirationTime,ta(e,t,s)):Bo(e,t,n,r,s)}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Bo(e,t,n,r,i){var s=_i(n)?wi:vi.current;return s=bi(t,s),cs(t,i),n=Zs(e,t,n,r,s,i),null===e||Mo?(t.effectTag|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ta(e,t,i))}function qo(e,t,n,r,i){if(_i(n)){var s=!0;Si(t)}else s=!1;if(cs(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Es(t,n,r),Ss(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=ls(l):l=bi(t,l=_i(n)?wi:vi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==l)&&Is(t,o,r,l),us=!1;var d=t.memoizedState;o.state=d,gs(t,r,o,i),c=t.memoizedState,a!==r||d!==c||yi.current||us?("function"===typeof u&&(bs(t,n,u,r),c=t.memoizedState),(a=us||Ts(t,n,a,r,d,c,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.effectTag|=4)):("function"===typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):("function"===typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,ds(e,t),a=t.memoizedProps,o.props=t.type===t.elementType?a:es(t.type,a),c=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=ls(l):l=bi(t,l=_i(n)?wi:vi.current),(h="function"===typeof(u=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==l)&&Is(t,o,r,l),us=!1,c=t.memoizedState,o.state=c,gs(t,r,o,i),d=t.memoizedState,a!==r||c!==d||yi.current||us?("function"===typeof u&&(bs(t,n,u,r),d=t.memoizedState),(u=us||Ts(t,n,a,r,c,d,l))?(h||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,d,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,d,l)),"function"===typeof o.componentDidUpdate&&(t.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),o.props=r,o.state=d,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),r=!1);return Ho(e,t,n,r,s,i)}function Ho(e,t,n,r,i,s){zo(e,t);var o=0!==(64&t.effectTag);if(!r&&!o)return i&&ki(t,n,!1),ta(e,t,s);r=t.stateNode,Lo.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=Ps(t,e.child,null,s),t.child=Ps(t,null,a,s)):Uo(e,t,a,s),t.memoizedState=r.state,i&&ki(t,n,!0),t.child}function Wo(e){var t=e.stateNode;t.pendingContext?Ei(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ei(0,t.context,!1),Us(e,t.containerInfo)}var Ko,Go,Qo,Yo,Xo={dehydrated:null,retryTime:0};function Jo(e,t,n){var r,i=t.mode,s=t.pendingProps,o=zs.current,a=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&o)&&(null===e||null!==e.memoizedState)),r?(a=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===s.fallback||!0===s.unstable_avoidThisFallback||(o|=1),mi(zs,1&o),null===e){if(void 0!==s.fallback&&No(t),a){if(a=s.fallback,(s=Wc(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,s.child=e;null!==e;)e.return=s,e=e.sibling;return(n=Wc(a,i,n,null)).return=t,s.sibling=n,t.memoizedState=Xo,t.child=s,n}return i=s.children,t.memoizedState=null,t.child=Ns(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,a){if(s=s.fallback,(n=qc(e,e.pendingProps)).return=t,0===(2&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(i=qc(i,s)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Xo,t.child=n,i}return n=Ps(t,e.child,s.children,n),t.memoizedState=null,t.child=n}if(e=e.child,a){if(a=s.fallback,(s=Wc(null,i,0,null)).return=t,s.child=e,null!==e&&(e.return=s),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,s.child=e;null!==e;)e.return=s,e=e.sibling;return(n=Wc(a,i,n,null)).return=t,s.sibling=n,n.effectTag|=2,s.childExpirationTime=0,t.memoizedState=Xo,t.child=s,n}return t.memoizedState=null,t.child=Ps(t,e,s.children,n)}function $o(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),as(e.return,t)}function Zo(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i,o.lastEffect=s)}function ea(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=zs.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$o(e,n);else if(19===e.tag)$o(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mi(zs,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Bs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Zo(t,!1,i,n,s,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Bs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Zo(t,!0,n,null,s,t.lastEffect);break;case"together":Zo(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ta(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&Ec(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=qc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=qc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function na(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ra(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return _i(t.type)&&Ti(),null;case 3:return Fs(),pi(yi),pi(vi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Oo(t)||(t.effectTag|=4),Go(t),null;case 5:js(t),n=Ms(Ls.current);var s=t.type;if(null!==e&&null!=t.stateNode)Qo(e,t,s,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ms(Os.current),Oo(t)){r=t.stateNode,s=t.type;var a=t.memoizedProps;switch(r[Pn]=t,r[Nn]=a,s){case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(e=0;e<Je.length;e++)Qt(Je[e],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"form":Qt("reset",r),Qt("submit",r);break;case"details":Qt("toggle",r);break;case"input":Ee(r,a),Qt("invalid",r),ln(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Qt("invalid",r),ln(n,"onChange");break;case"textarea":Ne(r,a),Qt("invalid",r),ln(n,"onChange")}for(var c in on(s,a),e=null,a)if(a.hasOwnProperty(c)){var l=a[c];"children"===c?"string"===typeof l?r.textContent!==l&&(e=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(e=["children",""+l]):I.hasOwnProperty(c)&&null!=l&&ln(n,c)}switch(s){case"input":be(r),ke(r,a,!0);break;case"textarea":be(r),Oe(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=un)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(c=9===n.nodeType?n:n.ownerDocument,e===cn&&(e=Me(s)),e===cn?"script"===s?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(s,{is:r.is}):(e=c.createElement(s),"select"===s&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,s),e[Pn]=t,e[Nn]=r,Ko(e,t,!1,!1),t.stateNode=e,c=an(s,r),s){case"iframe":case"object":case"embed":Qt("load",e),l=r;break;case"video":case"audio":for(l=0;l<Je.length;l++)Qt(Je[l],e);l=r;break;case"source":Qt("error",e),l=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),l=r;break;case"form":Qt("reset",e),Qt("submit",e),l=r;break;case"details":Qt("toggle",e),l=r;break;case"input":Ee(e,r),l=Te(e,r),Qt("invalid",e),ln(n,"onChange");break;case"option":l=Ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=i({},r,{value:void 0}),Qt("invalid",e),ln(n,"onChange");break;case"textarea":Ne(e,r),l=Pe(e,r),Qt("invalid",e),ln(n,"onChange");break;default:l=r}on(s,l);var u=l;for(a in u)if(u.hasOwnProperty(a)){var h=u[a];"style"===a?rn(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&je(e,h):"children"===a?"string"===typeof h?("textarea"!==s||""!==h)&&ze(e,h):"number"===typeof h&&ze(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(I.hasOwnProperty(a)?null!=h&&ln(n,a):null!=h&&J(e,a,h,c))}switch(s){case"input":be(e),ke(e,r,!1);break;case"textarea":be(e),Oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ye(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?xe(e,!!r.multiple,n,!1):null!=r.defaultValue&&xe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof l.onClick&&(e.onclick=un)}En(s,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ms(Ls.current),Ms(Os.current),Oo(t)?(n=t.stateNode,r=t.memoizedProps,n[Pn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Pn]=t,t.stateNode=n)}return null;case 13:return pi(zs),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Oo(t):(r=null!==(s=e.memoizedState),n||null===s||null!==(s=e.child.sibling)&&(null!==(a=t.firstEffect)?(t.firstEffect=s,s.nextEffect=a):(t.firstEffect=t.lastEffect=s,s.nextEffect=null),s.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&zs.current)?qa===Oa&&(qa=Ma):(qa!==Oa&&qa!==Ma||(qa=Ua),0!==Qa&&null!==ja&&(Xc(ja,Ba),Jc(ja,Qa)))),(n||r)&&(t.effectTag|=4),null);case 4:return Fs(),Go(t),null;case 10:return os(t),null;case 19:if(pi(zs),null===(r=t.memoizedState))return null;if(s=0!==(64&t.effectTag),null===(a=r.rendering)){if(s)na(r,!1);else if(qa!==Oa||null!==e&&0!==(64&e.effectTag))for(a=t.child;null!==a;){if(null!==(e=Bs(a))){for(t.effectTag|=64,na(r,!1),null!==(s=e.updateQueue)&&(t.updateQueue=s,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)a=n,(s=r).effectTag&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(e=s.alternate)?(s.childExpirationTime=0,s.expirationTime=a,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null):(s.childExpirationTime=e.childExpirationTime,s.expirationTime=e.expirationTime,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,a=e.dependencies,s.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),r=r.sibling;return mi(zs,1&zs.current|2),t.child}a=a.sibling}}else{if(!s)if(null!==(e=Bs(a))){if(t.effectTag|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),na(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Wi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,s=!0,na(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Wi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Wi(),n.sibling=null,t=zs.current,mi(zs,s?1&t|2:1&t),n):null}throw Error(o(156,t.tag))}function ia(e){switch(e.tag){case 1:_i(e.type)&&Ti();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Fs(),pi(yi),pi(vi),0!==(64&(t=e.effectTag)))throw Error(o(285));return e.effectTag=-4097&t|64,e;case 5:return js(e),null;case 13:return pi(zs),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return pi(zs),null;case 4:return Fs(),null;case 10:return os(e),null;default:return null}}function sa(e,t){return{value:e,source:t,stack:ve(t)}}Ko=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Go=function(){},Qo=function(e,t,n,r,s){var o=e.memoizedProps;if(o!==r){var a,c,l=t.stateNode;switch(Ms(Os.current),e=null,n){case"input":o=Te(l,o),r=Te(l,r),e=[];break;case"option":o=Ae(l,o),r=Ae(l,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=Pe(l,o),r=Pe(l,r),e=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(l.onclick=un)}for(a in on(n,r),n=null,o)if(!r.hasOwnProperty(a)&&o.hasOwnProperty(a)&&null!=o[a])if("style"===a)for(c in l=o[a])l.hasOwnProperty(c)&&(n||(n={}),n[c]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(I.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in r){var u=r[a];if(l=null!=o?o[a]:void 0,r.hasOwnProperty(a)&&u!==l&&(null!=u||null!=l))if("style"===a)if(l){for(c in l)!l.hasOwnProperty(c)||u&&u.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in u)u.hasOwnProperty(c)&&l[c]!==u[c]&&(n||(n={}),n[c]=u[c])}else n||(e||(e=[]),e.push(a,n)),n=u;else"dangerouslySetInnerHTML"===a?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(e=e||[]).push(a,u)):"children"===a?l===u||"string"!==typeof u&&"number"!==typeof u||(e=e||[]).push(a,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(I.hasOwnProperty(a)?(null!=u&&ln(s,a),e||l===u||(e=[])):(e=e||[]).push(a,u))}n&&(e=e||[]).push("style",n),s=e,(t.updateQueue=s)&&(t.effectTag|=4)}},Yo=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var oa="function"===typeof WeakSet?WeakSet:Set;function aa(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ve(n)),null!==n&&ge(n.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function ca(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Lc(e,n)}else t.current=null}function la(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:es(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(o(163))}function ua(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function ha(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function da(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ha(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:es(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&vs(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}vs(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&En(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ut(n)))))}throw Error(o(163))}function fa(e,t,n){switch("function"===typeof Vc&&Vc(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Qi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(s){Lc(i,s)}}e=e.next}while(e!==r)}))}break;case 1:ca(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Lc(e,n)}}(t,n);break;case 5:ca(t);break;case 4:wa(e,t,n)}}function pa(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&pa(t)}function ma(e){return 5===e.tag||3===e.tag||4===e.tag}function ga(e){e:{for(var t=e.return;null!==t;){if(ma(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.effectTag&&(ze(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ma(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?va(e,n,t):ya(e,n,t)}function va(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=un));else if(4!==r&&null!==(e=e.child))for(va(e,t,n),e=e.sibling;null!==e;)va(e,t,n),e=e.sibling}function ya(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ya(e,t,n),e=e.sibling;null!==e;)ya(e,t,n),e=e.sibling}function wa(e,t,n){for(var r,i,s=t,a=!1;;){if(!a){a=s.return;e:for(;;){if(null===a)throw Error(o(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===s.tag||6===s.tag){e:for(var c=e,l=s,u=n,h=l;;)if(fa(c,h,u),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===l)break e;for(;null===h.sibling;){if(null===h.return||h.return===l)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(c=r,l=s.stateNode,8===c.nodeType?c.parentNode.removeChild(l):c.removeChild(l)):r.removeChild(s.stateNode)}else if(4===s.tag){if(null!==s.child){r=s.stateNode.containerInfo,i=!0,s.child.return=s,s=s.child;continue}}else if(fa(e,s,n),null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;4===(s=s.return).tag&&(a=!1)}s.sibling.return=s.return,s=s.sibling}}function ba(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ua(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[Nn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ie(n,r),an(e,i),t=an(e,r),i=0;i<s.length;i+=2){var a=s[i],c=s[i+1];"style"===a?rn(n,c):"dangerouslySetInnerHTML"===a?je(n,c):"children"===a?ze(n,c):J(n,a,c,t)}switch(e){case"input":Se(n,r);break;case"textarea":Re(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?xe(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?xe(n,!!r.multiple,r.defaultValue,!0):xe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Ut(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Xa=Wi()),null!==n)e:for(e=n;;){if(5===e.tag)s=e.stateNode,r?"function"===typeof(s=s.style).setProperty?s.setProperty("display","none","important"):s.display="none":(s=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,s.style.display=nn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(s=e.child.sibling).return=e,e=s;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void _a(t);case 19:return void _a(t)}throw Error(o(163))}function _a(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new oa),t.forEach((function(t){var r=Uc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var Ta="function"===typeof WeakMap?WeakMap:Map;function Ea(e,t,n){(n=fs(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Za||(Za=!0,ec=r),aa(e,t)},n}function Ia(e,t,n){(n=fs(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return aa(e,t),r(i)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===tc?tc=new Set([this]):tc.add(this),aa(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Sa,ka=Math.ceil,Ca=X.ReactCurrentDispatcher,Aa=X.ReactCurrentOwner,xa=0,Pa=8,Na=16,Ra=32,Oa=0,Da=1,La=2,Ma=3,Ua=4,Fa=5,Va=xa,ja=null,za=null,Ba=0,qa=Oa,Ha=null,Wa=1073741823,Ka=1073741823,Ga=null,Qa=0,Ya=!1,Xa=0,Ja=500,$a=null,Za=!1,ec=null,tc=null,nc=!1,rc=null,ic=90,sc=null,oc=0,ac=null,cc=0;function lc(){return(Va&(Na|Ra))!==xa?1073741821-(Wi()/10|0):0!==cc?cc:cc=1073741821-(Wi()/10|0)}function uc(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Ki();if(0===(4&t))return 99===r?1073741823:1073741822;if((Va&Na)!==xa)return Ba;if(null!==n)e=Zi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Zi(e,150,100);break;case 97:case 96:e=Zi(e,5e3,250);break;case 95:e=2;break;default:throw Error(o(326))}return null!==ja&&e===Ba&&--e,e}function hc(e,t){if(50<oc)throw oc=0,ac=null,Error(o(185));if(null!==(e=dc(e,t))){var n=Ki();1073741823===t?(Va&Pa)!==xa&&(Va&(Na|Ra))===xa?gc(e):(pc(e),Va===xa&&Ji()):pc(e),(4&Va)===xa||98!==n&&99!==n||(null===sc?sc=new Map([[e,t]]):(void 0===(n=sc.get(e))||n>t)&&sc.set(e,t))}}function dc(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(ja===i&&(Ec(t),qa===Ua&&Xc(i,Ba)),Jc(i,t)),i}function fc(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Yc(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function pc(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Xi(gc.bind(null,e));else{var t=fc(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=lc();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Fi&&xi(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Xi(gc.bind(null,e)):Yi(r,mc.bind(null,e),{timeout:10*(1073741821-t)-Wi()}),e.callbackNode=t}}}function mc(e,t){if(cc=0,t)return $c(e,t=lc()),pc(e),null;var n=fc(e);if(0!==n){if(t=e.callbackNode,(Va&(Na|Ra))!==xa)throw Error(o(327));if(Rc(),e===ja&&n===Ba||wc(e,n),null!==za){var r=Va;Va|=Na;for(var i=_c();;)try{Sc();break}catch(c){bc(e,c)}if(ss(),Va=r,Ca.current=i,qa===Da)throw t=Ha,wc(e,n),Xc(e,n),pc(e),t;if(null===za)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=qa,ja=null,r){case Oa:case Da:throw Error(o(345));case La:$c(e,2<n?2:n);break;case Ma:if(Xc(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Ac(i)),1073741823===Wa&&10<(i=Xa+Ja-Wi())){if(Ya){var s=e.lastPingedTime;if(0===s||s>=n){e.lastPingedTime=n,wc(e,n);break}}if(0!==(s=fc(e))&&s!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=Sn(xc.bind(null,e),i);break}xc(e);break;case Ua:if(Xc(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Ac(i)),Ya&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,wc(e,n);break}if(0!==(i=fc(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Ka?r=10*(1073741821-Ka)-Wi():1073741823===Wa?r=0:(r=10*(1073741821-Wa)-5e3,0>(r=(i=Wi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ka(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=Sn(xc.bind(null,e),r);break}xc(e);break;case Fa:if(1073741823!==Wa&&null!==Ga){s=Wa;var a=Ga;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(s=Wi()-(10*(1073741821-s)-(0|a.timeoutMs||5e3)))<=i?0:i+r-s),10<r){Xc(e,n),e.timeoutHandle=Sn(xc.bind(null,e),r);break}}xc(e);break;default:throw Error(o(329))}if(pc(e),e.callbackNode===t)return mc.bind(null,e)}}return null}function gc(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(Va&(Na|Ra))!==xa)throw Error(o(327));if(Rc(),e===ja&&t===Ba||wc(e,t),null!==za){var n=Va;Va|=Na;for(var r=_c();;)try{Ic();break}catch(i){bc(e,i)}if(ss(),Va=n,Ca.current=r,qa===Da)throw n=Ha,wc(e,t),Xc(e,t),pc(e),n;if(null!==za)throw Error(o(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,ja=null,xc(e),pc(e)}return null}function vc(e,t){var n=Va;Va|=1;try{return e(t)}finally{(Va=n)===xa&&Ji()}}function yc(e,t){var n=Va;Va&=-2,Va|=Pa;try{return e(t)}finally{(Va=n)===xa&&Ji()}}function wc(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,kn(n)),null!==za)for(n=za.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ti();break;case 3:Fs(),pi(yi),pi(vi);break;case 5:js(r);break;case 4:Fs();break;case 13:case 19:pi(zs);break;case 10:os(r)}n=n.return}ja=e,za=qc(e.current,null),Ba=t,qa=Oa,Ha=null,Ka=Wa=1073741823,Ga=null,Qa=0,Ya=!1}function bc(e,t){for(;;){try{if(ss(),Hs.current=To,Xs)for(var n=Gs.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Ks=0,Ys=Qs=Gs=null,Xs=!1,null===za||null===za.return)return qa=Da,Ha=t,za=null;e:{var i=e,s=za.return,o=za,a=t;if(t=Ba,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==a&&"object"===typeof a&&"function"===typeof a.then){var c=a;if(0===(2&o.mode)){var l=o.alternate;l?(o.updateQueue=l.updateQueue,o.memoizedState=l.memoizedState,o.expirationTime=l.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var u=0!==(1&zs.current),h=s;do{var d;if(d=13===h.tag){var f=h.memoizedState;if(null!==f)d=null!==f.dehydrated;else{var p=h.memoizedProps;d=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!u)}}if(d){var m=h.updateQueue;if(null===m){var g=new Set;g.add(c),h.updateQueue=g}else m.add(c);if(0===(2&h.mode)){if(h.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var v=fs(1073741823,null);v.tag=2,ps(o,v)}o.expirationTime=1073741823;break e}a=void 0,o=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new Ta,a=new Set,y.set(c,a)):void 0===(a=y.get(c))&&(a=new Set,y.set(c,a)),!a.has(o)){a.add(o);var w=Mc.bind(null,i,c,o);c.then(w,w)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);a=Error((ge(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ve(o))}qa!==Fa&&(qa=La),a=sa(a,o),h=s;do{switch(h.tag){case 3:c=a,h.effectTag|=4096,h.expirationTime=t,ms(h,Ea(h,c,t));break e;case 1:c=a;var b=h.type,_=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof b.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===tc||!tc.has(_)))){h.effectTag|=4096,h.expirationTime=t,ms(h,Ia(h,c,t));break e}}h=h.return}while(null!==h)}za=Cc(za)}catch(T){t=T;continue}break}}function _c(){var e=Ca.current;return Ca.current=To,null===e?To:e}function Tc(e,t){e<Wa&&2<e&&(Wa=e),null!==t&&e<Ka&&2<e&&(Ka=e,Ga=t)}function Ec(e){e>Qa&&(Qa=e)}function Ic(){for(;null!==za;)za=kc(za)}function Sc(){for(;null!==za&&!Vi();)za=kc(za)}function kc(e){var t=Sa(e.alternate,e,Ba);return e.memoizedProps=e.pendingProps,null===t&&(t=Cc(e)),Aa.current=null,t}function Cc(e){za=e;do{var t=za.alternate;if(e=za.return,0===(2048&za.effectTag)){if(t=ra(t,za,Ba),1===Ba||1!==za.childExpirationTime){for(var n=0,r=za.child;null!==r;){var i=r.expirationTime,s=r.childExpirationTime;i>n&&(n=i),s>n&&(n=s),r=r.sibling}za.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=za.firstEffect),null!==za.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=za.firstEffect),e.lastEffect=za.lastEffect),1<za.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=za:e.firstEffect=za,e.lastEffect=za))}else{if(null!==(t=ia(za)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=za.sibling))return t;za=e}while(null!==za);return qa===Oa&&(qa=Fa),null}function Ac(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function xc(e){var t=Ki();return Qi(99,Pc.bind(null,e,t)),null}function Pc(e,t){do{Rc()}while(null!==rc);if((Va&(Na|Ra))!==xa)throw Error(o(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Ac(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===ja&&(za=ja=null,Ba=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var s=Va;Va|=Ra,Aa.current=null,_n=Gt;var a=mn();if(gn(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{var l=(c=(c=a.ownerDocument)&&c.defaultView||window).getSelection&&c.getSelection();if(l&&0!==l.rangeCount){c=l.anchorNode;var u=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{c.nodeType,h.nodeType}catch(k){c=null;break e}var d=0,f=-1,p=-1,m=0,g=0,v=a,y=null;t:for(;;){for(var w;v!==c||0!==u&&3!==v.nodeType||(f=d+u),v!==h||0!==l&&3!==v.nodeType||(p=d+l),3===v.nodeType&&(d+=v.nodeValue.length),null!==(w=v.firstChild);)y=v,v=w;for(;;){if(v===a)break t;if(y===c&&++m===u&&(f=d),y===h&&++g===l&&(p=d),null!==(w=v.nextSibling))break;y=(v=y).parentNode}v=w}c=-1===f||-1===p?null:{start:f,end:p}}else c=null}c=c||{start:0,end:0}}else c=null;Tn={activeElementDetached:null,focusedElem:a,selectionRange:c},Gt=!1,$a=i;do{try{Nc()}catch(k){if(null===$a)throw Error(o(330));Lc($a,k),$a=$a.nextEffect}}while(null!==$a);$a=i;do{try{for(a=e,c=t;null!==$a;){var b=$a.effectTag;if(16&b&&ze($a.stateNode,""),128&b){var _=$a.alternate;if(null!==_){var T=_.ref;null!==T&&("function"===typeof T?T(null):T.current=null)}}switch(1038&b){case 2:ga($a),$a.effectTag&=-3;break;case 6:ga($a),$a.effectTag&=-3,ba($a.alternate,$a);break;case 1024:$a.effectTag&=-1025;break;case 1028:$a.effectTag&=-1025,ba($a.alternate,$a);break;case 4:ba($a.alternate,$a);break;case 8:wa(a,u=$a,c),pa(u)}$a=$a.nextEffect}}catch(k){if(null===$a)throw Error(o(330));Lc($a,k),$a=$a.nextEffect}}while(null!==$a);if(T=Tn,_=mn(),b=T.focusedElem,c=T.selectionRange,_!==b&&b&&b.ownerDocument&&pn(b.ownerDocument.documentElement,b)){null!==c&&gn(b)&&(_=c.start,void 0===(T=c.end)&&(T=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(T,b.value.length)):(T=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(T=T.getSelection(),u=b.textContent.length,a=Math.min(c.start,u),c=void 0===c.end?a:Math.min(c.end,u),!T.extend&&a>c&&(u=c,c=a,a=u),u=fn(b,a),h=fn(b,c),u&&h&&(1!==T.rangeCount||T.anchorNode!==u.node||T.anchorOffset!==u.offset||T.focusNode!==h.node||T.focusOffset!==h.offset)&&((_=_.createRange()).setStart(u.node,u.offset),T.removeAllRanges(),a>c?(T.addRange(_),T.extend(h.node,h.offset)):(_.setEnd(h.node,h.offset),T.addRange(_))))),_=[];for(T=b;T=T.parentNode;)1===T.nodeType&&_.push({element:T,left:T.scrollLeft,top:T.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<_.length;b++)(T=_[b]).element.scrollLeft=T.left,T.element.scrollTop=T.top}Gt=!!_n,Tn=_n=null,e.current=n,$a=i;do{try{for(b=e;null!==$a;){var E=$a.effectTag;if(36&E&&da(b,$a.alternate,$a),128&E){_=void 0;var I=$a.ref;if(null!==I){var S=$a.stateNode;$a.tag,_=S,"function"===typeof I?I(_):I.current=_}}$a=$a.nextEffect}}catch(k){if(null===$a)throw Error(o(330));Lc($a,k),$a=$a.nextEffect}}while(null!==$a);$a=null,ji(),Va=s}else e.current=n;if(nc)nc=!1,rc=e,ic=t;else for($a=i;null!==$a;)t=$a.nextEffect,$a.nextEffect=null,$a=t;if(0===(t=e.firstPendingTime)&&(tc=null),1073741823===t?e===ac?oc++:(oc=0,ac=e):oc=0,"function"===typeof Fc&&Fc(n.stateNode,r),pc(e),Za)throw Za=!1,e=ec,ec=null,e;return(Va&Pa)!==xa||Ji(),null}function Nc(){for(;null!==$a;){var e=$a.effectTag;0!==(256&e)&&la($a.alternate,$a),0===(512&e)||nc||(nc=!0,Yi(97,(function(){return Rc(),null}))),$a=$a.nextEffect}}function Rc(){if(90!==ic){var e=97<ic?97:ic;return ic=90,Qi(e,Oc)}}function Oc(){if(null===rc)return!1;var e=rc;if(rc=null,(Va&(Na|Ra))!==xa)throw Error(o(331));var t=Va;for(Va|=Ra,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ua(5,n),ha(5,n)}}catch(r){if(null===e)throw Error(o(330));Lc(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Va=t,Ji(),!0}function Dc(e,t,n){ps(e,t=Ea(e,t=sa(n,t),1073741823)),null!==(e=dc(e,1073741823))&&pc(e)}function Lc(e,t){if(3===e.tag)Dc(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Dc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===tc||!tc.has(r))){ps(n,e=Ia(n,e=sa(t,e),1073741823)),null!==(n=dc(n,1073741823))&&pc(n);break}}n=n.return}}function Mc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),ja===e&&Ba===n?qa===Ua||qa===Ma&&1073741823===Wa&&Wi()-Xa<Ja?wc(e,Ba):Ya=!0:Yc(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,pc(e)))}function Uc(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=uc(t=lc(),e,null)),null!==(e=dc(e,t))&&pc(e)}Sa=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||yi.current)Mo=!0;else{if(r<n){switch(Mo=!1,t.tag){case 3:Wo(t),Do();break;case 5:if(Vs(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:_i(t.type)&&Si(t);break;case 4:Us(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,mi(ts,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Jo(e,t,n):(mi(zs,1&zs.current),null!==(t=ta(e,t,n))?t.sibling:null);mi(zs,1&zs.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return ea(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),mi(zs,zs.current),!r)return null}return ta(e,t,n)}Mo=!1}}else Mo=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=bi(t,vi.current),cs(t,n),i=Zs(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,_i(r)){var s=!0;Si(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,hs(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&bs(t,r,a,e),i.updater=_s,t.stateNode=i,i._reactInternalFiber=t,Ss(t,r,e,n),t=Ho(null,t,r,!0,s,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,s=t.tag=function(e){if("function"===typeof e)return Bc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===ce)return 11;if(e===he)return 14}return 2}(i),e=es(i,e),s){case 0:t=Bo(null,t,i,e,n);break e;case 1:t=qo(null,t,i,e,n);break e;case 11:t=Fo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,es(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Bo(e,t,r,i=t.elementType===r?i:es(r,i),n);case 1:return r=t.type,i=t.pendingProps,qo(e,t,r,i=t.elementType===r?i:es(r,i),n);case 3:if(Wo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ds(e,t),gs(t,r,null,n),(r=t.memoizedState.element)===i)Do(),t=ta(e,t,n);else{if((i=t.stateNode.hydrate)&&(Co=Cn(t.stateNode.containerInfo.firstChild),ko=t,i=Ao=!0),i)for(n=Ns(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Uo(e,t,r,n),Do();t=t.child}return t;case 5:return Vs(t),null===e&&No(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,In(r,i)?a=null:null!==s&&In(r,s)&&(t.effectTag|=16),zo(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Uo(e,t,a,n),t=t.child),t;case 6:return null===e&&No(t),null;case 13:return Jo(e,t,n);case 4:return Us(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ps(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Fo(e,t,r,i=t.elementType===r?i:es(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value;var c=t.type._context;if(mi(ts,c._currentValue),c._currentValue=s,null!==a)if(c=a.value,0===(s=qr(c,s)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(c,s):1073741823))){if(a.children===i.children&&!yi.current){t=ta(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var l=c.dependencies;if(null!==l){a=c.child;for(var u=l.firstContext;null!==u;){if(u.context===r&&0!==(u.observedBits&s)){1===c.tag&&((u=fs(n,null)).tag=2,ps(c,u)),c.expirationTime<n&&(c.expirationTime=n),null!==(u=c.alternate)&&u.expirationTime<n&&(u.expirationTime=n),as(c.return,n),l.expirationTime<n&&(l.expirationTime=n);break}u=u.next}}else a=10===c.tag&&c.type===t.type?null:c.child;if(null!==a)a.return=c;else for(a=c;null!==a;){if(a===t){a=null;break}if(null!==(c=a.sibling)){c.return=a.return,a=c;break}a=a.return}c=a}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,cs(t,n),r=r(i=ls(i,s.unstable_observedBits)),t.effectTag|=1,Uo(e,t,r,n),t.child;case 14:return s=es(i=t.type,t.pendingProps),Vo(e,t,i,s=es(i.type,s),r,n);case 15:return jo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:es(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,_i(r)?(e=!0,Si(t)):e=!1,cs(t,n),Es(t,r,i),Ss(t,r,i,n),Ho(null,t,r,!0,e,n);case 19:return ea(e,t,n)}throw Error(o(156,t.tag))};var Fc=null,Vc=null;function jc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function zc(e,t,n,r){return new jc(e,t,n,r)}function Bc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function qc(e,t){var n=e.alternate;return null===n?((n=zc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Bc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case ne:return Wc(n.children,i,s,t);case ae:a=8,i|=7;break;case re:a=8,i|=1;break;case ie:return(e=zc(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=s,e;case le:return(e=zc(13,n,t,i)).type=le,e.elementType=le,e.expirationTime=s,e;case ue:return(e=zc(19,n,t,i)).elementType=ue,e.expirationTime=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case se:a=10;break e;case oe:a=9;break e;case ce:a=11;break e;case he:a=14;break e;case de:a=16,r=null;break e;case fe:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=zc(a,n,t,i)).elementType=e,t.type=r,t.expirationTime=s,t}function Wc(e,t,n,r){return(e=zc(7,e,r,t)).expirationTime=n,e}function Kc(e,t,n){return(e=zc(6,e,null,t)).expirationTime=n,e}function Gc(e,t,n){return(t=zc(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qc(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Yc(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Xc(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Jc(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function $c(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Zc(e,t,n,r){var i=t.current,s=lc(),a=ys.suspense;s=uc(s,i,a);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(_i(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(o(171))}if(1===n.tag){var l=n.type;if(_i(l)){n=Ii(n,l,c);break e}}n=c}else n=gi;return null===t.context?t.context=n:t.pendingContext=n,(t=fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ps(i,t),hc(i,s),s}function el(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tl(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function nl(e,t){tl(e,t),(e=e.alternate)&&tl(e,t)}function rl(e,t,n){var r=new Qc(e,t,n=null!=n&&!0===n.hydrate),i=zc(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,hs(i),e[Rn]=r.current,n&&0!==t&&function(e,t){var n=Ze(t);Ct.forEach((function(e){mt(e,t,n)})),At.forEach((function(e){mt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function il(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function sl(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"===typeof i){var a=i;i=function(){var e=el(o);a.call(e)}}Zc(t,o,e,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rl(e,0,t?{hydrate:!0}:void 0)}(n,r),o=s._internalRoot,"function"===typeof i){var c=i;i=function(){var e=el(o);c.call(e)}}yc((function(){Zc(t,o,e,i)}))}return el(o)}function ol(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!il(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}rl.prototype.render=function(e){Zc(e,this._internalRoot,null,null)},rl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zc(null,e,null,(function(){t[Rn]=null}))},gt=function(e){if(13===e.tag){var t=Zi(lc(),150,100);hc(e,t),nl(e,t)}},vt=function(e){13===e.tag&&(hc(e,3),nl(e,3))},yt=function(e){if(13===e.tag){var t=lc();hc(e,t=uc(t,e,null)),nl(e,t)}},A=function(e,t,n){switch(t){case"input":if(Se(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Mn(r);if(!i)throw Error(o(90));_e(r),Se(r,i)}}}break;case"textarea":Re(e,n);break;case"select":null!=(t=n.value)&&xe(e,!!n.multiple,t,!1)}},D=vc,L=function(e,t,n,r,i){var s=Va;Va|=4;try{return Qi(98,e.bind(null,t,n,r,i))}finally{(Va=s)===xa&&Ji()}},M=function(){(Va&(1|Na|Ra))===xa&&(function(){if(null!==sc){var e=sc;sc=null,e.forEach((function(e,t){$c(t,e),pc(t)})),Ji()}}(),Rc())},U=function(e,t){var n=Va;Va|=2;try{return e(t)}finally{(Va=n)===xa&&Ji()}};var al={Events:[Dn,Ln,Mn,k,E,qn,function(e){st(e,Bn)},R,O,$t,ct,Rc,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Fc=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Vc=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:On,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=al,t.createPortal=ol,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if((Va&(Na|Ra))!==xa)throw Error(o(187));var n=Va;Va|=1;try{return Qi(99,e.bind(null,t))}finally{Va=n,Ji()}},t.hydrate=function(e,t,n){if(!il(t))throw Error(o(200));return sl(null,e,t,!0,n)},t.render=function(e,t,n){if(!il(t))throw Error(o(200));return sl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!il(e))throw Error(o(40));return!!e._reactRootContainer&&(yc((function(){sl(null,null,e,!1,(function(){e._reactRootContainer=null,e[Rn]=null}))})),!0)},t.unstable_batchedUpdates=vc,t.unstable_createPortal=function(e,t){return ol(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!il(n))throw Error(o(200));if(null==e||void 0===e._reactInternalFiber)throw Error(o(38));return sl(e,t,n,!1,r)},t.version="16.13.1"},164:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},117:(e,t,n)=>{var r=n(725),i="function"===typeof Symbol&&Symbol.for,s=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,c=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,u=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function v(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function b(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||y}function _(){}function T(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||y}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(v(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=b.prototype;var E=T.prototype=new _;E.constructor=T,r(E,b.prototype),E.isPureReactComponent=!0;var I={current:null},S=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,r)&&!k.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===i[r]&&(i[r]=c[r]);return{$$typeof:s,type:e,key:o,ref:a,props:i,_owner:I.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var x=/\/+/g,P=[];function N(e,t,n,r){if(P.length){var i=P.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>P.length&&P.push(e)}function O(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var a=!1;if(null===e)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case s:case o:a=!0}}if(a)return n(r,e,""===t?"."+L(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=t+L(i=e[c],c);a+=O(i,l,n,r)}else if(null===e||"object"!==typeof e?l=null:l="function"===typeof(l=g&&e[g]||e["@@iterator"])?l:null,"function"===typeof l)for(e=l.call(e),c=0;!(i=e.next()).done;)a+=O(i=i.value,l=t+L(i,c++),n,r);else if("object"===i)throw n=""+e,Error(v(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function D(e,t,n){return null==e?0:O(e,"",t,n)}function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function M(e,t){e.func.call(e.context,t,e.count++)}function U(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,r,n,(function(e){return e})):null!=e&&(A(e)&&(e=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(x,"$&/")+"/")+n)),r.push(e))}function F(e,t,n,r,i){var s="";null!=n&&(s=(""+n).replace(x,"$&/")+"/"),D(e,U,t=N(t,s,r,i)),R(t)}var V={current:null};function j(){var e=V.current;if(null===e)throw Error(v(321));return e}var z={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:I,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return F(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;D(e,M,t=N(null,null,t,n)),R(t)},count:function(e){return D(e,(function(){return null}),null)},toArray:function(e){var t=[];return F(e,t,null,(function(e){return e})),t},only:function(e){if(!A(e))throw Error(v(143));return e}},t.Component=b,t.Fragment=a,t.Profiler=l,t.PureComponent=T,t.StrictMode=c,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(v(267,e));var i=r({},e.props),o=e.key,a=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,c=I.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)S.call(t,u)&&!k.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:s,type:e.type,key:o,ref:a,props:i,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return j().useCallback(e,t)},t.useContext=function(e,t){return j().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return j().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return j().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return j().useLayoutEffect(e,t)},t.useMemo=function(e,t){return j().useMemo(e,t)},t.useReducer=function(e,t,n){return j().useReducer(e,t,n)},t.useRef=function(e){return j().useRef(e)},t.useState=function(e){return j().useState(e)},t.version="16.13.1"},791:(e,t,n)=>{e.exports=n(117)},813:(e,t)=>{var n,r,i,s,o;if("undefined"===typeof window||"function"!==typeof MessageChannel){var a=null,c=null,l=function(){if(null!==a)try{var e=t.unstable_now();a(!0,e),a=null}catch(n){throw setTimeout(l,0),n}},u=Date.now();t.unstable_now=function(){return Date.now()-u},n=function(e){null!==a?setTimeout(n,0,e):(a=e,setTimeout(l,0))},r=function(e,t){c=setTimeout(e,t)},i=function(){clearTimeout(c)},s=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,d=window.Date,f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)t.unstable_now=function(){return h.now()};else{var g=d.now();t.unstable_now=function(){return d.now()-g}}var v=!1,y=null,w=-1,b=5,_=0;s=function(){return t.unstable_now()>=_},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):b=0<e?Math.floor(1e3/e):5};var T=new MessageChannel,E=T.port2;T.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();_=e+b;try{y(!0,e)?E.postMessage(null):(v=!1,y=null)}catch(n){throw E.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,E.postMessage(null))},r=function(e,n){w=f((function(){e(t.unstable_now())}),n)},i=function(){p(w),w=-1}}function I(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<C(i,t)))break e;e[r]=t,e[n]=i,n=r}}function S(e){return void 0===(e=e[0])?null:e}function k(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var s=2*(r+1)-1,o=e[s],a=s+1,c=e[a];if(void 0!==o&&0>C(o,n))void 0!==c&&0>C(c,o)?(e[r]=c,e[a]=n,r=a):(e[r]=o,e[s]=n,r=s);else{if(!(void 0!==c&&0>C(c,n)))break e;e[r]=c,e[a]=n,r=a}}}return t}return null}function C(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],x=[],P=1,N=null,R=3,O=!1,D=!1,L=!1;function M(e){for(var t=S(x);null!==t;){if(null===t.callback)k(x);else{if(!(t.startTime<=e))break;k(x),t.sortIndex=t.expirationTime,I(A,t)}t=S(x)}}function U(e){if(L=!1,M(e),!D)if(null!==S(A))D=!0,n(F);else{var t=S(x);null!==t&&r(U,t.startTime-e)}}function F(e,n){D=!1,L&&(L=!1,i()),O=!0;var o=R;try{for(M(n),N=S(A);null!==N&&(!(N.expirationTime>n)||e&&!s());){var a=N.callback;if(null!==a){N.callback=null,R=N.priorityLevel;var c=a(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof c?N.callback=c:N===S(A)&&k(A),M(n)}else k(A);N=S(A)}if(null!==N)var l=!0;else{var u=S(x);null!==u&&r(U,u.startTime-n),l=!1}return l}finally{N=null,R=o,O=!1}}function V(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var j=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||O||(D=!0,n(F))},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return S(A)},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=j,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();if("object"===typeof o&&null!==o){var c=o.delay;c="number"===typeof c&&0<c?a+c:a,o="number"===typeof o.timeout?o.timeout:V(e)}else o=V(e),c=a;return e={id:P++,callback:s,priorityLevel:e,startTime:c,expirationTime:o=c+o,sortIndex:-1},c>a?(e.sortIndex=c,I(x,e),null===S(A)&&e===S(x)&&(L?i():L=!0,r(U,c-a))):(e.sortIndex=o,I(A,e),D||O||(D=!0,n(F))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();M(e);var n=S(A);return n!==N&&null!==N&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<N.expirationTime||s()},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}},296:(e,t,n)=>{e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={};n.r(e),n.d(e,{FirebaseError:()=>k,SDK_VERSION:()=>xe,_DEFAULT_ENTRY_NAME:()=>ve,_addComponent:()=>_e,_addOrOverwriteComponent:()=>Te,_apps:()=>we,_clearComponents:()=>ke,_components:()=>be,_getProvider:()=>Ie,_registerComponent:()=>Ee,_removeServiceInstance:()=>Se,deleteApp:()=>Oe,getApp:()=>Ne,getApps:()=>Re,initializeApp:()=>Pe,onLog:()=>Le,registerVersion:()=>De,setLogLevel:()=>Me});var t=n(791),r=n(164);const i=()=>t.createElement("div",{className:"title"},t.createElement("h1",null,"MediaGallery"),t.createElement("h2",null,"Your Pictures"),t.createElement("p",null,"your personalized Media Gallery")),s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const c=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==c)throw new a;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==c){const e=o<<6&192|c;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c=function(e){return function(e){const t=s(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},l=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=u(e[n],t[n]));return e}const h=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,d=()=>{try{return h()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/mediagallery",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&l(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},f=e=>{const t=(e=>{var t,n;return null===(n=null===(t=d())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},p=()=>{var e;return null===(e=d())||void 0===e?void 0:e.config},m=e=>{var t;return null===(t=d())||void 0===t?void 0:t["_".concat(e)]};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function v(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(s)),""].join(".")}function y(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function w(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())}function b(){var e;const t=null===(e=d())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function _(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function T(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function E(){const e=y();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function I(){return!b()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S(){try{return"object"===typeof indexedDB}catch(e){return!1}}class k extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,k.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,C.prototype.create)}}class C{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(A,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new k(n,s,t)}}const A=/\{\$([^}]+)}/g;function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function P(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(N(n)&&N(s)){if(!P(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function N(e){return null!==e&&"object"===typeof e}function R(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function O(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function D(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function L(e,t){const n=new M(e,t);return n.subscribe.bind(n)}class M{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function U(){}function F(e){return e&&e._delegate?e._delegate:e}class V{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const j="[DEFAULT]";class z{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new g;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:j})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===j?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;return this.component?this.component.multipleInstances?e:j:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class B{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new z(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const q=[];var H;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(H||(H={}));const W={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},K=H.INFO,G={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},Q=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=G[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Y{constructor(e){this.name=e,this._logLevel=K,this._logHandler=Q,this._userLogHandler=null,q.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in H))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?W[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...t),this._logHandler(this,H.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...t),this._logHandler(this,H.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,H.INFO,...t),this._logHandler(this,H.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,H.WARN,...t),this._logHandler(this,H.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,H.ERROR,...t),this._logHandler(this,H.ERROR,...t)}}const X=(e,t)=>t.some((t=>e instanceof t));let J,$;const Z=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakMap;let ie={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ee.get(e);if("objectStoreNames"===t)return e.objectStoreNames||te.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ae(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function se(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?($||($=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ce(this),n),ae(Z.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ae(e.apply(ce(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ce(this),t,...r);return te.set(s,t.sort?t.sort():[t]),ae(s)}}function oe(e){return"function"===typeof e?se(e):(e instanceof IDBTransaction&&function(e){if(ee.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));ee.set(e,t)}(e),X(e,J||(J=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ie):e)}function ae(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ae(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Z.set(t,e)})).catch((()=>{})),re.set(t,e),t}(e);if(ne.has(e))return ne.get(e);const t=oe(e);return t!==e&&(ne.set(e,t),re.set(t,e)),t}const ce=e=>re.get(e);const le=["get","getKey","getAll","getAllKeys","count"],ue=["put","add","delete","clear"],he=new Map;function de(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(he.get(t))return he.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ue.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!le.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return he.set(t,s),s}ie=(e=>({...e,get:(t,n,r)=>de(t,n)||e.get(t,n,r),has:(t,n)=>!!de(t,n)||e.has(t,n)}))(ie);class fe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const pe="@firebase/app",me="0.9.26",ge=new Y("@firebase/app"),ve="[DEFAULT]",ye={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},we=new Map,be=new Map;function _e(e,t){try{e.container.addComponent(t)}catch(n){ge.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Te(e,t){e.container.addOrOverwriteComponent(t)}function Ee(e){const t=e.name;if(be.has(t))return ge.debug("There were multiple attempts to register component ".concat(t,".")),!1;be.set(t,e);for(const n of we.values())_e(n,e);return!0}function Ie(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Se(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ve;Ie(e,t).clearInstance(n)}function ke(){be.clear()}const Ce=new C("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ae{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new V("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ce.create("app-deleted",{appName:this._name})}}const xe="10.7.2";function Pe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:ve,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ce.create("bad-app-name",{appName:String(i)});if(n||(n=p()),!n)throw Ce.create("no-options");const s=we.get(i);if(s){if(P(n,s.options)&&P(r,s.config))return s;throw Ce.create("duplicate-app",{appName:i})}const o=new B(i);for(const c of be.values())o.addComponent(c);const a=new Ae(n,r,o);return we.set(i,a),a}function Ne(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve;const t=we.get(e);if(!t&&e===ve&&p())return Pe();if(!t)throw Ce.create("no-app",{appName:e});return t}function Re(){return Array.from(we.values())}async function Oe(e){const t=e.name;we.has(t)&&(we.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function De(e,t,n){var r;let i=null!==(r=ye[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ge.warn(e.join(" "))}Ee(new V("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Le(e,t){if(null!==e&&"function"!==typeof e)throw Ce.create("invalid-log-argument");!function(e,t){for(const n of q){let r=null;t&&t.level&&(r=W[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:H[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Me(e){var t;t=e,q.forEach((e=>{e.setLogLevel(t)}))}const Ue="firebase-heartbeat-database",Fe=1,Ve="firebase-heartbeat-store";let je=null;function ze(){return je||(je=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=ae(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(ae(o.result),e.oldVersion,e.newVersion,ae(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Ue,Fe,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ve)}catch(n){console.warn(n)}}}).catch((e=>{throw Ce.create("idb-open",{originalErrorMessage:e.message})}))),je}async function Be(e,t){try{const n=(await ze()).transaction(Ve,"readwrite"),r=n.objectStore(Ve);await r.put(t,qe(e)),await n.done}catch(n){if(n instanceof k)ge.warn(n.message);else{const e=Ce.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ge.warn(e.message)}}}function qe(e){return"".concat(e.name,"!").concat(e.options.appId)}class He{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ke(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=We();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=We(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Ge(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ge(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=c(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function We(){return(new Date).toISOString().substring(0,10)}class Ke{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!S()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await ze();return await t.transaction(Ve).objectStore(Ve).get(qe(e))}catch(t){if(t instanceof k)ge.warn(t.message);else{const e=Ce.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ge.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Be(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Be(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ge(e){return c(JSON.stringify({version:2,heartbeats:e})).length}var Qe;Qe="",Ee(new V("platform-logger",(e=>new fe(e)),"PRIVATE")),Ee(new V("heartbeat",(e=>new He(e)),"PRIVATE")),De(pe,me,Qe),De(pe,me,"esm2017"),De("fire-js","");class Ye{constructor(e,t){this._delegate=e,this.firebase=t,_e(e,new V("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Oe(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){_e(this._delegate,e)}_addOrOverwriteComponent(e){Te(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Xe=new C("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Je=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Pe(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(x(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:De,setLogLevel:Me,onLog:Le,apps:null,SDK_VERSION:xe,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(Ee(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Xe.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&u(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!x(n,e=e||ve))throw Xe.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Ye);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){u(n,e)},createSubscribe:L,ErrorFactory:C,deepExtend:u}),n}(),$e=new Y("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){$e.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&$e.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ze=Je;!function(e){De("@firebase/app-compat","0.2.26",e)}();Ze.registerVersion("firebase","10.7.2","app-compat");const et="firebasestorage.googleapis.com",tt="storageBucket";class nt extends k{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(st(e),"Firebase Storage: ".concat(t," (").concat(st(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,nt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return st(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var rt,it;function st(e){return"storage/"+e}function ot(){return new nt(rt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function at(){return new nt(rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ct(){return new nt(rt.CANCELED,"User canceled the upload/download.")}function lt(){return new nt(rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ut(e){return new nt(rt.INVALID_ARGUMENT,e)}function ht(){return new nt(rt.APP_DELETED,"The Firebase app was deleted.")}function dt(e){return new nt(rt.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ft(e,t){return new nt(rt.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function pt(e){throw new nt(rt.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(rt||(rt={}));class mt{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=mt.makeFromUrl(e,t)}catch(i){return new mt(e,"")}if(""===n.path)return n;throw r=e,new nt(rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===et?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let c=0;c<a.length;c++){const t=a[c],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new mt(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new nt(rt.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class gt{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function vt(e){return"string"===typeof e||e instanceof String}function yt(e){return wt()&&e instanceof Blob}function wt(){return"undefined"!==typeof Blob}function bt(e,t,n,r){if(r<t)throw ut("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw ut("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function _t(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Tt(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Et(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(it||(it={}));class It{constructor(e,t,n,r,i,s,o,a,c,l,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new St(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===it.NO_ERROR,i=n.getStatus();if(!t||Et(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===it.ABORT;return void e(!1,new St(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new St(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){r(s)}else if(null!==i){const e=ot();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?ht():ct())}else{r(at())}};this.canceled_?t(0,new St(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let l=!1;function u(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,c())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(l)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(c()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function m(e){p||(p=!0,d(),l||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class St{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function kt(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Ct(){const e=kt();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(wt())return new Blob(n);throw new nt(rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function At(e){if("undefined"===typeof atob)throw t="base-64",new nt(rt.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const xt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Pt{constructor(e,t){this.data=e,this.contentType=t||null}}function Nt(e,t){switch(e){case xt.RAW:return new Pt(Rt(t));case xt.BASE64:case xt.BASE64URL:return new Pt(Ot(e,t));case xt.DATA_URL:return new Pt(function(e){const t=new Dt(e);return t.base64?Ot(xt.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw ft(xt.DATA_URL,"Malformed data URL.")}return Rt(t)}(t.rest)}(t),new Dt(t).contentType)}throw ot()}function Rt(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Ot(e,t){switch(e){case xt.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw ft(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case xt.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw ft(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=At(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw ft(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Dt{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ft(xt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Lt{constructor(e,t){let n=0,r="";yt(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(yt(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Lt(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Lt(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(wt()){const e=t.map((e=>e instanceof Lt?e.data_:e));return new Lt(Ct.apply(null,e))}{const e=t.map((e=>vt(e)?Nt(xt.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Lt(r,!0)}}uploadData(){return this.data_}}function Mt(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Ut(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Ft(e,t){return t}class Vt{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Ft}}let jt=null;function zt(){if(jt)return jt;const e=[];e.push(new Vt("bucket")),e.push(new Vt("generation")),e.push(new Vt("metageneration")),e.push(new Vt("name","fullPath",!0));const t=new Vt("name");t.xform=function(e,t){return function(e){return!vt(e)||e.length<2?e:Ut(e)}(t)},e.push(t);const n=new Vt("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Vt("timeCreated")),e.push(new Vt("updated")),e.push(new Vt("md5Hash",null,!0)),e.push(new Vt("cacheControl",null,!0)),e.push(new Vt("contentDisposition",null,!0)),e.push(new Vt("contentEncoding",null,!0)),e.push(new Vt("contentLanguage",null,!0)),e.push(new Vt("contentType",null,!0)),e.push(new Vt("metadata","customMetadata",!0)),jt=e,jt}function Bt(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new mt(n,r);return t._makeStorageReference(i)}})}(r,e),r}function qt(e,t,n){const r=Mt(t);if(null===r)return null;return Bt(e,r,n)}function Ht(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const Wt="prefixes",Kt="items";function Gt(e,t,n){const r=Mt(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Wt])for(const i of n[Wt]){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new mt(t,n));r.prefixes.push(s)}if(n[Kt])for(const i of n[Kt]){const n=e._makeStorageReference(new mt(t,i.name));r.items.push(n)}return r}(e,t,r)}class Qt{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Yt(e){if(!e)throw ot()}function Xt(e,t){return function(n,r){const i=qt(e,r,t);return Yt(null!==i),i}}function Jt(e,t){return function(n,r){const i=qt(e,r,t);return Yt(null!==i),function(e,t,n,r){const i=Mt(t);if(null===i)return null;if(!vt(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return _t("/b/"+o(i)+"/o/"+o(s),n,r)+Tt({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function $t(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new nt(rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new nt(rt.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new nt(rt.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new nt(rt.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Zt(e){const t=$t(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new nt(rt.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function en(e,t,n){const r=_t(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Qt(r,"GET",Xt(e,n),i);return s.errorHandler=Zt(t),s}function tn(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=_t(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,c=new Qt(o,"GET",function(e,t){return function(n,r){const i=Gt(e,t,r);return Yt(null!==i),i}}(e,t.bucket),a);return c.urlParams=s,c.errorHandler=$t(t),c}function nn(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function rn(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const c=nn(t,r,i),l="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ht(c,n)+"\r\n--"+a+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=Lt.getBlob(l,r,u);if(null===h)throw lt();const d={name:c.fullPath},f=_t(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new Qt(f,"POST",Xt(e,n),p);return m.urlParams=d,m.headers=o,m.body=h.uploadData(),m.errorHandler=$t(t),m}class sn{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function on(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Yt(!1)}return Yt(!!n&&-1!==(t||["active"]).indexOf(n)),n}const an=262144;function cn(e,t,n,r,i,s,o,a){const c=new sn(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw new nt(rt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const l=c.total-c.current;let u=l;i>0&&(u=Math.min(u,i));const h=c.current,d=h+u;let f="";f=0===u?"finalize":l===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(c.current)},m=r.slice(h,d);if(null===m)throw lt();const g=t.maxUploadRetryTime,v=new Qt(n,"POST",(function(e,n){const i=on(e,["active","final"]),o=c.current+u,a=r.size();let l;return l="final"===i?Xt(t,s)(e,n):null,new sn(o,a,"final"===i,l)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=a||null,v.errorHandler=$t(e),v}const ln={STATE_CHANGED:"state_changed"},un={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hn(e){switch(e){case"running":case"pausing":case"canceling":return un.RUNNING;case"paused":return un.PAUSED;case"success":return un.SUCCESS;case"canceled":return un.CANCELED;default:return un.ERROR}}class dn{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function fn(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let pn=null;class mn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=it.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=it.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=it.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw pt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pt("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw pt("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pt("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class gn extends mn{initXhr(){this.xhr_.responseType="text"}}function vn(){return pn?pn():new gn}class yn{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=zt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(rt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(Et(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=at()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(rt.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=nn(t,r,i),a={name:o.fullPath},c=_t(s,e.host,e._protocol),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=Ht(o,n),h=e.maxUploadRetryTime,d=new Qt(c,"POST",(function(e){let t;on(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Yt(!1)}return Yt(vt(t)),t}),h);return d.urlParams=a,d.headers=l,d.body=u,d.errorHandler=$t(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,vn,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new Qt(n,"POST",(function(e){const t=on(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(s){Yt(!1)}n||Yt(!1);const i=Number(n);return Yt(!isNaN(i)),new sn(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=$t(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,vn,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=an*this._chunkMultiplier,t=new sn(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=cn(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const o=this._ref.storage._makeRequest(s,vn,r,i,!1);this._request=o,o.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(an*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=en(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,vn,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=rn(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,vn,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=ct(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=hn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new dn(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(hn(this._state)){case un.SUCCESS:fn(this._resolve.bind(null,this.snapshot))();break;case un.CANCELED:case un.ERROR:fn(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(hn(this._state)){case un.RUNNING:case un.PAUSED:e.next&&fn(e.next.bind(e,this.snapshot))();break;case un.SUCCESS:e.complete&&fn(e.complete.bind(e))();break;default:e.error&&fn(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class wn{constructor(e,t){this._service=e,this._location=t instanceof mt?t:mt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new wn(e,t)}get root(){const e=new mt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ut(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new mt(this._location.bucket,e);return new wn(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw dt(e)}}function bn(e){const t={prefixes:[],items:[]};return _n(e,t).then((()=>t))}async function _n(e,t,n){const r={pageToken:n},i=await Tn(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await _n(e,t,i.nextPageToken)}function Tn(e,t){null!=t&&"number"===typeof t.maxResults&&bt("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=tn(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,vn)}function En(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=_t(t.fullServerUrl(),e.host,e._protocol),s=Ht(n,r),o=e.maxOperationRetryTime,a=new Qt(i,"PATCH",Xt(e,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=Zt(t),a}(e.storage,e._location,t,zt());return e.storage.makeRequestWithTokens(n,vn)}function In(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=_t(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Qt(r,"GET",Jt(e,n),i);return s.errorHandler=Zt(t),s}(e.storage,e._location,zt());return e.storage.makeRequestWithTokens(t,vn).then((e=>{if(null===e)throw new nt(rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Sn(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=_t(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Qt(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Zt(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,vn)}function kn(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new mt(e._location.bucket,n);return new wn(e.storage,r)}function Cn(e,t){if(e instanceof Pn){const n=e;if(null==n._bucket)throw new nt(rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tt+"' property when initializing the app?");const r=new wn(n,n._bucket);return null!=t?Cn(r,t):r}return void 0!==t?kn(e,t):e}function An(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Pn)return new wn(e,t);throw ut("To use ref(service, url), the first argument must be a Storage instance.")}return Cn(e,t)}function xn(e,t){const n=null===t||void 0===t?void 0:t[tt];return null==n?null:mt.makeFromBucketSpec(n,e)}class Pn{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=et,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?mt.makeFromBucketSpec(r,this._host):xn(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=mt.makeFromBucketSpec(this._url,e):this._bucket=xn(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bt("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bt("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wn(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new gt(ht());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=Tt(e.urlParams),c=e.url+a,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(l,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new It(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Nn="@firebase/storage",Rn="0.12.0",On="storage";function Dn(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new yn(e,new Lt(t),n)}(e=F(e),t,n)}function Ln(e){return function(e){e._throwIfRoot("getMetadata");const t=en(e.storage,e._location,zt());return e.storage.makeRequestWithTokens(t,vn)}(e=F(e))}function Mn(e){return Sn(e=F(e))}function Un(e,t){return An(e=F(e),t)}function Fn(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:v(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function Vn(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Pn(r,i,s,n,xe)}Ee(new V(On,Vn,"PUBLIC").setMultipleInstances(!0)),De(Nn,Rn,""),De(Nn,Rn,"esm2017");class jn{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class zn{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new jn(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new jn(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new jn(e,this,this._ref)):{next:t.next?e=>t.next(new jn(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class Bn{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new qn(e,this._service)))}get items(){return this._delegate.items.map((e=>new qn(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class qn{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return kn(e,t)}(this._delegate,e);return new qn(t,this.storage)}get root(){return new qn(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new qn(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new zn(Dn(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xt.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=Nt(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new zn(new yn(this._delegate,new Lt(r.data,!0),i),this)}listAll(){return function(e){return bn(e=F(e))}(this._delegate).then((e=>new Bn(e,this.storage)))}list(e){return function(e,t){return Tn(e=F(e),t)}(this._delegate,e||void 0).then((e=>new Bn(e,this.storage)))}getMetadata(){return Ln(this._delegate)}updateMetadata(e){return function(e,t){return En(e=F(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return In(e=F(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),Mn(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw dt(e)}}class Hn{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Wn(e))throw ut("ref() expected a child path but got a URL, use refFromURL instead.");return new qn(Un(this._delegate,e),this)}refFromURL(e){if(!Wn(e))throw ut("refFromURL() expected a full URL but got a child path, use ref() instead.");try{mt.makeFromUrl(e,this._delegate.host)}catch(t){throw ut("refFromUrl() expected a valid full URL but got an invalid one.")}return new qn(Un(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Fn(this._delegate,e,t,n)}}function Wn(e){return/^[A-Za-z]+:\/\//.test(e)}function Kn(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new Hn(r,i)}!function(e){const t={TaskState:un,TaskEvent:ln,StringFormat:xt,Storage:Hn,Reference:qn};e.INTERNAL.registerComponent(new V("storage-compat",Kn,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.3")}(Ze);var Gn,Qn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Yn={},Xn=Xn||{},Jn=Qn||self;function $n(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Zn(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var er="closure_uid_"+(1e9*Math.random()>>>0),tr=0;function nr(e,t,n){return e.call.apply(e.bind,arguments)}function rr(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ir(e,t,n){return(ir=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?nr:rr).apply(null,arguments)}function sr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function or(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function ar(){this.s=this.s,this.o=this.o}ar.prototype.s=!1,ar.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,er)&&e[er]||(e[er]=++tr)}(this)},ar.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const cr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function lr(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ur(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if($n(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function hr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}hr.prototype.h=function(){this.defaultPrevented=!0};var dr=function(){if(!Jn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Jn.addEventListener("test",e,t),Jn.removeEventListener("test",e,t)}catch(mC){}return e}();function fr(e){return/^[\s\xa0]*$/.test(e)}function pr(){var e=Jn.navigator;return e&&(e=e.userAgent)?e:""}function mr(e){return-1!=pr().indexOf(e)}function gr(e){return gr[" "](e),e}gr[" "]=function(){};var vr,yr,wr=mr("Opera"),br=mr("Trident")||mr("MSIE"),_r=mr("Edge"),Tr=_r||br,Er=mr("Gecko")&&!(-1!=pr().toLowerCase().indexOf("webkit")&&!mr("Edge"))&&!(mr("Trident")||mr("MSIE"))&&!mr("Edge"),Ir=-1!=pr().toLowerCase().indexOf("webkit")&&!mr("Edge");function Sr(){var e=Jn.document;return e?e.documentMode:void 0}e:{var kr="",Cr=function(){var e=pr();return Er?/rv:([^\);]+)(\)|;)/.exec(e):_r?/Edge\/([\d\.]+)/.exec(e):br?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ir?/WebKit\/(\S+)/.exec(e):wr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Cr&&(kr=Cr?Cr[1]:""),br){var Ar=Sr();if(null!=Ar&&Ar>parseFloat(kr)){vr=String(Ar);break e}}vr=kr}if(Jn.document&&br){var xr=Sr();yr=xr||(parseInt(vr,10)||void 0)}else yr=void 0;var Pr=yr;function Nr(e,t){if(hr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Er){e:{try{gr(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Rr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Nr.$.h.call(this)}}or(Nr,hr);var Rr={2:"touch",3:"pen",4:"mouse"};Nr.prototype.h=function(){Nr.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Or="closure_listenable_"+(1e6*Math.random()|0),Dr=0;function Lr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Dr,this.fa=this.ia=!1}function Mr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Ur(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Fr(e){const t={};for(const n in e)t[n]=e[n];return t}const Vr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jr(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Vr.length;t++)n=Vr[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function zr(e){this.src=e,this.g={},this.h=0}function Br(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=cr(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Mr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function qr(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}zr.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=qr(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Lr(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Hr="closure_lm_"+(1e6*Math.random()|0),Wr={};function Kr(e,t,n,r,i){if(r&&r.once)return Qr(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Kr(e,t[s],n,r,i);return null}return n=ti(n),e&&e[Or]?e.O(t,n,Zn(r)?!!r.capture:!!r,i):Gr(e,t,n,!1,r,i)}function Gr(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Zn(i)?!!i.capture:!!i,a=Zr(e);if(a||(e[Hr]=a=new zr(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$r;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)dr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Jr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Qr(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Qr(e,t[s],n,r,i);return null}return n=ti(n),e&&e[Or]?e.P(t,n,Zn(r)?!!r.capture:!!r,i):Gr(e,t,n,!0,r,i)}function Yr(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Yr(e,t[s],n,r,i);else r=Zn(r)?!!r.capture:!!r,n=ti(n),e&&e[Or]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=qr(s=e.g[t],n,r,i))&&(Mr(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Zr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=qr(t,n,r,i)),(n=-1<e?t[e]:null)&&Xr(n))}function Xr(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Or])Br(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Jr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Zr(t))?(Br(n,e),0==n.h&&(n.src=null,t[Hr]=null)):Mr(e)}}}function Jr(e){return e in Wr?Wr[e]:Wr[e]="on"+e}function $r(e,t){if(e.fa)e=!0;else{t=new Nr(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Xr(e),e=n.call(r,t)}return e}function Zr(e){return(e=e[Hr])instanceof zr?e:null}var ei="__closure_events_fn_"+(1e9*Math.random()>>>0);function ti(e){return"function"===typeof e?e:(e[ei]||(e[ei]=function(t){return e.handleEvent(t)}),e[ei])}function ni(){ar.call(this),this.i=new zr(this),this.S=this,this.J=null}function ri(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new hr(t,e);else if(t instanceof hr)t.target=t.target||e;else{var i=t;jr(t=new hr(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ii(o,r,!0,t)&&i}if(i=ii(o=t.g=e,r,!0,t)&&i,i=ii(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ii(o=t.g=n[s],r,!1,t)&&i}function ii(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Br(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}or(ni,ar),ni.prototype[Or]=!0,ni.prototype.removeEventListener=function(e,t,n,r){Yr(this,e,t,n,r)},ni.prototype.N=function(){if(ni.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Mr(n[r]);delete t.g[e],t.h--}}this.J=null},ni.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ni.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var si=Jn.JSON.stringify;function oi(){var e=fi;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ai=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new ci),(e=>e.reset()));class ci{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function li(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ui(e){Jn.setTimeout((()=>{throw e}),0)}let hi,di=!1,fi=new class{constructor(){this.h=this.g=null}add(e,t){const n=ai.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},pi=()=>{const e=Jn.Promise.resolve(void 0);hi=()=>{e.then(mi)}};var mi=()=>{for(var e;e=oi();){try{e.h.call(e.g)}catch(mC){ui(mC)}var t=ai;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}di=!1};function gi(e,t){ni.call(this),this.h=e||1,this.g=t||Jn,this.j=ir(this.qb,this),this.l=Date.now()}function vi(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function yi(e,t,n){if("function"===typeof e)n&&(e=ir(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ir(e.handleEvent,e)}return 2147483647<Number(t)?-1:Jn.setTimeout(e,t||0)}function wi(e){e.g=yi((()=>{e.g=null,e.i&&(e.i=!1,wi(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}or(gi,ni),(Gn=gi.prototype).ga=!1,Gn.T=null,Gn.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ri(this,"tick"),this.ga&&(vi(this),this.start()))}},Gn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Gn.N=function(){gi.$.N.call(this),vi(this),delete this.g};class bi extends ar{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:wi(this)}N(){super.N(),this.g&&(Jn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _i(e){ar.call(this),this.h=e,this.g={}}or(_i,ar);var Ti=[];function Ei(e,t,n,r){Array.isArray(n)||(n&&(Ti[0]=n.toString()),n=Ti);for(var i=0;i<n.length;i++){var s=Kr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ii(e){Ur(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Xr(e)}),e),e.g={}}function Si(){this.g=!0}function ki(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return si(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}_i.prototype.N=function(){_i.$.N.call(this),Ii(this)},_i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Si.prototype.Ea=function(){this.g=!1},Si.prototype.info=function(){};var Ci={},Ai=null;function xi(){return Ai=Ai||new ni}function Pi(e){hr.call(this,Ci.Ta,e)}function Ni(e){const t=xi();ri(t,new Pi(t))}function Ri(e,t){hr.call(this,Ci.STAT_EVENT,e),this.stat=t}function Oi(e){const t=xi();ri(t,new Ri(t,e))}function Di(e,t){hr.call(this,Ci.Ua,e),this.size=t}function Li(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Jn.setTimeout((function(){e()}),t)}Ci.Ta="serverreachability",or(Pi,hr),Ci.STAT_EVENT="statevent",or(Ri,hr),Ci.Ua="timingevent",or(Di,hr);var Mi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ui={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Fi(){}function Vi(e){return e.h||(e.h=e.i())}function ji(){}Fi.prototype.h=null;var zi,Bi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function qi(){hr.call(this,"d")}function Hi(){hr.call(this,"c")}function Wi(){}function Ki(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new _i(this),this.P=Qi,e=Tr?125:void 0,this.V=new gi(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Gi}function Gi(){this.i=null,this.g="",this.h=!1}or(qi,hr),or(Hi,hr),or(Wi,Fi),Wi.prototype.g=function(){return new XMLHttpRequest},Wi.prototype.i=function(){return{}},zi=new Wi;var Qi=45e3,Yi={},Xi={};function Ji(e,t,n){e.L=1,e.A=gs(hs(t)),e.u=n,e.S=!0,$i(e,null)}function $i(e,t){e.G=Date.now(),ns(e),e.B=hs(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),xs(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Gi,e.g=Po(e.l,n?t:null,!e.u),0<e.O&&(e.M=new bi(ir(e.Pa,e,e.g),e.O)),Ei(e.U,e.g,"readystatechange",e.nb),t=e.I?Fr(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Ni(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Zi(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function es(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=ts(e,n),r==Xi){4==t&&(e.s=4,Oi(14),i=!1),ki(e.j,e.m,null,"[Incomplete Response]");break}if(r==Yi){e.s=4,Oi(15),ki(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ki(e.j,e.m,r,null),as(e,r)}Zi(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Oi(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),To(t),t.M=!0,Oi(11))):(ki(e.j,e.m,n,"[Invalid Chunked Response]"),os(e),ss(e))}function ts(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Xi:(n=Number(t.substring(n,r)),isNaN(n)?Yi:(r+=1)+n>t.length?Xi:(t=t.slice(r,r+n),e.o=r+n,t))}function ns(e){e.Y=Date.now()+e.P,rs(e,e.P)}function rs(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Li(ir(e.lb,e),t)}function is(e){e.C&&(Jn.clearTimeout(e.C),e.C=null)}function ss(e){0==e.l.H||e.J||So(e.l,e)}function os(e){is(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,vi(e.V),Ii(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function as(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Ms(n.i,e)))if(!e.K&&Ms(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(l){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Io(n),po(n)}_o(n),Oi(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Li(ir(n.ib,n),6e3));if(1>=Ls(n.i)&&n.oa){try{n.oa()}catch(l){}n.oa=void 0}}else Co(n,11)}else if((e.K||n.g==e)&&Io(n),!fr(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Us(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,ms(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=xo(r,r.J?r.pa:null,r.Y),o.K){Fs(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(is(a),ns(a)),r.g=o}else bo(r);0<n.j.length&&go(n)}else"stop"!=l[0]&&"close"!=l[0]||Co(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Co(n,7):fo(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Ni()}catch(l){}}function cs(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if($n(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if($n(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if($n(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Gn=Ki.prototype).setTimeout=function(e){this.P=e},Gn.nb=function(e){e=e.target;const t=this.M;t&&3==oo(e)?t.l():this.Pa(e)},Gn.Pa=function(e){try{if(e==this.g)e:{const u=oo(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Tr||this.g&&(this.h.h||this.g.ja()||ao(this.g)))){this.J||4!=u||7==t||Ni(),is(this);var n=this.g.da();this.ca=n;t:if(Zi(this)){var r=ao(this.g);e="";var i=r.length,s=4==oo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){os(this),ss(this);var o="";break t}this.h.i=new Jn.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fr(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,Oi(12),os(this),ss(this);break e}ki(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,as(this,n)}this.S?(es(this,u,o),Tr&&this.i&&3==u&&(Ei(this.U,this.V,"tick",this.mb),this.V.start())):(ki(this.j,this.m,o,null),as(this,o)),4==u&&os(this),this.i&&!this.J&&(4==u?So(this.l,this):(this.i=!1,ns(this)))}else(function(e){const t={};e=(e.g&&2<=oo(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(fr(e[r]))continue;var n=li(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Oi(12)):(this.s=0,Oi(13)),os(this),ss(this)}}}catch(u){}},Gn.mb=function(){if(this.g){var e=oo(this.g),t=this.g.ja();this.o<t.length&&(is(this),es(this,e,t),this.i&&4!=e&&ns(this))}},Gn.cancel=function(){this.J=!0,os(this)},Gn.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Ni(),Oi(17)),os(this),this.s=2,ss(this)):rs(this,this.Y-e)};var ls=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function us(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof us){this.h=e.h,ds(this,e.j),this.s=e.s,this.g=e.g,fs(this,e.m),this.l=e.l;var t=e.i,n=new Ss;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ps(this,n),this.o=e.o}else e&&(t=String(e).match(ls))?(this.h=!1,ds(this,t[1]||"",!0),this.s=vs(t[2]||""),this.g=vs(t[3]||"",!0),fs(this,t[4]),this.l=vs(t[5]||"",!0),ps(this,t[6]||"",!0),this.o=vs(t[7]||"")):(this.h=!1,this.i=new Ss(null,this.h))}function hs(e){return new us(e)}function ds(e,t,n){e.j=n?vs(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function fs(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ps(e,t,n){t instanceof Ss?(e.i=t,function(e,t){t&&!e.j&&(ks(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Cs(this,t),xs(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ys(t,Es)),e.i=new Ss(t,e.h))}function ms(e,t,n){e.i.set(t,n)}function gs(e){return ms(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function vs(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ys(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ws),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ws(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}us.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ys(t,bs,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ys(t,bs,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ys(n,"/"==n.charAt(0)?Ts:_s,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ys(n,Is)),e.join("")};var bs=/[#\/\?@]/g,_s=/[#\?:]/g,Ts=/[#\?]/g,Es=/[#\?@]/g,Is=/#/g;function Ss(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ks(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Cs(e,t){ks(e),t=Ps(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function As(e,t){return ks(e),t=Ps(e,t),e.g.has(t)}function xs(e,t,n){Cs(e,t),0<n.length&&(e.i=null,e.g.set(Ps(e,t),lr(n)),e.h+=n.length)}function Ps(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Gn=Ss.prototype).add=function(e,t){ks(this),this.i=null,e=Ps(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Gn.forEach=function(e,t){ks(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Gn.ta=function(){ks(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Gn.Z=function(e){ks(this);let t=[];if("string"===typeof e)As(this,e)&&(t=t.concat(this.g.get(Ps(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Gn.set=function(e,t){return ks(this),this.i=null,As(this,e=Ps(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Gn.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Gn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Ns=class{constructor(e,t){this.g=e,this.map=t}};function Rs(e){this.l=e||Os,Jn.PerformanceNavigationTiming?e=0<(e=Jn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Jn.g&&Jn.g.Ka&&Jn.g.Ka()&&Jn.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Os=10;function Ds(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ls(e){return e.h?1:e.g?e.g.size:0}function Ms(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Us(e,t){e.g?e.g.add(t):e.h=t}function Fs(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Vs(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return lr(e.i)}Rs.prototype.cancel=function(){if(this.i=Vs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var js=class{stringify(e){return Jn.JSON.stringify(e,void 0)}parse(e){return Jn.JSON.parse(e,void 0)}};function zs(){this.g=new js}function Bs(e,t,n){const r=n||"";try{cs(e,(function(e,n){let i=e;Zn(e)&&(i=si(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function qs(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Hs(e){this.l=e.ec||null,this.j=e.ob||!1}function Ws(e,t){ni.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ks,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}or(Hs,Fi),Hs.prototype.g=function(){return new Ws(this.l,this.j)},Hs.prototype.i=function(e){return function(){return e}}({}),or(Ws,ni);var Ks=0;function Gs(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Qs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ys(e)}function Ys(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Gn=Ws.prototype).open=function(e,t){if(this.readyState!=Ks)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ys(this)},Gn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Jn).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Gn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qs(this)),this.readyState=Ks},Gn.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ys(this)),this.g&&(this.readyState=3,Ys(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Jn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gs(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Gn.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Qs(this):Ys(this),3==this.readyState&&Gs(this)}},Gn.Za=function(e){this.g&&(this.response=this.responseText=e,Qs(this))},Gn.Ya=function(e){this.g&&(this.response=e,Qs(this))},Gn.ka=function(){this.g&&Qs(this)},Gn.setRequestHeader=function(e,t){this.v.append(e,t)},Gn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Gn.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ws.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Xs=Jn.JSON.parse;function Js(e){ni.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=$s,this.L=this.M=!1}or(Js,ni);var $s="",Zs=/^https?$/i,eo=["POST","PUT"];function to(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,no(e),io(e)}function no(e){e.F||(e.F=!0,ri(e,"complete"),ri(e,"error"))}function ro(e){if(e.h&&"undefined"!=typeof Xn&&(!e.C[1]||4!=oo(e)||2!=e.da()))if(e.v&&4==oo(e))yi(e.La,0,e);else if(ri(e,"readystatechange"),4==oo(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(ls)[1]||null;!i&&Jn.self&&Jn.self.location&&(i=Jn.self.location.protocol.slice(0,-1)),r=!Zs.test(i?i.toLowerCase():"")}n=r}if(n)ri(e,"complete"),ri(e,"success");else{e.m=6;try{var s=2<oo(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",no(e)}}finally{io(e)}}}function io(e,t){if(e.g){so(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ri(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function so(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Jn.clearTimeout(e.A),e.A=null)}function oo(e){return e.g?e.g.readyState:0}function ao(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case $s:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ma){return null}}function co(e){let t="";return Ur(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function lo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=co(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ms(e,t,n))}function uo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ho(e){this.Ga=0,this.j=[],this.l=new Si,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=uo("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=uo("baseRetryDelayMs",5e3,e),this.hb=uo("retryDelaySeedMs",1e4,e),this.eb=uo("forwardChannelMaxRetries",2,e),this.xa=uo("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Rs(e&&e.concurrentRequestLimit),this.Ja=new zs,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function fo(e){if(mo(e),3==e.H){var t=e.W++,n=hs(e.I);if(ms(n,"SID",e.K),ms(n,"RID",t),ms(n,"TYPE","terminate"),yo(e,n),(t=new Ki(e,e.l,t)).L=2,t.A=gs(hs(n)),n=!1,Jn.navigator&&Jn.navigator.sendBeacon)try{n=Jn.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Jn.Image&&((new Image).src=t.A,n=!0),n||(t.g=Po(t.l,null),t.g.ha(t.A)),t.G=Date.now(),ns(t)}Ao(e)}function po(e){e.g&&(To(e),e.g.cancel(),e.g=null)}function mo(e){po(e),e.u&&(Jn.clearTimeout(e.u),e.u=null),Io(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Jn.clearTimeout(e.m),e.m=null)}function go(e){if(!Ds(e.i)&&!e.m){e.m=!0;var t=e.Na;hi||pi(),di||(hi(),di=!0),fi.add(t,e),e.C=0}}function vo(e,t){var n;n=t?t.m:e.W++;const r=hs(e.I);ms(r,"SID",e.K),ms(r,"RID",n),ms(r,"AID",e.V),yo(e,r),e.o&&e.s&&lo(r,e.o,e.s),n=new Ki(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=wo(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Us(e.i,n),Ji(n,r,t)}function yo(e,t){e.na&&Ur(e.na,(function(e,n){ms(t,n,e)})),e.h&&cs({},(function(e,n){ms(t,n,e)}))}function wo(e,t,n){n=Math.min(e.j.length,n);var r=e.h?ir(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Bs(a,e,"req"+n+"_")}catch(Rc){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function bo(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;hi||pi(),di||(hi(),di=!0),fi.add(t,e),e.A=0}}function _o(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Li(ir(e.Ma,e),ko(e,e.A)),e.A++,!0)}function To(e){null!=e.B&&(Jn.clearTimeout(e.B),e.B=null)}function Eo(e){e.g=new Ki(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=hs(e.wa);ms(t,"RID","rpc"),ms(t,"SID",e.K),ms(t,"AID",e.V),ms(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ms(t,"TO",e.qa),ms(t,"TYPE","xmlhttp"),yo(e,t),e.o&&e.s&&lo(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=gs(hs(t)),n.u=null,n.S=!0,$i(n,e)}function Io(e){null!=e.v&&(Jn.clearTimeout(e.v),e.v=null)}function So(e,t){var n=null;if(e.g==t){Io(e),To(e),e.g=null;var r=2}else{if(!Ms(e.i,t))return;n=t.F,Fs(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;ri(r=xi(),new Di(r,n)),go(e)}else bo(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Ls(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Li(ir(e.Na,e,t),ko(e,e.C)),e.C++,!0))}(e,t)||2==r&&_o(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Co(e,5);break;case 4:Co(e,10);break;case 3:Co(e,6);break;default:Co(e,2)}}function ko(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Co(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=ir(e.pb,e);n||(n=new us("//www.google.com/images/cleardot.gif"),Jn.location&&"http"==Jn.location.protocol||ds(n,"https"),gs(n)),function(e,t){const n=new Si;if(Jn.Image){const r=new Image;r.onload=sr(qs,n,r,"TestLoadImage: loaded",!0,t),r.onerror=sr(qs,n,r,"TestLoadImage: error",!1,t),r.onabort=sr(qs,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=sr(qs,n,r,"TestLoadImage: timeout",!1,t),Jn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Oi(2);e.H=0,e.h&&e.h.za(t),Ao(e),mo(e)}function Ao(e){if(e.H=0,e.ma=[],e.h){const t=Vs(e.i);0==t.length&&0==e.j.length||(ur(e.ma,t),ur(e.ma,e.j),e.i.i.length=0,lr(e.j),e.j.length=0),e.h.ya()}}function xo(e,t,n){var r=n instanceof us?hs(n):new us(n);if(""!=r.g)t&&(r.g=t+"."+r.g),fs(r,r.m);else{var i=Jn.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new us(null);r&&ds(s,r),t&&(s.g=t),i&&fs(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&ms(r,n,t),ms(r,"VER",e.ra),yo(e,r),r}function Po(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Js(new Hs({ob:n})):new Js(e.va)).Oa(e.J),t}function No(){}function Ro(){if(br&&!(10<=Number(Pr)))throw Error("Environmental error: no available transport.")}function Oo(e,t){ni.call(this),this.g=new ho(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!fr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!fr(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Mo(this)}function Do(e){qi.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Lo(){Hi.call(this),this.status=1}function Mo(e){this.g=e}function Uo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Fo(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Vo(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Gn=Js.prototype).Oa=function(e){this.M=e},Gn.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():zi.g(),this.C=this.u?Vi(this.u):Vi(zi),this.g.onreadystatechange=ir(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void to(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Jn.FormData&&e instanceof Jn.FormData,!(0<=cr(eo,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{so(this),0<this.B&&((this.L=function(e){return br&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ir(this.ua,this)):this.A=yi(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){to(this,s)}},Gn.ua=function(){"undefined"!=typeof Xn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ri(this,"timeout"),this.abort(8))},Gn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ri(this,"complete"),ri(this,"abort"),io(this))},Gn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),io(this,!0)),Js.$.N.call(this)},Gn.La=function(){this.s||(this.G||this.v||this.l?ro(this):this.kb())},Gn.kb=function(){ro(this)},Gn.isActive=function(){return!!this.g},Gn.da=function(){try{return 2<oo(this)?this.g.status:-1}catch(fC){return-1}},Gn.ja=function(){try{return this.g?this.g.responseText:""}catch(fC){return""}},Gn.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Xs(t)}},Gn.Ia=function(){return this.m},Gn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Gn=ho.prototype).ra=8,Gn.H=1,Gn.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Ki(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Fr(s),jr(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=wo(this,i,t),ms(n=hs(this.I),"RID",e),ms(n,"CVER",22),this.F&&ms(n,"X-HTTP-Session-Id",this.F),yo(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(co(s)))+"&"+t:this.o&&lo(n,this.o,s)),Us(this.i,i),this.bb&&ms(n,"TYPE","init"),this.P?(ms(n,"$req",t),ms(n,"SID","null"),i.aa=!0,Ji(i,n,null)):Ji(i,n,t),this.H=2}}else 3==this.H&&(e?vo(this,e):0==this.j.length||Ds(this.i)||vo(this))},Gn.Ma=function(){if(this.u=null,Eo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Li(ir(this.jb,this),e)}},Gn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Oi(10),po(this),Eo(this))},Gn.ib=function(){null!=this.v&&(this.v=null,po(this),_o(this),Oi(19))},Gn.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Oi(2)):(this.l.info("Failed to ping google.com"),Oi(1))},Gn.isActive=function(){return!!this.h&&this.h.isActive(this)},(Gn=No.prototype).Ba=function(){},Gn.Aa=function(){},Gn.za=function(){},Gn.ya=function(){},Gn.isActive=function(){return!0},Gn.Va=function(){},Ro.prototype.g=function(e,t){return new Oo(e,t)},or(Oo,ni),Oo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Oi(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=xo(e,null,e.Y),go(e)},Oo.prototype.close=function(){fo(this.g)},Oo.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=si(e),e=n);t.j.push(new Ns(t.fb++,e)),3==t.H&&go(t)},Oo.prototype.N=function(){this.g.h=null,delete this.j,fo(this.g),delete this.g,Oo.$.N.call(this)},or(Do,qi),or(Lo,Hi),or(Mo,No),Mo.prototype.Ba=function(){ri(this.g,"a")},Mo.prototype.Aa=function(e){ri(this.g,new Do(e))},Mo.prototype.za=function(e){ri(this.g,new Lo)},Mo.prototype.ya=function(){ri(this.g,"b")},or(Uo,(function(){this.blockSize=-1})),Uo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Uo.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Fo(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Fo(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Fo(this,r),i=0;break}}this.h=i,this.i+=t},Uo.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var jo={};function zo(e){return-128<=e&&128>e?function(e,t){var n=jo;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Vo([0|e],0>e?-1:0)})):new Vo([0|e],0>e?-1:0)}function Bo(e){if(isNaN(e)||!isFinite(e))return Ho;if(0>e)return Yo(Bo(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=qo;return new Vo(t,0)}var qo=4294967296,Ho=zo(0),Wo=zo(1),Ko=zo(16777216);function Go(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Qo(e){return-1==e.h}function Yo(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Vo(n,~e.h).add(Wo)}function Xo(e,t){return e.add(Yo(t))}function Jo(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function $o(e,t){this.g=e,this.h=t}function Zo(e,t){if(Go(t))throw Error("division by zero");if(Go(e))return new $o(Ho,Ho);if(Qo(e))return t=Zo(Yo(e),t),new $o(Yo(t.g),Yo(t.h));if(Qo(t))return t=Zo(e,Yo(t)),new $o(Yo(t.g),t.h);if(30<e.g.length){if(Qo(e)||Qo(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Wo,r=t;0>=r.X(e);)n=ea(n),r=ea(r);var i=ta(n,1),s=ta(r,1);for(r=ta(r,2),n=ta(n,2);!Go(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=ta(r,1),n=ta(n,1)}return t=Xo(e,i.R(t)),new $o(i,t)}for(i=Ho;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Bo(n)).R(t);Qo(o)||0<o.X(e);)o=(s=Bo(n-=r)).R(t);Go(s)&&(s=Wo),i=i.add(s),e=Xo(e,o)}return new $o(i,e)}function ea(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Vo(n,e.h)}function ta(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Vo(i,e.h)}(Gn=Vo.prototype).ea=function(){if(Qo(this))return-Yo(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:qo+r)*t,t*=qo}return e},Gn.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Go(this))return"0";if(Qo(this))return"-"+Yo(this).toString(e);for(var t=Bo(Math.pow(e,6)),n=this,r="";;){var i=Zo(n,t).g,s=((0<(n=Xo(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Go(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Gn.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Gn.X=function(e){return Qo(e=Xo(this,e))?-1:Go(e)?0:1},Gn.abs=function(){return Qo(this)?Yo(this):this},Gn.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Vo(n,-2147483648&n[n.length-1]?-1:0)},Gn.R=function(e){if(Go(this)||Go(e))return Ho;if(Qo(this))return Qo(e)?Yo(this).R(Yo(e)):Yo(Yo(this).R(e));if(Qo(e))return Yo(this.R(Yo(e)));if(0>this.X(Ko)&&0>e.X(Ko))return Bo(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,Jo(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Jo(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Jo(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Jo(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Vo(n,0)},Gn.gb=function(e){return Zo(this,e).h},Gn.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Vo(n,this.h&e.h)},Gn.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Vo(n,this.h|e.h)},Gn.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Vo(n,this.h^e.h)},Ro.prototype.createWebChannel=Ro.prototype.g,Oo.prototype.send=Oo.prototype.u,Oo.prototype.open=Oo.prototype.m,Oo.prototype.close=Oo.prototype.close,Mi.NO_ERROR=0,Mi.TIMEOUT=8,Mi.HTTP_ERROR=6,Ui.COMPLETE="complete",ji.EventType=Bi,Bi.OPEN="a",Bi.CLOSE="b",Bi.ERROR="c",Bi.MESSAGE="d",ni.prototype.listen=ni.prototype.O,Js.prototype.listenOnce=Js.prototype.P,Js.prototype.getLastError=Js.prototype.Sa,Js.prototype.getLastErrorCode=Js.prototype.Ia,Js.prototype.getStatus=Js.prototype.da,Js.prototype.getResponseJson=Js.prototype.Wa,Js.prototype.getResponseText=Js.prototype.ja,Js.prototype.send=Js.prototype.ha,Js.prototype.setWithCredentials=Js.prototype.Oa,Uo.prototype.digest=Uo.prototype.l,Uo.prototype.reset=Uo.prototype.reset,Uo.prototype.update=Uo.prototype.j,Vo.prototype.add=Vo.prototype.add,Vo.prototype.multiply=Vo.prototype.R,Vo.prototype.modulo=Vo.prototype.gb,Vo.prototype.compare=Vo.prototype.X,Vo.prototype.toNumber=Vo.prototype.ea,Vo.prototype.toString=Vo.prototype.toString,Vo.prototype.getBits=Vo.prototype.D,Vo.fromNumber=Bo,Vo.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Yo(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Bo(Math.pow(n,8)),i=Ho,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Bo(Math.pow(n,o)),i=i.R(o).add(Bo(a))):i=(i=i.R(r)).add(Bo(a))}return i};var na=Yn.createWebChannelTransport=function(){return new Ro},ra=Yn.getStatEventTarget=function(){return xi()},ia=Yn.ErrorCode=Mi,sa=Yn.EventType=Ui,oa=Yn.Event=Ci,aa=Yn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ca=(Yn.FetchXmlHttpFactory=Hs,Yn.WebChannel=ji),la=Yn.XhrIo=Js,ua=Yn.Md5=Uo,ha=Yn.Integer=Vo;const da="@firebase/firestore";class fa{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fa.UNAUTHENTICATED=new fa(null),fa.GOOGLE_CREDENTIALS=new fa("google-credentials-uid"),fa.FIRST_PARTY=new fa("first-party-uid"),fa.MOCK_USER=new fa("mock-user");let pa="10.7.2";const ma=new Y("@firebase/firestore");function ga(){return ma.logLevel}function va(e){if(ma.logLevel<=H.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ba);ma.debug("Firestore (".concat(pa,"): ").concat(e),...i)}}function ya(e){if(ma.logLevel<=H.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ba);ma.error("Firestore (".concat(pa,"): ").concat(e),...i)}}function wa(e){if(ma.logLevel<=H.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ba);ma.warn("Firestore (".concat(pa,"): ").concat(e),...i)}}function ba(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function _a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(pa,") INTERNAL ASSERTION FAILED: ")+e;throw ya(t),new Error(t)}function Ta(e,t){e||_a()}function Ea(e,t){return e}const Ia={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Sa extends k{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class ka{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ca{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Aa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fa.UNAUTHENTICATED)))}shutdown(){}}class xa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Pa{constructor(e){this.t=e,this.currentUser=fa.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new ka;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ka,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{va("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(va("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ka)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(va("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ta("string"==typeof t.accessToken),new Ca(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ta(null===e||"string"==typeof e),new fa(e)}}class Na{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=fa.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ra{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Na(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(fa.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Oa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Da{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&va("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,va("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{va("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):va("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ta("string"==typeof e.token),this.R=e.token,new Oa(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function La(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ma{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=La(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Ua(e,t){return e<t?-1:e>t?1:0}function Fa(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Va(e){return e+"\0"}class ja{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Sa(Ia.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Sa(Ia.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Sa(Ia.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Sa(Ia.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ja.fromMillis(Date.now())}static fromDate(e){return ja.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ja(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ua(this.nanoseconds,e.nanoseconds):Ua(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class za{constructor(e){this.timestamp=e}static fromTimestamp(e){return new za(e)}static min(){return new za(new ja(0,0))}static max(){return new za(new ja(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ba{constructor(e,t,n){void 0===t?t=0:t>e.length&&_a(),void 0===n?n=e.length-t:n>e.length-t&&_a(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ba.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ba?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class qa extends Ba{construct(e,t,n){return new qa(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Sa(Ia.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new qa(e)}static emptyPath(){return new qa([])}}const Ha=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wa extends Ba{construct(e,t,n){return new Wa(e,t,n)}static isValidIdentifier(e){return Ha.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wa.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Wa(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Sa(Ia.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Sa(Ia.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Sa(Ia.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Sa(Ia.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wa(t)}static emptyPath(){return new Wa([])}}class Ka{constructor(e){this.path=e}static fromPath(e){return new Ka(qa.fromString(e))}static fromName(e){return new Ka(qa.fromString(e).popFirst(5))}static empty(){return new Ka(qa.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qa.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return qa.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ka(new qa(e.slice()))}}class Ga{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Qa(e){return e.fields.find((e=>2===e.kind))}function Ya(e){return e.fields.filter((e=>2!==e.kind))}Ga.UNKNOWN_ID=-1;class Xa{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ja{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ja(0,ec.min())}}function $a(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=za.fromTimestamp(1e9===r?new ja(n+1,0):new ja(n,r));return new ec(i,Ka.empty(),t)}function Za(e){return new ec(e.readTime,e.key,-1)}class ec{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ec(za.min(),Ka.empty(),-1)}static max(){return new ec(za.max(),Ka.empty(),-1)}}function tc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ka.comparator(e.documentKey,t.documentKey),0!==n?n:Ua(e.largestBatchId,t.largestBatchId))}const nc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ic(e){if(e.code!==Ia.FAILED_PRECONDITION||e.message!==nc)throw e;va("LocalStore","Unexpectedly lost primary lease")}class sc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_a(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new sc(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof sc?t:sc.resolve(t)}catch(e){return sc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):sc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):sc.reject(t)}static resolve(e){return new sc(((t,n)=>{t(e)}))}static reject(e){return new sc(((t,n)=>{n(e)}))}static waitFor(e){return new sc(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=sc.resolve(!1);for(const n of e)t=t.next((e=>e?sc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new sc(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new sc(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class oc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ka,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new lc(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=pc(t.target.error);this.V.reject(new lc(e,n))}}static open(e,t,n,r){try{return new oc(t,e.transaction(r,n))}catch(e){throw new lc(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(va("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new hc(t)}}class ac{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===ac.S(y())&&ya("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return va("SimpleDb","Removing database:",e),dc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!S())return!1;if(ac.C())return!0;const e=y(),t=ac.S(e),n=0<t&&t<10,r=ac.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(va("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new lc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Sa(Ia.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Sa(Ia.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new lc(e,r))},r.onupgradeneeded=e=>{va("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{va("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=oc.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),sc.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(va("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class cc{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return dc(this.k.delete())}}class lc extends Sa{constructor(e,t){super(Ia.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function uc(e){return"IndexedDbTransactionError"===e.name}class hc{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(va("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(va("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),dc(n)}add(e){return va("SimpleDb","ADD",this.store.name,e,e),dc(this.store.add(e))}get(e){return dc(this.store.get(e)).next((t=>(void 0===t&&(t=null),va("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return va("SimpleDb","DELETE",this.store.name,e),dc(this.store.delete(e))}count(){return va("SimpleDb","COUNT",this.store.name),dc(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new sc(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new sc(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){va("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new sc(((n,r)=>{t.onerror=e=>{const t=pc(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new sc(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new cc(i),o=t(i.primaryKey,i.value,s);if(o instanceof sc){const e=o.catch((e=>(s.done(),sc.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>sc.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function dc(e){return new sc(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=pc(e.target.error);n(t)}}))}let fc=!1;function pc(e){const t=ac.S(y());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Sa("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return fc||(fc=!0,setTimeout((()=>{throw e}),0)),e}}return e}class mc{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){va("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{va("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){uc(e)?va("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await ic(e)}await this.ee(6e4)}))}}class gc{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return sc.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return va("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(va("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Za(t);tc(r,n)>0&&(n=r)})),new ec(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class vc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function yc(e){return null==e}function wc(e){return 0===e&&1/e==-1/0}function bc(e){return"number"==typeof e&&Number.isInteger(e)&&!wc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function _c(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ec(t)),t=Tc(e.get(n),t);return Ec(t)}function Tc(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Ec(e){return e+"\x01\x01"}function Ic(e){const t=e.length;if(Ta(t>=2),2===t)return Ta("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),qa.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&_a(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:_a()}s=t+2}return new qa(r)}vc._e=-1;const Sc=["userId","batchId"];function kc(e,t){return[e,_c(t)]}function Cc(e,t,n){return[e,_c(t),n]}const Ac={},xc=["prefixPath","collectionGroup","readTime","documentId"],Pc=["prefixPath","collectionGroup","documentId"],Nc=["collectionGroup","readTime","prefixPath","documentId"],Rc=["canonicalId","targetId"],Oc=["targetId","path"],Dc=["path","targetId"],Lc=["collectionId","parent"],Mc=["indexId","uid"],Uc=["uid","sequenceNumber"],Fc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Vc=["indexId","uid","orderedDocumentKey"],jc=["userId","collectionPath","documentId"],zc=["userId","collectionPath","largestBatchId"],Bc=["userId","collectionGroup","largestBatchId"],qc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Hc=[...qc,"documentOverlays"],Wc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Kc=Wc,Gc=[...Kc,"indexConfiguration","indexState","indexEntries"];class Qc extends rc{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Yc(e,t){const n=Ea(e);return ac.M(n.ae,t)}function Xc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Jc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $c(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Zc{constructor(e,t){this.comparator=e,this.root=t||tl.EMPTY}insert(e,t){return new Zc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tl.BLACK,null,null))}remove(e){return new Zc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new el(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new el(this.root,e,this.comparator,!1)}getReverseIterator(){return new el(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new el(this.root,e,this.comparator,!0)}}class el{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:tl.RED,this.left=null!=r?r:tl.EMPTY,this.right=null!=i?i:tl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new tl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return tl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return tl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _a();if(this.right.isRed())throw _a();const e=this.left.check();if(e!==this.right.check())throw _a();return e+(this.isRed()?0:1)}}tl.EMPTY=null,tl.RED=!0,tl.BLACK=!1,tl.EMPTY=new class{constructor(){this.size=0}get key(){throw _a()}get value(){throw _a()}get color(){throw _a()}get left(){throw _a()}get right(){throw _a()}copy(e,t,n,r,i){return this}insert(e,t,n){return new tl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nl{constructor(e){this.comparator=e,this.data=new Zc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rl(this.data.getIterator())}getIteratorFrom(e){return new rl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof nl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new nl(this.comparator);return t.data=e,t}}class rl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function il(e){return e.hasNext()?e.getNext():void 0}class sl{constructor(e){this.fields=e,e.sort(Wa.comparator)}static empty(){return new sl([])}unionWith(e){let t=new nl(Wa.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new sl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fa(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class ol extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class al{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ol("Invalid base64 string: "+e):e}}(e);return new al(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new al(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ua(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}al.EMPTY_BYTE_STRING=new al("");const cl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ll(e){if(Ta(!!e),"string"==typeof e){let t=0;const n=cl.exec(e);if(Ta(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ul(e.seconds),nanos:ul(e.nanos)}}function ul(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function hl(e){return"string"==typeof e?al.fromBase64String(e):al.fromUint8Array(e)}function dl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function fl(e){const t=e.mapValue.fields.__previous_value__;return dl(t)?fl(t):t}function pl(e){const t=ll(e.mapValue.fields.__local_write_time__.timestampValue);return new ja(t.seconds,t.nanos)}class ml{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class gl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new gl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gl&&e.projectId===this.projectId&&e.database===this.database}}const vl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yl={nullValue:"NULL_VALUE"};function wl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?dl(e)?4:Ol(e)?9007199254740991:10:_a()}function bl(e,t){if(e===t)return!0;const n=wl(e);if(n!==wl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return pl(e).isEqual(pl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ll(e.timestampValue),r=ll(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return hl(e.bytesValue).isEqual(hl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ul(e.geoPointValue.latitude)===ul(t.geoPointValue.latitude)&&ul(e.geoPointValue.longitude)===ul(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ul(e.integerValue)===ul(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ul(e.doubleValue),r=ul(t.doubleValue);return n===r?wc(n)===wc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Fa(e.arrayValue.values||[],t.arrayValue.values||[],bl);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Xc(n)!==Xc(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!bl(n[i],r[i])))return!1;return!0}(e,t);default:return _a()}}function _l(e,t){return void 0!==(e.values||[]).find((e=>bl(e,t)))}function Tl(e,t){if(e===t)return 0;const n=wl(e),r=wl(t);if(n!==r)return Ua(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ua(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ul(e.integerValue||e.doubleValue),r=ul(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return El(e.timestampValue,t.timestampValue);case 4:return El(pl(e),pl(t));case 5:return Ua(e.stringValue,t.stringValue);case 6:return function(e,t){const n=hl(e),r=hl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ua(n[i],r[i]);if(0!==e)return e}return Ua(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ua(ul(e.latitude),ul(t.latitude));return 0!==n?n:Ua(ul(e.longitude),ul(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Tl(n[i],r[i]);if(e)return e}return Ua(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===vl.mapValue&&t===vl.mapValue)return 0;if(e===vl.mapValue)return 1;if(t===vl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Ua(r[o],s[o]);if(0!==e)return e;const t=Tl(n[r[o]],i[s[o]]);if(0!==t)return t}return Ua(r.length,s.length)}(e.mapValue,t.mapValue);default:throw _a()}}function El(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ua(e,t);const n=ll(e),r=ll(t),i=Ua(n.seconds,r.seconds);return 0!==i?i:Ua(n.nanos,r.nanos)}function Il(e){return Sl(e)}function Sl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ll(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return hl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ka.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Sl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Sl(e.fields[i]));return n+"}"}(e.mapValue):_a()}function kl(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Cl(e){return!!e&&"integerValue"in e}function Al(e){return!!e&&"arrayValue"in e}function xl(e){return!!e&&"nullValue"in e}function Pl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Nl(e){return!!e&&"mapValue"in e}function Rl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Jc(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Rl(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Rl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ol(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Dl(e){return"nullValue"in e?yl:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?kl(gl.empty(),Ka.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:_a()}function Ll(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?kl(gl.empty(),Ka.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?vl:_a()}function Ml(e,t){const n=Tl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Ul(e,t){const n=Tl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Fl{constructor(e){this.value=e}static empty(){return new Fl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Nl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rl(t)}setAll(e){let t=Wa.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Rl(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Nl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Nl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Jc(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Fl(Rl(this.value))}}function Vl(e){const t=[];return Jc(e.fields,((e,n)=>{const r=new Wa([e]);if(Nl(n)){const e=Vl(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new sl(t)}class jl{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new jl(e,0,za.min(),za.min(),za.min(),Fl.empty(),0)}static newFoundDocument(e,t,n,r){return new jl(e,1,t,za.min(),n,r,0)}static newNoDocument(e,t){return new jl(e,2,t,za.min(),za.min(),Fl.empty(),0)}static newUnknownDocument(e,t){return new jl(e,3,t,za.min(),za.min(),Fl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(za.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=za.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof jl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class zl{constructor(e,t){this.position=e,this.inclusive=t}}function Bl(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Ka.comparator(Ka.fromName(o.referenceValue),n.key):Tl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ql(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!bl(e.position[n],t.position[n]))return!1;return!0}class Hl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Wl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Kl{}class Gl extends Kl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ru(e,t,n):"array-contains"===t?new au(e,n):"in"===t?new cu(e,n):"not-in"===t?new lu(e,n):"array-contains-any"===t?new uu(e,n):new Gl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new iu(e,n):new su(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Tl(t,this.value)):null!==t&&wl(this.value)===wl(t)&&this.matchesComparison(Tl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _a()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ql extends Kl{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Ql(e,t)}matches(e){return Yl(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Yl(e){return"and"===e.op}function Xl(e){return"or"===e.op}function Jl(e){return $l(e)&&Yl(e)}function $l(e){for(const t of e.filters)if(t instanceof Ql)return!1;return!0}function Zl(e){if(e instanceof Gl)return e.field.canonicalString()+e.op.toString()+Il(e.value);if(Jl(e))return e.filters.map((e=>Zl(e))).join(",");{const t=e.filters.map((e=>Zl(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function eu(e,t){return e instanceof Gl?function(e,t){return t instanceof Gl&&e.op===t.op&&e.field.isEqual(t.field)&&bl(e.value,t.value)}(e,t):e instanceof Ql?function(e,t){return t instanceof Ql&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&eu(n,t.filters[r])),!0)}(e,t):void _a()}function tu(e,t){const n=e.filters.concat(t);return Ql.create(n,e.op)}function nu(e){return e instanceof Gl?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Il(e.value))}(e):e instanceof Ql?function(e){return e.op.toString()+" {"+e.getFilters().map(nu).join(" ,")+"}"}(e):"Filter"}class ru extends Gl{constructor(e,t,n){super(e,t,n),this.key=Ka.fromName(n.referenceValue)}matches(e){const t=Ka.comparator(e.key,this.key);return this.matchesComparison(t)}}class iu extends Gl{constructor(e,t){super(e,"in",t),this.keys=ou("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class su extends Gl{constructor(e,t){super(e,"not-in",t),this.keys=ou("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ou(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ka.fromName(e.referenceValue)))}class au extends Gl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Al(t)&&_l(t.arrayValue,this.value)}}class cu extends Gl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_l(this.value.arrayValue,t)}}class lu extends Gl{constructor(e,t){super(e,"not-in",t)}matches(e){if(_l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_l(this.value.arrayValue,t)}}class uu extends Gl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Al(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>_l(this.value.arrayValue,e)))}}class hu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function du(e){return new hu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function fu(e){const t=Ea(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Zl(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),yc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Il(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Il(e))).join(",")),t.ce=e}return t.ce}function pu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Wl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!eu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ql(e.startAt,t.startAt)&&ql(e.endAt,t.endAt)}function mu(e){return Ka.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function gu(e,t){return e.filters.filter((e=>e instanceof Gl&&e.field.isEqual(t)))}function vu(e,t,n){let r=yl,i=!0;for(const s of gu(e,t)){let e=yl,t=!0;switch(s.op){case"<":case"<=":e=Dl(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=yl}Ml({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Ml({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function yu(e,t,n){let r=vl,i=!0;for(const s of gu(e,t)){let e=vl,t=!0;switch(s.op){case">=":case">":e=Ll(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=vl}Ul({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Ul({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class wu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function bu(e,t,n,r,i,s,o,a){return new wu(e,t,n,r,i,s,o,a)}function _u(e){return new wu(e)}function Tu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Eu(e){return null!==e.collectionGroup}function Iu(e){const t=Ea(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new nl(Wa.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Hl(r,n))})),e.has(Wa.keyField().canonicalString())||t.le.push(new Hl(Wa.keyField(),n))}return t.le}function Su(e){const t=Ea(e);return t.he||(t.he=ku(t,Iu(e))),t.he}function ku(e,t){if("F"===e.limitType)return du(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Hl(e.field,t)}));const n=e.endAt?new zl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new zl(e.startAt.position,e.startAt.inclusive):null;return du(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Cu(e,t){const n=e.filters.concat([t]);return new wu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Au(e,t,n){return new wu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function xu(e,t){return pu(Su(e),Su(t))&&e.limitType===t.limitType}function Pu(e){return"".concat(fu(Su(e)),"|lt:").concat(e.limitType)}function Nu(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>nu(e))).join(", "),"]")),yc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Il(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Il(e))).join(",")),"Target(".concat(t,")")}(Su(e)),"; limitType=").concat(e.limitType,")")}function Ru(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ka.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Iu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Bl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Iu(e),t))&&!(e.endAt&&!function(e,t,n){const r=Bl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Iu(e),t))}(e,t)}function Ou(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Du(e){return(t,n)=>{let r=!1;for(const i of Iu(e)){const e=Lu(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Lu(e,t,n){const r=e.field.isKeyField()?Ka.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Tl(r,i):_a()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return _a()}}class Mu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Jc(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return $c(this.inner)}size(){return this.innerSize}}const Uu=new Zc(Ka.comparator);function Fu(){return Uu}const Vu=new Zc(Ka.comparator);function ju(){let e=Vu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function zu(e){let t=Vu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Bu(){return Hu()}function qu(){return Hu()}function Hu(){return new Mu((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Wu=new Zc(Ka.comparator),Ku=new nl(Ka.comparator);function Gu(){let e=Ku;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Qu=new nl(Ua);function Yu(){return Qu}function Xu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(t)?"-0":t}}function Ju(e){return{integerValue:""+e}}function $u(e,t){return bc(t)?Ju(t):Xu(e,t)}class Zu{constructor(){this._=void 0}}function eh(e,t,n){return e instanceof rh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&dl(t)&&(t=fl(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ih?sh(e,t):e instanceof oh?ah(e,t):function(e,t){const n=nh(e,t),r=lh(n)+lh(e.Ie);return Cl(n)&&Cl(e.Ie)?Ju(r):Xu(e.serializer,r)}(e,t)}function th(e,t,n){return e instanceof ih?sh(e,t):e instanceof oh?ah(e,t):n}function nh(e,t){return e instanceof ch?function(e){return Cl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class rh extends Zu{}class ih extends Zu{constructor(e){super(),this.elements=e}}function sh(e,t){const n=uh(t);for(const r of e.elements)n.some((e=>bl(e,r)))||n.push(r);return{arrayValue:{values:n}}}class oh extends Zu{constructor(e){super(),this.elements=e}}function ah(e,t){let n=uh(t);for(const r of e.elements)n=n.filter((e=>!bl(e,r)));return{arrayValue:{values:n}}}class ch extends Zu{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function lh(e){return ul(e.integerValue||e.doubleValue)}function uh(e){return Al(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class hh{constructor(e,t){this.field=e,this.transform=t}}class dh{constructor(e,t){this.version=e,this.transformResults=t}}class fh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fh}static exists(e){return new fh(void 0,e)}static updateTime(e){return new fh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ph(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class mh{}function gh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new kh(e.key,fh.none()):new _h(e.key,e.data,fh.none());{const n=e.data,r=Fl.empty();let i=new nl(Wa.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Th(e.key,r,new sl(i.toArray()),fh.none())}}function vh(e,t,n){e instanceof _h?function(e,t,n){const r=e.value.clone(),i=Ih(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Th?function(e,t,n){if(!ph(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ih(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Eh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function yh(e,t,n,r){return e instanceof _h?function(e,t,n,r){if(!ph(e.precondition,t))return n;const i=e.value.clone(),s=Sh(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Th?function(e,t,n,r){if(!ph(e.precondition,t))return n;const i=Sh(e.fieldTransforms,r,t),s=t.data;return s.setAll(Eh(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return ph(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function wh(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=nh(r.transform,e||null);null!=i&&(null===n&&(n=Fl.empty()),n.set(r.field,i))}return n||null}function bh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Fa(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ih&&t instanceof ih||e instanceof oh&&t instanceof oh?Fa(e.elements,t.elements,bl):e instanceof ch&&t instanceof ch?bl(e.Ie,t.Ie):e instanceof rh&&t instanceof rh}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class _h extends mh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Th extends mh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Eh(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Ih(e,t,n){const r=new Map;Ta(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,th(o,a,n[i]))}return r}function Sh(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,eh(e,s,t))}return r}class kh extends mh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ch extends mh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ah{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&vh(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=yh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=yh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=qu();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=gh(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(za.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Gu())}isEqual(e){return this.batchId===e.batchId&&Fa(this.mutations,e.mutations,((e,t)=>bh(e,t)))&&Fa(this.baseMutations,e.baseMutations,((e,t)=>bh(e,t)))}}class xh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ta(e.mutations.length===n.length);let r=Wu;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new xh(e,t,n,r)}}class Ph{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Nh{constructor(e,t){this.count=e,this.unchangedNames=t}}var Rh,Oh;function Dh(e){switch(e){default:return _a();case Ia.CANCELLED:case Ia.UNKNOWN:case Ia.DEADLINE_EXCEEDED:case Ia.RESOURCE_EXHAUSTED:case Ia.INTERNAL:case Ia.UNAVAILABLE:case Ia.UNAUTHENTICATED:return!1;case Ia.INVALID_ARGUMENT:case Ia.NOT_FOUND:case Ia.ALREADY_EXISTS:case Ia.PERMISSION_DENIED:case Ia.FAILED_PRECONDITION:case Ia.ABORTED:case Ia.OUT_OF_RANGE:case Ia.UNIMPLEMENTED:case Ia.DATA_LOSS:return!0}}function Lh(e){if(void 0===e)return ya("GRPC error has no .code"),Ia.UNKNOWN;switch(e){case Rh.OK:return Ia.OK;case Rh.CANCELLED:return Ia.CANCELLED;case Rh.UNKNOWN:return Ia.UNKNOWN;case Rh.DEADLINE_EXCEEDED:return Ia.DEADLINE_EXCEEDED;case Rh.RESOURCE_EXHAUSTED:return Ia.RESOURCE_EXHAUSTED;case Rh.INTERNAL:return Ia.INTERNAL;case Rh.UNAVAILABLE:return Ia.UNAVAILABLE;case Rh.UNAUTHENTICATED:return Ia.UNAUTHENTICATED;case Rh.INVALID_ARGUMENT:return Ia.INVALID_ARGUMENT;case Rh.NOT_FOUND:return Ia.NOT_FOUND;case Rh.ALREADY_EXISTS:return Ia.ALREADY_EXISTS;case Rh.PERMISSION_DENIED:return Ia.PERMISSION_DENIED;case Rh.FAILED_PRECONDITION:return Ia.FAILED_PRECONDITION;case Rh.ABORTED:return Ia.ABORTED;case Rh.OUT_OF_RANGE:return Ia.OUT_OF_RANGE;case Rh.UNIMPLEMENTED:return Ia.UNIMPLEMENTED;case Rh.DATA_LOSS:return Ia.DATA_LOSS;default:return _a()}}(Oh=Rh||(Rh={}))[Oh.OK=0]="OK",Oh[Oh.CANCELLED=1]="CANCELLED",Oh[Oh.UNKNOWN=2]="UNKNOWN",Oh[Oh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oh[Oh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oh[Oh.NOT_FOUND=5]="NOT_FOUND",Oh[Oh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oh[Oh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oh[Oh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oh[Oh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oh[Oh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oh[Oh.ABORTED=10]="ABORTED",Oh[Oh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oh[Oh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oh[Oh.INTERNAL=13]="INTERNAL",Oh[Oh.UNAVAILABLE=14]="UNAVAILABLE",Oh[Oh.DATA_LOSS=15]="DATA_LOSS";let Mh=null;function Uh(){return new TextEncoder}const Fh=new ha([4294967295,4294967295],0);function Vh(e){const t=Uh().encode(e),n=new ua;return n.update(t),new Uint8Array(n.digest())}function jh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ha([n,r],0),new ha([i,s],0)]}class zh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Bh("Invalid padding: ".concat(t));if(n<0)throw new Bh("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Bh("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Bh("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=ha.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(ha.fromNumber(n)));return 1===r.compare(Fh)&&(r=new ha([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Vh(e),[n,r]=jh(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new zh(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=Vh(e),[n,r]=jh(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Bh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class qh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Hh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new qh(za.min(),r,new Zc(Ua),Fu(),Gu())}}class Hh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Hh(n,t,Gu(),Gu(),Gu())}}class Wh{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Kh{constructor(e,t){this.targetId=e,this.fe=t}}class Gh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:al.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Qh{constructor(){this.ge=0,this.pe=Jh(),this.ye=al.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Gu(),t=Gu(),n=Gu();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:_a()}})),new Hh(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Jh()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ta(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Yh{constructor(e){this.Le=e,this.ke=new Map,this.qe=Fu(),this.Qe=Xh(),this.Ke=new Zc(Ua)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:_a()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(mu(i))if(0===n){const e=new Ka(i.path);this.We(t,e,jl.newNoDocument(e,za.min()))}else Ta(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Mh||Mh.tt(function(e,t,n,r,i){var s,o,a,c,l,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(c=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(u=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=hl(n).toUint8Array()}catch(e){if(e instanceof ol)return wa("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new zh(s,r,i)}catch(e){return wa(e instanceof Bh?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&mu(i.target)){const t=new Ka(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,jl.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Gu();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new qh(e,t,this.Ke,this.qe,n);return this.qe=Fu(),this.Qe=Xh(),this.Ke=new Zc(Ua),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Qh,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new nl(Ua),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||va("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Qh),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Xh(){return new Zc(Ka.comparator)}function Jh(){return new Zc(Ka.comparator)}const $h={asc:"ASCENDING",desc:"DESCENDING"},Zh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ed={and:"AND",or:"OR"};class td{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nd(e,t){return e.useProto3Json||yc(t)?t:{value:t}}function rd(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function id(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function sd(e,t){return rd(e,t.toTimestamp())}function od(e){return Ta(!!e),za.fromTimestamp(function(e){const t=ll(e);return new ja(t.seconds,t.nanos)}(e))}function ad(e,t){return cd(e,t).canonicalString()}function cd(e,t){const n=function(e){return new qa(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ld(e){const t=qa.fromString(e);return Ta(Nd(t)),t}function ud(e,t){return ad(e.databaseId,t.path)}function hd(e,t){const n=ld(t);if(n.get(1)!==e.databaseId.projectId)throw new Sa(Ia.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Sa(Ia.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ka(md(n))}function dd(e,t){return ad(e.databaseId,t)}function fd(e){const t=ld(e);return 4===t.length?qa.emptyPath():md(t)}function pd(e){return new qa(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function md(e){return Ta(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function gd(e,t,n){return{name:ud(e,t),fields:n.value.mapValue.fields}}function vd(e,t,n){const r=hd(e,t.name),i=od(t.updateTime),s=t.createTime?od(t.createTime):za.min(),o=new Fl({mapValue:{fields:t.fields}}),a=jl.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function yd(e,t){let n;if(t instanceof _h)n={update:gd(e,t.key,t.value)};else if(t instanceof kh)n={delete:ud(e,t.key)};else if(t instanceof Th)n={update:gd(e,t.key,t.data),updateMask:Pd(t.fieldMask)};else{if(!(t instanceof Ch))return _a();n={verify:ud(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof rh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ih)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof oh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ch)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw _a()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:sd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:_a()}(e,t.precondition)),n}function wd(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?fh.updateTime(od(e.updateTime)):void 0!==e.exists?fh.exists(e.exists):fh.none()}(t.currentDocument):fh.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Ta("REQUEST_TIME"===t.setToServerValue),n=new rh;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new ih(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new oh(e)}else"increment"in t?n=new ch(e,t.increment):_a();const r=Wa.fromServerFormat(t.fieldPath);return new hh(r,n)}(e,t))):[];if(t.update){t.update.name;const i=hd(e,t.update.name),s=new Fl({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new sl(t.map((e=>Wa.fromServerFormat(e))))}(t.updateMask);return new Th(i,s,e,n,r)}return new _h(i,s,n,r)}if(t.delete){const r=hd(e,t.delete);return new kh(r,n)}if(t.verify){const r=hd(e,t.verify);return new Ch(r,n)}return _a()}function bd(e,t){return{documents:[dd(e,t.path)]}}function _d(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=dd(e,i);const s=function(e){if(0!==e.length)return xd(Ql.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Cd(e.field),direction:Id(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=nd(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Td(e){let t=fd(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ta(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Ed(e);return t instanceof Ql&&Jl(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Hl(Ad(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,yc(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new zl(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new zl(n,t)}(n.endAt)),bu(t,i,o,s,a,"F",c,l)}function Ed(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ad(e.unaryFilter.field);return Gl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ad(e.unaryFilter.field);return Gl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ad(e.unaryFilter.field);return Gl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ad(e.unaryFilter.field);return Gl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return _a()}}(e):void 0!==e.fieldFilter?function(e){return Gl.create(Ad(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _a()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ql.create(e.compositeFilter.filters.map((e=>Ed(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return _a()}}(e.compositeFilter.op))}(e):_a()}function Id(e){return $h[e]}function Sd(e){return Zh[e]}function kd(e){return ed[e]}function Cd(e){return{fieldPath:e.canonicalString()}}function Ad(e){return Wa.fromServerFormat(e.fieldPath)}function xd(e){return e instanceof Gl?function(e){if("=="===e.op){if(Pl(e.value))return{unaryFilter:{field:Cd(e.field),op:"IS_NAN"}};if(xl(e.value))return{unaryFilter:{field:Cd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Pl(e.value))return{unaryFilter:{field:Cd(e.field),op:"IS_NOT_NAN"}};if(xl(e.value))return{unaryFilter:{field:Cd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cd(e.field),op:Sd(e.op),value:e.value}}}(e):e instanceof Ql?function(e){const t=e.getFilters().map((e=>xd(e)));return 1===t.length?t[0]:{compositeFilter:{op:kd(e.op),filters:t}}}(e):_a()}function Pd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Nd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Rd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:za.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:za.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:al.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Rd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Rd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Od{constructor(e){this.ct=e}}function Dd(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ld(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ud(e,t.key),fields:t.data.value.mapValue.fields,updateTime:rd(e,t.version.toTimestamp()),createTime:rd(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Md(t.version)};else{if(!t.isUnknownDocument())return _a();r.unknownDocument={path:n.path.toArray(),version:Md(t.version)}}return r}function Ld(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Md(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ud(e){const t=new ja(e.seconds,e.nanoseconds);return za.fromTimestamp(t)}function Fd(e,t){const n=(t.baseMutations||[]).map((t=>wd(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>wd(e.ct,t))),i=ja.fromMillis(t.localWriteTimeMs);return new Ah(t.batchId,i,n,r)}function Vd(e){const t=Ud(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Ud(e.lastLimboFreeSnapshotVersion):za.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Ta(1===e.documents.length),Su(_u(fd(e.documents[0])))}(e.query):function(e){return Su(Td(e))}(e.query),new Rd(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,al.fromBase64String(e.resumeToken))}function jd(e,t){const n=Md(t.snapshotVersion),r=Md(t.lastLimboFreeSnapshotVersion);let i;i=mu(t.target)?bd(e.ct,t.target):_d(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:fu(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function zd(e){const t=Td({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Au(t,t.limit,"L"):t}function Bd(e,t){return new Ph(t.largestBatchId,wd(e.ct,t.overlayMutation))}function qd(e,t){const n=t.path.lastSegment();return[e,_c(t.path.popLast()),n]}function Hd(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Md(r.readTime),documentKey:_c(r.documentKey.path),largestBatchId:r.largestBatchId}}class Wd{getBundleMetadata(e,t){return Kd(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Ud(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Kd(e).put(function(e){return{bundleId:e.id,createTime:Md(od(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Gd(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:zd(e.bundledQuery),readTime:Ud(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Gd(e).put(function(e){return{name:e.name,readTime:Md(od(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Kd(e){return Yc(e,"bundles")}function Gd(e){return Yc(e,"namedQueries")}class Qd{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new Qd(e,n)}getOverlay(e,t){return Yd(e).get(qd(this.userId,t)).next((e=>e?Bd(this.serializer,e):null))}getOverlays(e,t){const n=Bu();return sc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Ph(t,i);r.push(this.ht(e,s))})),sc.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(_c(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Yd(e).H("collectionPathOverlayIndex",r))})),sc.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Bu(),i=_c(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Yd(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Bd(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Bu();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Yd(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=Bd(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return Yd(e).put(function(e,t,n){const[r,i,s]=qd(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:yd(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function Yd(e){return Yc(e,"documentOverlays")}class Xd{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(ul(e.integerValue));else if("doubleValue"in e){const n=ul(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),wc(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(hl(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Ol(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):_a()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),Ka.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Jd(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function $d(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Jd(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Xd.bt=new Xd;class Zd{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=$d(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Lt(e),n=$d(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class ef{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class tf{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class nf{constructor(){this.Gt=new Zd,this.zt=new ef(this.Gt),this.jt=new tf(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class rf{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new rf(this.indexId,this.documentKey,this.arrayValue,n)}}function sf(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=of(e.arrayValue,t.arrayValue),0!==n?n:(n=of(e.directionalValue,t.directionalValue),0!==n?n:Ka.comparator(e.documentKey,t.documentKey)))}function of(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class af{constructor(e){this.Yt=new nl(((e,t)=>Wa.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Ta(e.collectionGroup===this.collectionId),this.en)return!1;const t=Qa(e);if(void 0!==t&&!this.nn(t))return!1;const n=Ya(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new nl(Wa.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Xa(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Xa(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Xa(n.field,"asc"===n.dir?0:1)));return new Ga(Ga.UNKNOWN_ID,this.collectionId,t,Ja.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function cf(e){var t,n;if(Ta(e instanceof Gl||e instanceof Ql),e instanceof Gl){if(e instanceof cu){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Gl.create(e.field,"==",t))))||[];return Ql.create(r,"or")}return e}const r=e.filters.map((e=>cf(e)));return Ql.create(r,e.op)}function lf(e){if(0===e.getFilters().length)return[];const t=ff(cf(e));return Ta(df(t)),uf(t)||hf(t)?[t]:t.getFilters()}function uf(e){return e instanceof Gl}function hf(e){return e instanceof Ql&&Jl(e)}function df(e){return uf(e)||hf(e)||function(e){if(e instanceof Ql&&Xl(e)){for(const t of e.getFilters())if(!uf(t)&&!hf(t))return!1;return!0}return!1}(e)}function ff(e){if(Ta(e instanceof Gl||e instanceof Ql),e instanceof Gl)return e;if(1===e.filters.length)return ff(e.filters[0]);const t=e.filters.map((e=>ff(e)));let n=Ql.create(t,e.op);return n=gf(n),df(n)?n:(Ta(n instanceof Ql),Ta(Yl(n)),Ta(n.filters.length>1),n.filters.reduce(((e,t)=>pf(e,t))))}function pf(e,t){let n;return Ta(e instanceof Gl||e instanceof Ql),Ta(t instanceof Gl||t instanceof Ql),n=e instanceof Gl?t instanceof Gl?function(e,t){return Ql.create([e,t],"and")}(e,t):mf(e,t):t instanceof Gl?mf(t,e):function(e,t){if(Ta(e.filters.length>0&&t.filters.length>0),Yl(e)&&Yl(t))return tu(e,t.getFilters());const n=Xl(e)?e:t,r=Xl(e)?t:e,i=n.filters.map((e=>pf(e,r)));return Ql.create(i,"or")}(e,t),gf(n)}function mf(e,t){if(Yl(t))return tu(t,e.getFilters());{const n=t.filters.map((t=>pf(e,t)));return Ql.create(n,"or")}}function gf(e){if(Ta(e instanceof Gl||e instanceof Ql),e instanceof Gl)return e;const t=e.getFilters();if(1===t.length)return gf(t[0]);if($l(e))return e;const n=t.map((e=>gf(e))),r=[];return n.forEach((t=>{t instanceof Gl?r.push(t):t instanceof Ql&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Ql.create(r,e.op)}class vf{constructor(){this._n=new yf}addToCollectionParentIndex(e,t){return this._n.add(t),sc.resolve()}getCollectionParents(e,t){return sc.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return sc.resolve()}deleteFieldIndex(e,t){return sc.resolve()}deleteAllFieldIndexes(e){return sc.resolve()}createTargetIndexes(e,t){return sc.resolve()}getDocumentsMatchingTarget(e,t){return sc.resolve(null)}getIndexType(e,t){return sc.resolve(0)}getFieldIndexes(e,t){return sc.resolve([])}getNextCollectionGroupToUpdate(e){return sc.resolve(null)}getMinOffset(e,t){return sc.resolve(ec.min())}getMinOffsetFromCollectionGroup(e,t){return sc.resolve(ec.min())}updateCollectionGroup(e,t,n){return sc.resolve()}updateIndexEntries(e,t){return sc.resolve()}}class yf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new nl(qa.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new nl(qa.comparator)).toArray()}}const wf=new Uint8Array(0);class bf{constructor(e,t){this.databaseId=t,this.an=new yf,this.un=new Mu((e=>fu(e)),((e,t)=>pu(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:_c(r)};return _f(e).put(i)}return sc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Va(t),""],!1,!0);return _f(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Ic(r.parent))}return n}))}addFieldIndex(e,t){const n=Ef(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=If(e);return i.next((e=>{n.put(Hd(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Ef(e),r=If(e),i=Tf(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Ef(e),n=Tf(e),r=If(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return sc.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new af(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Tf(e);let r=!0;const i=new Map;return sc.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Gu();const r=[];return sc.forEach(i,((i,s)=>{va("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(fu(t)));const o=function(e,t){const n=Qa(t);if(void 0===n)return null;for(const r of gu(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of Ya(t))for(const t of gu(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of Ya(t)){const t=0===i.kind?vu(e,i.fieldPath,e.startAt):yu(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new zl(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Ya(t)){const t=0===i.kind?yu(e,i.fieldPath,e.endAt):vu(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new zl(n,r)}(s,i),u=this.hn(i,s,c),h=this.hn(i,s,l),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,c.inclusive,h,l.inclusive,d);return sc.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=Ka.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return sc.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:lf(Ql.create(e.filters,"and")).map((t=>du(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/c]):wf,h=this.En(e,a,n[u%c],r),d=this.dn(e,a,i[u%c],s),f=o.map((t=>this.En(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}En(e,t,n,r){const i=new rf(e,Ka.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new rf(e,Ka.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new af(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return sc.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new nl(Wa.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new nf;for(const r of Ya(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);Xd.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new nf;return Xd.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new nf;return Xd.bt.Pt(kl(this.databaseId,t),n.Ht(function(e){const t=Ya(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new nf);let i=0;for(const s of Ya(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&Al(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);Xd.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new nf;n.seed(e.Wt()),Xd.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof Gl&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Ef(e),r=If(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return sc.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Ja(t.sequenceNumber,new ec(Ud(t.readTime),new Ka(Ic(t.documentKey)),t.largestBatchId)):Ja.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Xa(Wa.fromServerFormat(t),n)}));return new Ga(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ua(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Ef(e),i=If(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>sc.forEach(t,(t=>i.put(Hd(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return sc.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?sc.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),sc.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?sc.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Tf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Tf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Tf(e);let i=new nl(sf);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new rf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new nl(sf);const r=this.An(t,e);if(null==r)return n;const i=Qa(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Al(s))for(const i of s.arrayValue.values||[])n=n.add(new rf(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new rf(t.indexId,e.key,wf,r));return n}wn(e,t,n,r,i){va("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=il(s),c=il(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=il(o)):t?(i(a),a=il(s)):(a=il(s),c=il(o))}}(r,i,sf,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),sc.waitFor(s)}gn(e){let t=1;return If(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>sf(e,t))).filter(((e,t,n)=>!t||0!==sf(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=sf(s,e),i=sf(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,wf,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,wf,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return sf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Sf)}getMinOffset(e,t){return sc.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||_a())))).next(Sf)}}function _f(e){return Yc(e,"collectionParents")}function Tf(e){return Yc(e,"indexEntries")}function Ef(e){return Yc(e,"indexConfiguration")}function If(e){return Yc(e,"indexState")}function Sf(e){Ta(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;tc(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ec(t.readTime,t.documentKey,n)}const kf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Cf{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Cf(e,Cf.DEFAULT_COLLECTION_PERCENTILE,Cf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Af(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{Ta(1===a)})));const l=[];for(const u of n.mutations){const e=Cc(t,u.key.path,n.batchId);s.push(i.delete(e)),l.push(u.key)}return sc.waitFor(s).next((()=>l))}function xf(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw _a();t=e.noDocument}return JSON.stringify(t).length}Cf.DEFAULT_COLLECTION_PERCENTILE=10,Cf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cf.DEFAULT=new Cf(41943040,Cf.DEFAULT_COLLECTION_PERCENTILE,Cf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cf.DISABLED=new Cf(-1,0,0);class Pf{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Ta(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Pf(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rf(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Of(e),s=Rf(e);return s.add({}).next((o=>{Ta("number"==typeof o);const a=new Ah(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>yd(e.ct,t))),i=n.mutations.map((t=>yd(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new nl(((e,t)=>Ua(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Cc(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,Ac))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),sc.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return Rf(e).get(t).next((e=>e?(Ta(e.userId===this.userId),Fd(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?sc.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Rf(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Ta(t.batchId>=n),i=Fd(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Rf(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rf(e).W("userMutationsIndex",t).next((e=>e.map((e=>Fd(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=kc(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Of(e).Y({range:r},((n,r,s)=>{const[o,a,c]=n,l=Ic(a);if(o===this.userId&&t.path.isEqual(l))return Rf(e).get(c).next((e=>{if(!e)throw _a();Ta(e.userId===this.userId),i.push(Fd(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new nl(Ua);const r=[];return t.forEach((t=>{const i=kc(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Of(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,c=Ic(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),sc.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=kc(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new nl(Ua);return Of(e).Y({range:s},((e,t,i)=>{const[s,a,c]=e,l=Ic(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Rf(e).get(t).next((e=>{if(null===e)throw _a();Ta(e.userId===this.userId),n.push(Fd(this.serializer,e))})))})),sc.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Af(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),sc.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return sc.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Of(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Ic(e[1]);r.push(t)}else n.done()})).next((()=>{Ta(0===r.length)}))}))}containsKey(e,t){return Nf(e,this.userId,t)}xn(e){return Df(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Nf(e,t,n){const r=kc(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Of(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Rf(e){return Yc(e,"mutations")}function Of(e){return Yc(e,"documentMutations")}function Df(e){return Yc(e,"mutationQueues")}class Lf{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Lf(0)}static Bn(){return new Lf(-1)}}class Mf{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new Lf(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>za.fromTimestamp(new ja(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Uf(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(Ta(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Uf(e).Y(((s,o)=>{const a=Vd(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>sc.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Uf(e).Y(((e,n)=>{const r=Vd(n);t(r)}))}Ln(e){return Ff(e).get("targetGlobalKey").next((e=>(Ta(null!==e),e)))}kn(e,t){return Ff(e).put("targetGlobalKey",t)}qn(e,t){return Uf(e).put(jd(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=fu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Uf(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Vd(n);pu(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Vf(e);return t.forEach((t=>{const s=_c(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),sc.waitFor(r)}removeMatchingKeys(e,t,n){const r=Vf(e);return sc.forEach(t,(t=>{const i=_c(t.path);return sc.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Vf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Vf(e);let i=Gu();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Ic(e[1]),s=new Ka(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=_c(t.path),r=IDBKeyRange.bound([n],[Va(n)],!1,!0);let i=0;return Vf(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Uf(e).get(t).next((e=>e?Vd(e):null))}}function Uf(e){return Yc(e,"targets")}function Ff(e){return Yc(e,"targetGlobal")}function Vf(e){return Yc(e,"targetDocuments")}function jf(e,t){let[n,r]=e,[i,s]=t;const o=Ua(n,i);return 0===o?Ua(r,s):o}class zf{constructor(e){this.Kn=e,this.buffer=new nl(jf),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();jf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Bf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){va("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){uc(e)?va("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await ic(e)}await this.zn(3e5)}))}}class qf{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return sc.resolve(vc._e);const n=new zf(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(va("LruGarbageCollector","Garbage collection skipped; disabled"),sc.resolve(kf)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(va("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),kf):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(va("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),ga()<=H.DEBUG&&va("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),sc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Hf(e,t){return new qf(e,t)}class Wf{constructor(e,t){this.db=e,this.garbageCollector=Hf(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return Kf(e,n)}removeReference(e,t,n){return Kf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Kf(e,t)}er(e,t){return function(e,t){let n=!1;return Df(e).Z((r=>Nf(e,r,t).next((e=>(e&&(n=!0),sc.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,za.min()),Vf(e).delete(function(e){return[0,_c(e.path)]}(s)))))}));r.push(t)}})).next((()=>sc.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Kf(e,t)}Xn(e,t){const n=Vf(e);let r,i=vc._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:c}=n;0===s?(i!==vc._e&&t(new Ka(Ic(r)),i),i=c,r=a):i=vc._e})).next((()=>{i!==vc._e&&t(new Ka(Ic(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Kf(e,t){return Vf(e).put(function(e,t){return{targetId:0,path:_c(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Gf{constructor(){this.changes=new Mu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?sc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Qf{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return $f(e).put(n)}removeEntry(e,t,n){return $f(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ld(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=jl.newInvalidDocument(t);return $f(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Zf(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:jl.newInvalidDocument(t)};return $f(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Zf(t))},((e,r)=>{n={document:this.nr(t,r),size:xf(r)}})).next((()=>n))}getEntries(e,t){let n=Fu();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Fu(),r=new Zc(Ka.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,xf(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return sc.resolve();let r=new nl(tp);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Zf(r.first()),Zf(r.last())),s=r.getIterator();let o=s.getNext();return $f(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Ka.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&tp(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(Zf(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Ld(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $f(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Fu();for(const i of e){const e=this.nr(Ka.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Ru(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Fu();const s=ep(t,n),o=ep(t,ec.max());return $f(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(Ka.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Xf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Jf(e).get("remoteDocumentGlobalKey").next((e=>(Ta(!!e),e)))}tr(e,t){return Jf(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=vd(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Ka.fromSegments(t.noDocument.path),r=Ud(t.noDocument.readTime);n=jl.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return _a();{const e=Ka.fromSegments(t.unknownDocument.path),r=Ud(t.unknownDocument.version);n=jl.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ja(e[0],e[1]);return za.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(za.min()))return e}return jl.newInvalidDocument(e)}}function Yf(e){return new Qf(e)}class Xf extends Gf{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Mu((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new nl(((e,t)=>Ua(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Dd(this.ar.serializer,s);r=r.add(i.path.popLast());const c=xf(a);n+=c-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Dd(this.ar.serializer,s.convertToNoDocument(za.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),sc.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Jf(e){return Yc(e,"remoteDocumentGlobal")}function $f(e){return Yc(e,"remoteDocumentsV14")}function Zf(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function ep(e,t){const n=t.documentKey.path.toArray();return[e,Ld(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function tp(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Ua(n[s],r[s]),i)return i;return i=Ua(n.length,r.length),i||(i=Ua(n[n.length-2],r[r.length-2]),i||Ua(n[n.length-1],r[r.length-1]))}class np{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class rp{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&yh(n.mutation,e,sl.empty(),ja.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Gu()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gu();const r=Bu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=ju();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Bu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Gu())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Fu();const s=Hu(),o=Hu();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Th)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),yh(o.mutation,t,o.mutation.getFieldMask(),ja.now())):s.set(t.key,sl.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new np(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Hu();let r=new Zc(((e,t)=>e-t)),i=Gu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||sl.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Gu()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=qu();c.forEach((e=>{if(!i.has(e)){const r=gh(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return sc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ka.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Eu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):sc.resolve(Bu());let o=-1,a=i;return s.next((t=>sc.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?sc.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Gu()))).next((e=>({batchId:o,changes:zu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ka(t)).next((e=>{let t=ju();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=ju();return this.indexManager.getCollectionParents(e,i).next((o=>sc.forEach(o,(o=>{const a=function(e,t){return new wu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,jl.newInvalidDocument(r)))}));let n=ju();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&yh(s.mutation,r,sl.empty(),ja.now()),Ru(t,r)&&(n=n.insert(e,r))})),n}))}}class ip{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return sc.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:od(e.createTime)}}(t)),sc.resolve()}getNamedQuery(e,t){return sc.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:zd(e.bundledQuery),readTime:od(e.readTime)}}(t)),sc.resolve()}}class sp{constructor(){this.overlays=new Zc(Ka.comparator),this.hr=new Map}getOverlay(e,t){return sc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Bu();return sc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),sc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),sc.resolve()}getOverlaysForCollection(e,t,n){const r=Bu(),i=t.length+1,s=new Ka(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return sc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Zc(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Bu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Bu(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return sc.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ph(t,n));let i=this.hr.get(t);void 0===i&&(i=Gu(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class op{constructor(){this.Pr=new nl(ap.Ir),this.Tr=new nl(ap.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new ap(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new ap(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new Ka(new qa([])),n=new ap(t,e),r=new ap(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Ka(new qa([])),n=new ap(t,e),r=new ap(t,e+1);let i=Gu();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new ap(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ap{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Ka.comparator(e.key,t.key)||Ua(e.pr,t.pr)}static Er(e,t){return Ua(e.pr,t.pr)||Ka.comparator(e.key,t.key)}}class cp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new nl(ap.Ir)}checkEmpty(e){return sc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ah(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new ap(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return sc.resolve(s)}lookupMutationBatch(e,t){return sc.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return sc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return sc.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return sc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ap(t,0),r=new ap(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),sc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new nl(Ua);return t.forEach((e=>{const t=new ap(e,0),r=new ap(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),sc.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ka.isDocumentKey(i)||(i=i.child(""));const s=new ap(new Ka(i),0);let o=new nl(Ua);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),sc.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ta(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return sc.forEach(t.mutations,(r=>{const i=new ap(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new ap(t,0),r=this.wr.firstAfterOrEqual(n);return sc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,sc.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lp{constructor(e){this.vr=e,this.docs=new Zc(Ka.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return sc.resolve(n?n.document.mutableCopy():jl.newInvalidDocument(t))}getEntries(e,t){let n=Fu();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():jl.newInvalidDocument(e))})),sc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Fu();const s=t.path,o=new Ka(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||tc(Za(o),n)<=0||(r.has(o.key)||Ru(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return sc.resolve(i)}getAllFromCollectionGroup(e,t,n,r){_a()}Fr(e,t){return sc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new up(this)}getSize(e){return sc.resolve(this.size)}}class up extends Gf{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),sc.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class hp{constructor(e){this.persistence=e,this.Mr=new Mu((e=>fu(e)),pu),this.lastRemoteSnapshotVersion=za.min(),this.highestTargetId=0,this.Or=0,this.Nr=new op,this.targetCount=0,this.Br=Lf.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),sc.resolve()}getLastRemoteSnapshotVersion(e){return sc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return sc.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),sc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),sc.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Lf(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,sc.resolve()}updateTargetData(e,t){return this.qn(t),sc.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,sc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),sc.waitFor(i).next((()=>r))}getTargetCount(e){return sc.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return sc.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),sc.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),sc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),sc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return sc.resolve(n)}containsKey(e,t){return sc.resolve(this.Nr.containsKey(t))}}class dp{constructor(e,t){this.Lr={},this.overlays={},this.kr=new vc(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new hp(this),this.indexManager=new vf,this.remoteDocumentCache=function(e){return new lp(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Od(t),this.$r=new ip(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new cp(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){va("MemoryPersistence","Starting transaction:",e);const r=new fp(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return sc.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class fp extends rc{constructor(e){super(),this.currentSequenceNumber=e}}class pp{constructor(e){this.persistence=e,this.zr=new op,this.jr=null}static Hr(e){return new pp(e)}get Jr(){if(this.jr)return this.jr;throw _a()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),sc.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),sc.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),sc.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return sc.forEach(this.Jr,(n=>{const r=Ka.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,za.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return sc.or([()=>sc.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class mp{constructor(e){this.serializer=e}N(e,t,n,r){const i=new oc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Sc,{unique:!0}),e.createObjectStore("documentMutations")}(e),gp(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=sc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),gp(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:za.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Sc,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return sc.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:jc});t.createIndex("collectionPathOverlayIndex",zc,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Bc,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:xc});t.createIndex("documentKeyIndex",Pc),t.createIndex("collectionGroupIndex",Nc)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Mc}).createIndex("sequenceNumberIndex",Uc,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Fc}).createIndex("documentKeyIndex",Vc,{unique:!1})}(e)))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=xf(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>sc.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>sc.forEach(n,(n=>{Ta(n.userId===t.userId);const r=Fd(this.serializer,n);return Af(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new qa(n),o=function(e){return[0,_c(e)]}(s);r.push(t.get(o).next((n=>n?sc.resolve():(n=>t.put({targetId:0,path:_c(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>sc.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Lc});const n=t.store("collectionParents"),r=new yf,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:_c(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new qa(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=Ic(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=Vd(n),i=jd(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new Ka(qa.fromString(e.document.name).popFirst(5)):e.noDocument?Ka.fromSegments(e.noDocument.path):e.unknownDocument?Ka.fromSegments(e.unknownDocument.path):_a()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>sc.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=Yf(this.serializer),i=new dp(pp.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Gu();Fd(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),sc.forEach(n,((e,n)=>{const s=new fa(n),o=Qd.lt(this.serializer,s),a=i.getIndexManager(s),c=Pf.lt(s,this.serializer,a,i.referenceDelegate);return new rp(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Qc(t,vc._e),e).next()}))}))}}function gp(e){e.createObjectStore("targetDocuments",{keyPath:Oc}).createIndex("documentTargetsIndex",Dc,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Rc,{unique:!0}),e.createObjectStore("targetGlobal")}const vp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yp{constructor(e,t,n,r,i,s,o,a,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=c,this.ai=l,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!yp.D())throw new Sa(Ia.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Wf(this,r),this.Ti=t+"main",this.serializer=new Od(a),this.Ei=new ac(this.Ti,this.ui,new mp(this.serializer)),this.Qr=new Mf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Yf(this.serializer),this.$r=new Wd,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===l&&ya("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Sa(Ia.FAILED_PRECONDITION,vp);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new vc(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>bp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(uc(e))return va("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return va("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return wp(e).get("owner").next((e=>sc.resolve(this.Si(e))))}bi(e){return bp(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Yc(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return sc.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?sc.resolve(!0):wp(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Sa(Ia.FAILED_PRECONDITION,vp);return!1}}return!(!this.networkEnabled||!this.inForeground)||bp(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&va("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Qc(e,vc._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Bi()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>bp(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Pf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bf(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Qd.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){va("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?Gc:14===e?Kc:13===e?Wc:12===e?Hc:11===e?qc:void _a()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new Qc(r,this.kr?this.kr.next():vc._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw ya("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new Sa(Ia.FAILED_PRECONDITION,nc);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return wp(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Sa(Ia.FAILED_PRECONDITION,vp)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wp(e).put("owner",t)}static D(){return ac.D()}yi(e){const t=wp(e);return t.get("owner").next((e=>this.Si(e)?(va("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):sc.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(ya("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;I()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return va("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ya("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){ya("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function wp(e){return Yc(e,"owner")}function bp(e){return Yc(e,"clientMetadata")}function _p(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Tp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Gu(),r=Gu();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Tp(e,t.fromCache,n,r)}}class Ep{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ip{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=I()?8:ac.v(y())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Ep;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(ga()<=H.DEBUG&&va("QueryEngine","SDK will not create cache indexes for query:",Nu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),sc.resolve()):(ga()<=H.DEBUG&&va("QueryEngine","Query:",Nu(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(ga()<=H.DEBUG&&va("QueryEngine","The SDK decides to create cache indexes for query:",Nu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Su(t))):sc.resolve())}ji(e,t){if(Tu(t))return sc.resolve(null);let n=Su(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Au(t,null,"F"),n=Su(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Gu(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,Au(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Tu(t)||r.isEqual(za.min())?sc.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?sc.resolve(null):(ga()<=H.DEBUG&&va("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Nu(t)),this.es(e,s,t,$a(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new nl(Du(e));return t.forEach(((t,r)=>{Ru(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return ga()<=H.DEBUG&&va("QueryEngine","Using full collection scan to execute query:",Nu(t)),this.zi.getDocumentsMatchingQuery(e,t,ec.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Sp{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Zc(Ua),this.rs=new Mu((e=>fu(e)),pu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rp(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function kp(e,t,n,r){return new Sp(e,t,n,r)}async function Cp(e,t){const n=Ea(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Gu();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Ap(e){const t=Ea(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function xp(e,t,n){let r=Gu(),i=Gu();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Fu();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(za.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):va("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Pp(e,t){const n=Ea(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Np(e,t){const n=Ea(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,sc.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Rd(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Rp(e,t,n){const r=Ea(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!uc(e))throw e;va("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Op(e,t,n){const r=Ea(e);let i=za.min(),s=Gu();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Ea(e),i=r.rs.get(n);return void 0!==i?sc.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Su(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:za.min(),n?s:Gu()))).next((e=>(Mp(r,Ou(t),e),{documents:e,hs:s})))))}function Dp(e,t){const n=Ea(e),r=Ea(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function Lp(e,t){const n=Ea(e),r=n.ss.get(t)||za.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,$a(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Mp(n,t,e),e)))}function Mp(e,t,n){let r=e.ss.get(t)||za.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Up(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gu();const r=await Np(e,Su(zd(t.bundledQuery))),i=Ea(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=od(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(al.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function Fp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Vp(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function jp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class zp{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Sa(r.error.code,r.error.message))),s?new zp(e,t,r.state,i):(ya("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bp{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Sa(n.error.code,n.error.message))),i?new Bp(e,n.state,r):(ya("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Yu();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=bc(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new qp(e,i):(ya("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Hp{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Hp(t.clientId,t.onlineState):(ya("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Wp{constructor(){this.activeTargetIds=Yu()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Kp{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Zc(Ua),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Fp(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Wp),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(Fp(this.persistenceKey,n));if(e){const t=qp.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,n){this.Bs(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(jp(this.persistenceKey,e));if(n){const r=Bp.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jp(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return va("SharedClientState","READ",e,t),t}setItem(e,t){va("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){va("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(va("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void ya("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=vc._e;if(null!=e)try{const n=JSON.parse(e);Ta("number"==typeof n),t=n}catch(e){ya("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==vc._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,n){const r=new zp(this.currentUser,e,t,n),i=Vp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Ls(e){const t=Vp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=jp(this.persistenceKey,e),i=new Bp(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return qp.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return zp.Es(new fa(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return Bp.Es(r,t)}xs(e){return Hp.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);va("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Yu();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Gp{constructor(){this.no=new Wp,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Wp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Qp{io(e){}shutdown(){}}class Yp{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){va("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){va("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Xp=null;function Jp(){return null===Xp?Xp=268435456+Math.round(2147483648*Math.random()):Xp++,"0x"+Xp.toString(16)}const $p={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Zp{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const em="WebChannelConnection";class tm extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=Jp(),o=this.bo(e,t.toUriEncodedString());va("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(va("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw wa("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+pa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=$p[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=Jp();return new Promise(((s,o)=>{const a=new la;a.setWithCredentials(!0),a.listenOnce(sa.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case ia.NO_ERROR:const t=a.getResponseJson();va(em,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case ia.TIMEOUT:va(em,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Sa(Ia.DEADLINE_EXCEEDED,"Request time out"));break;case ia.HTTP_ERROR:const n=a.getStatus();if(va(em,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ia).indexOf(t)>=0?t:Ia.UNKNOWN}(t.status);o(new Sa(e,t.message))}else o(new Sa(Ia.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Sa(Ia.UNAVAILABLE,"Connection failed."));break;default:_a()}}finally{va(em,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);va(em,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}Fo(e,t,n){const r=Jp(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=na(),o=ra(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");va(em,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new Zp({lo:t=>{d?va(em,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(va(em,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),va(em,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,ca.EventType.OPEN,(()=>{d||va(em,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,ca.EventType.CLOSE,(()=>{d||(d=!0,va(em,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(u,ca.EventType.ERROR,(t=>{d||(d=!0,wa(em,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new Sa(Ia.UNAVAILABLE,"The operation could not be completed")))})),p(u,ca.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Ta(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){va(em,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Rh[e];if(void 0!==t)return Lh(t)}(t),i=o.message;void 0===n&&(n=Ia.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new Sa(n,i)),u.close()}else va(em,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,oa.STAT_EVENT,(t=>{t.stat===aa.PROXY?va(em,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===aa.NOPROXY&&va(em,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function nm(){return"undefined"!=typeof window?window:null}function rm(){return"undefined"!=typeof document?document:null}function im(e){return new td(e,!0)}class sm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&va("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class om{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new sm(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Ia.RESOURCE_EXHAUSTED?(ya(t.toString()),ya("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Ia.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new Sa(Ia.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return va("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(va("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class am extends om{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:_a()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ta(void 0===t||"string"==typeof t),al.fromBase64String(t||"")):(Ta(void 0===t||t instanceof Uint8Array),al.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ia.UNKNOWN:Lh(e.code);return new Sa(t,e.message||"")}(o);n=new Gh(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=hd(e,r.document.name),s=od(r.document.updateTime),o=r.document.createTime?od(r.document.createTime):za.min(),a=new Fl({mapValue:{fields:r.document.fields}}),c=jl.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Wh(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=hd(e,r.document),s=r.readTime?od(r.readTime):za.min(),o=jl.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Wh([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=hd(e,r.document),s=r.removedTargetIds||[];n=new Wh([],s,i,null)}else{if(!("filter"in t))return _a();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Nh(r,i),o=e.targetId;n=new Kh(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return za.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?za.min():t.readTime?od(t.readTime):za.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=pd(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=mu(r)?{documents:bd(e,r)}:{query:_d(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=id(e,t.resumeToken);const r=nd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(za.min())>0){n.readTime=rd(e,t.snapshotVersion.toTimestamp());const r=nd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _a()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=pd(this.serializer),t.removeTarget=e,this.t_(t)}}class cm extends om{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Ta(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Ta(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?od(e.updateTime):od(t);return n.isEqual(za.min())&&(n=od(t)),new dh(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=od(e.commitTime);return this.listener.T_(n,t)}return Ta(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=pd(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>yd(this.serializer,e)))};this.t_(t)}}class lm extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new Sa(Ia.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,cd(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ia.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Sa(Ia.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,cd(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ia.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Sa(Ia.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class um{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(ya(t),this.g_=!1):va("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class hm{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{bm(this)&&(va("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ea(e);t.v_.add(4),await fm(t),t.x_.set("Unknown"),t.v_.delete(4),await dm(t)}(this))}))})),this.x_=new um(n,r)}}async function dm(e){if(bm(e))for(const t of e.F_)await t(!0)}async function fm(e){for(const t of e.F_)await t(!1)}function pm(e,t){const n=Ea(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),wm(n)?ym(n):Fm(n).Jo()&&gm(n,t))}function mm(e,t){const n=Ea(e),r=Fm(n);n.C_.delete(t),r.Jo()&&vm(n,t),0===n.C_.size&&(r.Jo()?r.Xo():bm(n)&&n.x_.set("Unknown"))}function gm(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(za.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Fm(e).c_(t)}function vm(e,t){e.O_.Oe(t),Fm(e).l_(t)}function ym(e){e.O_=new Yh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Fm(e).start(),e.x_.p_()}function wm(e){return bm(e)&&!Fm(e).Ho()&&e.C_.size>0}function bm(e){return 0===Ea(e).v_.size}function _m(e){e.O_=void 0}async function Tm(e){e.C_.forEach(((t,n)=>{gm(e,t)}))}async function Em(e,t){_m(e),wm(e)?(e.x_.S_(t),ym(e)):e.x_.set("Unknown")}async function Im(e,t,n){if(e.x_.set("Online"),t instanceof Gh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){va("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Sm(e,n)}else if(t instanceof Wh?e.O_.$e(t):t instanceof Kh?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(za.min()))try{const t=await Ap(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(al.EMPTY_BYTE_STRING,r.snapshotVersion)),vm(e,t);const i=new Rd(r.target,t,n,r.sequenceNumber);gm(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){va("RemoteStore","Failed to raise snapshot:",t),await Sm(e,t)}}async function Sm(e,t,n){if(!uc(t))throw t;e.v_.add(1),await fm(e),e.x_.set("Offline"),n||(n=()=>Ap(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{va("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await dm(e)}))}function km(e,t){return t().catch((n=>Sm(e,n,t)))}async function Cm(e){const t=Ea(e),n=Vm(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Am(t);)try{const e=await Pp(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,xm(t,e)}catch(e){await Sm(t,e)}Pm(t)&&Nm(t)}function Am(e){return bm(e)&&e.D_.length<10}function xm(e,t){e.D_.push(t);const n=Vm(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Pm(e){return bm(e)&&!Vm(e).Ho()&&e.D_.length>0}function Nm(e){Vm(e).start()}async function Rm(e){Vm(e).d_()}async function Om(e){const t=Vm(e);for(const n of e.D_)t.I_(n.mutations)}async function Dm(e,t,n){const r=e.D_.shift(),i=xh.from(r,t,n);await km(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Cm(e)}async function Lm(e,t){t&&Vm(e).P_&&await async function(e,t){if(function(e){return Dh(e)&&e!==Ia.ABORTED}(t.code)){const n=e.D_.shift();Vm(e).Zo(),await km(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Cm(e)}}(e,t),Pm(e)&&Nm(e)}async function Mm(e,t){const n=Ea(e);n.asyncQueue.verifyOperationInProgress(),va("RemoteStore","RemoteStore received new credentials");const r=bm(n);n.v_.add(3),await fm(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await dm(n)}async function Um(e,t){const n=Ea(e);t?(n.v_.delete(2),await dm(n)):t||(n.v_.add(2),await fm(n),n.x_.set("Unknown"))}function Fm(e){return e.N_||(e.N_=function(e,t,n){const r=Ea(e);return r.R_(),new am(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Tm.bind(null,e),To:Em.bind(null,e),u_:Im.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),wm(e)?ym(e):e.x_.set("Unknown")):(await e.N_.stop(),_m(e))}))),e.N_}function Vm(e){return e.B_||(e.B_=function(e,t,n){const r=Ea(e);return r.R_(),new cm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Rm.bind(null,e),To:Lm.bind(null,e),E_:Om.bind(null,e),T_:Dm.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await Cm(e)):(await e.B_.stop(),e.D_.length>0&&(va("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class jm{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ka,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new jm(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Sa(Ia.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zm(e,t){if(ya("AsyncQueue","".concat(t,": ").concat(e)),uc(e))return new Sa(Ia.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Bm{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ka.comparator(t.key,n.key):(e,t)=>Ka.comparator(e.key,t.key),this.keyedMap=ju(),this.sortedSet=new Zc(this.comparator)}static emptySet(e){return new Bm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Bm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class qm{constructor(){this.L_=new Zc(Ka.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):_a():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Hm{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Hm(e,t,Bm.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Wm{constructor(){this.q_=void 0,this.Q_=[]}}class Km{constructor(){this.queries=new Mu((e=>Pu(e)),xu),this.onlineState="Unknown",this.K_=new Set}}async function Gm(e,t){const n=Ea(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Wm),i)try{s.q_=await n.onListen(r)}catch(e){const n=zm(e,"Initialization of query '".concat(Nu(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&Jm(n)}async function Qm(e,t){const n=Ea(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Ym(e,t){const n=Ea(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&Jm(n)}function Xm(e,t,n){const r=Ea(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function Jm(e){e.K_.forEach((e=>{e.next()}))}class $m{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Hm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=Hm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class Zm{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class eg{constructor(e){this.serializer=e}Ps(e){return hd(this.serializer,e)}Is(e){return e.metadata.exists?vd(this.serializer,e.document,!1):jl.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return od(e)}}class tg{constructor(e,t,n){this.ta=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ng(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const n=qa.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,n=new eg(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Gu()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Ea(e);let s=Gu(),o=Fu();for(const l of n){const e=t.Ps(l.metadata.name);l.document&&(s=s.add(e));const n=t.Is(l);n.setReadTime(t.Ts(l.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=await Np(i,function(e){return Su(_u(qa.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>xp(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Qr.addMatchingKeys(e,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new eg(this.serializer),this.documents,this.ta.id),t=this.ra(this.documents);for(const n of this.queries)await Up(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function ng(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class rg{constructor(e){this.key=e}}class ig{constructor(e){this.key=e}}class sg{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Gu(),this.mutatedKeys=Gu(),this.ua=Du(e),this.ca=new Bm(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new qm,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=Ru(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ia(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ua(u,a)>0||c&&this.ua(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:s,Pa:n,Xi:o,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _a()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const o=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,c=a!==this._a;return this._a=a,0!==s.length||c?{snapshot:new Hm(this.query,e.ca,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new qm,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Gu(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new ig(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new rg(n))})),t}Ra(e){this.oa=e.hs,this.aa=Gu();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return Hm.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class og{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ag{constructor(e){this.key=e,this.ma=!1}}class cg{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Mu((e=>Pu(e)),xu),this.pa=new Map,this.ya=new Set,this.wa=new Zc(Ka.comparator),this.Sa=new Map,this.ba=new op,this.Da={},this.Ca=new Map,this.va=Lf.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function lg(e,t){const n=Lg(e);let r,i;const s=n.ga.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const e=await Np(n.localStore,Su(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await ug(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&pm(n.remoteStore,e)}return i}async function ug(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await Op(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return _g(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const s=await Op(e.localStore,t,!0),o=new sg(t,s.hs),a=o.ha(s.documents),c=Hh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);_g(e,n,l.da);const u=new og(t,n,o);return e.ga.set(t,u),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),l.snapshot}async function hg(e,t){const n=Ea(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!xu(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Rp(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),mm(n.remoteStore,r.targetId),wg(n,r.targetId)})).catch(ic)):(wg(n,r.targetId),await Rp(n.localStore,r.targetId,!0))}async function dg(e,t){const n=Ea(e);try{const e=await function(e,t){const n=Ea(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(al.EMPTY_BYTE_STRING,za.min()).withLastLimboFreeSnapshotVersion(za.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(e,l))}));let a=Fu(),c=Gu();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(xp(e,s,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!r.isEqual(za.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return sc.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(Ta(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?Ta(r.ma):e.removedDocuments.size>0&&(Ta(r.ma),r.ma=!1))})),await Ig(n,e,t)}catch(e){await ic(e)}}function fg(e,t,n){const r=Ea(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Ea(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&Jm(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function pg(e,t,n){const r=Ea(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),s=i&&i.key;if(s){let e=new Zc(Ka.comparator);e=e.insert(s,jl.newNoDocument(s,za.min()));const n=Gu().add(s),i=new qh(za.min(),new Map,new Zc(Ua),e,n);await dg(r,i),r.wa=r.wa.remove(s),r.Sa.delete(t),Eg(r)}else await Rp(r.localStore,t,!1).then((()=>wg(r,t,n))).catch(ic)}async function mg(e,t){const n=Ea(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ea(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=sc.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Ta(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Gu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);yg(n,r,null),vg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ig(n,e)}catch(e){await ic(e)}}async function gg(e,t,n){const r=Ea(e);try{const e=await function(e,t){const n=Ea(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ta(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);yg(r,t,n),vg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ig(r,e)}catch(n){await ic(n)}}function vg(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function yg(e,t,n){const r=Ea(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function wg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||bg(e,t)}))}function bg(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(mm(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Eg(e))}function _g(e,t,n){for(const r of n)r instanceof rg?(e.ba.addReference(r.key,t),Tg(e,r)):r instanceof ig?(va("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||bg(e,r.key)):_a()}function Tg(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(va("SyncEngine","New document in limbo: "+n),e.ya.add(r),Eg(e))}function Eg(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new Ka(qa.fromString(t)),r=e.va.next();e.Sa.set(r,new ag(n)),e.wa=e.wa.insert(n,r),pm(e.remoteStore,new Rd(Su(_u(n.path)),r,"TargetPurposeLimboResolution",vc._e))}}async function Ig(e,t,n){const r=Ea(e),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{o.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Tp.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.fa.u_(i),await async function(e,t){const n=Ea(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>sc.forEach(t,(t=>sc.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>sc.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!uc(e))throw e;va("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function Sg(e,t){const n=Ea(e);if(!n.currentUser.isEqual(t)){va("SyncEngine","User change. New user:",t.toKey());const e=await Cp(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new Sa(Ia.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ig(n,e.us)}}function kg(e,t){const n=Ea(e),r=n.Sa.get(t);if(r&&r.ma)return Gu().add(r.key);{let e=Gu();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}async function Cg(e,t){const n=Ea(e),r=await Op(n.localStore,t.query,!0),i=t.view.Ra(r);return n.isPrimaryClient&&_g(n,t.targetId,i.da),i}async function Ag(e,t){const n=Ea(e);return Lp(n.localStore,t).then((e=>Ig(n,e)))}async function xg(e,t,n,r){const i=Ea(e),s=await function(e,t){const n=Ea(e),r=Ea(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):sc.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Cm(i.remoteStore):"acknowledged"===n||"rejected"===n?(yg(i,t,r||null),vg(i,t),function(e,t){Ea(Ea(e).mutationQueue).Mn(t)}(i.localStore,t)):_a(),await Ig(i,s)):va("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Pg(e,t,n){const r=Ea(e),i=[],s=[];for(const o of t){let e;const t=r.pa.get(o);if(t&&0!==t.length){e=await Np(r.localStore,Su(t[0]));for(const e of t){const t=r.ga.get(e),n=await Cg(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Dp(r.localStore,o);e=await Np(r.localStore,t),await ug(r,Ng(t),o,!1,e.resumeToken)}i.push(e)}return r.fa.u_(s),i}function Ng(e){return bu(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Rg(e){return function(e){return Ea(Ea(e).persistence).Li()}(Ea(e).localStore)}async function Og(e,t,n,r){const i=Ea(e);if(i.Fa)return void va("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Lp(i.localStore,Ou(s[0])),r=qh.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,al.EMPTY_BYTE_STRING);await Ig(i,e,r);break}case"rejected":await Rp(i.localStore,t,!0),wg(i,t,r);break;default:_a()}}async function Dg(e,t,n){const r=Lg(e);if(r.Fa){for(const e of t){if(r.pa.has(e)){va("SyncEngine","Adding an already active target "+e);continue}const t=await Dp(r.localStore,e),n=await Np(r.localStore,t);await ug(r,Ng(t),n.targetId,!1,n.resumeToken),pm(r.remoteStore,n)}for(const e of n)r.pa.has(e)&&await Rp(r.localStore,e,!1).then((()=>{mm(r.remoteStore,e),wg(r,e)})).catch(ic)}}function Lg(e){const t=Ea(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=dg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=kg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=pg.bind(null,t),t.fa.u_=Ym.bind(null,t.eventManager),t.fa.xa=Xm.bind(null,t.eventManager),t}function Mg(e){const t=Ea(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=mg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gg.bind(null,t),t}class Ug{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=im(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return kp(this.persistence,new Ip,e.initialUser,this.serializer)}createPersistence(e){return new dp(pp.Hr,this.serializer)}createSharedClientState(e){return new Gp}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Fg extends Ug{constructor(e,t,n){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await Mg(this.Na.syncEngine),await Cm(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return kp(this.persistence,new Ip,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Bf(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new gc(t,this.persistence);return new mc(e.asyncQueue,n)}createPersistence(e){const t=_p(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Cf.withCacheSize(this.cacheSizeBytes):Cf.DEFAULT;return new yp(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,nm(),rm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Gp}}class Vg extends Fg{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Na.syncEngine;this.sharedClientState instanceof Kp&&(this.sharedClientState.syncEngine={Zs:xg.bind(null,t),Xs:Og.bind(null,t),eo:Dg.bind(null,t),Li:Rg.bind(null,t),Ys:Ag.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Ea(e);if(Lg(n),Mg(n),!0===t&&!0!==n.Fa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Pg(n,e.toArray());n.Fa=!0,await Um(n.remoteStore,!0);for(const r of t)pm(n.remoteStore,r)}else if(!1===t&&!1!==n.Fa){const e=[];let t=Promise.resolve();n.pa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(wg(n,i),Rp(n.localStore,i,!0)))),mm(n.remoteStore,i)})),await t,await Pg(n,e),function(e){const t=Ea(e);t.Sa.forEach(((e,n)=>{mm(t.remoteStore,n)})),t.ba.mr(),t.Sa=new Map,t.wa=new Zc(Ka.comparator)}(n),n.Fa=!1,await Um(n.remoteStore,!1)}}(this.Na.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=nm();if(!Kp.D(t))throw new Sa(Ia.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=_p(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Kp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class jg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>fg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sg.bind(null,this.syncEngine),await Um(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Km}createDatastore(e){const t=im(e.databaseInfo.databaseId),n=function(e){return new tm(e)}(e.databaseInfo);return function(e,t,n,r){return new lm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new hm(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>fg(this.syncEngine,e,0)),Yp.D()?new Yp:new Qp)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new cg(e,t,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Ea(e);va("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await fm(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function zg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Bg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):ya("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class qg{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new ka,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((e=>{e&&e.ea()?this.metadata.resolve(e.X_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(e=>this.metadata.reject(e)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(null===e)return null;const t=this.qa.decode(e),n=Number(t);isNaN(n)&&this.$a("length string (".concat(t,") is not valid number"));const r=await this.Ua(n);return new Zm(JSON.parse(r),e.length+n)}Wa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(0===this.buffer.length)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const t=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}$a(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ga(){const e=await this.ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Hg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Sa(Ia.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Ea(e),r={documents:t.map((e=>ud(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,qa.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Ta(!!t.found),t.found.name,t.found.updateTime;const n=hd(e,t.found.name),r=od(t.found.updateTime),i=t.found.createTime?od(t.found.createTime):za.min(),s=new Fl({mapValue:{fields:t.found.fields}});return jl.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Ta(!!t.missing),Ta(!!t.readTime);const n=hd(e,t.missing),r=od(t.readTime);return jl.newNoDocument(n,r)}(e,t):_a()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Ta(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new kh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Ka.fromPath(t);this.mutations.push(new Ch(n,this.precondition(n)))})),await async function(e,t){const n=Ea(e),r={writes:t.map((e=>yd(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,qa.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _a();t=za.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Sa(Ia.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(za.min())?fh.exists(!1):fh.updateTime(t):fh.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(za.min()))throw new Sa(Ia.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fh.updateTime(t)}return fh.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Wg{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.za=n.maxAttempts,this.jo=new sm(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const e=new Hg(this.datastore),t=this.Ja(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ya(e)}))))})).catch((e=>{this.Ya(e)}))}))}Ja(e){try{const t=this.updateFunction(e);return!yc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Dh(t)}return!1}}class Kg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=fa.UNAUTHENTICATED,this.clientId=Ma.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{va("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(va("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Sa(Ia.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ka;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=zm(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Gg(e,t){e.asyncQueue.verifyOperationInProgress(),va("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Cp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Qg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Xg(e);va("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Mm(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Mm(t.remoteStore,n))),e._onlineComponents=t}function Yg(e){return"FirebaseError"===e.name?e.code===Ia.FAILED_PRECONDITION||e.code===Ia.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Xg(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){va("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Yg(n))throw n;wa("Error using user provided cache. Falling back to memory cache: "+n),await Gg(e,new Ug)}}else va("FirestoreClient","Using default OfflineComponentProvider"),await Gg(e,new Ug);return e._offlineComponents}async function Jg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(va("FirestoreClient","Using user provided OnlineComponentProvider"),await Qg(e,e._uninitializedComponentsProvider._online)):(va("FirestoreClient","Using default OnlineComponentProvider"),await Qg(e,new jg))),e._onlineComponents}function $g(e){return Xg(e).then((e=>e.persistence))}function Zg(e){return Xg(e).then((e=>e.localStore))}function ev(e){return Jg(e).then((e=>e.remoteStore))}function tv(e){return Jg(e).then((e=>e.syncEngine))}function nv(e){return Jg(e).then((e=>e.datastore))}async function rv(e){const t=await Jg(e),n=t.eventManager;return n.onListen=lg.bind(null,t.syncEngine),n.onUnlisten=hg.bind(null,t.syncEngine),n}function iv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ka;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Bg({next:s=>{t.enqueueAndForget((()=>Qm(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Sa(Ia.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Sa(Ia.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new $m(_u(n.path),s,{includeMetadataChanges:!0,Z_:!0});return Gm(e,o)}(await rv(e),e.asyncQueue,t,n,r))),r.promise}function sv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ka;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Bg({next:n=>{t.enqueueAndForget((()=>Qm(e,o))),n.fromCache&&"server"===r.source?i.reject(new Sa(Ia.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new $m(n,s,{includeMetadataChanges:!0,Z_:!0});return Gm(e,o)}(await rv(e),e.asyncQueue,t,n,r))),r.promise}function ov(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Uh().encode(e):e,function(e,t){return new qg(e,t)}(function(e,t){if(e instanceof Uint8Array)return zg(e,t);if(e instanceof ArrayBuffer)return zg(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,im(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Ea(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Ea(e),r=od(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(ng(r));const i=new tg(r,e.localStore,t.serializer);let s=await t.Oa();for(;s;){const e=await i.na(s);e&&n._updateProgress(e),s=await t.Oa()}const o=await i.complete();return await Ig(e,o.sa,void 0),await function(e,t){const n=Ea(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ia)}catch(e){return wa("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await tv(e),i,r)}))}function av(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const cv=new Map;function lv(e,t,n){if(!n)throw new Sa(Ia.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function uv(e,t,n,r){if(!0===t&&!0===r)throw new Sa(Ia.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function hv(e){if(!Ka.isDocumentKey(e))throw new Sa(Ia.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function dv(e){if(Ka.isDocumentKey(e))throw new Sa(Ia.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function fv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":_a()}function pv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Sa(Ia.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fv(e);throw new Sa(Ia.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function mv(e,t){if(t<=0)throw new Sa(Ia.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class gv{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Sa(Ia.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Sa(Ia.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=av(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Sa(Ia.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Sa(Ia.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Sa(Ia.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vv{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Sa(Ia.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Sa(Ia.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gv(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Aa;switch(e.type){case"firstParty":return new Ra(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Sa(Ia.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=cv.get(e);t&&(va("ComponentProvider","Removing Datastore"),cv.delete(e),t.terminate())}(this),Promise.resolve()}}function yv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=pv(e,vv))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=fa.MOCK_USER;else{t=v(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Sa(Ia.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new fa(s)}e._authCredentials=new xa(new Ca(t,n))}}class wv{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new wv(this.firestore,e,this._query)}}class bv{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _v(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bv(this.firestore,e,this._key)}}class _v extends wv{constructor(e,t,n){super(e,t,_u(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bv(this.firestore,null,new Ka(e))}withConverter(e){return new _v(this.firestore,e,this._path)}}function Tv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=F(e),lv("collection","path",t),e instanceof vv){const n=qa.fromString(t,...r);return dv(n),new _v(e,null,n)}{if(!(e instanceof bv||e instanceof _v))throw new Sa(Ia.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(qa.fromString(t,...r));return dv(n),new _v(e.firestore,null,n)}}function Ev(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=F(e),1===arguments.length&&(t=Ma.newId()),lv("doc","path",t),e instanceof vv){const n=qa.fromString(t,...r);return hv(n),new bv(e,null,new Ka(n))}{if(!(e instanceof bv||e instanceof _v))throw new Sa(Ia.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(qa.fromString(t,...r));return hv(n),new bv(e.firestore,e instanceof _v?e.converter:null,new Ka(n))}}function Iv(e,t){return e=F(e),t=F(t),(e instanceof bv||e instanceof _v)&&(t instanceof bv||t instanceof _v)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Sv(e,t){return e=F(e),t=F(t),e instanceof wv&&t instanceof wv&&e.firestore===t.firestore&&xu(e._query,t._query)&&e.converter===t.converter}class kv{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new sm(this,"async_queue_retry"),this._u=()=>{const e=rm();e&&va("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=rm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=rm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new ka;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!uc(e))throw e;va("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ya("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=jm.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&_a()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function Cv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Av{constructor(){this._progressObserver={},this._taskCompletionResolver=new ka,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class xv extends vv{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new kv,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Nv(this),this._firestoreClient.terminate()}}function Pv(e){return e._firestoreClient||Nv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Nv(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new ml(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,av(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Kg(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Rv(e,t,n){const r=new ka;return e.asyncQueue.enqueue((async()=>{try{await Gg(e,n),await Qg(e,t),r.resolve()}catch(e){const n=e;if(!Yg(n))throw n;wa("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Ov(e){return function(e){const t=new ka;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Ea(e);bm(n.remoteStore)||va("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Ea(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ca.get(e)||[];r.push(t),n.Ca.set(e,r)}catch(e){const n=zm(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await tv(e),t))),t.promise}(Pv(e=pv(e,xv)))}function Dv(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await $g(e),n=await ev(e);return t.setNetworkEnabled(!0),function(e){const t=Ea(e);return t.v_.delete(0),dm(t)}(n)}))}(Pv(e=pv(e,xv)))}function Lv(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await $g(e),n=await ev(e);return t.setNetworkEnabled(!1),async function(e){const t=Ea(e);t.v_.add(0),await fm(t),t.x_.set("Offline")}(n)}))}(Pv(e=pv(e,xv)))}function Mv(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Ea(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await Zg(e),t)))}(Pv(e=pv(e,xv)),t).then((t=>t?new wv(e,null,t.query):null))}function Uv(e){if(e._initialized||e._terminated)throw new Sa(Ia.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Fv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fv(al.fromBase64String(e))}catch(e){throw new Sa(Ia.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Fv(al.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vv{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Sa(Ia.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wa(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jv{constructor(e){this._methodName=e}}class zv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Sa(Ia.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Sa(Ia.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ua(this._lat,e._lat)||Ua(this._long,e._long)}}const Bv=/^__.*__$/;class qv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Th(e,this.data,this.fieldMask,t,this.fieldTransforms):new _h(e,this.data,t,this.fieldTransforms)}}class Hv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Th(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Wv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _a()}}class Kv{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Kv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return dy(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(Wv(this.du)&&Bv.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Gv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||im(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Kv({du:e,methodName:t,wu:n,path:Wa.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qv(e){const t=e._freezeSettings(),n=im(e._databaseId);return new Gv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Yv(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Su(s.merge||s.mergeFields?2:0,t,n,i);cy("Data must be an object, but it was:",o,r);const a=oy(r,o);let c,l;if(s.merge)c=new sl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=ly(t,r,n);if(!o.contains(i))throw new Sa(Ia.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));fy(e,i)||e.push(i)}c=new sl(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new qv(new Fl(a),c,l)}class Xv extends jv{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xv}}function Jv(e,t,n){return new Kv({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class $v extends jv{_toFieldTransform(e){return new hh(e.path,new rh)}isEqual(e){return e instanceof $v}}class Zv extends jv{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=Jv(this,e,!0),n=this.bu.map((e=>sy(e,t))),r=new ih(n);return new hh(e.path,r)}isEqual(e){return e instanceof Zv&&P(this.bu,e.bu)}}class ey extends jv{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=Jv(this,e,!0),n=this.bu.map((e=>sy(e,t))),r=new oh(n);return new hh(e.path,r)}isEqual(e){return e instanceof ey&&P(this.bu,e.bu)}}class ty extends jv{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new ch(e.serializer,$u(e.serializer,this.Du));return new hh(e.path,t)}isEqual(e){return e instanceof ty&&this.Du===e.Du}}function ny(e,t,n,r){const i=e.Su(1,t,n);cy("Data must be an object, but it was:",i,r);const s=[],o=Fl.empty();Jc(r,((e,r)=>{const a=hy(t,e,n);r=F(r);const c=i.fu(a);if(r instanceof Xv)s.push(a);else{const e=sy(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new sl(s);return new Hv(o,a,i.fieldTransforms)}function ry(e,t,n,r,i,s){const o=e.Su(1,t,n),a=[ly(t,r,n)],c=[i];if(s.length%2!=0)throw new Sa(Ia.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(ly(t,s[d])),c.push(s[d+1]);const l=[],u=Fl.empty();for(let d=a.length-1;d>=0;--d)if(!fy(l,a[d])){const e=a[d];let t=c[d];t=F(t);const n=o.fu(e);if(t instanceof Xv)l.push(e);else{const r=sy(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new sl(l);return new Hv(u,h,o.fieldTransforms)}function iy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return sy(n,e.Su(r?4:3,t))}function sy(e,t){if(ay(e=F(e)))return cy("Unsupported field value:",t,e),oy(e,t);if(e instanceof jv)return function(e,t){if(!Wv(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=sy(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=F(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return $u(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ja.fromDate(e);return{timestampValue:rd(t.serializer,n)}}if(e instanceof ja){const n=new ja(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:rd(t.serializer,n)}}if(e instanceof zv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Fv)return{bytesValue:id(t.serializer,e._byteString)};if(e instanceof bv){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:ad(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(fv(e)))}(e,t)}function oy(e,t){const n={};return $c(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Jc(e,((e,r)=>{const i=sy(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function ay(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ja||e instanceof zv||e instanceof Fv||e instanceof bv||e instanceof jv)}function cy(e,t,n){if(!ay(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=fv(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function ly(e,t,n){if((t=F(t))instanceof Vv)return t._internalPath;if("string"==typeof t)return hy(e,t);throw dy("Field path arguments must be of type string or ",e,!1,void 0,n)}const uy=new RegExp("[~\\*/\\[\\]]");function hy(e,t,n){if(t.search(uy)>=0)throw dy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Vv(...t.split("."))._internalPath}catch(or){throw dy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function dy(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field ".concat(r)),o&&(c+=" in document ".concat(i)),c+=")"),new Sa(Ia.INVALID_ARGUMENT,a+e+c)}function fy(e,t){return e.some((e=>e.isEqual(t)))}class py{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new bv(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new my(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class my extends py{data(){return super.data()}}function gy(e,t){return"string"==typeof t?hy(e,t):t instanceof Vv?t._internalPath:t._delegate._internalPath}function vy(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Sa(Ia.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yy{}class wy extends yy{}function by(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof yy&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Ty)).length,n=e.filter((e=>e instanceof _y)).length;if(t>1||t>0&&n>0)throw new Sa(Ia.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class _y extends wy{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new _y(e,t,n)}_apply(e){const t=this._parse(e);return Py(e._query,t),new wv(e.firestore,e.converter,Cu(e._query,t))}_parse(e){const t=Qv(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Sa(Ia.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){xy(o,s);const t=[];for(const n of o)t.push(Ay(r,e,n));a={arrayValue:{values:t}}}else a=Ay(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||xy(o,s),a=iy(n,t,o,"in"===s||"not-in"===s);return Gl.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Ty extends yy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ty(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Ql.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Py(n,i),n=Cu(n,i)}(e._query,t),new wv(e.firestore,e.converter,Cu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ey extends wy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ey(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Sa(Ia.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Sa(Ia.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Hl(t,n)}(e._query,this._field,this._direction);return new wv(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new wu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Iy extends wy{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Iy(e,t,n)}_apply(e){return new wv(e.firestore,e.converter,Au(e._query,this._limit,this._limitType))}}class Sy extends wy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Sy(e,t,n)}_apply(e){const t=Cy(e,this.type,this._docOrFields,this._inclusive);return new wv(e.firestore,e.converter,function(e,t){return new wu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class ky extends wy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new ky(e,t,n)}_apply(e){const t=Cy(e,this.type,this._docOrFields,this._inclusive);return new wv(e.firestore,e.converter,function(e,t){return new wu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Cy(e,t,n,r){if(n[0]=F(n[0]),n[0]instanceof py)return function(e,t,n,r,i){if(!r)throw new Sa(Ia.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Iu(e))if(o.field.isKeyField())s.push(kl(t,r.key));else{const e=r.data.field(o.field);if(dl(e))throw new Sa(Ia.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Sa(Ia.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new zl(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Qv(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Sa(Ia.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new Sa(Ia.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Eu(e)&&-1!==s.indexOf("/"))throw new Sa(Ia.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(qa.fromString(s));if(!Ka.isDocumentKey(n))throw new Sa(Ia.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Ka(n);a.push(kl(t,i))}else{const e=iy(n,r,s);a.push(e)}}return new zl(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Ay(e,t,n){if("string"==typeof(n=F(n))){if(""===n)throw new Sa(Ia.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Eu(t)&&-1!==n.indexOf("/"))throw new Sa(Ia.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(qa.fromString(n));if(!Ka.isDocumentKey(r))throw new Sa(Ia.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return kl(e,new Ka(r))}if(n instanceof bv)return kl(e,n._key);throw new Sa(Ia.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(fv(n),"."))}function xy(e,t){if(!Array.isArray(e)||0===e.length)throw new Sa(Ia.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Py(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Sa(Ia.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Sa(Ia.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Ny{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(wl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ul(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw _a()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Jc(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new zv(ul(e.latitude),ul(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=fl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(pl(e));default:return null}}convertTimestamp(e){const t=ll(e);return new ja(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=qa.fromString(e);Ta(Nd(n));const r=new gl(n.get(1),n.get(3)),i=new Ka(n.popFirst(5));return r.isEqual(t)||ya("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Ry(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Oy extends Ny{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bv(this.firestore,null,t)}}class Dy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ly extends py{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new My(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(gy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class My extends Ly{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Uy{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Dy(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new My(this._firestore,this._userDataWriter,n.key,n,new Dy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Sa(Ia.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new My(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Dy(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new My(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Dy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Fy(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Fy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _a()}}function Vy(e,t){return e instanceof Ly&&t instanceof Ly?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Uy&&t instanceof Uy&&e._firestore===t._firestore&&Sv(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class jy extends Ny{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bv(this.firestore,null,t)}}function zy(e){e=pv(e,bv);const t=pv(e.firestore,xv),n=Pv(t),r=new jy(t);return function(e,t){const n=new ka;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Ea(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Sa(Ia.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=zm(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Zg(e),t,n))),n.promise}(n,e._key).then((n=>new Ly(t,r,e._key,n,new Dy(null!==n&&n.hasLocalMutations,!0),e.converter)))}function By(e){e=pv(e,wv);const t=pv(e.firestore,xv),n=Pv(t),r=new jy(t);return function(e,t){const n=new ka;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Op(e,t,!0),i=new sg(t,r.hs),s=i.ha(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=zm(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Zg(e),t,n))),n.promise}(n,e._query).then((n=>new Uy(t,r,e,n)))}function qy(e,t,n){e=pv(e,bv);const r=pv(e.firestore,xv),i=Ry(e.converter,t,n);return Qy(r,[Yv(Qv(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,fh.none())])}function Hy(e,t,n){e=pv(e,bv);const r=pv(e.firestore,xv),i=Qv(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=F(t))||t instanceof Vv?ry(i,"updateDoc",e._key,t,n,a):ny(i,"updateDoc",e._key,t),Qy(r,[s.toMutation(e._key,fh.exists(!0))])}function Wy(e){return Qy(pv(e.firestore,xv),[new kh(e._key,fh.none())])}function Ky(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=F(e);let a={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||Cv(n[c])||(a=n[c],c++);const l={includeMetadataChanges:a.includeMetadataChanges};if(Cv(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof bv)h=pv(e.firestore,xv),d=_u(e._key.path),u={next:t=>{n[c]&&n[c](Yy(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=pv(e,wv);h=pv(t.firestore,xv),d=t._query;const r=new jy(h);u={next:e=>{n[c]&&n[c](new Uy(h,r,t,e))},error:n[c+1],complete:n[c+2]},vy(e._query)}return function(e,t,n,r){const i=new Bg(r),s=new $m(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Gm(await rv(e),s))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>Qm(await rv(e),s)))}}(Pv(h),d,l,u)}function Gy(e,t){return function(e,t){const n=new Bg(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Ea(e).K_.add(t),t.next()}(await rv(e),n))),()=>{n.La(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Ea(e).K_.delete(t)}(await rv(e),n)))}}(Pv(e=pv(e,xv)),Cv(t)?t:{next:t})}function Qy(e,t){return function(e,t){const n=new ka;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Mg(e);try{const e=await function(e,t){const n=Ea(e),r=ja.now(),i=t.reduce(((e,t)=>e.add(t.key)),Gu());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Fu(),c=Gu();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=wh(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Th(e.key,t,Vl(t.value.mapValue),fh.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:zu(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new Zc(Ua)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await Ig(r,e.changes),await Cm(r.remoteStore)}catch(e){const t=zm(e,"Failed to persist write");n.reject(t)}}(await tv(e),t,n))),n.promise}(Pv(e),t)}function Yy(e,t,n){const r=n.docs.get(t._key),i=new jy(e);return new Ly(e,i,t._key,r,new Dy(n.hasPendingWrites,n.fromCache),t.converter)}const Xy={maxAttempts:5};class Jy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qv(e)}set(e,t,n){this._verifyNotCommitted();const r=$y(e,this._firestore),i=Ry(r.converter,t,n),s=Yv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,fh.none())),this}update(e,t,n){this._verifyNotCommitted();const r=$y(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=F(t))||t instanceof Vv?ry(this._dataReader,"WriteBatch.update",r._key,t,n,o):ny(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,fh.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$y(e,this._firestore);return this._mutations=this._mutations.concat(new kh(t._key,fh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Sa(Ia.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $y(e,t){if((e=F(e)).firestore!==t)throw new Sa(Ia.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Zy extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Qv(e)}get(e){const t=$y(e,this._firestore),n=new Oy(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return _a();const r=e[0];if(r.isFoundDocument())return new py(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new py(this._firestore,n,t._key,null,t.converter);throw _a()}))}set(e,t,n){const r=$y(e,this._firestore),i=Ry(r.converter,t,n),s=Yv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=$y(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=F(t))||t instanceof Vv?ry(this._dataReader,"Transaction.update",r._key,t,n,o):ny(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=$y(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=$y(e,this._firestore),n=new jy(this._firestore);return super.get(e).then((e=>new Ly(this._firestore,n,t._key,e._document,new Dy(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){pa=e}(xe),Ee(new V("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new xv(new Pa(e.getProvider("auth-internal")),new Da(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Sa(Ia.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gl(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),De(da,"4.4.1",e),De(da,"4.4.1","esm2017")}();function ew(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Sa("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function tw(){if("undefined"===typeof Uint8Array)throw new Sa("unimplemented","Uint8Arrays are not available in this environment.")}function nw(){if("undefined"==typeof atob)throw new Sa("unimplemented","Blobs are unavailable in Firestore in this environment.")}class rw{constructor(e){this._delegate=e}static fromBase64String(e){return nw(),new rw(Fv.fromBase64String(e))}static fromUint8Array(e){return tw(),new rw(Fv.fromUint8Array(e))}toBase64(){return nw(),this._delegate.toBase64()}toUint8Array(){return tw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function iw(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class sw{enableIndexedDbPersistence(e,t){return function(e,t){Uv(e=pv(e,xv));const n=Pv(e);if(n._uninitializedComponentsProvider)throw new Sa(Ia.FAILED_PRECONDITION,"SDK cache is already specified.");wa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new jg;return Rv(n,i,new Fg(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Uv(e=pv(e,xv));const t=Pv(e);if(t._uninitializedComponentsProvider)throw new Sa(Ia.FAILED_PRECONDITION,"SDK cache is already specified.");wa("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new jg;return Rv(t,r,new Vg(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Sa(Ia.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new ka;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!ac.D())return Promise.resolve();const t=e+"main";await ac.delete(t)}(_p(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class ow{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof gl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||wa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};yv(this._delegate,e,t,n)}enableNetwork(){return Dv(this._delegate)}disableNetwork(){return Lv(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,uv("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Ov(this._delegate)}onSnapshotsInSync(e){return Gy(this._delegate,e)}get app(){if(!this._appCompat)throw new Sa("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new bw(this,Tv(this._delegate,e))}catch(t){throw dw(t,"collection()","Firestore.collection()")}}doc(e){try{return new hw(this,Ev(this._delegate,e))}catch(t){throw dw(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new vw(this,function(e,t){if(e=pv(e,vv),lv("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Sa(Ia.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new wv(e,null,function(e){return new wu(qa.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw dw(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=pv(e,xv);const r=Object.assign(Object.assign({},Xy),n);return function(e){if(e.maxAttempts<1)throw new Sa(Ia.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new ka;return e.asyncQueue.enqueueAndForget((async()=>{const i=await nv(e);new Wg(e.asyncQueue,i,n,t,r).ja()})),r.promise}(Pv(e),(n=>t(new Zy(e,n))),r)}(this._delegate,(t=>e(new cw(this,t))))}batch(){return Pv(this._delegate),new lw(new Jy(this._delegate,(e=>Qy(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Pv(e=pv(e,xv)),r=new Av;return ov(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Mv(this._delegate,e).then((e=>e?new vw(this,e):null))}}class aw extends Ny{constructor(e){super(),this.firestore=e}convertBytes(e){return new rw(new Fv(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return hw.forKey(t,this.firestore,null)}}class cw{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new aw(e)}get(e){const t=_w(e);return this._delegate.get(t).then((e=>new mw(this._firestore,new Ly(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=_w(e);return n?(ew("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=_w(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=_w(e);return this._delegate.delete(t),this}}class lw{constructor(e){this._delegate=e}set(e,t,n){const r=_w(e);return n?(ew("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=_w(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=_w(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class uw{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new My(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gw(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=uw.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new uw(e,new aw(e),t),r.set(t,i)),i}}uw.INSTANCES=new WeakMap;class hw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new aw(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Sa("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new hw(t,new bv(t._delegate,n,new Ka(e)))}static forKey(e,t,n){return new hw(t,new bv(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new bw(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new bw(this.firestore,Tv(this._delegate,e))}catch(t){throw dw(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=F(e))instanceof bv&&Iv(this._delegate,e)}set(e,t){t=ew("DocumentReference.set",t);try{return t?qy(this._delegate,e,t):qy(this._delegate,e)}catch(n){throw dw(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Hy(this._delegate,e):Hy(this._delegate,e,t,...r)}catch(s){throw dw(s,"updateDoc()","DocumentReference.update()")}}delete(){return Wy(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=fw(t),i=pw(t,(e=>new mw(this.firestore,new Ly(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Ky(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?zy(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=pv(e,bv);const t=pv(e.firestore,xv);return iv(Pv(t),e._key,{source:"server"}).then((n=>Yy(t,e,n)))}(this._delegate):function(e){e=pv(e,bv);const t=pv(e.firestore,xv);return iv(Pv(t),e._key).then((n=>Yy(t,e,n)))}(this._delegate),t.then((e=>new mw(this.firestore,new Ly(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new hw(this.firestore,e?this._delegate.withConverter(uw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function dw(e,t,n){return e.message=e.message.replace(t,n),e}function fw(e){for(const t of e)if("object"===typeof t&&!iw(t))return t;return{}}function pw(e,t){var n,r;let i;return i=iw(e[0])?e[0]:iw(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class mw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new hw(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Vy(this._delegate,e._delegate)}}class gw extends mw{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||_a(),t}}class vw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new aw(e)}where(e,t,n){try{return new vw(this.firestore,by(this._delegate,function(e,t,n){const r=t,i=gy("where",e);return _y._create(i,r,n)}(e,t,n)))}catch(r){throw dw(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new vw(this.firestore,by(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=gy("orderBy",e);return Ey._create(n,t)}(e,t)))}catch(n){throw dw(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new vw(this.firestore,by(this._delegate,(mv("limit",t=e),Iy._create("limit",t,"F"))))}catch(t){throw dw(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new vw(this.firestore,by(this._delegate,(mv("limitToLast",t=e),Iy._create("limitToLast",t,"L"))))}catch(t){throw dw(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new vw(this.firestore,by(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Sy._create("startAt",t,!0)}(...arguments)))}catch(e){throw dw(e,"startAt()","Query.startAt()")}}startAfter(){try{return new vw(this.firestore,by(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Sy._create("startAfter",t,!1)}(...arguments)))}catch(e){throw dw(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new vw(this.firestore,by(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ky._create("endBefore",t,!1)}(...arguments)))}catch(e){throw dw(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new vw(this.firestore,by(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ky._create("endAt",t,!0)}(...arguments)))}catch(e){throw dw(e,"endAt()","Query.endAt()")}}isEqual(e){return Sv(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?By(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=pv(e,wv);const t=pv(e.firestore,xv),n=Pv(t),r=new jy(t);return sv(n,e._query,{source:"server"}).then((n=>new Uy(t,r,e,n)))}(this._delegate):function(e){e=pv(e,wv);const t=pv(e.firestore,xv),n=Pv(t),r=new jy(t);return vy(e._query),sv(n,e._query).then((n=>new Uy(t,r,e,n)))}(this._delegate),t.then((e=>new ww(this.firestore,new Uy(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=fw(t),i=pw(t,(e=>new ww(this.firestore,new Uy(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Ky(this._delegate,r,i)}withConverter(e){return new vw(this.firestore,e?this._delegate.withConverter(uw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class yw{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new gw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ww{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new vw(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new gw(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new yw(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new gw(this._firestore,n))}))}isEqual(e){return Vy(this._delegate,e._delegate)}}class bw extends vw{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new hw(this.firestore,e):null}doc(e){try{return new hw(this.firestore,void 0===e?Ev(this._delegate):Ev(this._delegate,e))}catch(t){throw dw(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=pv(e.firestore,xv),r=Ev(e),i=Ry(e.converter,t);return Qy(n,[Yv(Qv(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,fh.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new hw(this.firestore,e)))}isEqual(e){return Iv(this._delegate,e._delegate)}withConverter(e){return new bw(this.firestore,e?this._delegate.withConverter(uw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function _w(e){return pv(e,bv)}class Tw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Vv(...t)}static documentId(){return new Tw(Wa.keyField().canonicalString())}isEqual(e){return(e=F(e))instanceof Vv&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ew{constructor(e){this._delegate=e}static serverTimestamp(){const e=new $v("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Ew(e)}static delete(){const e=new Xv("deleteField");return e._methodName="FieldValue.delete",new Ew(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Zv("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Ew(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ey("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Ew(e)}static increment(e){const t=new ty("increment",e);return t._methodName="FieldValue.increment",new Ew(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Iw={Firestore:ow,GeoPoint:zv,Timestamp:ja,Blob:rw,Transaction:cw,WriteBatch:lw,DocumentReference:hw,DocumentSnapshot:mw,Query:vw,QueryDocumentSnapshot:gw,QuerySnapshot:ww,CollectionReference:bw,FieldPath:Tw,FieldValue:Ew,setLogLevel:function(e){var t;t=e,ma.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var Sw;(function(e,t){e.INTERNAL.registerComponent(new V("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Iw)))})(Sw=Ze,((e,t)=>new ow(e,t,new sw))),Sw.registerVersion("@firebase/firestore-compat","0.3.24");var kw=function(e,t){return kw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},kw(e,t)};function Cw(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}kw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Aw=function(){return Aw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Aw.apply(this,arguments)};function xw(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;function Pw(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function Nw(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;const Rw={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ow="EMAIL_SIGNIN",Dw="PASSWORD_RESET",Lw="RECOVER_EMAIL",Mw="REVERT_SECOND_FACTOR_ADDITION",Uw="VERIFY_AND_CHANGE_EMAIL",Fw="VERIFY_EMAIL";function Vw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jw=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},zw=Vw,Bw=new C("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qw=new Y("@firebase/auth");function Hw(e){if(qw.logLevel<=H.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];qw.error("Auth (".concat(xe,"): ").concat(e),...n)}}function Ww(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Yw(e,...n)}function Kw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Yw(e,...n)}function Gw(e,t,n){const r=Object.assign(Object.assign({},zw()),{[t]:n});return new C("auth","Firebase",r).create(t,{appName:e.name})}function Qw(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ww(e,"argument-error"),Gw(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Yw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Bw.create(e,...n)}function Xw(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Yw(t,...r)}}function Jw(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Hw(t),new Error(t)}function $w(e,t){e||Jw(t)}function Zw(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function eb(){return"http:"===tb()||"https:"===tb()}function tb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class nb{constructor(e,t){this.shortDelay=e,this.longDelay=t,$w(t>e,"Short delay should be less than long delay!"),this.isMobile=w()||T()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(eb()||_()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function rb(e,t){$w(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class ib{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Jw("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Jw("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Jw("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const sb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ob=new nb(3e4,6e4);function ab(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function cb(e,t,n,r){return lb(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=R(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),ib.fetch()(hb(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function lb(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},sb),t);try{const t=new fb(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw pb(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw pb(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw pb(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw pb(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Gw(e,a,o);Ww(e,a)}}catch(i){if(i instanceof k)throw i;Ww(e,"network-request-failed",{message:String(i)})}}async function ub(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await cb(e,t,n,r,i);return"mfaPendingCredential"in s&&Ww(e,"multi-factor-auth-required",{_serverResponse:s}),s}function hb(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?rb(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function db(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Kw(this.auth,"network-request-failed"))),ob.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function pb(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Kw(e,t,r);return i.customData._tokenResponse=n,i}function mb(e){return void 0!==e&&void 0!==e.getResponse}function gb(e){return void 0!==e&&void 0!==e.enterprise}class vb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return db(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function yb(e,t){return cb(e,"GET","/v2/recaptchaConfig",ab(e,t))}function wb(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function bb(e){return 1e3*Number(e)}function _b(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Hw("JWT malformed, contained fewer than 3 sections"),null;try{const e=l(n);return e?JSON.parse(e):(Hw("Failed to decode base64 JWT payload"),null)}catch(i){return Hw("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function Tb(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof k&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Eb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Ib{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wb(this.lastLoginAt),this.creationTime=wb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sb(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Tb(e,async function(e,t){return cb(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Xw(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=xw(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ib(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class kb{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xw(e.idToken,"internal-error"),Xw("undefined"!==typeof e.idToken,"internal-error"),Xw("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=_b(e);return Xw(t,"internal-error"),Xw("undefined"!==typeof t.exp,"internal-error"),Xw("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Xw(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await lb(e,{},(async()=>{const n=R({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=hb(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",ib.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new kb;return n&&(Xw("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Xw("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Xw("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kb,this.toJSON())}_performRefresh(){return Jw("not implemented")}}function Cb(e,t){Xw("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ab{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=xw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Eb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ib(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Tb(this,this.stsTokenManager.getToken(this.auth,e));return Xw(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=F(e),r=await n.getIdToken(t),i=_b(r);Xw(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:wb(bb(i.auth_time)),issuedAtTime:wb(bb(i.iat)),expirationTime:wb(bb(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=F(e);await Sb(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Xw(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ab(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Xw(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Sb(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Tb(this,async function(e,t){return cb(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:T}=t;Xw(y&&T,e,"internal-error");const E=kb.fromJSON(this.name,T);Xw("string"===typeof y,e,"internal-error"),Cb(u,e.name),Cb(h,e.name),Xw("boolean"===typeof w,e,"internal-error"),Xw("boolean"===typeof b,e,"internal-error"),Cb(d,e.name),Cb(f,e.name),Cb(p,e.name),Cb(m,e.name),Cb(g,e.name),Cb(v,e.name);const I=new Ab({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(I.providerData=_.map((e=>Object.assign({},e)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new kb;r.updateFromServerResponse(t);const i=new Ab({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Sb(i),i}}const xb=new Map;function Pb(e){$w(e instanceof Function,"Expected a class definition");let t=xb.get(e);return t?($w(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,xb.set(e,t),t)}class Nb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Nb.type="NONE";const Rb=Nb;function Ob(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Db{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ob(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ob("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ab._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Db(Pb(Rb),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Pb(Rb);const s=Ob(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=Ab._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(c){}}))),new Db(i,e,n)):new Db(i,e,n)}}function Lb(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Vb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Mb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(zb(t))return"Blackberry";if(Bb(t))return"Webos";if(Ub(t))return"Safari";if((t.includes("chrome/")||Fb(t))&&!t.includes("edge/"))return"Chrome";if(jb(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Mb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/firefox\//i.test(e)}function Ub(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:y()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/crios\//i.test(e)}function Vb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/iemobile/i.test(e)}function jb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/android/i.test(e)}function zb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/blackberry/i.test(e)}function Bb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/webos/i.test(e)}function qb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Hb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return qb(e)||jb(e)||Bb(e)||zb(e)||/windows phone/i.test(e)||Vb(e)}function Wb(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Lb(y());break;case"Worker":t="".concat(Lb(y()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xe,"/").concat(r)}class Kb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Gb{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Qb{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xb(this),this.idTokenSubscription=new Xb(this),this.beforeStateQueue=new Kb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pb(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Db.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Xw(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sb(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?F(e):null;return t&&Xw(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Xw(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Pb(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return cb(e,"GET","/v2/passwordPolicy",ab(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Gb(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new C("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return cb(e,"POST","/v2/accounts:revokeToken",ab(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Pb(e)||this._popupRedirectResolver;Xw(t,this,"argument-error"),this.redirectPersistenceManager=await Db.create(this,[Pb(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xw(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xw(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(qw.logLevel<=H.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];qw.warn("Auth (".concat(xe,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Yb(e){return F(e)}class Xb{constructor(e){this.auth=e,this.observer=null,this.addObserver=L((e=>this.observer=e))}get next(){return Xw(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Jb(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Kw("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function $b(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Zb{constructor(e){this.type="recaptcha-enterprise",this.auth=Yb(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;gb(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{yb(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new vb(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&gb(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Jb("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function e_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Zb(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function t_(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await e_(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await e_(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function n_(e,t,n){const r=Yb(e);Xw(r._canInitEmulator,r,"emulator-config-failed"),Xw(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=r_(t),{host:o,port:a}=function(e){const t=r_(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:i_(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:i_(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function r_(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function i_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class s_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Jw("not implemented")}_getIdTokenResponse(e){return Jw("not implemented")}_linkToIdToken(e,t){return Jw("not implemented")}_getReauthenticationResolver(e){return Jw("not implemented")}}async function o_(e,t){return cb(e,"POST","/v1/accounts:resetPassword",ab(e,t))}async function a_(e,t){return cb(e,"POST","/v1/accounts:signUp",t)}async function c_(e,t){return ub(e,"POST","/v1/accounts:signInWithPassword",ab(e,t))}async function l_(e,t){return cb(e,"POST","/v1/accounts:sendOobCode",ab(e,t))}async function u_(e,t){return l_(e,t)}async function h_(e,t){return l_(e,t)}class d_ extends s_{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new d_(e,t,"password")}static _fromEmailAndCode(e,t){return new d_(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return t_(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",c_);case"emailLink":return async function(e,t){return ub(e,"POST","/v1/accounts:signInWithEmailLink",ab(e,t))}(e,{email:this._email,oobCode:this._password});default:Ww(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return t_(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",a_);case"emailLink":return async function(e,t){return ub(e,"POST","/v1/accounts:signInWithEmailLink",ab(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ww(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function f_(e,t){return ub(e,"POST","/v1/accounts:signInWithIdp",ab(e,t))}class p_ extends s_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new p_(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ww("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=xw(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new p_(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return f_(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,f_(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,f_(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=R(t)}return e}}const m_={USER_NOT_FOUND:"user-not-found"};class g_ extends s_{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new g_({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new g_({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ub(e,"POST","/v1/accounts:signInWithPhoneNumber",ab(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ub(e,"POST","/v1/accounts:signInWithPhoneNumber",ab(e,t));if(n.temporaryProof)throw pb(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ub(e,"POST","/v1/accounts:signInWithPhoneNumber",ab(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),m_)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new g_({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class v_{constructor(e){var t,n,r,i,s,o;const a=O(D(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Xw(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=O(D(e)).link,n=t?O(D(t)).deep_link_id:null,r=O(D(e)).deep_link_id;return(r?O(D(r)).link:null)||r||n||t||e}(e);try{return new v_(t)}catch(n){return null}}}class y_{constructor(){this.providerId=y_.PROVIDER_ID}static credential(e,t){return d_._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=v_.parseLink(t);return Xw(n,"argument-error"),d_._fromEmailAndCode(e,n.code,n.tenantId)}}y_.PROVIDER_ID="password",y_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y_.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class w_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class b_ extends w_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class __ extends b_{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Xw("providerId"in t&&"signInMethod"in t,"argument-error"),p_._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Xw(e.idToken||e.accessToken,"argument-error"),p_._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return __.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return __.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new __(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(c){return null}}}class T_ extends b_{constructor(){super("facebook.com")}static credential(e){return p_._fromParams({providerId:T_.PROVIDER_ID,signInMethod:T_.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return T_.credentialFromTaggedObject(e)}static credentialFromError(e){return T_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return T_.credential(t.oauthAccessToken)}catch(n){return null}}}T_.FACEBOOK_SIGN_IN_METHOD="facebook.com",T_.PROVIDER_ID="facebook.com";class E_ extends b_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return p_._fromParams({providerId:E_.PROVIDER_ID,signInMethod:E_.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return E_.credentialFromTaggedObject(e)}static credentialFromError(e){return E_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return E_.credential(n,r)}catch(i){return null}}}E_.GOOGLE_SIGN_IN_METHOD="google.com",E_.PROVIDER_ID="google.com";class I_ extends b_{constructor(){super("github.com")}static credential(e){return p_._fromParams({providerId:I_.PROVIDER_ID,signInMethod:I_.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return I_.credentialFromTaggedObject(e)}static credentialFromError(e){return I_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return I_.credential(t.oauthAccessToken)}catch(n){return null}}}I_.GITHUB_SIGN_IN_METHOD="github.com",I_.PROVIDER_ID="github.com";class S_ extends s_{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return f_(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,f_(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,f_(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new S_(n,i):null}static _create(e,t){return new S_(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class k_ extends w_{constructor(e){Xw(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return k_.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return k_.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=S_.fromJSON(e);return Xw(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return S_._create(r,n)}catch(i){return null}}}class C_ extends b_{constructor(){super("twitter.com")}static credential(e,t){return p_._fromParams({providerId:C_.PROVIDER_ID,signInMethod:C_.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return C_.credentialFromTaggedObject(e)}static credentialFromError(e){return C_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return C_.credential(n,r)}catch(i){return null}}}async function A_(e,t){return ub(e,"POST","/v1/accounts:signUp",ab(e,t))}C_.TWITTER_SIGN_IN_METHOD="twitter.com",C_.PROVIDER_ID="twitter.com";class x_{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Ab._fromIdTokenResponse(e,n,r),s=P_(n);return new x_({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=P_(n);return new x_({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function P_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class N_ extends k{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,N_.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new N_(e,t,n,r)}}function R_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw N_._fromErrorAndOperation(e,n,t,r);throw n}))}function O_(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function D_(e,t){const n=F(e);await M_(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return cb(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=O_(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function L_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Tb(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return x_._forOperation(e,"link",r)}async function M_(e,t,n){await Sb(t);const r=!1===e?"provider-already-linked":"no-such-provider";Xw(O_(t.providerData).has(n)===e,t.auth,r)}async function U_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await Tb(e,R_(r,i,t,e),n);Xw(s.idToken,r,"internal-error");const o=_b(s.idToken);Xw(o,r,"internal-error");const{sub:a}=o;return Xw(e.uid===a,r,"user-mismatch"),x_._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Ww(r,"user-mismatch"),s}}async function F_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await R_(e,r,t),s=await x_._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function V_(e,t){return F_(Yb(e),t)}async function j_(e,t){const n=F(e);return await M_(!1,n,t.providerId),L_(n,t)}async function z_(e,t){return U_(F(e),t)}async function B_(e,t){const n=Yb(e),r=await async function(e,t){return ub(e,"POST","/v1/accounts:signInWithCustomToken",ab(e,t))}(n,{token:t,returnSecureToken:!0}),i=await x_._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class q_{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?H_._fromServerResponse(e,t):"totpInfo"in t?W_._fromServerResponse(e,t):Ww(e,"internal-error")}}class H_ extends q_{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new H_(t)}}class W_ extends q_{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new W_(t)}}function K_(e,t,n){var r;Xw((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Xw("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Xw(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Xw(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function G_(e){const t=Yb(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Q_(e,t){await async function(e,t){return cb(e,"POST","/v1/accounts:update",ab(e,t))}(F(e),{oobCode:t})}async function Y_(e,t){const n=F(e),r=await o_(n,{oobCode:t}),i=r.requestType;switch(Xw(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Xw(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Xw(r.mfaInfo,n,"internal-error");default:Xw(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=q_._fromServerResponse(Yb(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function X_(e,t){const n={identifier:t,continueUri:eb()?Zw():"http://localhost"},{signinMethods:r}=await async function(e,t){return cb(e,"POST","/v1/accounts:createAuthUri",ab(e,t))}(F(e),n);return r||[]}async function J_(e,t){const n=F(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&K_(n.auth,r,t);const{email:i}=await async function(e,t){return l_(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function $_(e,t,n){const r=F(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&K_(r.auth,i,n);const{email:s}=await async function(e,t){return l_(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function Z_(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=F(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await Tb(i,async function(e,t){return cb(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function eT(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Tb(e,async function(e,t){return cb(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class tT{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class nT extends tT{constructor(e,t,n,r){super(e,t,n),this.username=r}}class rT extends tT{constructor(e,t){super(e,"facebook.com",t)}}class iT extends nT{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class sT extends tT{constructor(e,t){super(e,"google.com",t)}}class oT extends nT{constructor(e,t,n){super(e,"twitter.com",t,n)}}function aT(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=_b(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new tT(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new rT(s,i);case"github.com":return new iT(s,i);case"google.com":return new sT(s,i);case"twitter.com":return new oT(s,i,e.screenName||null);case"custom":case"anonymous":return new tT(s,null);default:return new tT(s,r,i)}}(n)}class cT{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new cT("enroll",e,t)}static _fromMfaPendingCredential(e){return new cT("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return cT._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return cT._fromIdtoken(e.multiFactorSession.idToken)}return null}}class lT{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Yb(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>q_._fromServerResponse(n,e)));Xw(r.mfaPendingCredential,n,"internal-error");const s=cT._fromMfaPendingCredential(r.mfaPendingCredential);return new lT(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await x_._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Xw(t.user,n,"internal-error"),x_._forOperation(t.user,t.operationType,o);default:Ww(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class uT{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>q_._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new uT(e)}async getSession(){return cT._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Tb(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Tb(this.user,function(e,t){return cb(e,"POST","/v2/accounts/mfaEnrollment:withdraw",ab(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(r){throw r}}}const hT=new WeakMap;const dT="__sak";class fT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dT,"1"),this.storage.removeItem(dT),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class pT extends fT{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=y();return Ub(e)||qb(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Hb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);E()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pT.type="LOCAL";const mT=pT;class gT extends fT{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}gT.type="SESSION";const vT=gT;class yT{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new yT(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function wT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}yT.receivers=[];class bT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=wT("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function _T(){return window}function TT(){return"undefined"!==typeof _T().WorkerGlobalScope&&"function"===typeof _T().importScripts}const ET="firebaseLocalStorageDb",IT="firebaseLocalStorage",ST="fbase_key";class kT{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function CT(e,t){return e.transaction([IT],t?"readwrite":"readonly").objectStore(IT)}function AT(){const e=indexedDB.open(ET,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(IT,{keyPath:ST})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(IT)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ET);return new kT(e).toPromise()}(),t(await AT()))}))}))}async function xT(e,t,n){const r=CT(e,!0).put({[ST]:t,value:n});return new kT(r).toPromise()}function PT(e,t){const n=CT(e,!0).delete(t);return new kT(n).toPromise()}class NT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await AT()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yT._getInstance(TT()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new bT(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await AT();return await xT(e,dT,"1"),await PT(e,dT),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>xT(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=CT(e,!1).get(t),r=await new kT(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>PT(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=CT(e,!1).getAll();return new kT(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}NT.type="LOCAL";const RT=NT;const OT=1e12;class DT{constructor(e){this.auth=e,this.counter=OT,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new LT(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||OT;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||OT;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||OT;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class LT{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Xw(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const MT=$b("rcb"),UT=new nb(3e4,6e4);class FT{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=_T().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Xw(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&mb(_T().grecaptcha)?Promise.resolve(_T().grecaptcha):new Promise(((n,r)=>{const i=_T().setTimeout((()=>{r(Kw(e,"network-request-failed"))}),UT.get());_T()[MT]=()=>{_T().clearTimeout(i),delete _T()[MT];const s=_T().grecaptcha;if(!s||!mb(s))return void r(Kw(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Jb("".concat("https://www.google.com/recaptcha/api.js?","?").concat(R({onload:MT,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Kw(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=_T().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class VT{async load(e){return new DT(e)}clearedOneInstance(){}}const jT="recaptcha",zT={theme:"light",type:"image"};class BT{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},zT);this.parameters=n,this.type=jT,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Yb(e),this.isInvisible="invisible"===this.parameters.size,Xw("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Xw(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new VT:new FT,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Xw(!this.parameters.sitekey,this.auth,"argument-error"),Xw(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Xw("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=_T()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Xw(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Xw(eb()&&!TT(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await cb(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Xw(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Xw(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qT{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=g_._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function HT(e,t,n){var r;const i=await n.verify();try{let s;if(Xw("string"===typeof i,e,"argument-error"),Xw(n.type===jT,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Xw("enroll"===t.type,e,"internal-error");const n=await function(e,t){return cb(e,"POST","/v2/accounts/mfaEnrollment:start",ab(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Xw("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Xw(n,e,"missing-multi-factor-info");const o=await function(e,t){return cb(e,"POST","/v2/accounts/mfaSignIn:start",ab(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return cb(e,"POST","/v1/accounts:sendVerificationCode",ab(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class WT{constructor(e){this.providerId=WT.PROVIDER_ID,this.auth=Yb(e)}verifyPhoneNumber(e,t){return HT(this.auth,e,F(t))}static credential(e,t){return g_._fromVerification(e,t)}static credentialFromResult(e){const t=e;return WT.credentialFromTaggedObject(t)}static credentialFromError(e){return WT.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?g_._fromTokenResponse(n,r):null}}function KT(e,t){return t?Pb(t):(Xw(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}WT.PROVIDER_ID="phone",WT.PHONE_SIGN_IN_METHOD="phone";class GT extends s_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return f_(e,this._buildIdpRequest())}_linkToIdToken(e,t){return f_(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return f_(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function QT(e){return F_(e.auth,new GT(e),e.bypassAuthState)}function YT(e){const{auth:t,user:n}=e;return Xw(n,t,"internal-error"),U_(n,new GT(e),e.bypassAuthState)}async function XT(e){const{auth:t,user:n}=e;return Xw(n,t,"internal-error"),L_(n,new GT(e),e.bypassAuthState)}class JT{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QT;case"linkViaPopup":case"linkViaRedirect":return XT;case"reauthViaPopup":case"reauthViaRedirect":return YT;default:Ww(this.auth,"internal-error")}}resolve(e){$w(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$w(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $T=new nb(2e3,1e4);class ZT extends JT{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,ZT.currentPopupAction&&ZT.currentPopupAction.cancel(),ZT.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xw(e,this.auth,"internal-error"),e}async onExecution(){$w(1===this.filter.length,"Popup operations only handle one event");const e=wT();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Kw(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Kw(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ZT.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Kw(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,$T.get())};e()}}ZT.currentPopupAction=null;const eE="pendingRedirect",tE=new Map;class nE extends JT{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=tE.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=oE(t),r=sE(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}tE.set(this.auth._key(),e)}return this.bypassAuthState||tE.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function rE(e,t){return sE(e)._set(oE(t),"true")}function iE(e,t){tE.set(e._key(),t)}function sE(e){return Pb(e._redirectPersistence)}function oE(e){return Ob(eE,e.config.apiKey,e.name)}function aE(e,t,n){return async function(e,t,n){const r=Yb(e);Qw(e,t,w_),await r._initializationPromise;const i=KT(r,n);return await rE(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function cE(e,t,n){return async function(e,t,n){const r=F(e);Qw(r.auth,t,w_),await r.auth._initializationPromise;const i=KT(r.auth,n);await rE(i,r.auth);const s=await hE(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function lE(e,t,n){return async function(e,t,n){const r=F(e);Qw(r.auth,t,w_),await r.auth._initializationPromise;const i=KT(r.auth,n);await M_(!1,r,t.providerId),await rE(i,r.auth);const s=await hE(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function uE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Yb(e),i=KT(r,t),s=new nE(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function hE(e){const t=wT("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class dE{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pE(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!pE(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Kw(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fE(e))}saveEventToCache(e){this.cachedEventUids.add(fE(e)),this.lastProcessedEventTime=Date.now()}}function fE(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function pE(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function mE(e){return cb(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const gE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vE=/^https?/;function yE(e){const t=Zw(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!vE.test(n))return!1;if(gE.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const wE=new nb(3e4,6e4);function bE(){const e=_T().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let _E=null;function TE(e){return _E=_E||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){bE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{bE(),n(Kw(e,"network-request-failed"))},timeout:wE.get()})}if(null===(i=null===(r=_T().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=_T().gapi)||void 0===s?void 0:s.load)){const t=$b("iframefcb");return _T()[t]=()=>{gapi.load?o():n(Kw(e,"network-request-failed"))},Jb("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw _E=null,e}))}(e),_E}const EE=new nb(5e3,15e3),IE="__/auth/iframe",SE="emulator/auth/iframe",kE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AE(e){const t=e.config;Xw(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?rb(t,SE):"https://".concat(e.config.authDomain,"/").concat(IE),r={apiKey:t.apiKey,appName:e.name,v:xe},i=CE.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(R(r).slice(1))}const xE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class PE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function NE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},xE),{width:r.toString(),height:i.toString(),top:s,left:o}),l=y().toLowerCase();n&&(a=Fb(l)?"_blank":n),Mb(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return qb(arguments.length>0&&void 0!==arguments[0]?arguments[0]:y())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new PE(null);const h=window.open(t||"",a,u);Xw(h,e,"popup-blocked");try{h.focus()}catch(d){}return new PE(h)}const RE="__/auth/handler",OE="emulator/auth/handler",DE=encodeURIComponent("fac");async function LE(e,t,n,r,i,s){Xw(e.config.authDomain,e,"auth-domain-config-required"),Xw(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:xe,eventId:i};if(t instanceof w_){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof b_){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?"#".concat(DE,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(RE);return rb(t,OE)}(e),"?").concat(R(a).slice(1)).concat(l)}const ME="webStorageSupport";const UE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vT,this._completeRedirectFn=uE,this._overrideRedirectResult=iE}async _openPopup(e,t,n,r){var i;$w(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return NE(e,await LE(e,t,n,Zw(),r),wT())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){_T().location.href=e}(await LE(e,t,n,Zw(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):($w(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await TE(e),n=_T().gapi;return Xw(n,e,"internal-error"),t.open({where:document.body,url:AE(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kE,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Kw(e,"network-request-failed"),s=_T().setTimeout((()=>{r(i)}),EE.get());function o(){_T().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new dE(e);return t.register("authEvent",(t=>{Xw(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ME,{type:ME},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ME];void 0!==i&&t(!!i),Ww(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await mE(e);for(const r of t)try{if(yE(r))return}catch(n){}Ww(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Hb()||Ub()||qb()}};class FE{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Jw("unexpected MultiFactorSessionType")}}}class VE extends FE{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new VE(e)}_finalizeEnroll(e,t,n){return function(e,t){return cb(e,"POST","/v2/accounts/mfaEnrollment:finalize",ab(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return cb(e,"POST","/v2/accounts/mfaSignIn:finalize",ab(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class jE{constructor(){}static assertion(e){return VE._fromCredential(e)}}jE.FACTOR_ID="phone";var zE="@firebase/auth",BE="1.5.1";class qE{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Xw(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}m("authIdTokenMaxAge");var HE;function WE(){return window}HE="Browser",Ee(new V("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Xw(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:HE,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wb(HE)},l=new Qb(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pb);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ee(new V("auth-internal",(e=>(e=>new qE(e))(Yb(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),De(zE,BE,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(HE)),De(zE,BE,"esm2017");async function KE(e,t,n){var r;const{BuildInfo:i}=WE();$w(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if($w(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return qb()?o.ibi=i.packageName:jb()?o.apn=i.packageName:Ww(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,LE(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function GE(e){const{cordova:t}=WE();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const QE=20;class YE extends dE{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function XE(e){const t=await ZE()._get(eI(e));return t&&await ZE()._remove(eI(e)),t}function JE(e,t){var n,r;const i=function(e){const t=tI(e),n=t.link?decodeURIComponent(t.link):void 0,r=tI(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return tI(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=tI(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Kw(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function $E(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<QE;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function ZE(){return Pb(mT)}function eI(e){return Ob("authEvent",e.config.apiKey,e.name)}function tI(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return O(n.join("?"))}const nI=class{constructor(){this._redirectPersistence=vT,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=uE,this._overrideRedirectResult=iE}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new YE(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Ww(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,l,u;const h=WE();Xw("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Xw("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Xw("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Xw("function"===typeof(null===(c=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Xw("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),tE.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:$E(),postBody:null,tenantId:e.tenantId,error:Kw(e,"no-auth-event")}}(e,n,r);await function(e,t){return ZE()._set(eI(e),t)}(e,s);const o=await KE(e,s,t);return async function(e,t,n){const{cordova:r}=WE();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(Kw(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),jb()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await GE(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=WE(),n={};qb()?n.iosBundleId=t.packageName:jb()?n.androidPackageName=t.packageName:Ww(e,"operation-not-supported-in-this-environment"),await mE(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=WE(),s=setTimeout((async()=>{await XE(e),t.onEvent(rI())}),500),o=async n=>{clearTimeout(s);const r=await XE(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=JE(r,n.url)),t.onEvent(i||rI())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,c="".concat(i.packageName.toLowerCase(),"://");WE().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function rI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Kw("no-auth-event")}}function iI(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function sI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return!("file:"!==iI()&&"ionic:"!==iI()&&"capacitor:"!==iI()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function oI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return E()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/Edge\/\d+/.test(e)}(e)}function aI(){try{const e=self.localStorage,t=wT();if(e)return e.setItem(t,"1"),e.removeItem(t),!oI()||S()}catch(e){return cI()&&S()}return!1}function cI(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function lI(){return("http:"===iI()||"https:"===iI()||_()||sI())&&!(T()||b())&&aI()&&!cI()}function uI(){return sI()&&"undefined"!==typeof document}const hI={LOCAL:"local",NONE:"none",SESSION:"session"},dI=Xw,fI="persistence";async function pI(e){await e._initializationPromise;const t=mI(),n=Ob(fI,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function mI(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const gI=Xw;class vI{constructor(){this.browserResolver=Pb(UE),this.cordovaResolver=Pb(nI),this.underlyingResolver=null,this._redirectPersistence=vT,this._completeRedirectFn=uE,this._overrideRedirectResult=iE}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return uI()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return gI(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!uI()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function yI(e){return e.unwrap()}function wI(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new EI(e,function(e,t){var n;const r=F(e),i=t;return Xw(t.customData.operationType,r,"argument-error"),Xw(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),lT._fromError(r,i)}(e,t))}else if(r){const e=bI(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function bI(e){const{_tokenResponse:t}=e instanceof k?e.customData:e;if(!t)return null;if(!(e instanceof k)&&"temporaryProof"in t&&"phoneNumber"in t)return WT.credentialFromResult(e);const n=t.providerId;if(!n||n===Rw.PASSWORD)return null;let r;switch(n){case Rw.GOOGLE:r=E_;break;case Rw.FACEBOOK:r=T_;break;case Rw.GITHUB:r=I_;break;case Rw.TWITTER:r=C_;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?S_._create(n,o):p_._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new __(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof k?r.credentialFromError(e):r.credentialFromResult(e)}function _I(e,t){return t.catch((t=>{throw t instanceof k&&wI(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,bI(r)),additionalUserInfo:aT(e),user:II.getOrCreate(n)};var r}))}async function TI(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>_I(e,n.confirm(t))}}class EI{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return _I(yI(this.auth),this.resolver.resolveSignIn(e))}}class II{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=F(e);return hT.has(t)||hT.set(t,uT._fromUser(t)),hT.get(t)}(e)}static getOrCreate(e){return II.USER_MAP.has(e)||II.USER_MAP.set(e,new II(e)),II.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return _I(this.auth,j_(this._delegate,e))}async linkWithPhoneNumber(e,t){return TI(this.auth,async function(e,t,n){const r=F(e);await M_(!1,r,"phone");const i=await HT(r.auth,t,F(n));return new qT(i,(e=>j_(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return _I(this.auth,async function(e,t,n){const r=F(e);Qw(r.auth,t,w_);const i=KT(r.auth,n);return new ZT(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,vI))}async linkWithRedirect(e){return await pI(Yb(this.auth)),lE(this._delegate,e,vI)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return _I(this.auth,z_(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return TI(this.auth,async function(e,t,n){const r=F(e),i=await HT(r.auth,t,F(n));return new qT(i,(e=>z_(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return _I(this.auth,async function(e,t,n){const r=F(e);Qw(r.auth,t,w_);const i=KT(r.auth,n);return new ZT(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,vI))}async reauthenticateWithRedirect(e){return await pI(Yb(this.auth)),cE(this._delegate,e,vI)}sendEmailVerification(e){return J_(this._delegate,e)}async unlink(e){return await D_(this._delegate,e),this}updateEmail(e){return function(e,t){return eT(F(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return eT(F(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await L_(F(e),t)}(this._delegate,e)}updateProfile(e){return Z_(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return $_(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}II.USER_MAP=new WeakMap;const SI=Xw;class kI{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;SI(n,"invalid-api-key",{appName:e.name}),SI(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?vI:void 0;this._delegate=t.initialize({options:{persistence:AI(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(jw),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?II.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){n_(this._delegate,e,t)}applyActionCode(e){return Q_(this._delegate,e)}checkActionCode(e){return Y_(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await o_(F(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&G_(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return _I(this._delegate,async function(e,t,n){const r=Yb(e),i=t_(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",A_),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&G_(e),t})),o=await x_._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return X_(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=v_.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){SI(lI(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Yb(e)._initializationPromise,uE(e,t,!1)}(this._delegate,vI);return e?_I(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Yb(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=CI(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=CI(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=Yb(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Xw(t.handleCodeInApp,r,"argument-error"),t&&K_(r,e,t)}(i,n),await t_(r,i,"getOobCode",h_)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=Yb(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&K_(r,i,n),await t_(r,i,"getOobCode",u_)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){dI(Object.values(hI).includes(t),e,"invalid-persistence-type"),T()?dI(t!==hI.SESSION,e,"unsupported-persistence-type"):b()?dI(t===hI.NONE,e,"unsupported-persistence-type"):cI()?dI(t===hI.NONE||t===hI.LOCAL&&S(),e,"unsupported-persistence-type"):dI(t===hI.NONE||aI(),e,"unsupported-persistence-type")}(this._delegate,e),e){case hI.SESSION:t=vT;break;case hI.LOCAL:t=await Pb(RT)._isAvailable()?RT:mT;break;case hI.NONE:t=Rb;break;default:return Ww("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return _I(this._delegate,async function(e){var t;const n=Yb(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new x_({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await A_(n,{returnSecureToken:!0}),i=await x_._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return _I(this._delegate,V_(this._delegate,e))}signInWithCustomToken(e){return _I(this._delegate,B_(this._delegate,e))}signInWithEmailAndPassword(e,t){return _I(this._delegate,function(e,t,n){return V_(F(e),y_.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&G_(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return _I(this._delegate,async function(e,t,n){const r=F(e),i=y_.credentialWithLink(t,n||Zw());return Xw(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),V_(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return TI(this._delegate,async function(e,t,n){const r=Yb(e),i=await HT(r,t,F(n));return new qT(i,(e=>V_(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return SI(lI(),this._delegate,"operation-not-supported-in-this-environment"),_I(this._delegate,async function(e,t,n){const r=Yb(e);Qw(e,t,w_);const i=KT(r,n);return new ZT(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,vI))}async signInWithRedirect(e){return SI(lI(),this._delegate,"operation-not-supported-in-this-environment"),await pI(this._delegate),aE(this._delegate,e,vI)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Y_(F(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function CI(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&II.getOrCreate(e)),error:t,complete:n}}function AI(e,t){const n=function(e,t){const n=mI();if(!n)return[];const r=Ob(fI,e,t);switch(n.getItem(r)){case hI.NONE:return[Rb];case hI.LOCAL:return[RT,vT];case hI.SESSION:return[vT];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(RT)||n.push(RT),"undefined"!==typeof window)for(const r of[mT,vT])n.includes(r)||n.push(r);return n.includes(Rb)||n.push(Rb),n}kI.Persistence=hI;class xI{constructor(){this.providerId="phone",this._delegate=new WT(yI(Ze.auth()))}static credential(e,t){return WT.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}xI.PHONE_SIGN_IN_METHOD=WT.PHONE_SIGN_IN_METHOD,xI.PROVIDER_ID=WT.PROVIDER_ID;const PI=Xw;class NI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ze.app();var r;PI(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new BT(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new V("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new kI(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ow,PASSWORD_RESET:Dw,RECOVER_EMAIL:Lw,REVERT_SECOND_FACTOR_ADDITION:Mw,VERIFY_AND_CHANGE_EMAIL:Uw,VERIFY_EMAIL:Fw}},EmailAuthProvider:y_,FacebookAuthProvider:T_,GithubAuthProvider:I_,GoogleAuthProvider:E_,OAuthProvider:__,SAMLAuthProvider:k_,PhoneAuthProvider:xI,PhoneMultiFactorGenerator:jE,RecaptchaVerifier:NI,TwitterAuthProvider:C_,Auth:kI,AuthCredential:s_,Error:k}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.1")}(Ze);const RI=Ze.initializeApp({apiKey:"AIzaSyBWpu79eLc-qRgx1QMlJA81254h-4caJ8o",authDomain:"mediagallery-19bd6.firebaseapp.com",projectId:"mediagallery-19bd6",storageBucket:"mediagallery-19bd6.appspot.com",messagingSenderId:"440566078762",appId:"1:440566078762:web:5bfe7cdb1de97590b11253"}),OI=Ze.storage(),DI=Ze.firestore(),LI=Ze.firestore.FieldValue.serverTimestamp,MI=Ze.auth(),UI=new Ze.auth.GoogleAuthProvider,FI=e=>{const[n,r]=(0,t.useState)(0),[i,s]=(0,t.useState)(null),[o,a]=(0,t.useState)(null),[c,l]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{const t=OI.ref(e.name),n=DI.collection("images");t.put(e).on("state_changed",(e=>{let t=e.bytesTransferred/e.totalBytes*100;r(t)}),(e=>{s(e)}),(async()=>{const e=await t.getDownloadURL(),r=LI();n.add({url:e,createdAt:r,like:c}),a(e)}))}),[e]),{progress:n,url:o,error:i,setLike:l}};var VI=function(e){return{isEnabled:function(t){return e.some((function(e){return!!t[e]}))}}},jI={measureLayout:VI(["layout","layoutId","drag"]),animation:VI(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:VI(["exit"]),drag:VI(["drag","dragControls"]),focus:VI(["whileFocus"]),hover:VI(["whileHover","onHoverStart","onHoverEnd"]),tap:VI(["whileTap","onTap","onTapStart","onTapCancel"]),pan:VI(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:VI(["whileInView","onViewportEnter","onViewportLeave"])};var zI=(0,t.createContext)({strict:!1}),BI=Object.keys(jI),qI=BI.length;var HI=(0,t.createContext)({transformPagePoint:function(e){return e},isStatic:!1}),WI=(0,t.createContext)({});var KI=(0,t.createContext)(null),GI="undefined"!==typeof window,QI=GI?t.useLayoutEffect:t.useEffect;function YI(e,n,r,i){var s=(0,t.useContext)(zI),o=(0,t.useContext)(WI).visualElement,a=(0,t.useContext)(KI),c=(0,t.useRef)(void 0);i||(i=s.renderer),!c.current&&i&&(c.current=i(e,{visualState:n,parent:o,props:r,presenceId:null===a||void 0===a?void 0:a.id,blockInitialAnimation:!1===(null===a||void 0===a?void 0:a.initial)}));var l=c.current;return QI((function(){null===l||void 0===l||l.syncRender()})),(0,t.useEffect)((function(){var e;null===(e=null===l||void 0===l?void 0:l.animationState)||void 0===e||e.animateChanges()})),QI((function(){return function(){return null===l||void 0===l?void 0:l.notifyUnmount()}}),[]),l}function XI(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function JI(e){return Array.isArray(e)}function $I(e){return"string"===typeof e||JI(e)}function ZI(e,t,n,r,i){var s;return void 0===r&&(r={}),void 0===i&&(i={}),"function"===typeof t&&(t=t(null!==n&&void 0!==n?n:e.custom,r,i)),"string"===typeof t&&(t=null===(s=e.variants)||void 0===s?void 0:s[t]),"function"===typeof t&&(t=t(null!==n&&void 0!==n?n:e.custom,r,i)),t}function eS(e,t,n){var r=e.getProps();return ZI(r,t,null!==n&&void 0!==n?n:r.custom,function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.getVelocity()})),t}(e))}function tS(e){var t;return"function"===typeof(null===(t=e.animate)||void 0===t?void 0:t.start)||$I(e.initial)||$I(e.animate)||$I(e.whileHover)||$I(e.whileDrag)||$I(e.whileTap)||$I(e.whileFocus)||$I(e.exit)}function nS(e){return Boolean(tS(e)||e.variants)}function rS(e){var n=function(e,t){if(tS(e)){var n=e.initial,r=e.animate;return{initial:!1===n||$I(n)?n:void 0,animate:$I(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(WI)),r=n.initial,i=n.animate;return(0,t.useMemo)((function(){return{initial:r,animate:i}}),[iS(r),iS(i)])}function iS(e){return Array.isArray(e)?e.join(" "):e}function sS(e){var n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}const oS=1/60*1e3,aS="undefined"!==typeof performance?()=>performance.now():()=>Date.now(),cS="undefined"!==typeof window?e=>window.requestAnimationFrame(e):e=>setTimeout((()=>e(aS())),oS);let lS=!0,uS=!1,hS=!1;const dS={delta:0,timestamp:0},fS=["read","update","preRender","render","postRender"],pS=fS.reduce(((e,t)=>(e[t]=function(e){let t=[],n=[],r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:function(e){const s=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,a=s?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),-1===a.indexOf(e)&&(a.push(e),s&&i&&(r=t.length)),e},cancel:e=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1),o.delete(e)},process:c=>{if(i)s=!0;else{if(i=!0,[t,n]=[n,t],n.length=0,r=t.length,r)for(let n=0;n<r;n++){const r=t[n];r(c),o.has(r)&&(a.schedule(r),e())}i=!1,s&&(s=!1,a.process(c))}}};return a}((()=>uS=!0)),e)),{}),mS=fS.reduce(((e,t)=>{const n=pS[t];return e[t]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return uS||bS(),n.schedule(e,t,r)},e}),{}),gS=fS.reduce(((e,t)=>(e[t]=pS[t].cancel,e)),{}),vS=fS.reduce(((e,t)=>(e[t]=()=>pS[t].process(dS),e)),{}),yS=e=>pS[e].process(dS),wS=e=>{uS=!1,dS.delta=lS?oS:Math.max(Math.min(e-dS.timestamp,40),1),dS.timestamp=e,hS=!0,fS.forEach(yS),hS=!1,uS&&(lS=!1,cS(wS))},bS=()=>{uS=!0,lS=!0,hS||cS(wS)},_S=()=>dS,TS=mS,ES=(e,t,n)=>-n*e+n*t+e;function IS(e,t){return t?e*(1e3/t):0}function SS(e,t){-1===e.indexOf(t)&&e.push(t)}function kS(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var CS=function(){function e(){this.subscriptions=[]}return e.prototype.add=function(e){var t=this;return SS(this.subscriptions,e),function(){return kS(t.subscriptions,e)}},e.prototype.notify=function(e,t,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(var i=0;i<r;i++){var s=this.subscriptions[i];s&&s(e,t,n)}},e.prototype.getSize=function(){return this.subscriptions.length},e.prototype.clear=function(){this.subscriptions.length=0},e}(),AS=function(){function e(e){var t,n=this;this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new CS,this.velocityUpdateSubscribers=new CS,this.renderSubscribers=new CS,this.canTrackVelocity=!1,this.updateAndNotify=function(e,t){void 0===t&&(t=!0),n.prev=n.current,n.current=e;var r=_S(),i=r.delta,s=r.timestamp;n.lastUpdated!==s&&(n.timeDelta=i,n.lastUpdated=s,TS.postRender(n.scheduleVelocityCheck)),n.prev!==n.current&&n.updateSubscribers.notify(n.current),n.velocityUpdateSubscribers.getSize()&&n.velocityUpdateSubscribers.notify(n.getVelocity()),t&&n.renderSubscribers.notify(n.current)},this.scheduleVelocityCheck=function(){return TS.postRender(n.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==n.lastUpdated&&(n.prev=n.current,n.velocityUpdateSubscribers.notify(n.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t)))}return e.prototype.onChange=function(e){return this.updateSubscribers.add(e)},e.prototype.clearListeners=function(){this.updateSubscribers.clear()},e.prototype.onRenderRequest=function(e){return e(this.get()),this.renderSubscribers.add(e)},e.prototype.attach=function(e){this.passiveEffect=e},e.prototype.set=function(e,t){void 0===t&&(t=!0),t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)},e.prototype.get=function(){return this.current},e.prototype.getPrevious=function(){return this.prev},e.prototype.getVelocity=function(){return this.canTrackVelocity?IS(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},e.prototype.start=function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.stopAnimation=e(n)})).then((function(){return t.clearAnimation()}))},e.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},e.prototype.isAnimating=function(){return!!this.stopAnimation},e.prototype.clearAnimation=function(){this.stopAnimation=null},e.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},e}();function xS(e){return new AS(e)}var PS=function(e){return Boolean(null!==e&&"object"===typeof e&&e.getVelocity)},NS=function(){},RS=function(){};const OS=(e,t,n)=>Math.min(Math.max(n,e),t),DS=.001,LS=.01,MS=10,US=.05,FS=1;function VS(e){let t,n,{duration:r=800,bounce:i=.25,velocity:s=0,mass:o=1}=e;NS(r<=1e3*MS,"Spring duration must be 10 seconds or less");let a=1-i;a=OS(US,FS,a),r=OS(LS,MS,r/1e3),a<1?(t=e=>{const t=e*a,n=t*r,i=t-s,o=zS(e,a),c=Math.exp(-n);return DS-i/o*c},n=e=>{const n=e*a*r,i=n*s+s,o=Math.pow(a,2)*Math.pow(e,2)*r,c=Math.exp(-n),l=zS(Math.pow(e,2),a);return(-t(e)+DS>0?-1:1)*((i-o)*c)/l}):(t=e=>Math.exp(-e*r)*((e-s)*r+1)-DS,n=e=>Math.exp(-e*r)*(r*r*(s-e)));const c=function(e,t,n){let r=n;for(let i=1;i<jS;i++)r-=e(r)/t(r);return r}(t,n,5/r);if(r*=1e3,isNaN(c))return{stiffness:100,damping:10,duration:r};{const e=Math.pow(c,2)*o;return{stiffness:e,damping:2*a*Math.sqrt(o*e),duration:r}}}const jS=12;function zS(e,t){return e*Math.sqrt(1-t*t)}const BS=["duration","bounce"],qS=["stiffness","damping","mass"];function HS(e,t){return t.some((t=>void 0!==e[t]))}function WS(e){var{from:t=0,to:n=1,restSpeed:r=2,restDelta:i}=e,s=xw(e,["from","to","restSpeed","restDelta"]);const o={done:!1,value:t};let{stiffness:a,damping:c,mass:l,velocity:u,duration:h,isResolvedFromDuration:d}=function(e){let t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!HS(e,qS)&&HS(e,BS)){const n=VS(e);t=Object.assign(Object.assign(Object.assign({},t),n),{velocity:0,mass:1}),t.isResolvedFromDuration=!0}return t}(s),f=KS,p=KS;function m(){const e=u?-u/1e3:0,r=n-t,s=c/(2*Math.sqrt(a*l)),o=Math.sqrt(a/l)/1e3;if(void 0===i&&(i=Math.min(Math.abs(n-t)/100,.4)),s<1){const t=zS(o,s);f=i=>{const a=Math.exp(-s*o*i);return n-a*((e+s*o*r)/t*Math.sin(t*i)+r*Math.cos(t*i))},p=n=>{const i=Math.exp(-s*o*n);return s*o*i*(Math.sin(t*n)*(e+s*o*r)/t+r*Math.cos(t*n))-i*(Math.cos(t*n)*(e+s*o*r)-t*r*Math.sin(t*n))}}else if(1===s)f=t=>n-Math.exp(-o*t)*(r+(e+o*r)*t);else{const t=o*Math.sqrt(s*s-1);f=i=>{const a=Math.exp(-s*o*i),c=Math.min(t*i,300);return n-a*((e+s*o*r)*Math.sinh(c)+t*r*Math.cosh(c))/t}}}return m(),{next:e=>{const t=f(e);if(d)o.done=e>=h;else{const s=1e3*p(e),a=Math.abs(s)<=r,c=Math.abs(n-t)<=i;o.done=a&&c}return o.value=o.done?n:t,o},flipTarget:()=>{u=-u,[t,n]=[n,t],m()}}}WS.needsInterpolation=(e,t)=>"string"===typeof e||"string"===typeof t;const KS=e=>0,GS=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},QS=(e,t)=>n=>Math.max(Math.min(n,t),e),YS=e=>e%1?Number(e.toFixed(5)):e,XS=/(-)?([\d]*\.?[\d])+/g,JS=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,$S=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function ZS(e){return"string"===typeof e}const ek={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},tk=Object.assign(Object.assign({},ek),{transform:QS(0,1)}),nk=Object.assign(Object.assign({},ek),{default:1}),rk=(e,t)=>n=>Boolean(ZS(n)&&$S.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),ik=(e,t,n)=>r=>{if(!ZS(r))return r;const[i,s,o,a]=r.match(XS);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},sk=QS(0,255),ok=Object.assign(Object.assign({},ek),{transform:e=>Math.round(sk(e))}),ak={test:rk("rgb","red"),parse:ik("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:i=1}=e;return"rgba("+ok.transform(t)+", "+ok.transform(n)+", "+ok.transform(r)+", "+YS(tk.transform(i))+")"}};const ck={test:rk("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substr(1,2),n=e.substr(3,2),r=e.substr(5,2),i=e.substr(7,2)):(t=e.substr(1,1),n=e.substr(2,1),r=e.substr(3,1),i=e.substr(4,1),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:ak.transform},lk=e=>({test:t=>ZS(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),uk=lk("deg"),hk=lk("%"),dk=lk("px"),fk=lk("vh"),pk=lk("vw"),mk=Object.assign(Object.assign({},hk),{parse:e=>hk.parse(e)/100,transform:e=>hk.transform(100*e)}),gk={test:rk("hsl","hue"),parse:ik("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:i=1}=e;return"hsla("+Math.round(t)+", "+hk.transform(YS(n))+", "+hk.transform(YS(r))+", "+YS(tk.transform(i))+")"}};function vk(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function yk(e){let{hue:t,saturation:n,lightness:r,alpha:i}=e;t/=360,n/=100,r/=100;let s=0,o=0,a=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,i=2*r-e;s=vk(i,e,t+1/3),o=vk(i,e,t),a=vk(i,e,t-1/3)}else s=o=a=r;return{red:Math.round(255*s),green:Math.round(255*o),blue:Math.round(255*a),alpha:i}}const wk=(e,t,n)=>{const r=e*e,i=t*t;return Math.sqrt(Math.max(0,n*(i-r)+r))},bk=[ck,ak,gk],_k=e=>bk.find((t=>t.test(e))),Tk=e=>"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),Ek=(e,t)=>{let n=_k(e),r=_k(t);RS(!!n,Tk(e)),RS(!!r,Tk(t));let i=n.parse(e),s=r.parse(t);n===gk&&(i=yk(i),n=ak),r===gk&&(s=yk(s),r=ak);const o=Object.assign({},i);return e=>{for(const t in o)"alpha"!==t&&(o[t]=wk(i[t],s[t],e));return o.alpha=ES(i.alpha,s.alpha,e),n.transform(o)}},Ik={test:e=>ak.test(e)||ck.test(e)||gk.test(e),parse:e=>ak.test(e)?ak.parse(e):gk.test(e)?gk.parse(e):ck.parse(e),transform:e=>ZS(e)?e:e.hasOwnProperty("red")?ak.transform(e):gk.transform(e)},Sk="${c}",kk="${n}";function Ck(e){"number"===typeof e&&(e="".concat(e));const t=[];let n=0;const r=e.match(JS);r&&(n=r.length,e=e.replace(JS,Sk),t.push(...r.map(Ik.parse)));const i=e.match(XS);return i&&(e=e.replace(XS,kk),t.push(...i.map(ek.parse))),{values:t,numColors:n,tokenised:e}}function Ak(e){return Ck(e).values}function xk(e){const{values:t,numColors:n,tokenised:r}=Ck(e),i=t.length;return e=>{let t=r;for(let r=0;r<i;r++)t=t.replace(r<n?Sk:kk,r<n?Ik.transform(e[r]):YS(e[r]));return t}}const Pk=e=>"number"===typeof e?0:e;const Nk={test:function(e){var t,n,r,i;return isNaN(e)&&ZS(e)&&(null!==(n=null===(t=e.match(XS))||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(i=null===(r=e.match(JS))||void 0===r?void 0:r.length)&&void 0!==i?i:0)>0},parse:Ak,createTransformer:xk,getAnimatableNone:function(e){const t=Ak(e);return xk(e)(t.map(Pk))}},Rk=e=>"number"===typeof e,Ok=(e,t)=>n=>t(e(n)),Dk=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Ok)};function Lk(e,t){return Rk(e)?n=>ES(e,t,n):Ik.test(e)?Ek(e,t):Vk(e,t)}const Mk=(e,t)=>{const n=[...e],r=n.length,i=e.map(((e,n)=>Lk(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}},Uk=(e,t)=>{const n=Object.assign(Object.assign({},e),t),r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=Lk(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}};function Fk(e){const t=Nk.parse(e),n=t.length;let r=0,i=0,s=0;for(let o=0;o<n;o++)r||"number"===typeof t[o]?r++:void 0!==t[o].hue?s++:i++;return{parsed:t,numNumbers:r,numRGB:i,numHSL:s}}const Vk=(e,t)=>{const n=Nk.createTransformer(t),r=Fk(e),i=Fk(t);return r.numHSL===i.numHSL&&r.numRGB===i.numRGB&&r.numNumbers>=i.numNumbers?Dk(Mk(r.parsed,i.parsed),n):(NS(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),n=>"".concat(n>0?t:e))},jk=(e,t)=>n=>ES(e,t,n);function zk(e,t,n){const r=[],i=n||function(e){return"number"===typeof e?jk:"string"===typeof e?Ik.test(e)?Ek:Vk:Array.isArray(e)?Mk:"object"===typeof e?Uk:void 0}(e[0]),s=e.length-1;for(let o=0;o<s;o++){let n=i(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]:t;n=Dk(e,n)}r.push(n)}return r}function Bk(e,t){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length;RS(s===t.length,"Both input and output ranges must be the same length"),RS(!r||!Array.isArray(r)||r.length===s-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),e[0]>e[s-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());const o=zk(t,r,i),a=2===s?function(e,t){let[n,r]=e,[i]=t;return e=>i(GS(n,r,e))}(e,o):function(e,t){const n=e.length,r=n-1;return i=>{let s=0,o=!1;if(i<=e[0]?o=!0:i>=e[r]&&(s=r-1,o=!0),!o){let t=1;for(;t<n&&!(e[t]>i||t===r);t++);s=t-1}const a=GS(e[s],e[s+1],i);return t[s](a)}}(e,o);return n?t=>a(OS(e[0],e[s-1],t)):a}const qk=e=>t=>1-e(1-t),Hk=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Wk=e=>t=>t*t*((e+1)*t-e),Kk=e=>e,Gk=(Qk=2,e=>Math.pow(e,Qk));var Qk;const Yk=qk(Gk),Xk=Hk(Gk),Jk=e=>1-Math.sin(Math.acos(e)),$k=qk(Jk),Zk=Hk($k),eC=Wk(1.525),tC=qk(eC),nC=Hk(eC),rC=(e=>{const t=Wk(e);return e=>(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))})(1.525),iC=e=>{if(1===e||0===e)return e;const t=e*e;return e<.36363636363636365?7.5625*t:e<.7272727272727273?9.075*t-9.9*e+3.4:e<.9?12.066481994459833*t-19.63545706371191*e+8.898060941828255:10.8*e*e-20.52*e+10.72},sC=qk(iC);function oC(e,t){return e.map((()=>t||Xk)).splice(0,e.length-1)}function aC(e){let{from:t=0,to:n=1,ease:r,offset:i,duration:s=300}=e;const o={done:!1,value:t},a=Array.isArray(n)?n:[t,n],c=function(e,t){return e.map((e=>e*t))}(i&&i.length===a.length?i:function(e){const t=e.length;return e.map(((e,n)=>0!==n?n/(t-1):0))}(a),s);function l(){return Bk(c,a,{ease:Array.isArray(r)?r:oC(a,r)})}let u=l();return{next:e=>(o.value=u(e),o.done=e>=s,o),flipTarget:()=>{a.reverse(),u=l()}}}const cC={keyframes:aC,spring:WS,decay:function(e){let{velocity:t=0,from:n=0,power:r=.8,timeConstant:i=350,restDelta:s=.5,modifyTarget:o}=e;const a={done:!1,value:n};let c=r*t;const l=n+c,u=void 0===o?l:o(l);return u!==l&&(c=u-n),{next:e=>{const t=-c*Math.exp(-e/i);return a.done=!(t>s||t<-s),a.value=a.done?u:u+t,a},flipTarget:()=>{}}}};function lC(e,t){return e-t-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)}const uC=e=>{const t=t=>{let{delta:n}=t;return e(n)};return{start:()=>TS.update(t,!0),stop:()=>gS.update(t)}};function hC(e){var t,n,{from:r,autoplay:i=!0,driver:s=uC,elapsed:o=0,repeat:a=0,repeatType:c="loop",repeatDelay:l=0,onPlay:u,onStop:h,onComplete:d,onRepeat:f,onUpdate:p}=e,m=xw(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let g,v,y,{to:w}=m,b=0,_=m.duration,T=!1,E=!0;const I=function(e){if(Array.isArray(e.to))return aC;if(cC[e.type])return cC[e.type];const t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?aC:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?WS:aC}(m);(null===(n=(t=I).needsInterpolation)||void 0===n?void 0:n.call(t,r,w))&&(y=Bk([0,100],[r,w],{clamp:!1}),r=0,w=100);const S=I(Object.assign(Object.assign({},m),{from:r,to:w}));function k(){b++,"reverse"===c?(E=b%2===0,o=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?t-(e-t)+n:lC(t+-e,t,n)}(o,_,l,E)):(o=lC(o,_,l),"mirror"===c&&S.flipTarget()),T=!1,f&&f()}function C(e){if(E||(e=-e),o+=e,!T){const e=S.next(Math.max(0,o));v=e.value,y&&(v=y(v)),T=E?e.done:o<=0}null===p||void 0===p||p(v),T&&(0===b&&(null!==_&&void 0!==_||(_=o)),b<a?function(e,t,n,r){return r?e>=t+n:e<=-n}(o,_,l,E)&&k():(g.stop(),d&&d()))}return i&&(null===u||void 0===u||u(),g=s(C),g.start()),{stop:()=>{null===h||void 0===h||h(),g.stop()}}}var dC=function(e){return 1e3*e};const fC=(e,t)=>1-3*t+3*e,pC=(e,t)=>3*t-6*e,mC=e=>3*e,gC=(e,t,n)=>((fC(t,n)*e+pC(t,n))*e+mC(t))*e,vC=(e,t,n)=>3*fC(t,n)*e*e+2*pC(t,n)*e+mC(t),yC=1e-7,wC=10;const bC=8;const _C=.1;function TC(e,t,n,r){if(e===t&&n===r)return Kk;const i=new Float32Array(11);for(let o=0;o<11;++o)i[o]=gC(o*_C,e,n);function s(t){let r=0,s=1;for(;10!==s&&i[s]<=t;++s)r+=_C;--s;const o=r+(t-i[s])/(i[s+1]-i[s])*_C,a=vC(o,e,n);return a>=.001?function(e,t,n,r){for(let i=0;i<bC;++i){const i=vC(t,n,r);if(0===i)return t;t-=(gC(t,n,r)-e)/i}return t}(t,o,e,n):0===a?o:function(e,t,n,r,i){let s,o,a=0;do{o=t+(n-t)/2,s=gC(o,r,i)-e,s>0?n=o:t=o}while(Math.abs(s)>yC&&++a<wC);return o}(t,r,r+_C,e,n)}return e=>0===e||1===e?e:gC(s(e),t,r)}var EC={linear:Kk,easeIn:Gk,easeInOut:Xk,easeOut:Yk,circIn:Jk,circInOut:Zk,circOut:$k,backIn:eC,backInOut:nC,backOut:tC,anticipate:rC,bounceIn:sC,bounceInOut:e=>e<.5?.5*(1-iC(1-2*e)):.5*iC(2*e-1)+.5,bounceOut:iC},IC=function(e){if(Array.isArray(e)){RS(4===e.length,"Cubic bezier arrays must contain four numerical values.");var t=Pw(e,4);return TC(t[0],t[1],t[2],t[3])}return"string"===typeof e?(RS(void 0!==EC[e],"Invalid easing type '".concat(e,"'")),EC[e]):e},SC=function(e){return Array.isArray(e)&&"number"!==typeof e[0]},kC=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!Nk.test(t)||t.startsWith("url(")))},CC=function(e){return Array.isArray(e)},AC=function(){return{type:"spring",stiffness:500,damping:25,restSpeed:10}},xC=function(e){return{type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}},PC=function(){return{type:"keyframes",ease:"linear",duration:.3}},NC=function(e){return{type:"keyframes",duration:.8,values:e}},RC={x:AC,y:AC,z:AC,rotate:AC,rotateX:AC,rotateY:AC,rotateZ:AC,scaleX:xC,scaleY:xC,scale:xC,opacity:PC,backgroundColor:PC,color:PC,default:xC},OC=function(e,t){var n;return n=CC(t)?NC:RC[e]||RC.default,Aw({to:t},n(t))};const DC=new Set(["brightness","contrast","saturate","opacity"]);function LC(e){let[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(XS)||[];if(!r)return e;const i=n.replace(r,"");let s=DC.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const MC=/([a-z-]*)\(.*?\)/g,UC=Object.assign(Object.assign({},Nk),{getAnimatableNone:e=>{const t=e.match(MC);return t?t.map(LC).join(" "):e}});var FC=Aw(Aw({},ek),{transform:Math.round}),VC={borderWidth:dk,borderTopWidth:dk,borderRightWidth:dk,borderBottomWidth:dk,borderLeftWidth:dk,borderRadius:dk,radius:dk,borderTopLeftRadius:dk,borderTopRightRadius:dk,borderBottomRightRadius:dk,borderBottomLeftRadius:dk,width:dk,maxWidth:dk,height:dk,maxHeight:dk,size:dk,top:dk,right:dk,bottom:dk,left:dk,padding:dk,paddingTop:dk,paddingRight:dk,paddingBottom:dk,paddingLeft:dk,margin:dk,marginTop:dk,marginRight:dk,marginBottom:dk,marginLeft:dk,rotate:uk,rotateX:uk,rotateY:uk,rotateZ:uk,scale:nk,scaleX:nk,scaleY:nk,scaleZ:nk,skew:uk,skewX:uk,skewY:uk,distance:dk,translateX:dk,translateY:dk,translateZ:dk,x:dk,y:dk,z:dk,perspective:dk,transformPerspective:dk,opacity:tk,originX:mk,originY:mk,originZ:dk,zIndex:FC,fillOpacity:tk,strokeOpacity:tk,numOctaves:FC},jC=Aw(Aw({},VC),{color:Ik,backgroundColor:Ik,outlineColor:Ik,fill:Ik,stroke:Ik,borderColor:Ik,borderTopColor:Ik,borderRightColor:Ik,borderBottomColor:Ik,borderLeftColor:Ik,filter:UC,WebkitFilter:UC}),zC=function(e){return jC[e]};function BC(e,t){var n,r=zC(e);return r!==UC&&(r=Nk),null===(n=r.getAnimatableNone)||void 0===n?void 0:n.call(r,t)}var qC={current:!1},HC=function(e){return Boolean(e&&"object"===typeof e&&e.mix&&e.toValue)},WC=function(e){return CC(e)?e[e.length-1]||0:e};var KC=!1;function GC(e,t,n){var r;return Array.isArray(t.to)&&(null!==(r=e.duration)&&void 0!==r||(e.duration=.8)),function(e){Array.isArray(e.to)&&null===e.to[0]&&(e.to=Nw([],Pw(e.to),!1),e.to[0]=e.from)}(t),function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from;var t=xw(e,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(t).length}(e)||(e=Aw(Aw({},e),OC(n,t.to))),Aw(Aw({},t),function(e){var t=e.ease,n=e.times,r=e.yoyo,i=e.flip,s=e.loop,o=xw(e,["ease","times","yoyo","flip","loop"]),a=Aw({},o);return n&&(a.offset=n),o.duration&&(a.duration=dC(o.duration)),o.repeatDelay&&(a.repeatDelay=dC(o.repeatDelay)),t&&(a.ease=SC(t)?t.map(IC):IC(t)),"tween"===o.type&&(a.type="keyframes"),(r||s||i)&&(NS(!KC,"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options."),KC=!0,r?a.repeatType="reverse":s?a.repeatType="loop":i&&(a.repeatType="mirror"),a.repeat=s||r||i||o.repeat),"spring"!==o.type&&(a.type="keyframes"),a}(e))}function QC(e,t,n,r,i){var s,o=JC(r,e),a=null!==(s=o.from)&&void 0!==s?s:t.get(),c=kC(e,n);"none"===a&&c&&"string"===typeof n?a=BC(e,n):YC(a)&&"string"===typeof n?a=XC(n):!Array.isArray(n)&&YC(n)&&"string"===typeof a&&(n=XC(a));var l=kC(e,a);return NS(l===c,"You are trying to animate ".concat(e,' from "').concat(a,'" to "').concat(n,'". ').concat(a," is not an animatable value - to enable this animation set ").concat(a," to a value animatable to ").concat(n," via the `style` property.")),l&&c&&!1!==o.type?function(){var r={from:a,to:n,velocity:t.getVelocity(),onComplete:i,onUpdate:function(e){return t.set(e)}};return"inertia"===o.type||"decay"===o.type?function(e){let t,{from:n=0,velocity:r=0,min:i,max:s,power:o=.8,timeConstant:a=750,bounceStiffness:c=500,bounceDamping:l=10,restDelta:u=1,modifyTarget:h,driver:d,onUpdate:f,onComplete:p,onStop:m}=e;function g(e){return void 0!==i&&e<i||void 0!==s&&e>s}function v(e){return void 0===i?s:void 0===s||Math.abs(i-e)<Math.abs(s-e)?i:s}function y(e){null===t||void 0===t||t.stop(),t=hC(Object.assign(Object.assign({},e),{driver:d,onUpdate:t=>{var n;null===f||void 0===f||f(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:p,onStop:m}))}function w(e){y(Object.assign({type:"spring",stiffness:c,damping:l,restDelta:u},e))}if(g(n))w({from:n,velocity:r,to:v(n)});else{let e=o*r+n;"undefined"!==typeof h&&(e=h(e));const t=v(e),s=t===i?-1:1;let c,l;const d=e=>{c=l,l=e,r=IS(e-c,_S().delta),(1===s&&e>t||-1===s&&e<t)&&w({from:e,to:t,velocity:r})};y({type:"decay",from:n,velocity:r,timeConstant:a,power:o,restDelta:u,modifyTarget:h,onUpdate:g(e)?d:void 0})}return{stop:()=>null===t||void 0===t?void 0:t.stop()}}(Aw(Aw({},r),o)):hC(Aw(Aw({},GC(o,r,e)),{onUpdate:function(e){var t;r.onUpdate(e),null===(t=o.onUpdate)||void 0===t||t.call(o,e)},onComplete:function(){var e;r.onComplete(),null===(e=o.onComplete)||void 0===e||e.call(o)}}))}:function(){var e,r,s=WC(n);return t.set(s),i(),null===(e=null===o||void 0===o?void 0:o.onUpdate)||void 0===e||e.call(o,s),null===(r=null===o||void 0===o?void 0:o.onComplete)||void 0===r||r.call(o),{stop:function(){}}}}function YC(e){return 0===e||"string"===typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function XC(e){return"number"===typeof e?0:BC("",e)}function JC(e,t){return e[t]||e.default||e}function $C(e,t,n,r){return void 0===r&&(r={}),qC.current&&(r={type:!1}),t.start((function(i){var s,o,a=QC(e,t,n,r,i),c=function(e,t){var n,r;return null!==(r=null!==(n=(JC(e,t)||{}).delay)&&void 0!==n?n:e.delay)&&void 0!==r?r:0}(r,e),l=function(){return o=a()};return c?s=window.setTimeout(l,dC(c)):l(),function(){clearTimeout(s),null===o||void 0===o||o.stop()}}))}var ZC=["TopLeft","TopRight","BottomLeft","BottomRight"],eA=ZC.length,tA=function(e){return"string"===typeof e?parseFloat(e):e},nA=function(e){return"number"===typeof e||dk.test(e)};function rA(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e.borderRadius}var iA=oA(0,.5,$k),sA=oA(.5,.95,Kk);function oA(e,t,n){return function(r){return r<e?0:r>t?1:n(GS(e,t,r))}}function aA(e,t){e.min=t.min,e.max=t.max}function cA(e,t){aA(e.x,t.x),aA(e.y,t.y)}function lA(e){return void 0===e||1===e}function uA(e){var t=e.scale,n=e.scaleX,r=e.scaleY;return!lA(t)||!lA(n)||!lA(r)}function hA(e){return uA(e)||dA(e.x)||dA(e.y)||e.z||e.rotate||e.rotateX||e.rotateY}function dA(e){return e&&"0%"!==e}function fA(e,t,n){return n+t*(e-n)}function pA(e,t,n,r,i){return void 0!==i&&(e=fA(e,i,r)),fA(e,n,r)+t}function mA(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),e.min=pA(e.min,t,n,r,i),e.max=pA(e.max,t,n,r,i)}function gA(e,t){var n=t.x,r=t.y;mA(e.x,n.translate,n.scale,n.originPoint),mA(e.y,r.translate,r.scale,r.originPoint)}function vA(e,t){e.min=e.min+t,e.max=e.max+t}function yA(e,t,n){var r=Pw(n,3),i=r[0],s=r[1],o=r[2],a=void 0!==t[o]?t[o]:.5,c=ES(e.min,e.max,a);mA(e,t[i],t[s],c,t.scale)}var wA=["x","scaleX","originX"],bA=["y","scaleY","originY"];function _A(e,t){yA(e.x,t,wA),yA(e.y,t,bA)}const TA=e=>e.hasOwnProperty("x")&&e.hasOwnProperty("y"),EA=e=>TA(e)&&e.hasOwnProperty("z"),IA=(e,t)=>Math.abs(e-t);function SA(e,t){if(Rk(e)&&Rk(t))return IA(e,t);if(TA(e)&&TA(t)){const n=IA(e.x,t.x),r=IA(e.y,t.y),i=EA(e)&&EA(t)?IA(e.z,t.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(i,2))}}function kA(e){return e.max-e.min}function CA(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=.01),SA(e,t)<n}function AA(e,t,n,r){void 0===r&&(r=.5),e.origin=r,e.originPoint=ES(t.min,t.max,e.origin),e.scale=kA(n)/kA(t),(CA(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ES(n.min,n.max,e.origin)-e.originPoint,(CA(e.translate)||isNaN(e.translate))&&(e.translate=0)}function xA(e,t,n,r){AA(e.x,t.x,n.x,null===r||void 0===r?void 0:r.originX),AA(e.y,t.y,n.y,null===r||void 0===r?void 0:r.originY)}function PA(e,t,n){e.min=n.min+t.min,e.max=e.min+kA(t)}function NA(e,t,n){e.min=t.min-n.min,e.max=e.min+kA(t)}function RA(e,t,n){NA(e.x,t.x,n.x),NA(e.y,t.y,n.y)}function OA(e,t,n,r,i){return e=fA(e-=t,1/n,r),void 0!==i&&(e=fA(e,1/i,r)),e}function DA(e,t,n,r,i){var s=Pw(n,3),o=s[0],a=s[1],c=s[2];!function(e,t,n,r,i,s,o){if(void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=.5),void 0===s&&(s=e),void 0===o&&(o=e),hk.test(t)&&(t=parseFloat(t),t=ES(o.min,o.max,t/100)-o.min),"number"===typeof t){var a=ES(s.min,s.max,r);e===s&&(a-=t),e.min=OA(e.min,t,n,a,i),e.max=OA(e.max,t,n,a,i)}}(e,t[o],t[a],t[c],t.scale,r,i)}var LA=["x","scaleX","originX"],MA=["y","scaleY","originY"];function UA(e,t,n,r){DA(e.x,t,LA,null===n||void 0===n?void 0:n.x,null===r||void 0===r?void 0:r.x),DA(e.y,t,MA,null===n||void 0===n?void 0:n.y,null===r||void 0===r?void 0:r.y)}var FA=function(){return{x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}},VA=function(){return{x:{min:0,max:0},y:{min:0,max:0}}};function jA(e){return 0===e.translate&&1===e.scale}function zA(e){return jA(e.x)&&jA(e.y)}function BA(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}var qA=function(){function e(){this.members=[]}return e.prototype.add=function(e){SS(this.members,e),e.scheduleRender()},e.prototype.remove=function(e){if(kS(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}},e.prototype.relegate=function(e){var t,n=this.members.findIndex((function(t){return e===t}));if(0===n)return!1;for(var r=n;r>=0;r--){var i=this.members[r];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)},e.prototype.promote=function(e,t){var n,r=this.lead;e!==r&&(this.prevLead=r,this.lead=e,e.show(),r&&(r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues,e.snapshot.isShared=!0),(null===(n=e.root)||void 0===n?void 0:n.isUpdating)&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&r.hide()))},e.prototype.exitAnimationComplete=function(){this.members.forEach((function(e){var t,n,r,i,s;null===(n=(t=e.options).onExitComplete)||void 0===n||n.call(t),null===(s=null===(r=e.resumingFrom)||void 0===r?void 0:(i=r.options).onExitComplete)||void 0===s||s.call(i)}))},e.prototype.scheduleRender=function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))},e.prototype.removeLeadSnapshot=function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)},e}(),HA={};var WA="translate3d(0px, 0px, 0) scale(1, 1)";function KA(e,t,n){var r=e.x.translate/t.x,i=e.y.translate/t.y,s="translate3d(".concat(r,"px, ").concat(i,"px, 0) ");if(n){var o=n.rotate,a=n.rotateX,c=n.rotateY;o&&(s+="rotate(".concat(o,"deg) ")),a&&(s+="rotateX(".concat(a,"deg) ")),c&&(s+="rotateY(".concat(c,"deg) "))}return(s+="scale(".concat(e.x.scale,", ").concat(e.y.scale,")"))===WA?"none":s}function GA(e){return[e("x"),e("y")]}var QA=["","X","Y","Z"],YA=["transformPerspective","x","y","z"];function XA(e,t){return YA.indexOf(e)-YA.indexOf(t)}["translate","scale","rotate","skew"].forEach((function(e){return QA.forEach((function(t){return YA.push(e+t)}))}));var JA=new Set(YA);function $A(e){return JA.has(e)}var ZA=new Set(["originX","originY","originZ"]);function ex(e){return ZA.has(e)}var tx=function(e,t){return e.depth-t.depth},nx=function(){function e(){this.children=[],this.isDirty=!1}return e.prototype.add=function(e){SS(this.children,e),this.isDirty=!0},e.prototype.remove=function(e){kS(this.children,e),this.isDirty=!0},e.prototype.forEach=function(e){this.isDirty&&this.children.sort(tx),this.isDirty=!1,this.children.forEach(e)},e}();function rx(e){var t=PS(e)?e.get():e;return HC(t)?t.toValue():t}var ix={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sx(e){var t=e.attachResizeListener,n=e.defaultParent,r=e.measureScroll,i=e.resetTransform;return function(){function e(e,t,r){var i=this;void 0===t&&(t={}),void 0===r&&(r=null===n||void 0===n?void 0:n()),this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){i.isUpdating&&(i.isUpdating=!1,i.clearAllSnapshots())},this.updateProjection=function(){i.nodes.forEach(dx),i.nodes.forEach(fx)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=e,this.latestValues=t,this.root=r?r.root||r:this,this.path=r?Nw(Nw([],Pw(r.path),!1),[r],!1):[],this.parent=r,this.depth=r?r.depth+1:0,e&&this.root.registerPotentialNode(e,this);for(var s=0;s<this.path.length;s++)this.path[s].shouldResetTransform=!0;this.root===this&&(this.nodes=new nx)}return e.prototype.addEventListener=function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new CS),this.eventHandlers.get(e).add(t)},e.prototype.notifyListeners=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.eventHandlers.get(e);null===r||void 0===r||r.notify.apply(r,Nw([],Pw(t),!1))},e.prototype.hasListeners=function(e){return this.eventHandlers.has(e)},e.prototype.registerPotentialNode=function(e,t){this.potentialNodes.set(e,t)},e.prototype.mount=function(e,n){var r,i=this;if(void 0===n&&(n=!1),!this.instance){this.isSVG=e instanceof SVGElement&&"svg"!==e.tagName,this.instance=e;var s=this.options,o=s.layoutId,a=s.layout,c=s.visualElement;if(c&&!c.getInstance()&&c.mount(e),this.root.nodes.add(this),null===(r=this.parent)||void 0===r||r.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),n&&(a||o)&&(this.isLayoutDirty=!0),t){var l,u=function(){return i.root.updateBlockedByResize=!1};t(e,(function(){i.root.updateBlockedByResize=!0,clearTimeout(l),l=window.setTimeout(u,250),ix.hasAnimatedSinceResize&&(ix.hasAnimatedSinceResize=!1,i.nodes.forEach(hx))}))}o&&this.root.registerSharedNode(o,this),!1!==this.options.animate&&c&&(o||a)&&this.addEventListener("didUpdate",(function(e){var t,n,r,s,o,a=e.delta,l=e.hasLayoutChanged,u=e.hasRelativeTargetChanged,h=e.layout;if(i.isTreeAnimationBlocked())return i.target=void 0,void(i.relativeTarget=void 0);var d=null!==(n=null!==(t=i.options.transition)&&void 0!==t?t:c.getDefaultTransition())&&void 0!==n?n:wx,f=c.getProps().onLayoutAnimationComplete,p=!i.targetLayout||!BA(i.targetLayout,h)||u,m=!l&&u;(null===(r=i.resumeFrom)||void 0===r?void 0:r.instance)||m||l&&(p||!i.currentAnimation)?(i.resumeFrom&&(i.resumingFrom=i.resumeFrom,i.resumingFrom.resumingFrom=void 0),i.setAnimationOrigin(a,m),i.startAnimation(Aw(Aw({},JC(d,"layout")),{onComplete:f}))):i.isLead()&&(null===(o=(s=i.options).onExitComplete)||void 0===o||o.call(s)),i.targetLayout=h}))}},e.prototype.unmount=function(){var e,t;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(e=this.getStack())||void 0===e||e.remove(this),null===(t=this.parent)||void 0===t||t.children.delete(this),this.instance=void 0,gS.preRender(this.updateProjection)},e.prototype.blockUpdate=function(){this.updateManuallyBlocked=!0},e.prototype.unblockUpdate=function(){this.updateManuallyBlocked=!1},e.prototype.isUpdateBlocked=function(){return this.updateManuallyBlocked||this.updateBlockedByResize},e.prototype.isTreeAnimationBlocked=function(){var e;return this.isAnimationBlocked||(null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimationBlocked())||!1},e.prototype.startUpdate=function(){var e;this.isUpdateBlocked()||(this.isUpdating=!0,null===(e=this.nodes)||void 0===e||e.forEach(px))},e.prototype.willUpdate=function(e){var t,n,r;if(void 0===e&&(e=!0),this.root.isUpdateBlocked())null===(n=(t=this.options).onExitComplete)||void 0===n||n.call(t);else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var i=0;i<this.path.length;i++){var s=this.path[i];s.shouldResetTransform=!0,s.updateScroll()}var o=this.options,a=o.layoutId,c=o.layout;if(void 0!==a||c){var l=null===(r=this.options.visualElement)||void 0===r?void 0:r.getProps().transformTemplate;this.prevTransformTemplateValue=null===l||void 0===l?void 0:l(this.latestValues,""),this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}}},e.prototype.didUpdate=function(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(lx);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(bx),this.potentialNodes.clear()),this.nodes.forEach(ux),this.nodes.forEach(ox),this.nodes.forEach(ax),this.clearAllSnapshots(),vS.update(),vS.preRender(),vS.render())},e.prototype.clearAllSnapshots=function(){this.nodes.forEach(cx),this.sharedNodes.forEach(mx)},e.prototype.scheduleUpdateProjection=function(){TS.preRender(this.updateProjection,!1,!0)},e.prototype.scheduleCheckAfterUnmount=function(){var e=this;TS.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))},e.prototype.updateSnapshot=function(){if(!this.snapshot&&this.instance){var e=this.measure(),t=this.removeTransform(this.removeElementScroll(e));Tx(t),this.snapshot={measured:e,layout:t,latestValues:{}}}},e.prototype.updateLayout=function(){var e;if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var t=0;t<this.path.length;t++){this.path[t].updateScroll()}var n=this.measure();Tx(n);var r=this.layout;this.layout={measured:n,actual:this.removeElementScroll(n)},this.layoutCorrected=VA(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),null===(e=this.options.visualElement)||void 0===e||e.notifyLayoutMeasure(this.layout.actual,null===r||void 0===r?void 0:r.actual)}},e.prototype.updateScroll=function(){this.options.layoutScroll&&this.instance&&(this.scroll=r(this.instance))},e.prototype.resetTransform=function(){var e;if(i){var t=this.isLayoutDirty||this.shouldResetTransform,n=this.projectionDelta&&!zA(this.projectionDelta),r=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate,s=null===r||void 0===r?void 0:r(this.latestValues,""),o=s!==this.prevTransformTemplateValue;t&&(n||hA(this.latestValues)||o)&&(i(this.instance,s),this.shouldResetTransform=!1,this.scheduleRender())}},e.prototype.measure=function(){var e=this.options.visualElement;if(!e)return VA();var t=e.measureViewportBox(),n=this.root.scroll;return n&&(vA(t.x,n.x),vA(t.y,n.y)),t},e.prototype.removeElementScroll=function(e){var t=VA();cA(t,e);for(var n=0;n<this.path.length;n++){var r=this.path[n],i=r.scroll,s=r.options;r!==this.root&&i&&s.layoutScroll&&(vA(t.x,i.x),vA(t.y,i.y))}return t},e.prototype.applyTransform=function(e,t){void 0===t&&(t=!1);var n=VA();cA(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&_A(n,{x:-i.scroll.x,y:-i.scroll.y}),hA(i.latestValues)&&_A(n,i.latestValues)}return hA(this.latestValues)&&_A(n,this.latestValues),n},e.prototype.removeTransform=function(e){var t,n=VA();cA(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];if(i.instance&&hA(i.latestValues)){uA(i.latestValues)&&i.updateSnapshot();var s=VA();cA(s,i.measure()),UA(n,i.latestValues,null===(t=i.snapshot)||void 0===t?void 0:t.layout,s)}}return hA(this.latestValues)&&UA(n,this.latestValues),n},e.prototype.setTargetDelta=function(e){this.targetDelta=e,this.root.scheduleUpdateProjection()},e.prototype.setOptions=function(e){var t;this.options=Aw(Aw(Aw({},this.options),e),{crossfade:null===(t=e.crossfade)||void 0===t||t})},e.prototype.clearMeasurements=function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1},e.prototype.resolveTargetDelta=function(){var e,t,n,r,i=this.options,s=i.layout,o=i.layoutId;this.layout&&(s||o)&&(this.targetDelta||this.relativeTarget||(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget=VA(),this.relativeTargetOrigin=VA(),RA(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),cA(this.relativeTarget,this.relativeTargetOrigin))),(this.relativeTarget||this.targetDelta)&&(this.target||(this.target=VA(),this.targetWithTransforms=VA()),this.relativeTarget&&this.relativeTargetOrigin&&(null===(e=this.relativeParent)||void 0===e?void 0:e.target)?(t=this.target,n=this.relativeTarget,r=this.relativeParent.target,PA(t.x,n.x,r.x),PA(t.y,n.y,r.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.actual):cA(this.target,this.layout.actual),gA(this.target,this.targetDelta)):cA(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&Boolean(this.relativeParent.resumingFrom)===Boolean(this.resumingFrom)&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget=VA(),this.relativeTargetOrigin=VA(),RA(this.relativeTargetOrigin,this.target,this.relativeParent.target),cA(this.relativeTarget,this.relativeTargetOrigin)))))},e.prototype.getClosestProjectingParent=function(){if(this.parent&&!hA(this.parent.latestValues))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()},e.prototype.calcProjection=function(){var e,t=this.options,n=t.layout,r=t.layoutId;if(this.isTreeAnimating=Boolean((null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(n||r)){var i=this.getLead();cA(this.layoutCorrected,this.layout.actual),function(e,t,n,r){var i,s;void 0===r&&(r=!1);var o=n.length;if(o){var a,c;t.x=t.y=1;for(var l=0;l<o;l++)c=(a=n[l]).projectionDelta,"contents"!==(null===(s=null===(i=a.instance)||void 0===i?void 0:i.style)||void 0===s?void 0:s.display)&&(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&_A(e,{x:-a.scroll.x,y:-a.scroll.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,gA(e,c)),r&&hA(a.latestValues)&&_A(e,a.latestValues))}}(this.layoutCorrected,this.treeScale,this.path,Boolean(this.resumingFrom)||this!==i);var s=i.target;if(s){this.projectionDelta||(this.projectionDelta=FA(),this.projectionDeltaWithTransform=FA());var o=this.treeScale.x,a=this.treeScale.y,c=this.projectionTransform;xA(this.projectionDelta,this.layoutCorrected,s,this.latestValues),this.projectionTransform=KA(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===o&&this.treeScale.y===a||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",s))}}},e.prototype.hide=function(){this.isVisible=!1},e.prototype.show=function(){this.isVisible=!0},e.prototype.scheduleRender=function(e){var t,n,r;void 0===e&&(e=!0),null===(n=(t=this.options).scheduleRender)||void 0===n||n.call(t),e&&(null===(r=this.getStack())||void 0===r||r.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)},e.prototype.setAnimationOrigin=function(e,t){var n,r=this;void 0===t&&(t=!1);var i=this.snapshot,s=(null===i||void 0===i?void 0:i.latestValues)||{},o=Aw({},this.latestValues),a=FA();this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!t;var c=VA(),l=null===i||void 0===i?void 0:i.isShared,u=((null===(n=this.getStack())||void 0===n?void 0:n.members.length)||0)<=1,h=Boolean(l&&!u&&!0===this.options.crossfade&&!this.path.some(yx));this.mixTargetDelta=function(t){var n,i=t/1e3;gx(a.x,e.x,i),gx(a.y,e.y,i),r.setTargetDelta(a),r.relativeTarget&&r.relativeTargetOrigin&&r.layout&&(null===(n=r.relativeParent)||void 0===n?void 0:n.layout)&&(RA(c,r.layout.actual,r.relativeParent.layout.actual),function(e,t,n,r){vx(e.x,t.x,n.x,r),vx(e.y,t.y,n.y,r)}(r.relativeTarget,r.relativeTargetOrigin,c,i)),l&&(r.animationValues=o,function(e,t,n,r,i,s){var o,a,c,l;i?(e.opacity=ES(0,null!==(o=n.opacity)&&void 0!==o?o:1,iA(r)),e.opacityExit=ES(null!==(a=t.opacity)&&void 0!==a?a:1,0,sA(r))):s&&(e.opacity=ES(null!==(c=t.opacity)&&void 0!==c?c:1,null!==(l=n.opacity)&&void 0!==l?l:1,r));for(var u=0;u<eA;u++){var h="border".concat(ZC[u],"Radius"),d=rA(t,h),f=rA(n,h);void 0===d&&void 0===f||(d||(d=0),f||(f=0),0===d||0===f||nA(d)===nA(f)?(e[h]=Math.max(ES(tA(d),tA(f),r),0),(hk.test(f)||hk.test(d))&&(e[h]+="%")):e[h]=f)}(t.rotate||n.rotate)&&(e.rotate=ES(t.rotate||0,n.rotate||0,r))}(o,s,r.latestValues,i,h,u)),r.root.scheduleUpdateProjection(),r.scheduleRender()},this.mixTargetDelta(0)},e.prototype.startAnimation=function(e){var t,n,r=this;null===(t=this.currentAnimation)||void 0===t||t.stop(),this.resumingFrom&&(null===(n=this.resumingFrom.currentAnimation)||void 0===n||n.stop()),this.pendingAnimation&&(gS.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=TS.update((function(){ix.hasAnimatedSinceResize=!0,r.currentAnimation=function(e,t,n){void 0===n&&(n={});var r=PS(e)?e:xS(e);return $C("",r,t,n),{stop:function(){return r.stop()},isAnimating:function(){return r.isAnimating()}}}(0,1e3,Aw(Aw({},e),{onUpdate:function(t){var n;r.mixTargetDelta(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:function(){var t;null===(t=e.onComplete)||void 0===t||t.call(e),r.completeAnimation()}})),r.resumingFrom&&(r.resumingFrom.currentAnimation=r.currentAnimation),r.pendingAnimation=void 0}))},e.prototype.completeAnimation=function(){var e;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(e=this.getStack())||void 0===e||e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")},e.prototype.finishAnimation=function(){var e;this.currentAnimation&&(null===(e=this.mixTargetDelta)||void 0===e||e.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()},e.prototype.applyTransformsToTarget=function(){var e=this.getLead(),t=e.targetWithTransforms,n=e.target,r=e.layout,i=e.latestValues;t&&n&&r&&(cA(t,n),_A(t,i),xA(this.projectionDeltaWithTransform,this.layoutCorrected,t,i))},e.prototype.registerSharedNode=function(e,t){var n,r,i;this.sharedNodes.has(e)||this.sharedNodes.set(e,new qA),this.sharedNodes.get(e).add(t),t.promote({transition:null===(n=t.options.initialPromotionConfig)||void 0===n?void 0:n.transition,preserveFollowOpacity:null===(i=null===(r=t.options.initialPromotionConfig)||void 0===r?void 0:r.shouldPreserveFollowOpacity)||void 0===i?void 0:i.call(r,t)})},e.prototype.isLead=function(){var e=this.getStack();return!e||e.lead===this},e.prototype.getLead=function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this},e.prototype.getPrevLead=function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0},e.prototype.getStack=function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)},e.prototype.promote=function(e){var t=void 0===e?{}:e,n=t.needsReset,r=t.transition,i=t.preserveFollowOpacity,s=this.getStack();s&&s.promote(this,i),n&&(this.projectionDelta=void 0,this.needsReset=!0),r&&this.setOptions({transition:r})},e.prototype.relegate=function(){var e=this.getStack();return!!e&&e.relegate(this)},e.prototype.resetRotation=function(){var e=this.options.visualElement;if(e){for(var t=!1,n={},r=0;r<QA.length;r++){var i="rotate"+QA[r];e.getStaticValue(i)&&(t=!0,n[i]=e.getStaticValue(i),e.setStaticValue(i,0))}if(t){for(var i in null===e||void 0===e||e.syncRender(),n)e.setStaticValue(i,n[i]);e.scheduleRender()}}},e.prototype.getProjectionStyles=function(e){var t,n,r,i,s,o;void 0===e&&(e={});var a={};if(!this.instance||this.isSVG)return a;if(!this.isVisible)return{visibility:"hidden"};a.visibility="";var c=null===(t=this.options.visualElement)||void 0===t?void 0:t.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=rx(e.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none",a;var l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){var u={};return this.options.layoutId&&(u.opacity=null!==(n=this.latestValues.opacity)&&void 0!==n?n:1,u.pointerEvents=rx(e.pointerEvents)||""),this.hasProjected&&!hA(this.latestValues)&&(u.transform=c?c({},""):"none",this.hasProjected=!1),u}var h=l.animationValues||l.latestValues;this.applyTransformsToTarget(),a.transform=KA(this.projectionDeltaWithTransform,this.treeScale,h),c&&(a.transform=c(h,a.transform));var d=this.projectionDelta,f=d.x,p=d.y;for(var m in a.transformOrigin="".concat(100*f.origin,"% ").concat(100*p.origin,"% 0"),l.animationValues?a.opacity=l===this?null!==(i=null!==(r=h.opacity)&&void 0!==r?r:this.latestValues.opacity)&&void 0!==i?i:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:a.opacity=l===this?null!==(s=h.opacity)&&void 0!==s?s:"":null!==(o=h.opacityExit)&&void 0!==o?o:0,HA)if(void 0!==h[m]){var g=HA[m],v=g.correct,y=g.applyTo,w=v(h[m],l);if(y)for(var b=y.length,_=0;_<b;_++)a[y[_]]=w;else a[m]=w}return this.options.layoutId&&(a.pointerEvents=l===this?rx(e.pointerEvents)||"":"none"),a},e.prototype.clearSnapshot=function(){this.resumeFrom=this.snapshot=void 0},e.prototype.resetTree=function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(lx),this.root.sharedNodes.clear()},e}()}function ox(e){e.updateLayout()}function ax(e){var t,n,r,i,s=null!==(n=null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)&&void 0!==n?n:e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){var o=e.layout,a=o.actual,c=o.measured;"size"===e.options.animationType?GA((function(e){var t=s.isShared?s.measured[e]:s.layout[e],n=kA(t);t.min=a[e].min,t.max=t.min+n})):"position"===e.options.animationType&&GA((function(e){var t=s.isShared?s.measured[e]:s.layout[e],n=kA(a[e]);t.max=t.min+n}));var l=FA();xA(l,a,s.layout);var u=FA();s.isShared?xA(u,e.applyTransform(c,!0),s.measured):xA(u,a,s.layout);var h=!zA(l),d=!1;if(!e.resumeFrom&&(e.relativeParent=e.getClosestProjectingParent(),e.relativeParent&&!e.relativeParent.resumeFrom)){var f=e.relativeParent,p=f.snapshot,m=f.layout;if(p&&m){var g=VA();RA(g,s.layout,p.layout);var v=VA();RA(v,a,m.actual),BA(g,v)||(d=!0)}}e.notifyListeners("didUpdate",{layout:a,snapshot:s,delta:u,layoutDelta:l,hasLayoutChanged:h,hasRelativeTargetChanged:d})}else e.isLead()&&(null===(i=(r=e.options).onExitComplete)||void 0===i||i.call(r));e.options.transition=void 0}function cx(e){e.clearSnapshot()}function lx(e){e.clearMeasurements()}function ux(e){e.resetTransform()}function hx(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function dx(e){e.resolveTargetDelta()}function fx(e){e.calcProjection()}function px(e){e.resetRotation()}function mx(e){e.removeLeadSnapshot()}function gx(e,t,n){e.translate=ES(t.translate,0,n),e.scale=ES(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function vx(e,t,n,r){e.min=ES(t.min,n.min,r),e.max=ES(t.max,n.max,r)}function yx(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var wx={duration:.45,ease:[.4,0,.1,1]};function bx(e,t){for(var n=e.root,r=e.path.length-1;r>=0;r--)if(Boolean(e.path[r].instance)){n=e.path[r];break}var i=(n&&n!==e.root?n.instance:document).querySelector('[data-projection-id="'.concat(t,'"]'));i&&e.mount(i,!0)}function _x(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function Tx(e){_x(e.x),_x(e.y)}var Ex=1;var Ix=(0,t.createContext)({}),Sx=(0,t.createContext)({});var kx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cw(t,e),t.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},t.prototype.componentDidUpdate=function(){},t.prototype.updateProps=function(){var e=this.props,t=e.visualElement,n=e.props;t&&t.setProps(n)},t.prototype.render=function(){return this.props.children},t}(t.Component);function Cx(e){var n=e.preloadedFeatures,r=e.createVisualElement,i=e.projectionNodeConstructor,s=e.useRender,o=e.useVisualState,a=e.Component;return n&&function(e){for(var t in e)null!==e[t]&&("projectionNodeConstructor"===t?jI.projectionNodeConstructor=e[t]:jI[t].Component=e[t])}(n),(0,t.forwardRef)((function(e,n){var c=function(e){var n,r=e.layoutId,i=null===(n=(0,t.useContext)(Ix))||void 0===n?void 0:n.id;return i&&void 0!==r?i+"-"+r:r}(e);e=Aw(Aw({},e),{layoutId:c});var l=(0,t.useContext)(HI),u=null,h=rS(e),d=l.isStatic?void 0:sS((function(){if(ix.hasEverUpdated)return Ex++})),f=o(e,l.isStatic);return!l.isStatic&&GI&&(h.visualElement=YI(a,f,Aw(Aw({},l),e),r),function(e,n,r,i){var s,o=n.layoutId,a=n.layout,c=n.drag,l=n.dragConstraints,u=n.layoutScroll,h=(0,t.useContext)(Sx);i&&r&&!(null===r||void 0===r?void 0:r.projection)&&(r.projection=new i(e,r.getLatestValues(),null===(s=r.parent)||void 0===s?void 0:s.projection),r.projection.setOptions({layoutId:o,layout:a,alwaysMeasureLayout:Boolean(c)||l&&XI(l),visualElement:r,scheduleRender:function(){return r.scheduleRender()},animationType:"string"===typeof a?a:"both",initialPromotionConfig:h,layoutScroll:u}))}(d,e,h.visualElement,i||jI.projectionNodeConstructor),u=function(e,n,r){var i=[];if((0,t.useContext)(zI),!n)return null;for(var s=0;s<qI;s++){var o=BI[s],a=jI[o],c=a.isEnabled,l=a.Component;c(e)&&l&&i.push(t.createElement(l,Aw({key:o},e,{visualElement:n})))}return i}(e,h.visualElement)),t.createElement(kx,{visualElement:h.visualElement,props:Aw(Aw({},l),e)},u,t.createElement(WI.Provider,{value:h},s(a,e,d,function(e,n,r){return(0,t.useCallback)((function(t){var i;t&&(null===(i=e.mount)||void 0===i||i.call(e,t)),n&&(t?n.mount(t):n.unmount()),r&&("function"===typeof r?r(t):XI(r)&&(r.current=t))}),[n])}(f,h.visualElement,n),f,l.isStatic,h.visualElement)))}))}function Ax(e){function t(t,n){return void 0===n&&(n={}),Cx(e(t,n))}if("undefined"===typeof Proxy)return t;var n=new Map;return new Proxy(t,{get:function(e,r){return n.has(r)||n.set(r,t(r)),n.get(r)}})}var xx=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function Px(e){return"string"===typeof e&&!e.includes("-")&&!!(xx.indexOf(e)>-1||/[A-Z]/.test(e))}function Nx(e,t){var n=t.layout,r=t.layoutId;return $A(e)||ex(e)||(n||void 0!==r)&&(!!HA[e]||"opacity"===e)}var Rx={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function Ox(e){return e.startsWith("--")}var Dx=function(e,t){return t&&"number"===typeof e?t.transform(e):e};function Lx(e,t,n,r){var i,s=e.style,o=e.vars,a=e.transform,c=e.transformKeys,l=e.transformOrigin;c.length=0;var u=!1,h=!1,d=!0;for(var f in t){var p=t[f];if(Ox(f))o[f]=p;else{var m=VC[f],g=Dx(p,m);if($A(f)){if(u=!0,a[f]=g,c.push(f),!d)continue;p!==(null!==(i=m.default)&&void 0!==i?i:0)&&(d=!1)}else ex(f)?(l[f]=g,h=!0):s[f]=g}}u?s.transform=function(e,t,n,r){var i=e.transform,s=e.transformKeys,o=t.enableHardwareAcceleration,a=void 0===o||o,c=t.allowTransformNone,l=void 0===c||c,u="";s.sort(XA);for(var h=!1,d=s.length,f=0;f<d;f++){var p=s[f];u+="".concat(Rx[p]||p,"(").concat(i[p],") "),"z"===p&&(h=!0)}return!h&&a?u+="translateZ(0)":u=u.trim(),r?u=r(i,n?"":u):l&&n&&(u="none"),u}(e,n,d,r):r?s.transform=r({},""):!t.transform&&s.transform&&(s.transform="none"),h&&(s.transformOrigin=function(e){var t=e.originX,n=void 0===t?"50%":t,r=e.originY,i=void 0===r?"50%":r,s=e.originZ,o=void 0===s?0:s;return"".concat(n," ").concat(i," ").concat(o)}(l))}var Mx=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function Ux(e,t,n){for(var r in t)PS(t[r])||Nx(r,n)||(e[r]=t[r])}function Fx(e,n,r){var i={};return Ux(i,e.style||{},e),Object.assign(i,function(e,n,r){var i=e.transformTemplate;return(0,t.useMemo)((function(){var e=Mx();Lx(e,n,{enableHardwareAcceleration:!r},i);var t=e.vars,s=e.style;return Aw(Aw({},t),s)}),[n])}(e,n,r)),e.transformValues&&(i=e.transformValues(i)),i}function Vx(e,t,n){var r={},i=Fx(e,t,n);return Boolean(e.drag)&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),r.style=i,r}var jx=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function zx(e){return jx.has(e)}var Bx,qx=function(e){return!zx(e)};try{(Bx=require("@emotion/is-prop-valid").default)&&(qx=function(e){return e.startsWith("on")?!zx(e):Bx(e)})}catch(_L){}function Hx(e,t,n){return"string"===typeof e?e:dk.transform(t+n*e)}var Wx={offset:"stroke-dashoffset",array:"stroke-dasharray"},Kx={offset:"strokeDashoffset",array:"strokeDasharray"};function Gx(e,t,n,r){var i=t.attrX,s=t.attrY,o=t.originX,a=t.originY,c=t.pathLength,l=t.pathSpacing,u=void 0===l?1:l,h=t.pathOffset,d=void 0===h?0:h;Lx(e,xw(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),n,r),e.attrs=e.style,e.style={};var f=e.attrs,p=e.style,m=e.dimensions;f.transform&&(m&&(p.transform=f.transform),delete f.transform),m&&(void 0!==o||void 0!==a||p.transform)&&(p.transformOrigin=function(e,t,n){var r=Hx(t,e.x,e.width),i=Hx(n,e.y,e.height);return"".concat(r," ").concat(i)}(m,void 0!==o?o:.5,void 0!==a?a:.5)),void 0!==i&&(f.x=i),void 0!==s&&(f.y=s),void 0!==c&&function(e,t,n,r,i){void 0===n&&(n=1),void 0===r&&(r=0),void 0===i&&(i=!0),e.pathLength=1;var s=i?Wx:Kx;e[s.offset]=dk.transform(-r);var o=dk.transform(t),a=dk.transform(n);e[s.array]="".concat(o," ").concat(a)}(f,c,u,d,!1)}var Qx=function(){return Aw(Aw({},Mx()),{attrs:{}})};function Yx(e,n){var r=(0,t.useMemo)((function(){var t=Qx();return Gx(t,n,{enableHardwareAcceleration:!1},e.transformTemplate),Aw(Aw({},t.attrs),{style:Aw({},t.style)})}),[n]);if(e.style){var i={};Ux(i,e.style,e),r.style=Aw(Aw({},i),r.style)}return r}function Xx(e){void 0===e&&(e=!1);return function(n,r,i,s,o,a){var c=o.latestValues,l=(Px(n)?Yx:Vx)(r,c,a),u=function(e,t,n){var r={};for(var i in e)(qx(i)||!0===n&&zx(i)||!t&&!zx(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(r,"string"===typeof n,e),h=Aw(Aw(Aw({},u),l),{ref:s});return i&&(h["data-projection-id"]=i),(0,t.createElement)(n,h)}}var Jx=/([a-z])([A-Z])/g,$x=function(e){return e.replace(Jx,"$1-$2").toLowerCase()};function Zx(e,t,n,r){var i=t.style,s=t.vars;for(var o in Object.assign(e.style,i,r&&r.getProjectionStyles(n)),s)e.style.setProperty(o,s[o])}var eP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function tP(e,t){for(var n in Zx(e,t),t.attrs)e.setAttribute(eP.has(n)?n:$x(n),t.attrs[n])}function nP(e){var t=e.style,n={};for(var r in t)(PS(t[r])||Nx(r,e))&&(n[r]=t[r]);return n}function rP(e){var t=nP(e);for(var n in e){if(PS(e[n]))t["x"===n||"y"===n?"attr"+n.toUpperCase():n]=e[n]}return t}function iP(e){return"object"===typeof e&&"function"===typeof e.start}function sP(e,t,n,r){var i=e.scrapeMotionValuesFromProps,s=e.createRenderState,o=e.onMount,a={latestValues:aP(t,n,r,i),renderState:s()};return o&&(a.mount=function(e){return o(t,e,a)}),a}var oP=function(e){return function(n,r){var i=(0,t.useContext)(WI),s=(0,t.useContext)(KI);return r?sP(e,n,i,s):sS((function(){return sP(e,n,i,s)}))}};function aP(e,t,n,r){var i={},s=!1===(null===n||void 0===n?void 0:n.initial),o=r(e);for(var a in o)i[a]=rx(o[a]);var c=e.initial,l=e.animate,u=tS(e),h=nS(e);t&&h&&!u&&!1!==e.inherit&&(null!==c&&void 0!==c||(c=t.initial),null!==l&&void 0!==l||(l=t.animate));var d=s||!1===c,f=d?l:c;f&&"boolean"!==typeof f&&!iP(f)&&(Array.isArray(f)?f:[f]).forEach((function(t){var n=ZI(e,t);if(n){var r=n.transitionEnd;n.transition;var s=xw(n,["transitionEnd","transition"]);for(var o in s){var a=s[o];if(Array.isArray(a))a=a[d?a.length-1:0];null!==a&&(i[o]=a)}for(var o in r)i[o]=r[o]}}));return i}var cP,lP={useVisualState:oP({scrapeMotionValuesFromProps:rP,createRenderState:Qx,onMount:function(e,t,n){var r=n.renderState,i=n.latestValues;try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(s){r.dimensions={x:0,y:0,width:0,height:0}}Gx(r,i,{enableHardwareAcceleration:!1},e.transformTemplate),tP(t,r)}})},uP={useVisualState:oP({scrapeMotionValuesFromProps:nP,createRenderState:Mx})};function hP(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}function dP(e,n,r,i){(0,t.useEffect)((function(){var t=e.current;if(r&&t)return hP(t,n,r,i)}),[e,n,r,i])}function fP(e){return"undefined"!==typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function pP(e){return!!e.touches}!function(e){e.Animate="animate",e.Hover="whileHover",e.Tap="whileTap",e.Drag="whileDrag",e.Focus="whileFocus",e.InView="whileInView",e.Exit="exit"}(cP||(cP={}));var mP={pageX:0,pageY:0};function gP(e,t){void 0===t&&(t="page");var n=e.touches[0]||e.changedTouches[0]||mP;return{x:n[t+"X"],y:n[t+"Y"]}}function vP(e,t){return void 0===t&&(t="page"),{x:e[t+"X"],y:e[t+"Y"]}}function yP(e,t){return void 0===t&&(t="page"),{point:pP(e)?gP(e,t):vP(e,t)}}var wP=function(e,t){void 0===t&&(t=!1);var n,r=function(t){return e(t,yP(t))};return t?(n=r,function(e){var t=e instanceof MouseEvent;(!t||t&&0===e.button)&&n(e)}):r},bP=function(){return GI&&null===window.onpointerdown},_P=function(){return GI&&null===window.ontouchstart},TP=function(){return GI&&null===window.onmousedown},EP={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},IP={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function SP(e){return bP()?e:_P()?IP[e]:TP()?EP[e]:e}function kP(e,t,n,r){return hP(e,SP(t),wP(n,"pointerdown"===t),r)}function CP(e,t,n,r){return dP(e,SP(t),n&&wP(n,"pointerdown"===t),r)}function AP(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var xP=AP("dragHorizontal"),PP=AP("dragVertical");function NP(e){var t=!1;if("y"===e)t=PP();else if("x"===e)t=xP();else{var n=xP(),r=PP();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}function RP(){var e=NP(!0);return!e||(e(),!1)}function OP(e,t,n){return function(r,i){var s;fP(r)&&!RP()&&(null===(s=e.animationState)||void 0===s||s.setActive(cP.Hover,t),null===n||void 0===n||n(r,i))}}var DP=function(e,t){return!!t&&(e===t||DP(e,t.parentElement))};function LP(e){return(0,t.useEffect)((function(){return function(){return e()}}),[])}var MP=new WeakMap,UP=new WeakMap,FP=function(e){var t;null===(t=MP.get(e.target))||void 0===t||t(e)},VP=function(e){e.forEach(FP)};function jP(e,t,n){var r=function(e){var t=e.root,n=xw(e,["root"]),r=t||document;UP.has(r)||UP.set(r,{});var i=UP.get(r),s=JSON.stringify(n);return i[s]||(i[s]=new IntersectionObserver(VP,Aw({root:t},n))),i[s]}(t);return MP.set(e,n),r.observe(e),function(){MP.delete(e),r.unobserve(e)}}var zP={some:0,all:1};function BP(e,n,r,i){var s=i.root,o=i.margin,a=i.amount,c=void 0===a?"some":a,l=i.once;(0,t.useEffect)((function(){if(e){var t={root:null===s||void 0===s?void 0:s.current,rootMargin:o,threshold:"number"===typeof c?c:zP[c]};return jP(r.getInstance(),t,(function(e){var t,i=e.isIntersecting;if(n.isInView!==i&&(n.isInView=i,!l||i||!n.hasEnteredView)){i&&(n.hasEnteredView=!0),null===(t=r.animationState)||void 0===t||t.setActive(cP.InView,i);var s=r.getProps(),o=i?s.onViewportEnter:s.onViewportLeave;null===o||void 0===o||o(e)}}))}}),[e,s,o,c])}function qP(e,n,r){(0,t.useEffect)((function(){e&&requestAnimationFrame((function(){var e;n.hasEnteredView=!0;var t=r.getProps().onViewportEnter;null===t||void 0===t||t(null),null===(e=r.animationState)||void 0===e||e.setActive(cP.InView,!0)}))}),[e])}var HP=function(e){return function(t){return e(t),null}},WP={inView:HP((function(e){var n=e.visualElement,r=e.whileInView,i=e.onViewportEnter,s=e.onViewportLeave,o=e.viewport,a=void 0===o?{}:o,c=(0,t.useRef)({hasEnteredView:!1,isInView:!1}),l=Boolean(r||i||s);a.once&&c.current.hasEnteredView&&(l=!1),("undefined"===typeof IntersectionObserver?qP:BP)(l,c.current,n,a)})),tap:HP((function(e){var n=e.onTap,r=e.onTapStart,i=e.onTapCancel,s=e.whileTap,o=e.visualElement,a=n||r||i||s,c=(0,t.useRef)(!1),l=(0,t.useRef)(null);function u(){var e;null===(e=l.current)||void 0===e||e.call(l),l.current=null}function h(){var e;return u(),c.current=!1,null===(e=o.animationState)||void 0===e||e.setActive(cP.Tap,!1),!RP()}function d(e,t){h()&&(DP(o.getInstance(),e.target)?null===n||void 0===n||n(e,t):null===i||void 0===i||i(e,t))}function f(e,t){h()&&(null===i||void 0===i||i(e,t))}CP(o,"pointerdown",a?function(e,t){var n;u(),c.current||(c.current=!0,l.current=Dk(kP(window,"pointerup",d),kP(window,"pointercancel",f)),null===(n=o.animationState)||void 0===n||n.setActive(cP.Tap,!0),null===r||void 0===r||r(e,t))}:void 0),LP(u)})),focus:HP((function(e){var t=e.whileFocus,n=e.visualElement;dP(n,"focus",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(cP.Focus,!0)}:void 0),dP(n,"blur",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(cP.Focus,!1)}:void 0)})),hover:HP((function(e){var t=e.onHoverStart,n=e.onHoverEnd,r=e.whileHover,i=e.visualElement;CP(i,"pointerenter",t||r?OP(i,!0,t):void 0),CP(i,"pointerleave",n||r?OP(i,!1,n):void 0)}))};function KP(){var e=(0,t.useContext)(KI);if(null===e)return[!0,null];var n=e.isPresent,r=e.onExitComplete,i=e.register,s=YP();(0,t.useEffect)((function(){return i(s)}),[]);return!n&&r?[!1,function(){return null===r||void 0===r?void 0:r(s)}]:[!0]}var GP=0,QP=function(){return GP++},YP=function(){return sS(QP)};function XP(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var JP=function(e){return/^\-?\d*\.?\d+$/.test(e)},$P=function(e){return/^0[^.\s]+$/.test(e)},ZP=function(e){return function(t){return t.test(e)}},eN=[ek,dk,hk,uk,pk,fk,{test:function(e){return"auto"===e},parse:function(e){return e}}],tN=function(e){return eN.find(ZP(e))},nN=Nw(Nw([],Pw(eN),!1),[Ik,Nk],!1),rN=function(e){return nN.find(ZP(e))};function iN(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,xS(n))}function sN(e,t){var n=eS(e,t),r=n?e.makeTargetAnimatable(n,!1):{},i=r.transitionEnd,s=void 0===i?{}:i;r.transition;var o=xw(r,["transitionEnd","transition"]);for(var a in o=Aw(Aw({},o),s)){iN(e,a,WC(o[a]))}}function oN(e,t){if(t)return(t[e]||t.default||t).from}function aN(e,t,n){var r;void 0===n&&(n={});var i=eS(e,t,n.custom),s=(i||{}).transition,o=void 0===s?e.getDefaultTransition()||{}:s;n.transitionOverride&&(o=n.transitionOverride);var a=i?function(){return cN(e,i,n)}:function(){return Promise.resolve()},c=(null===(r=e.variantChildren)||void 0===r?void 0:r.size)?function(r){void 0===r&&(r=0);var i=o.delayChildren,s=void 0===i?0:i,a=o.staggerChildren,c=o.staggerDirection;return function(e,t,n,r,i,s){void 0===n&&(n=0);void 0===r&&(r=0);void 0===i&&(i=1);var o=[],a=(e.variantChildren.size-1)*r,c=1===i?function(e){return void 0===e&&(e=0),e*r}:function(e){return void 0===e&&(e=0),a-e*r};return Array.from(e.variantChildren).sort(lN).forEach((function(e,r){o.push(aN(e,t,Aw(Aw({},s),{delay:n+c(r)})).then((function(){return e.notifyAnimationComplete(t)})))})),Promise.all(o)}(e,t,s+r,a,c,n)}:function(){return Promise.resolve()},l=o.when;if(l){var u=Pw("beforeChildren"===l?[a,c]:[c,a],2),h=u[0],d=u[1];return h().then(d)}return Promise.all([a(),c(n.delay)])}function cN(e,t,n){var r,i=void 0===n?{}:n,s=i.delay,o=void 0===s?0:s,a=i.transitionOverride,c=i.type,l=e.makeTargetAnimatable(t),u=l.transition,h=void 0===u?e.getDefaultTransition():u,d=l.transitionEnd,f=xw(l,["transition","transitionEnd"]);a&&(h=a);var p=[],m=c&&(null===(r=e.animationState)||void 0===r?void 0:r.getState()[c]);for(var g in f){var v=e.getValue(g),y=f[g];if(!(!v||void 0===y||m&&uN(m,g))){var w=$C(g,v,y,Aw({delay:o},h));p.push(w)}}return Promise.all(p).then((function(){d&&sN(e,d)}))}function lN(e,t){return e.sortNodePosition(t)}function uN(e,t){var n=e.protectedKeys,r=e.needsAnimating,i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}var hN=[cP.Animate,cP.InView,cP.Focus,cP.Hover,cP.Tap,cP.Drag,cP.Exit],dN=Nw([],Pw(hN),!1).reverse(),fN=hN.length;function pN(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,r=t.options;return function(e,t,n){var r;if(void 0===n&&(n={}),e.notifyAnimationStart(t),Array.isArray(t)){var i=t.map((function(t){return aN(e,t,n)}));r=Promise.all(i)}else if("string"===typeof t)r=aN(e,t,n);else{var s="function"===typeof t?eS(e,t,n.custom):t;r=cN(e,s,n)}return r.then((function(){return e.notifyAnimationComplete(t)}))}(e,n,r)})))}}function mN(e){var t=pN(e),n=function(){var e;return(e={})[cP.Animate]=gN(!0),e[cP.InView]=gN(),e[cP.Hover]=gN(),e[cP.Tap]=gN(),e[cP.Drag]=gN(),e[cP.Focus]=gN(),e[cP.Exit]=gN(),e}(),r={},i=!0,s=function(t,n){var r=eS(e,n);if(r){r.transition;var i=r.transitionEnd,s=xw(r,["transition","transitionEnd"]);t=Aw(Aw(Aw({},t),s),i)}return t};function o(o,a){for(var c,l=e.getProps(),u=e.getVariantContext(!0)||{},h=[],d=new Set,f={},p=1/0,m=function(t){var r=dN[t],m=n[r],g=null!==(c=l[r])&&void 0!==c?c:u[r],v=$I(g),y=r===a?m.isActive:null;!1===y&&(p=t);var w=g===u[r]&&g!==l[r]&&v;if(w&&i&&e.manuallyAnimateOnMount&&(w=!1),m.protectedKeys=Aw({},f),!m.isActive&&null===y||!g&&!m.prevProp||iP(g)||"boolean"===typeof g)return"continue";var b=function(e,t){if("string"===typeof t)return t!==e;if(JI(t))return!XP(t,e);return!1}(m.prevProp,g),_=b||r===a&&m.isActive&&!w&&v||t>p&&v,T=Array.isArray(g)?g:[g],E=T.reduce(s,{});!1===y&&(E={});var I=m.prevResolvedValues,S=void 0===I?{}:I,k=Aw(Aw({},S),E),C=function(e){_=!0,d.delete(e),m.needsAnimating[e]=!0};for(var A in k){var x=E[A],P=S[A];f.hasOwnProperty(A)||(x!==P?CC(x)&&CC(P)?!XP(x,P)||b?C(A):m.protectedKeys[A]=!0:void 0!==x?C(A):d.add(A):void 0!==x&&d.has(A)?C(A):m.protectedKeys[A]=!0)}m.prevProp=g,m.prevResolvedValues=E,m.isActive&&(f=Aw(Aw({},f),E)),i&&e.blockInitialAnimation&&(_=!1),_&&!w&&h.push.apply(h,Nw([],Pw(T.map((function(e){return{animation:e,options:Aw({type:r},o)}}))),!1))},g=0;g<fN;g++)m(g);if(r=Aw({},f),d.size){var v={};d.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(v[t]=n)})),h.push({animation:v})}var y=Boolean(h.length);return i&&!1===l.initial&&!e.manuallyAnimateOnMount&&(y=!1),i=!1,y?t(h):Promise.resolve()}return{isAnimated:function(e){return void 0!==r[e]},animateChanges:o,setActive:function(t,r,i){var s;return n[t].isActive===r?Promise.resolve():(null===(s=e.variantChildren)||void 0===s||s.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r,o(i,t))},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function gN(e){return void 0===e&&(e=!1),{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var vN={animation:HP((function(e){var n=e.visualElement,r=e.animate;n.animationState||(n.animationState=mN(n)),iP(r)&&(0,t.useEffect)((function(){return r.subscribe(n)}),[r])})),exit:HP((function(e){var n=e.custom,r=e.visualElement,i=Pw(KP(),2),s=i[0],o=i[1],a=(0,t.useContext)(KI);(0,t.useEffect)((function(){var e,t;r.isPresent=s;var i=null===(e=r.animationState)||void 0===e?void 0:e.setActive(cP.Exit,!s,{custom:null!==(t=null===a||void 0===a?void 0:a.custom)&&void 0!==t?t:n});!s&&(null===i||void 0===i||i.then(o))}),[s])}))},yN=function(){function e(e,t,n){var r=this,i=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e=_N(r.lastMoveEventInfo,r.history),t=null!==r.startEvent,n=SA(e.offset,{x:0,y:0})>=3;if(t||n){var i=e.point,s=_S().timestamp;r.history.push(Aw(Aw({},i),{timestamp:s}));var o=r.handlers,a=o.onStart,c=o.onMove;t||(a&&a(r.lastMoveEvent,e),r.startEvent=r.lastMoveEvent),c&&c(r.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){r.lastMoveEvent=e,r.lastMoveEventInfo=wN(t,r.transformPagePoint),fP(e)&&0===e.buttons?r.handlePointerUp(e,t):TS.update(r.updatePoint,!0)},this.handlePointerUp=function(e,t){r.end();var n=r.handlers,i=n.onEnd,s=n.onSessionEnd,o=_N(wN(t,r.transformPagePoint),r.history);r.startEvent&&i&&i(e,o),s&&s(e,o)},!(pP(e)&&e.touches.length>1)){this.handlers=t,this.transformPagePoint=i;var s=wN(yP(e),this.transformPagePoint),o=s.point,a=_S().timestamp;this.history=[Aw(Aw({},o),{timestamp:a})];var c=t.onSessionStart;c&&c(e,_N(s,this.history)),this.removeListeners=Dk(kP(window,"pointermove",this.handlePointerMove),kP(window,"pointerup",this.handlePointerUp),kP(window,"pointercancel",this.handlePointerUp))}}return e.prototype.updateHandlers=function(e){this.handlers=e},e.prototype.end=function(){this.removeListeners&&this.removeListeners(),gS.update(this.updatePoint)},e}();function wN(e,t){return t?{point:t(e.point)}:e}function bN(e,t){return{x:e.x-t.x,y:e.y-t.y}}function _N(e,t){var n=e.point;return{point:n,delta:bN(n,EN(t)),offset:bN(n,TN(t)),velocity:IN(t,.1)}}function TN(e){return e[0]}function EN(e){return e[e.length-1]}function IN(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,i=EN(e);n>=0&&(r=e[n],!(i.timestamp-r.timestamp>dC(t)));)n--;if(!r)return{x:0,y:0};var s=(i.timestamp-r.timestamp)/1e3;if(0===s)return{x:0,y:0};var o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function SN(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function kN(e,t){var n,r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&(r=(n=Pw([i,r],2))[0],i=n[1]),{min:r,max:i}}var CN=.35;function AN(e,t,n){return{min:xN(e,t),max:xN(e,n)}}function xN(e,t){var n;return"number"===typeof e?e:null!==(n=e[t])&&void 0!==n?n:0}function PN(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function NN(e,t){return PN(function(e,t){if(!t)return e;var n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}var RN=new WeakMap,ON=function(){function e(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=VA(),this.visualElement=e}return e.prototype.start=function(e,t){var n=this,r=(void 0===t?{}:t).snapToCursor,i=void 0!==r&&r;if(!1!==this.visualElement.isPresent){this.panSession=new yN(e,{onSessionStart:function(e){n.stopAnimation(),i&&n.snapToCursor(yP(e,"page").point)},onStart:function(e,t){var r,i=n.getProps(),s=i.drag,o=i.dragPropagation,a=i.onDragStart;(!s||o||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=NP(s),n.openGlobalLock))&&(n.isDragging=!0,n.currentDirection=null,n.resolveConstraints(),n.visualElement.projection&&(n.visualElement.projection.isAnimationBlocked=!0,n.visualElement.projection.target=void 0),GA((function(e){var t,r,i=n.getAxisMotionValue(e).get()||0;if(hk.test(i)){var s=null===(r=null===(t=n.visualElement.projection)||void 0===t?void 0:t.layout)||void 0===r?void 0:r.actual[e];if(s)i=kA(s)*(parseFloat(i)/100)}n.originPoint[e]=i})),null===a||void 0===a||a(e,t),null===(r=n.visualElement.animationState)||void 0===r||r.setActive(cP.Drag,!0))},onMove:function(e,t){var r=n.getProps(),i=r.dragPropagation,s=r.dragDirectionLock,o=r.onDirectionLock,a=r.onDrag;if(i||n.openGlobalLock){var c=t.offset;if(s&&null===n.currentDirection)return n.currentDirection=function(e,t){void 0===t&&(t=10);var n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(c),void(null!==n.currentDirection&&(null===o||void 0===o||o(n.currentDirection)));n.updateAxis("x",t.point,c),n.updateAxis("y",t.point,c),n.visualElement.syncRender(),null===a||void 0===a||a(e,t)}},onSessionEnd:function(e,t){return n.stop(e,t)}},{transformPagePoint:this.visualElement.getTransformPagePoint()})}},e.prototype.stop=function(e,t){var n=this.isDragging;if(this.cancel(),n){var r=t.velocity;this.startAnimation(r);var i=this.getProps().onDragEnd;null===i||void 0===i||i(e,t)}},e.prototype.cancel=function(){var e,t;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(e=this.panSession)||void 0===e||e.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(cP.Drag,!1)},e.prototype.updateAxis=function(e,t,n){var r=this.getProps().drag;if(n&&DN(e,r,this.currentDirection)){var i=this.getAxisMotionValue(e),s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,t,n){var r=t.min,i=t.max;return void 0!==r&&e<r?e=n?ES(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?ES(i,e,n.max):Math.min(e,i)),e}(s,this.constraints[e],this.elastic[e])),i.set(s)}},e.prototype.resolveConstraints=function(){var e=this,t=this.getProps(),n=t.dragConstraints,r=t.dragElastic,i=(this.visualElement.projection||{}).layout,s=this.constraints;n&&XI(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!n||!i)&&function(e,t){var n=t.top,r=t.left,i=t.bottom,s=t.right;return{x:SN(e.x,r,s),y:SN(e.y,n,i)}}(i.actual,n),this.elastic=function(e){return void 0===e&&(e=CN),!1===e?e=0:!0===e&&(e=CN),{x:AN(e,"left","right"),y:AN(e,"top","bottom")}}(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&GA((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.actual[t],e.constraints[t]))}))},e.prototype.resolveRefConstraints=function(){var e=this.getProps(),t=e.dragConstraints,n=e.onMeasureDragConstraints;if(!t||!XI(t))return!1;var r=t.current;RS(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");var i=this.visualElement.projection;if(!i||!i.layout)return!1;var s=function(e,t,n){var r=NN(e,n),i=t.scroll;return i&&(vA(r.x,i.x),vA(r.y,i.y)),r}(r,i.root,this.visualElement.getTransformPagePoint()),o=function(e,t){return{x:kN(e.x,t.x),y:kN(e.y,t.y)}}(i.layout.actual,s);if(n){var a=n(function(e){var t=e.x,n=e.y;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!a,a&&(o=PN(a))}return o},e.prototype.startAnimation=function(e){var t=this,n=this.getProps(),r=n.drag,i=n.dragMomentum,s=n.dragElastic,o=n.dragTransition,a=n.dragSnapToOrigin,c=n.onDragTransitionEnd,l=this.constraints||{},u=GA((function(n){var c;if(DN(n,r,t.currentDirection)){var u=null!==(c=null===l||void 0===l?void 0:l[n])&&void 0!==c?c:{};a&&(u={min:0,max:0});var h=s?200:1e6,d=s?40:1e7,f=Aw(Aw({type:"inertia",velocity:i?e[n]:0,bounceStiffness:h,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},o),u);return t.startAxisValueAnimation(n,f)}}));return Promise.all(u).then(c)},e.prototype.startAxisValueAnimation=function(e,t){return $C(e,this.getAxisMotionValue(e),0,t)},e.prototype.stopAnimation=function(){var e=this;GA((function(t){return e.getAxisMotionValue(t).stop()}))},e.prototype.getAxisMotionValue=function(e){var t,n,r="_drag"+e.toUpperCase(),i=this.visualElement.getProps()[r];return i||this.visualElement.getValue(e,null!==(n=null===(t=this.visualElement.getProps().initial)||void 0===t?void 0:t[e])&&void 0!==n?n:0)},e.prototype.snapToCursor=function(e){var t=this;GA((function(n){if(DN(n,t.getProps().drag,t.currentDirection)){var r=t.visualElement.projection,i=t.getAxisMotionValue(n);if(r&&r.layout){var s=r.layout.actual[n],o=s.min,a=s.max;i.set(e[n]-ES(o,a,.5))}}}))},e.prototype.scalePositionWithinConstraints=function(){var e,t=this,n=this.getProps(),r=n.drag,i=n.dragConstraints,s=this.visualElement.projection;if(XI(i)&&s&&this.constraints){this.stopAnimation();var o={x:0,y:0};GA((function(e){var n=t.getAxisMotionValue(e);if(n){var r=n.get();o[e]=function(e,t){var n=.5,r=kA(e),i=kA(t);return i>r?n=GS(t.min,t.max-r,e.min):r>i&&(n=GS(e.min,e.max-i,t.min)),OS(0,1,n)}({min:r,max:r},t.constraints[e])}}));var a=this.visualElement.getProps().transformTemplate;this.visualElement.getInstance().style.transform=a?a({},""):"none",null===(e=s.root)||void 0===e||e.updateScroll(),s.updateLayout(),this.resolveConstraints(),GA((function(e){if(DN(e,r,null)){var n=t.getAxisMotionValue(e),i=t.constraints[e],s=i.min,a=i.max;n.set(ES(s,a,o[e]))}}))}},e.prototype.addListeners=function(){var e,t=this;RN.set(this.visualElement,this);var n=kP(this.visualElement.getInstance(),"pointerdown",(function(e){var n=t.getProps(),r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&t.start(e)})),r=function(){XI(t.getProps().dragConstraints)&&(t.constraints=t.resolveRefConstraints())},i=this.visualElement.projection,s=i.addEventListener("measure",r);i&&!i.layout&&(null===(e=i.root)||void 0===e||e.updateScroll(),i.updateLayout()),r();var o=hP(window,"resize",(function(){t.scalePositionWithinConstraints()}));return i.addEventListener("didUpdate",(function(e){var n=e.delta,r=e.hasLayoutChanged;t.isDragging&&r&&(GA((function(e){var r=t.getAxisMotionValue(e);r&&(t.originPoint[e]+=n[e].translate,r.set(r.get()+n[e].translate))})),t.visualElement.syncRender())})),function(){o(),n(),s()}},e.prototype.getProps=function(){var e=this.visualElement.getProps(),t=e.drag,n=void 0!==t&&t,r=e.dragDirectionLock,i=void 0!==r&&r,s=e.dragPropagation,o=void 0!==s&&s,a=e.dragConstraints,c=void 0!==a&&a,l=e.dragElastic,u=void 0===l?CN:l,h=e.dragMomentum,d=void 0===h||h;return Aw(Aw({},e),{drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:c,dragElastic:u,dragMomentum:d})},e}();function DN(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}var LN={pan:HP((function(e){var n=e.onPan,r=e.onPanStart,i=e.onPanEnd,s=e.onPanSessionStart,o=e.visualElement,a=n||r||i||s,c=(0,t.useRef)(null),l=(0,t.useContext)(HI).transformPagePoint,u={onSessionStart:s,onStart:r,onMove:n,onEnd:function(e,t){c.current=null,i&&i(e,t)}};(0,t.useEffect)((function(){null!==c.current&&c.current.updateHandlers(u)})),CP(o,"pointerdown",a&&function(e){c.current=new yN(e,u,{transformPagePoint:l})}),LP((function(){return c.current&&c.current.end()}))})),drag:HP((function(e){var n=e.dragControls,r=e.visualElement,i=sS((function(){return new ON(r)}));(0,t.useEffect)((function(){return n&&n.subscribe(i)}),[i,n]),(0,t.useEffect)((function(){return i.addListeners()}),[i])}))},MN=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","SetAxisTarget","Unmount"];var UN=function(e){var t=e.treeType,n=void 0===t?"":t,r=e.build,i=e.getBaseTarget,s=e.makeTargetAnimatable,o=e.measureViewportBox,a=e.render,c=e.readValueFromInstance,l=e.removeValueFromRenderState,u=e.sortNodePosition,h=e.scrapeMotionValuesFromProps;return function(e,t){var d=e.parent,f=e.props,p=e.presenceId,m=e.blockInitialAnimation,g=e.visualState;void 0===t&&(t={});var v,y,w=!1,b=g.latestValues,_=g.renderState,T=function(){var e=MN.map((function(){return new CS})),t={},n={clearAllListeners:function(){return e.forEach((function(e){return e.clear()}))},updatePropListeners:function(e){MN.forEach((function(r){var i,s="on"+r,o=e[s];null===(i=t[r])||void 0===i||i.call(t),o&&(t[r]=n[s](o))}))}};return e.forEach((function(e,t){n["on"+MN[t]]=function(t){return e.add(t)},n["notify"+MN[t]]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.notify.apply(e,Nw([],Pw(t),!1))}})),n}(),E=new Map,I=new Map,S={},k=Aw({},b);function C(){v&&w&&(A(),a(v,_,f.style,L.projection))}function A(){r(L,_,b,t,f)}function x(){T.notifyUpdate(b)}var P=h(f);for(var N in P){var R=P[N];void 0!==b[N]&&PS(R)&&R.set(b[N],!1)}var O=tS(f),D=nS(f),L=Aw(Aw({treeType:n,current:null,depth:d?d.depth+1:0,parent:d,children:new Set,presenceId:p,variantChildren:D?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null===d||void 0===d?void 0:d.isMounted()),blockInitialAnimation:m,isMounted:function(){return Boolean(v)},mount:function(e){w=!0,v=L.current=e,L.projection&&L.projection.mount(e),D&&d&&!O&&(y=null===d||void 0===d?void 0:d.addVariantChild(L)),null===d||void 0===d||d.children.add(L),L.setProps(f)},unmount:function(){var e;null===(e=L.projection)||void 0===e||e.unmount(),gS.update(x),gS.render(C),I.forEach((function(e){return e()})),null===y||void 0===y||y(),null===d||void 0===d||d.children.delete(L),T.clearAllListeners(),v=void 0,w=!1},addVariantChild:function(e){var t,n=L.getClosestVariantNode();if(n)return null===(t=n.variantChildren)||void 0===t||t.add(e),function(){return n.variantChildren.delete(e)}},sortNodePosition:function(e){return u&&n===e.treeType?u(L.getInstance(),e.getInstance()):0},getClosestVariantNode:function(){return D?L:null===d||void 0===d?void 0:d.getClosestVariantNode()},getLayoutId:function(){return f.layoutId},getInstance:function(){return v},getStaticValue:function(e){return b[e]},setStaticValue:function(e,t){return b[e]=t},getLatestValues:function(){return b},setVisibility:function(e){L.isVisible!==e&&(L.isVisible=e,L.scheduleRender())},makeTargetAnimatable:function(e,t){return void 0===t&&(t=!0),s(L,e,f,t)},measureViewportBox:function(){return o(v,f)},addValue:function(e,t){L.hasValue(e)&&L.removeValue(e),E.set(e,t),b[e]=t.get(),function(e,t){var n=t.onChange((function(t){b[e]=t,f.onUpdate&&TS.update(x,!1,!0)})),r=t.onRenderRequest(L.scheduleRender);I.set(e,(function(){n(),r()}))}(e,t)},removeValue:function(e){var t;E.delete(e),null===(t=I.get(e))||void 0===t||t(),I.delete(e),delete b[e],l(e,_)},hasValue:function(e){return E.has(e)},getValue:function(e,t){var n=E.get(e);return void 0===n&&void 0!==t&&(n=xS(t),L.addValue(e,n)),n},forEachValue:function(e){return E.forEach(e)},readValue:function(e){var n;return null!==(n=b[e])&&void 0!==n?n:c(v,e,t)},setBaseTarget:function(e,t){k[e]=t},getBaseTarget:function(e){if(i){var t=i(f,e);if(void 0!==t&&!PS(t))return t}return k[e]}},T),{build:function(){return A(),_},scheduleRender:function(){TS.render(C,!1,!0)},syncRender:C,setProps:function(e){(e.transformTemplate||f.transformTemplate)&&L.scheduleRender(),f=e,T.updatePropListeners(e),S=function(e,t,n){var r;for(var i in t){var s=t[i],o=n[i];if(PS(s))e.addValue(i,s);else if(PS(o))e.addValue(i,xS(s));else if(o!==s)if(e.hasValue(i)){var a=e.getValue(i);!a.hasAnimated&&a.set(s)}else e.addValue(i,xS(null!==(r=e.getStaticValue(i))&&void 0!==r?r:s))}for(var i in n)void 0===t[i]&&e.removeValue(i);return t}(L,h(f),S)},getProps:function(){return f},getVariant:function(e){var t;return null===(t=f.variants)||void 0===t?void 0:t[e]},getDefaultTransition:function(){return f.transition},getTransformPagePoint:function(){return f.transformPagePoint},getVariantContext:function(e){if(void 0===e&&(e=!1),e)return null===d||void 0===d?void 0:d.getVariantContext();if(!O){var t=(null===d||void 0===d?void 0:d.getVariantContext())||{};return void 0!==f.initial&&(t.initial=f.initial),t}for(var n={},r=0;r<VN;r++){var i=FN[r],s=f[i];($I(s)||!1===s)&&(n[i]=s)}return n}});return L}},FN=Nw(["initial"],Pw(hN),!1),VN=FN.length;function jN(e){return"string"===typeof e&&e.startsWith("var(--")}var zN=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;var BN=4;function qN(e,t,n){void 0===n&&(n=1),RS(n<=BN,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));var r=Pw(function(e){var t=zN.exec(e);if(!t)return[,];var n=Pw(t,3);return[n[1],n[2]]}(e),2),i=r[0],s=r[1];if(i){var o=window.getComputedStyle(t).getPropertyValue(i);return o?o.trim():jN(s)?qN(s,t,n+1):s}}var HN,WN=new Set(["width","height","top","left","right","bottom","x","y"]),KN=function(e){return WN.has(e)},GN=function(e,t){e.set(t,!1),e.set(t)},QN=function(e){return e===ek||e===dk};!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(HN||(HN={}));var YN=function(e,t){return parseFloat(e.split(", ")[t])},XN=function(e,t){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var s=i.match(/^matrix3d\((.+)\)$/);if(s)return YN(s[1],t);var o=i.match(/^matrix\((.+)\)$/);return o?YN(o[1],e):0}},JN=new Set(["x","y","z"]),$N=YA.filter((function(e){return!JN.has(e)}));var ZN={width:function(e,t){var n=e.x,r=t.paddingLeft,i=void 0===r?"0":r,s=t.paddingRight,o=void 0===s?"0":s;return n.max-n.min-parseFloat(i)-parseFloat(o)},height:function(e,t){var n=e.y,r=t.paddingTop,i=void 0===r?"0":r,s=t.paddingBottom,o=void 0===s?"0":s;return n.max-n.min-parseFloat(i)-parseFloat(o)},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,r=t.top;return parseFloat(r)+(n.max-n.min)},right:function(e,t){var n=e.x,r=t.left;return parseFloat(r)+(n.max-n.min)},x:XN(4,13),y:XN(5,14)},eR=function(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r={}),t=Aw({},t),r=Aw({},r);var i=Object.keys(t).filter(KN),s=[],o=!1,a=[];if(i.forEach((function(i){var c=e.getValue(i);if(e.hasValue(i)){var l,u=n[i],h=tN(u),d=t[i];if(CC(d)){var f=d.length,p=null===d[0]?1:0;u=d[p],h=tN(u);for(var m=p;m<f;m++)l?RS(tN(d[m])===l,"All keyframes must be of the same type"):(l=tN(d[m]),RS(l===h||QN(h)&&QN(l),"Keyframes must be of the same dimension as the current value"))}else l=tN(d);if(h!==l)if(QN(h)&&QN(l)){var g=c.get();"string"===typeof g&&c.set(parseFloat(g)),"string"===typeof d?t[i]=parseFloat(d):Array.isArray(d)&&l===dk&&(t[i]=d.map(parseFloat))}else(null===h||void 0===h?void 0:h.transform)&&(null===l||void 0===l?void 0:l.transform)&&(0===u||0===d)?0===u?c.set(l.transform(u)):t[i]=h.transform(d):(o||(s=function(e){var t=[];return $N.forEach((function(n){var r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.syncRender(),t}(e),o=!0),a.push(i),r[i]=void 0!==r[i]?r[i]:t[i],GN(c,d))}})),a.length){var c=function(e,t,n){var r=t.measureViewportBox(),i=t.getInstance(),s=getComputedStyle(i),o=s.display,a={};"none"===o&&t.setStaticValue("display",e.display||"block"),n.forEach((function(e){a[e]=ZN[e](r,s)})),t.syncRender();var c=t.measureViewportBox();return n.forEach((function(n){var r=t.getValue(n);GN(r,a[n]),e[n]=ZN[n](c,s)})),e}(t,e,a);return s.length&&s.forEach((function(t){var n=Pw(t,2),r=n[0],i=n[1];e.getValue(r).set(i)})),e.syncRender(),{target:c,transitionEnd:r}}return{target:t,transitionEnd:r}};function tR(e,t,n,r){return function(e){return Object.keys(e).some(KN)}(t)?eR(e,t,n,r):{target:t,transitionEnd:r}}var nR=function(e,t,n,r){var i=function(e,t,n){var r,i=xw(t,[]),s=e.getInstance();if(!(s instanceof Element))return{target:i,transitionEnd:n};for(var o in n&&(n=Aw({},n)),e.forEachValue((function(e){var t=e.get();if(jN(t)){var n=qN(t,s);n&&e.set(n)}})),i){var a=i[o];if(jN(a)){var c=qN(a,s);c&&(i[o]=c,n&&(null!==(r=n[o])&&void 0!==r||(n[o]=a)))}}return{target:i,transitionEnd:n}}(e,t,r);return tR(e,t=i.target,n,r=i.transitionEnd)};var rR={treeType:"dom",readValueFromInstance:function(e,t){if($A(t)){var n=zC(t);return n&&n.default||0}var r,i=(r=e,window.getComputedStyle(r));return(Ox(t)?i.getPropertyValue(t):i[t])||0},sortNodePosition:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1},getBaseTarget:function(e,t){var n;return null===(n=e.style)||void 0===n?void 0:n[t]},measureViewportBox:function(e,t){return NN(e,t.transformPagePoint)},resetTransform:function(e,t,n){var r=n.transformTemplate;t.style.transform=r?r({},""):"none",e.scheduleRender()},restoreTransform:function(e,t){e.style.transform=t.style.transform},removeValueFromRenderState:function(e,t){var n=t.vars,r=t.style;delete n[e],delete r[e]},makeTargetAnimatable:function(e,t,n,r){var i=n.transformValues;void 0===r&&(r=!0);var s=t.transition,o=t.transitionEnd,a=xw(t,["transition","transitionEnd"]),c=function(e,t,n){var r,i,s={};for(var o in e)s[o]=null!==(r=oN(o,t))&&void 0!==r?r:null===(i=n.getValue(o))||void 0===i?void 0:i.get();return s}(a,s||{},e);if(i&&(o&&(o=i(o)),a&&(a=i(a)),c&&(c=i(c))),r){!function(e,t,n){var r,i,s,o,a=Object.keys(t).filter((function(t){return!e.hasValue(t)})),c=a.length;if(c)for(var l=0;l<c;l++){var u=a[l],h=t[u],d=null;Array.isArray(h)&&(d=h[0]),null===d&&(d=null!==(i=null!==(r=n[u])&&void 0!==r?r:e.readValue(u))&&void 0!==i?i:t[u]),void 0!==d&&null!==d&&("string"===typeof d&&(JP(d)||$P(d))?d=parseFloat(d):!rN(d)&&Nk.test(h)&&(d=BC(u,h)),e.addValue(u,xS(d)),null!==(s=(o=n)[u])&&void 0!==s||(o[u]=d),e.setBaseTarget(u,d))}}(e,a,c);var l=nR(e,a,c,o);o=l.transitionEnd,a=l.target}return Aw({transition:s,transitionEnd:o},a)},scrapeMotionValuesFromProps:nP,build:function(e,t,n,r,i){void 0!==e.isVisible&&(t.style.visibility=e.isVisible?"visible":"hidden"),Lx(t,n,r,i.transformTemplate)},render:Zx},iR=UN(rR),sR=UN(Aw(Aw({},rR),{getBaseTarget:function(e,t){return e[t]},readValueFromInstance:function(e,t){var n;return $A(t)?(null===(n=zC(t))||void 0===n?void 0:n.default)||0:(t=eP.has(t)?t:$x(t),e.getAttribute(t))},scrapeMotionValuesFromProps:rP,build:function(e,t,n,r,i){Gx(t,n,r,i.transformTemplate)},render:tP})),oR=function(e,t){return Px(e)?sR(t,{enableHardwareAcceleration:!1}):iR(t,{enableHardwareAcceleration:!0})};function aR(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var cR={correct:function(e,t){if(!t.target)return e;if("string"===typeof e){if(!dk.test(e))return e;e=parseFloat(e)}var n=aR(e,t.target.x),r=aR(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},lR="_$css",uR={correct:function(e,t){var n=t.treeScale,r=t.projectionDelta,i=e,s=e.includes("var("),o=[];s&&(e=e.replace(zN,(function(e){return o.push(e),lR})));var a=Nk.parse(e);if(a.length>5)return i;var c=Nk.createTransformer(e),l="number"!==typeof a[0]?1:0,u=r.x.scale*n.x,h=r.y.scale*n.y;a[0+l]/=u,a[1+l]/=h;var d=ES(u,h,.5);"number"===typeof a[2+l]&&(a[2+l]/=d),"number"===typeof a[3+l]&&(a[3+l]/=d);var f=c(a);if(s){var p=0;f=f.replace(lR,(function(){var e=o[p];return p++,e}))}return f}},hR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cw(t,e),t.prototype.componentDidMount=function(){var e,t=this,n=this.props,r=n.visualElement,i=n.layoutGroup,s=n.switchLayoutGroup,o=n.layoutId,a=r.projection;e=dR,Object.assign(HA,e),a&&((null===i||void 0===i?void 0:i.group)&&i.group.add(a),(null===s||void 0===s?void 0:s.register)&&o&&s.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",(function(){t.safeToRemove()})),a.setOptions(Aw(Aw({},a.options),{onExitComplete:function(){return t.safeToRemove()}}))),ix.hasEverUpdated=!0},t.prototype.getSnapshotBeforeUpdate=function(e){var t=this,n=this.props,r=n.layoutDependency,i=n.visualElement,s=n.drag,o=n.isPresent,a=i.projection;return a?(a.isPresent=o,s||e.layoutDependency!==r||void 0===r?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||TS.postRender((function(){var e;(null===(e=a.getStack())||void 0===e?void 0:e.members.length)||t.safeToRemove()}))),null):null},t.prototype.componentDidUpdate=function(){var e=this.props.visualElement.projection;e&&(e.root.didUpdate(),!e.currentAnimation&&e.isLead()&&this.safeToRemove())},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.visualElement,n=e.layoutGroup,r=e.switchLayoutGroup,i=t.projection;i&&(i.scheduleCheckAfterUnmount(),(null===n||void 0===n?void 0:n.group)&&n.group.remove(i),(null===r||void 0===r?void 0:r.deregister)&&r.deregister(i))},t.prototype.safeToRemove=function(){var e=this.props.safeToRemove;null===e||void 0===e||e()},t.prototype.render=function(){return null},t}(t.Component);var dR={borderRadius:Aw(Aw({},cR),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:cR,borderTopRightRadius:cR,borderBottomLeftRadius:cR,borderBottomRightRadius:cR,boxShadow:uR},fR={measureLayout:function(e){var n=Pw(KP(),2),r=n[0],i=n[1],s=(0,t.useContext)(Ix);return t.createElement(hR,Aw({},e,{layoutGroup:s,switchLayoutGroup:(0,t.useContext)(Sx),isPresent:r,safeToRemove:i}))}},pR=sx({attachResizeListener:function(e,t){return e.addEventListener("resize",t,{passive:!0}),function(){return e.removeEventListener("resize",t)}},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}}}),mR={current:void 0},gR=sx({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!mR.current){var e=new pR(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),mR.current=e}return mR.current},resetTransform:function(e,t){e.style.transform=null!==t&&void 0!==t?t:"none"}}),vR=Aw(Aw(Aw(Aw({},vN),WP),LN),fR),yR=Ax((function(e,t){return function(e,t,n,r,i){var s=t.forwardMotionProps,o=void 0!==s&&s,a=Px(e)?lP:uP;return Aw(Aw({},a),{preloadedFeatures:n,useRender:Xx(o),createVisualElement:r,projectionNodeConstructor:i,Component:e})}(e,t,vR,oR,gR)}));const wR=e=>{let{file:n,setFile:r}=e;const{url:i,progress:s}=FI(n);return(0,t.useEffect)((()=>{i&&r(null)}),[i,r]),t.createElement(yR.div,{className:"progress-bar",initial:{width:0},animate:{width:s+"%"}}," ")},bR=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)(null),s=["image/png","image/jpeg"];return t.createElement("form",null,t.createElement("label",null,t.createElement("input",{type:"file",onChange:e=>{let t=e.target.files[0];t&&s.includes(t.type)?(n(t),i(null)):(n(null),i("Please select an Image file (png or jpeg)"))}}),t.createElement("span",null,"+")),t.createElement("div",{className:"output"},r&&t.createElement("div",{className:"error"},r),e&&t.createElement("div",null,e.name),e&&t.createElement(wR,{file:e,setFile:n})))},_R=e=>{const[n,r]=(0,t.useState)([]);return(0,t.useEffect)((()=>{const t=DI.collection(e).orderBy("createdAt","desc").onSnapshot((e=>{let t=[];e.forEach((e=>{t.push({...e.data(),id:e.id})})),r(t)}));return()=>t()}),[e]),{docs:n}};const TR=function(e){const{text:n,tipClass:r,children:i}=e;return t.createElement("div",{className:"tooltip"},i,t.createElement("span",{className:r},n))};var ER={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IR=t.createContext&&t.createContext(ER),SR=["attr","size","title"];function kR(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function CR(){return CR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CR.apply(this,arguments)}function AR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AR(Object(n),!0).forEach((function(t){PR(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AR(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function PR(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NR(e){return e&&e.map(((e,n)=>t.createElement(e.tag,xR({key:n},e.attr),NR(e.child))))}function RR(e){return n=>t.createElement(OR,CR({attr:xR({},e.attr)},n),NR(e.child))}function OR(e){var n=n=>{var r,{attr:i,size:s,title:o}=e,a=kR(e,SR),c=s||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",CR({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:r,style:xR(xR({color:e.color||n.color},n.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==IR?t.createElement(IR.Consumer,null,(e=>n(e))):n(ER)}function DR(e){return RR({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 8v11c0 2.201 1.794 3 3 3h15v-2H6.012C5.55 19.988 5 19.806 5 19c0-.101.009-.191.024-.273.112-.576.584-.717.988-.727H21V4c0-1.103-.897-2-2-2H6c-1.206 0-3 .799-3 3v3zm3-4h13v12H5V5c0-.806.55-.988 1-1z"},child:[]},{tag:"path",attr:{d:"M11 14h2v-3h3V9h-3V6h-2v3H8v2h3z"},child:[]}]})(e)}function LR(e){return RR({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 21h1V8H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2zM20 8h-7l1.122-3.368A2 2 0 0 0 12.225 2H12L7 7.438V21h11l3.912-8.596L22 12v-2a2 2 0 0 0-2-2z"},child:[]}]})(e)}function MR(e){return RR({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm52.7 283.3L256 278.6l-52.7 52.7c-6.2 6.2-16.4 6.2-22.6 0-3.1-3.1-4.7-7.2-4.7-11.3 0-4.1 1.6-8.2 4.7-11.3l52.7-52.7-52.7-52.7c-3.1-3.1-4.7-7.2-4.7-11.3 0-4.1 1.6-8.2 4.7-11.3 6.2-6.2 16.4-6.2 22.6 0l52.7 52.7 52.7-52.7c6.2-6.2 16.4-6.2 22.6 0 6.2 6.2 6.2 16.4 0 22.6L278.6 256l52.7 52.7c6.2 6.2 6.2 16.4 0 22.6-6.2 6.3-16.4 6.3-22.6 0z"},child:[]}]})(e)}const UR=e=>{let{setSelectimg:n,docu:r}=e;const[i,s]=(0,t.useState)("Delete"),[o,a]=(0,t.useState)("tooltiptext"),[c,l]=(0,t.useState)(r.like),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne(),t=arguments.length>1?arguments[1]:void 0;e=F(e);const n=Ie(e,On).getImmediate({identifier:t}),r=f("storage");return r&&Fn(n,...r),n}(),h=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Ie("object"==typeof e?e:Ne(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=f("firestore");e&&yv(r,...e)}return r}(RI);return t.createElement("div",null,t.createElement(yR.div,{className:"img-wrap",layout:!0,whileHover:{opacity:1}},t.createElement(yR.img,{src:r.url,alt:"image gallery",onClick:()=>n(r.url),initial:{opacity:0},animate:{opacity:1},transition:{delay:1}}),t.createElement(LR,{className:c?"like-img like-active":"like-img",onClick:()=>async function(e,t){l(!t);const n=Ev(h,"images",e);await Hy(n,{like:!t})}(r.id,r.like)}),t.createElement(TR,{text:i,tipClass:o},t.createElement(MR,{className:"remove-img",onClick:()=>((e,t)=>{const n=Un(u,e);a("tooltipactive"),s("Deleting..."),Mn(n).then((async()=>{console.log("deleted",r.id),await Wy(Ev(h,"images",t))})).then((()=>{console.log("updated store")})).catch((async e=>{await Wy(Ev(h,"images",t)),console.error("Error occured",e)}))})(r.url,r.id)}))))},FR=e=>{let{setSelectimg:n,setFilelen:r}=e;const{docs:i}=_R("images");return(0,t.useEffect)((()=>{r(i.length)}),[i]),t.createElement("div",{className:"img-grid"},0!==i.length?i.map((e=>t.createElement(UR,{setSelectimg:n,docu:e,key:e.id}))):t.createElement("h3",{style:{textAlign:"center"}},"Start Adding Images"))},VR=e=>{let{selectimg:n,setSelectimg:r}=e;return t.createElement("div",{className:"backdrop",onClick:e=>{e.target.classList.contains("backdrop")&&r(null)}},t.createElement("img",{src:n,alt:""}))},jR=()=>{const[e,n]=(0,t.useState)(!1),[r,i]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=e=>{e.preventDefault(),console.log("we are being triggered :D"),n(!0),i(e)};return window.addEventListener("beforeinstallprompt",e),()=>window.removeEventListener("transitionend",e)}),[]);return e?t.createElement("button",{style:{backgroundColor:"purple",position:"fixed"},className:"btn btn-install","aria-label":"Install app",title:"Install app",onClick:e=>{e.preventDefault(),r&&r.prompt()}},"Install"):null};function zR(e){return RR({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 0 0-44.4 0L77.5 505a63.9 63.9 0 0 0-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0 0 18.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"},child:[]}]})(e)}function BR(e){return RR({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M858.5 763.6a374 374 0 0 0-80.6-119.5 375.63 375.63 0 0 0-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 0 0-80.6 119.5A371.7 371.7 0 0 0 136 901.8a8 8 0 0 0 8 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 0 0 8-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"},child:[]}]})(e)}function qR(e){return RR({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14.1213 10.4796C13.7308 10.0891 13.0976 10.0891 12.7071 10.4796L12 11.1868C11.2189 11.9678 9.95259 11.9678 9.17154 11.1868C8.39049 10.4057 8.39049 9.13937 9.17154 8.35832L14.8022 2.72617C16.9061 2.25022 19.2008 2.83124 20.8388 4.46924C23.2582 6.8886 23.3716 10.7407 21.1792 13.2944L19.071 15.4294L14.1213 10.4796ZM3.16113 4.46924C5.33452 2.29584 8.66411 1.98332 11.17 3.53165L7.75732 6.94411C6.19523 8.50621 6.19523 11.0389 7.75732 12.601C9.27209 14.1157 11.6995 14.1616 13.2695 12.7387L13.4142 12.601L17.6568 16.8436L13.4142 21.0862C12.6331 21.8673 11.3668 21.8673 10.5858 21.0862L3.16113 13.6616C0.622722 11.1232 0.622722 7.00764 3.16113 4.46924Z"},child:[]}]})(e)}function HR(e){return RR({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 4h16v12H5.17L4 17.17V4m0-2c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2H4zm2 10h12v2H6v-2zm0-3h12v2H6V9zm0-3h12v2H6V6z"},child:[]}]})(e)}const WR=()=>{const[e,n]=(0,t.useState)("#");return t.createElement("nav",null,t.createElement("a",{href:"https://ms-mayank.github.io/",onClick:()=>n("#"),className:"#"===e?"active":""},t.createElement(zR,null)),t.createElement("a",{href:"https://ms-mayank.github.io/#about",onClick:()=>n("#about"),className:"#about"===e?"active":""},t.createElement(BR,null)),t.createElement("a",{href:"https://ms-mayank.github.io/#experience",onClick:()=>n("#experience"),className:"#experience"===e?"active":""},t.createElement(DR,null)),t.createElement("a",{href:"https://ms-mayank.github.io/#portfolio",onClick:()=>n("#services"),className:"#services"===e?"active":""},t.createElement(qR,null)),t.createElement("a",{href:"https://ms-mayank.github.io/#contact",onClick:()=>n("#contact"),className:"#contact"===e?"active":""},t.createElement(HR,null)))};function KR(e){return RR({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"},child:[]}]})(e)}function GR(e){return RR({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"},child:[]}]})(e)}function QR(e){return RR({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31.4 31.4 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788 0 0 1 7.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z"},child:[]}]})(e)}const YR=()=>t.createElement("footer",null,t.createElement("a",{href:"https://ms-mayank.github.io/",className:"footer__logo"},"Mayank Shukla"),t.createElement("ul",{className:"permalinks"},t.createElement("li",null,t.createElement("a",{href:"https://ms-mayank.github.io/#"},"Home")),t.createElement("li",null,t.createElement("a",{href:"https://ms-mayank.github.io/#about"},"About")),t.createElement("li",null,t.createElement("a",{href:"https://ms-mayank.github.io/#experience"},"Experience")),t.createElement("li",null,t.createElement("a",{href:"https://ms-mayank.github.io/#portfolio"},"Portfolio")),t.createElement("li",null,t.createElement("a",{href:"https://ms-mayank.github.io/#contact"},"Contact"))),t.createElement("div",{className:"footer__socials"},t.createElement("a",{href:"https://www.linkedin.com/in/msmayank/"},t.createElement(GR,null)),t.createElement("a",{href:"https://github.com/ms-mayank"},t.createElement(KR,null)),t.createElement("a",{href:"https://www.youtube.com/channel/UCmefvzYXttYVHwyds4SITYw"},t.createElement(QR,null))));function XR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JR=XR,$R=new C("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ZR=new Y("@firebase/auth");function eO(e){if(ZR.logLevel<=H.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ZR.error("Auth (".concat(xe,"): ").concat(e),...n)}}function tO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw iO(e,...n)}function nO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return iO(e,...n)}function rO(e,t,n){const r=Object.assign(Object.assign({},JR()),{[t]:n});return new C("auth","Firebase",r).create(t,{appName:e.name})}function iO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return $R.create(e,...n)}function sO(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw iO(t,...r)}}function oO(e){const t="INTERNAL ASSERTION FAILED: "+e;throw eO(t),new Error(t)}function aO(e,t){e||oO(t)}function cO(){return"http:"===lO()||"https:"===lO()}function lO(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class uO{constructor(e,t){this.shortDelay=e,this.longDelay=t,aO(t>e,"Short delay should be less than long delay!"),this.isMobile=w()||T()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(cO()||_()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function hO(e,t){aO(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class dO{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void oO("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void oO("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void oO("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},pO=new uO(3e4,6e4);function mO(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function gO(e,t,n,r){return vO(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=R(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),dO.fetch()(wO(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function vO(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},fO),t);try{const t=new _O(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw TO(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw TO(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw TO(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw TO(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw rO(e,a,o);tO(e,a)}}catch(i){if(i instanceof k)throw i;tO(e,"network-request-failed",{message:String(i)})}}async function yO(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await gO(e,t,n,r,i);return"mfaPendingCredential"in s&&tO(e,"multi-factor-auth-required",{_serverResponse:s}),s}function wO(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?hO(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function bO(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _O{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(nO(this.auth,"network-request-failed"))),pO.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function TO(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=nO(e,t,r);return i.customData._tokenResponse=n,i}function EO(e){return void 0!==e&&void 0!==e.enterprise}class IO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return bO(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function SO(e,t){return gO(e,"GET","/v2/recaptchaConfig",mO(e,t))}function kO(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function CO(e){return 1e3*Number(e)}function AO(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return eO("JWT malformed, contained fewer than 3 sections"),null;try{const e=l(n);return e?JSON.parse(e):(eO("Failed to decode base64 JWT payload"),null)}catch(i){return eO("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function xO(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof k&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class PO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class NO{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kO(this.lastLoginAt),this.creationTime=kO(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function RO(e){var t;const n=e.auth,r=await e.getIdToken(),i=await xO(e,async function(e,t){return gO(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));sO(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=xw(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new NO(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class OO{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){sO(e.idToken,"internal-error"),sO("undefined"!==typeof e.idToken,"internal-error"),sO("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=AO(e);return sO(t,"internal-error"),sO("undefined"!==typeof t.exp,"internal-error"),sO("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return sO(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await vO(e,{},(async()=>{const n=R({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=wO(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",dO.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new OO;return n&&(sO("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(sO("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(sO("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new OO,this.toJSON())}_performRefresh(){return oO("not implemented")}}function DO(e,t){sO("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class LO{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=xw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new NO(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await xO(this,this.stsTokenManager.getToken(this.auth,e));return sO(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=F(e),r=await n.getIdToken(t),i=AO(r);sO(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:kO(CO(i.auth_time)),issuedAtTime:kO(CO(i.iat)),expirationTime:kO(CO(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=F(e);await RO(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(sO(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new LO(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){sO(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await RO(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await xO(this,async function(e,t){return gO(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:T}=t;sO(y&&T,e,"internal-error");const E=OO.fromJSON(this.name,T);sO("string"===typeof y,e,"internal-error"),DO(u,e.name),DO(h,e.name),sO("boolean"===typeof w,e,"internal-error"),sO("boolean"===typeof b,e,"internal-error"),DO(d,e.name),DO(f,e.name),DO(p,e.name),DO(m,e.name),DO(g,e.name),DO(v,e.name);const I=new LO({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(I.providerData=_.map((e=>Object.assign({},e)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new OO;r.updateFromServerResponse(t);const i=new LO({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await RO(i),i}}const MO=new Map;function UO(e){aO(e instanceof Function,"Expected a class definition");let t=MO.get(e);return t?(aO(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,MO.set(e,t),t)}class FO{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}FO.type="NONE";const VO=FO;function jO(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class zO{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=jO(this.userKey,r.apiKey,i),this.fullPersistenceKey=jO("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?LO._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new zO(UO(VO),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||UO(VO);const s=jO(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=LO._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(_L){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(_L){}}))),new zO(i,e,n)):new zO(i,e,n)}}function BO(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(KO(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(qO(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(QO(t))return"Blackberry";if(YO(t))return"Webos";if(HO(t))return"Safari";if((t.includes("chrome/")||WO(t))&&!t.includes("edge/"))return"Chrome";if(GO(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function qO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/firefox\//i.test(e)}function HO(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:y()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/crios\//i.test(e)}function KO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/iemobile/i.test(e)}function GO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/android/i.test(e)}function QO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/blackberry/i.test(e)}function YO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/webos/i.test(e)}function XO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function JO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return XO(e)||GO(e)||YO(e)||QO(e)||/windows phone/i.test(e)||KO(e)}function $O(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=BO(y());break;case"Worker":t="".concat(BO(y()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xe,"/").concat(r)}class ZO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class eD{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class tD{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rD(this),this.idTokenSubscription=new rD(this),this.beforeStateQueue=new ZO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$R,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=UO(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await zO.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return sO(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await RO(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?F(e):null;return t&&sO(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&sO(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(UO(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return gO(e,"GET","/v2/passwordPolicy",mO(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new eD(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new C("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return gO(e,"POST","/v2/accounts:revokeToken",mO(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&UO(e)||this._popupRedirectResolver;sO(t,this,"argument-error"),this.redirectPersistenceManager=await zO.create(this,[UO(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(sO(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return sO(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$O(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ZR.logLevel<=H.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ZR.warn("Auth (".concat(xe,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function nD(e){return F(e)}class rD{constructor(e){this.auth=e,this.observer=null,this.addObserver=L((e=>this.observer=e))}get next(){return sO(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function iD(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=nO("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function sD(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class oD{constructor(e){this.type="recaptcha-enterprise",this.auth=nD(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;EO(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{SO(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new IO(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&EO(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));iD("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function aD(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new oD(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function cD(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await aD(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await aD(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}class lD{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return oO("not implemented")}_getIdTokenResponse(e){return oO("not implemented")}_linkToIdToken(e,t){return oO("not implemented")}_getReauthenticationResolver(e){return oO("not implemented")}}async function uD(e,t){return gO(e,"POST","/v1/accounts:signUp",t)}async function hD(e,t){return yO(e,"POST","/v1/accounts:signInWithPassword",mO(e,t))}class dD extends lD{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new dD(e,t,"password")}static _fromEmailAndCode(e,t){return new dD(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return cD(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",hD);case"emailLink":return async function(e,t){return yO(e,"POST","/v1/accounts:signInWithEmailLink",mO(e,t))}(e,{email:this._email,oobCode:this._password});default:tO(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return cD(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uD);case"emailLink":return async function(e,t){return yO(e,"POST","/v1/accounts:signInWithEmailLink",mO(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:tO(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function fD(e,t){return yO(e,"POST","/v1/accounts:signInWithIdp",mO(e,t))}class pD extends lD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new pD(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tO("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=xw(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new pD(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return fD(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,fD(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fD(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=R(t)}return e}}const mD={USER_NOT_FOUND:"user-not-found"};class gD extends lD{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new gD({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new gD({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return yO(e,"POST","/v1/accounts:signInWithPhoneNumber",mO(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await yO(e,"POST","/v1/accounts:signInWithPhoneNumber",mO(e,t));if(n.temporaryProof)throw TO(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return yO(e,"POST","/v1/accounts:signInWithPhoneNumber",mO(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),mD)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new gD({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class vD{constructor(e){var t,n,r,i,s,o;const a=O(D(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);sO(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=O(D(e)).link,n=t?O(D(t)).deep_link_id:null,r=O(D(e)).deep_link_id;return(r?O(D(r)).link:null)||r||n||t||e}(e);try{return new vD(t)}catch(_L){return null}}}class yD{constructor(){this.providerId=yD.PROVIDER_ID}static credential(e,t){return dD._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=vD.parseLink(t);return sO(n,"argument-error"),dD._fromEmailAndCode(e,n.code,n.tenantId)}}yD.PROVIDER_ID="password",yD.EMAIL_PASSWORD_SIGN_IN_METHOD="password",yD.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class wD{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class bD extends wD{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _D extends bD{constructor(){super("facebook.com")}static credential(e){return pD._fromParams({providerId:_D.PROVIDER_ID,signInMethod:_D.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _D.credentialFromTaggedObject(e)}static credentialFromError(e){return _D.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return _D.credential(t.oauthAccessToken)}catch(_L){return null}}}_D.FACEBOOK_SIGN_IN_METHOD="facebook.com",_D.PROVIDER_ID="facebook.com";class TD extends bD{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return pD._fromParams({providerId:TD.PROVIDER_ID,signInMethod:TD.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return TD.credentialFromTaggedObject(e)}static credentialFromError(e){return TD.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return TD.credential(n,r)}catch(_L){return null}}}TD.GOOGLE_SIGN_IN_METHOD="google.com",TD.PROVIDER_ID="google.com";class ED extends bD{constructor(){super("github.com")}static credential(e){return pD._fromParams({providerId:ED.PROVIDER_ID,signInMethod:ED.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ED.credentialFromTaggedObject(e)}static credentialFromError(e){return ED.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ED.credential(t.oauthAccessToken)}catch(_L){return null}}}ED.GITHUB_SIGN_IN_METHOD="github.com",ED.PROVIDER_ID="github.com";class ID extends bD{constructor(){super("twitter.com")}static credential(e,t){return pD._fromParams({providerId:ID.PROVIDER_ID,signInMethod:ID.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ID.credentialFromTaggedObject(e)}static credentialFromError(e){return ID.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ID.credential(n,r)}catch(_L){return null}}}ID.TWITTER_SIGN_IN_METHOD="twitter.com",ID.PROVIDER_ID="twitter.com";class SD{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await LO._fromIdTokenResponse(e,n,r),s=kD(n);return new SD({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=kD(n);return new SD({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function kD(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class CD extends k{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,CD.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new CD(e,t,n,r)}}function AD(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw CD._fromErrorAndOperation(e,n,t,r);throw n}))}async function xD(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await xO(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return SD._forOperation(e,"link",r)}async function PD(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await xO(e,AD(r,i,t,e),n);sO(s.idToken,r,"internal-error");const o=AO(s.idToken);sO(o,r,"internal-error");const{sub:a}=o;return sO(e.uid===a,r,"user-mismatch"),SD._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&tO(r,"user-mismatch"),s}}async function ND(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await AD(e,r,t),s=await SD._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}new WeakMap;const RD="__sak";class OD{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(RD,"1"),this.storage.removeItem(RD),Promise.resolve(!0)):Promise.resolve(!1)}catch(_L){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class DD extends OD{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=y();return HO(e)||XO(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=JO(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);E()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}DD.type="LOCAL";class LD extends OD{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}LD.type="SESSION";class MD{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new MD(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function UD(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}MD.receivers=[];class FD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=UD("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function VD(){return window}function jD(){return"undefined"!==typeof VD().WorkerGlobalScope&&"function"===typeof VD().importScripts}const zD="firebaseLocalStorageDb",BD="firebaseLocalStorage",qD="fbase_key";class HD{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function WD(e,t){return e.transaction([BD],t?"readwrite":"readonly").objectStore(BD)}function KD(){const e=indexedDB.open(zD,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(BD,{keyPath:qD})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(BD)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(zD);return new HD(e).toPromise()}(),t(await KD()))}))}))}async function GD(e,t,n){const r=WD(e,!0).put({[qD]:t,value:n});return new HD(r).toPromise()}function QD(e,t){const n=WD(e,!0).delete(t);return new HD(n).toPromise()}class YD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await KD()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=MD._getInstance(jD()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new FD(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(_L){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await KD();return await GD(e,RD,"1"),await QD(e,RD),!0}catch(_L){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>GD(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=WD(e,!1).get(t),r=await new HD(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>QD(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=WD(e,!1).getAll();return new HD(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}YD.type="LOCAL";sD("rcb"),new uO(3e4,6e4);const XD="recaptcha";async function JD(e,t,n){var r;const i=await n.verify();try{let s;if(sO("string"===typeof i,e,"argument-error"),sO(n.type===XD,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){sO("enroll"===t.type,e,"internal-error");const n=await function(e,t){return gO(e,"POST","/v2/accounts/mfaEnrollment:start",mO(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{sO("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;sO(n,e,"missing-multi-factor-info");const o=await function(e,t){return gO(e,"POST","/v2/accounts/mfaSignIn:start",mO(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return gO(e,"POST","/v1/accounts:sendVerificationCode",mO(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class $D{constructor(e){this.providerId=$D.PROVIDER_ID,this.auth=nD(e)}verifyPhoneNumber(e,t){return JD(this.auth,e,F(t))}static credential(e,t){return gD._fromVerification(e,t)}static credentialFromResult(e){const t=e;return $D.credentialFromTaggedObject(t)}static credentialFromError(e){return $D.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?gD._fromTokenResponse(n,r):null}}$D.PROVIDER_ID="phone",$D.PHONE_SIGN_IN_METHOD="phone";class ZD extends lD{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fD(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fD(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fD(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eL(e){return ND(e.auth,new ZD(e),e.bypassAuthState)}function tL(e){const{auth:t,user:n}=e;return sO(n,t,"internal-error"),PD(n,new ZD(e),e.bypassAuthState)}async function nL(e){const{auth:t,user:n}=e;return sO(n,t,"internal-error"),xD(n,new ZD(e),e.bypassAuthState)}class rL{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eL;case"linkViaPopup":case"linkViaRedirect":return nL;case"reauthViaPopup":case"reauthViaRedirect":return tL;default:tO(this.auth,"internal-error")}}resolve(e){aO(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){aO(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const iL=new uO(2e3,1e4);class sL extends rL{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,sL.currentPopupAction&&sL.currentPopupAction.cancel(),sL.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return sO(e,this.auth,"internal-error"),e}async onExecution(){aO(1===this.filter.length,"Popup operations only handle one event");const e=UD();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(nO(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(nO(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sL.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(nO(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,iL.get())};e()}}sL.currentPopupAction=null;new Map;new uO(3e4,6e4);new uO(5e3,15e3),new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);encodeURIComponent("fac");var oL="@firebase/auth",aL="1.5.1";class cL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){sO(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}m("authIdTokenMaxAge");function lL(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))}function uL(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}!function(e){Ee(new V("auth",((t,n)=>{let{options:r}=n;const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=i.options;sO(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:c,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$O(e)},u=new tD(i,s,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(UO);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,r),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ee(new V("auth-internal",(e=>(e=>new cL(e))(nD(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),De(oL,aL,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(e)),De(oL,aL,"esm2017")}("Browser");var hL=function(){return hL=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},hL.apply(this,arguments)},dL=function(e){return{loading:void 0===e||null===e,value:e}},fL=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return hL(hL({},e),{error:t.error,loading:!1,value:void 0});case"reset":return dL(t.defaultValue);case"value":return hL(hL({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),dL(n)),i=r[0],s=r[1],o=(0,t.useCallback)((function(){var t=e?e():void 0;s({type:"reset",defaultValue:t})}),[e]),a=(0,t.useCallback)((function(e){s({type:"error",error:e})}),[]),c=(0,t.useCallback)((function(e){s({type:"value",value:e})}),[]);return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:a,setValue:c,value:i.value}}),[i.error,i.loading,o,a,c,i.value])},pL=function(e,n){var r=fL((function(){return e.currentUser})),i=r.error,s=r.loading,o=r.setError,a=r.setValue,c=r.value;return(0,t.useEffect)((function(){var t=function(e,t,n,r){return F(e).onAuthStateChanged(t,n,r)}(e,(function(e){return lL(void 0,void 0,void 0,(function(){var t;return uL(this,(function(r){switch(r.label){case 0:if(!(null===n||void 0===n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return a(e),[2]}}))}))}),o);return function(){t()}}),[e]),[c,s,i]};const mL=()=>t.createElement("div",null,t.createElement("center",null,t.createElement("button",{className:"btn",onClick:()=>{MI.signInWithPopup(UI).catch(alert)}},"Sign In with Google"))),gL=()=>t.createElement("div",null,t.createElement("center",null,t.createElement("button",{className:"btn",onClick:()=>{MI.signOut()}},"Logout")));const vL=function(){const[e,n]=(0,t.useState)(null),[r,s]=(0,t.useState)(4),[o]=pL(MI);return t.createElement(t.Fragment,null,t.createElement("div",{className:"App"},t.createElement(WR,null),t.createElement(jR,null),t.createElement(i,null),o?"Welcome ".concat(MI.currentUser.email):"",o?t.createElement(gL,null):t.createElement(mL,null),r>=4?t.createElement("h2",{style:{textAlign:"center"}},"Max 4 Files Allowed"):t.createElement(bR,null),t.createElement(FR,{setSelectimg:n,setFilelen:s}),e&&t.createElement(VR,{selectimg:e,setSelectimg:n})),t.createElement(YR,null))},yL=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)),wL="/mediagallery/";function bL(e,t){navigator.serviceWorker.register(e,{scope:wL}).then((e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}r.render(t.createElement(t.StrictMode,null,t.createElement(vL,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/mediagallery",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="".concat("/mediagallery","/service-worker.js");yL?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((n=>{const r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):bL(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):bL(t,e)}))}}()})()})();
//# sourceMappingURL=main.4438e4a1.js.map