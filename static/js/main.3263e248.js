/*! For license information please see main.3263e248.js.LICENSE.txt */
(()=>{"use strict";var e={725:e=>{var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var o,s,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in o=Object(arguments[l]))n.call(o,u)&&(a[u]=o[u]);if(t){s=t(o);for(var c=0;c<s.length;c++)r.call(o,s[c])&&(a[s[c]]=o[s[c]])}}return a}},463:(e,t,n)=>{var r=n(791),i=n(725),o=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));function a(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var l=!1,u=null,c=!1,h=null,d={onError:function(e){l=!0,u=e}};function f(e,t,n,r,i,o,s,c,h){l=!1,u=null,a.apply(d,arguments)}var p=null,m=null,g=null;function v(e,t,n){var r=e.type||"unknown-event";e.currentTarget=g(n),function(e,t,n,r,i,o,a,d,p){if(f.apply(this,arguments),l){if(!l)throw Error(s(198));var m=u;l=!1,u=null,c||(c=!0,h=m)}}(r,t,void 0,e),e.currentTarget=null}var y=null,w={};function b(){if(y)for(var e in w){var t=w[e],n=y.indexOf(e);if(!(-1<n))throw Error(s(96,e));if(!E[n]){if(!t.extractEvents)throw Error(s(97,e));for(var r in E[n]=t,n=t.eventTypes){var i=void 0,o=n[r],a=t,l=r;if(T.hasOwnProperty(l))throw Error(s(99,l));T[l]=o;var u=o.phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&_(u[i],a,l);i=!0}else o.registrationName?(_(o.registrationName,a,l),i=!0):i=!1;if(!i)throw Error(s(98,r,e))}}}}function _(e,t,n){if(S[e])throw Error(s(100,e));S[e]=t,x[e]=t.eventTypes[n].dependencies}var E=[],T={},S={},x={};function I(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!w.hasOwnProperty(t)||w[t]!==r){if(w[t])throw Error(s(102,t));w[t]=r,n=!0}}n&&b()}var k=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),C=null,A=null,D=null;function N(e){if(e=m(e)){if("function"!==typeof C)throw Error(s(280));var t=e.stateNode;t&&(t=p(t),C(e.stateNode,e.type,t))}}function P(e){A?D?D.push(e):D=[e]:A=e}function R(){if(A){var e=A,t=D;if(D=A=null,N(e),t)for(e=0;e<t.length;e++)N(t[e])}}function O(e,t){return e(t)}function L(e,t,n,r,i){return e(t,n,r,i)}function M(){}var F=O,V=!1,U=!1;function B(){null===A&&null===D||(M(),R())}function z(e,t,n){if(U)return e(t,n);U=!0;try{return F(e,t,n)}finally{U=!1,B()}}var j=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q=Object.prototype.hasOwnProperty,G={},K={};function H(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var Q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){Q[e]=new H(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];Q[t]=new H(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){Q[e]=new H(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){Q[e]=new H(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){Q[e]=new H(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){Q[e]=new H(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){Q[e]=new H(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){Q[e]=new H(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){Q[e]=new H(e,5,!1,e.toLowerCase(),null,!1)}));var W=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(W,Y);Q[t]=new H(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(W,Y);Q[t]=new H(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(W,Y);Q[t]=new H(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){Q[e]=new H(e,1,!1,e.toLowerCase(),null,!1)})),Q.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){Q[e]=new H(e,1,!1,e.toLowerCase(),null,!0)}));var X=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function $(e,t,n,r){var i=Q.hasOwnProperty(t)?Q[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!q.call(K,e)||!q.call(G,e)&&(j.test(e)?K[e]=!0:(G[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}X.hasOwnProperty("ReactCurrentDispatcher")||(X.ReactCurrentDispatcher={current:null}),X.hasOwnProperty("ReactCurrentBatchConfig")||(X.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ie=Z?Symbol.for("react.profiler"):60114,oe=Z?Symbol.for("react.provider"):60109,se=Z?Symbol.for("react.context"):60110,ae=Z?Symbol.for("react.concurrent_mode"):60111,le=Z?Symbol.for("react.forward_ref"):60112,ue=Z?Symbol.for("react.suspense"):60113,ce=Z?Symbol.for("react.suspense_list"):60120,he=Z?Symbol.for("react.memo"):60115,de=Z?Symbol.for("react.lazy"):60116,fe=Z?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ue:return"Suspense";case ce:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case se:return"Context.Consumer";case oe:return"Context.Provider";case le:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case he:return ge(e.type);case fe:return ge(e.render);case de:if(e=1===e._status?e._result:null)return ge(e)}return null}function ve(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=ge(e.type);n=null,r&&(n=ge(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}function ye(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function we(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function be(e){e._valueTracker||(e._valueTracker=function(e){var t=we(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function _e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=we(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ee(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Te(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ye(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Se(e,t){null!=(t=t.checked)&&$(e,"checked",t,!1)}function xe(e,t){Se(e,t);var n=ye(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ke(e,t.type,n):t.hasOwnProperty("defaultValue")&&ke(e,t.type,ye(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ke(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ce(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ye(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function De(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ne(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ye(n)}}function Pe(e,t){var n=ye(t.value),r=ye(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Re(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Oe="http://www.w3.org/1999/xhtml",Le="http://www.w3.org/2000/svg";function Me(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Me(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ve,Ue,Be=(Ue=function(e,t){if(e.namespaceURI!==Le||"innerHTML"in e)e.innerHTML=t;else{for((Ve=Ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Ue(e,t)}))}:Ue);function ze(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function je(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qe={animationend:je("Animation","AnimationEnd"),animationiteration:je("Animation","AnimationIteration"),animationstart:je("Animation","AnimationStart"),transitionend:je("Transition","TransitionEnd")},Ge={},Ke={};function He(e){if(Ge[e])return Ge[e];if(!qe[e])return e;var t,n=qe[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ke)return Ge[e]=n[t];return e}k&&(Ke=document.createElement("div").style,"AnimationEvent"in window||(delete qe.animationend.animation,delete qe.animationiteration.animation,delete qe.animationstart.animation),"TransitionEvent"in window||delete qe.transitionend.transition);var Qe=He("animationend"),We=He("animationiteration"),Ye=He("animationstart"),Xe=He("transitionend"),$e="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Je=new("function"===typeof WeakMap?WeakMap:Map);function Ze(e){var t=Je.get(e);return void 0===t&&(t=new Map,Je.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(s(188))}function rt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return nt(i),e;if(o===r)return nt(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(s(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function ot(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var st=null;function at(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)v(e,t[r],n[r]);else t&&v(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function lt(e){if(null!==e&&(st=it(st,e)),e=st,st=null,e){if(ot(e,at),st)throw Error(s(95));if(c)throw e=h,c=!1,h=null,e}}function ut(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!k)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ht=[];function dt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ht.length&&ht.push(e)}function ft(e,t,n,r){if(ht.length){var i=ht.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Rn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ut(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,s=e.eventSystemFlags;0===n&&(s|=64);for(var a=null,l=0;l<E.length;l++){var u=E[l];u&&(u=u.extractEvents(r,t,o,i,s))&&(a=it(a,u))}lt(a)}}function mt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Yt(t,"scroll",!0);break;case"focus":case"blur":Yt(t,"focus",!0),Yt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ct(e)&&Yt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===$e.indexOf(e)&&Wt(e,t)}n.set(e,null)}}var gt,vt,yt,wt=!1,bt=[],_t=null,Et=null,Tt=null,St=new Map,xt=new Map,It=[],kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ct="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function At(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Dt(e,t){switch(e){case"focus":case"blur":_t=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":St.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xt.delete(t.pointerId)}}function Nt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=At(t,n,r,i,o),null!==t&&(null!==(t=On(t))&&vt(t)),e):(e.eventSystemFlags|=r,e)}function Pt(e){var t=Rn(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){yt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Rt(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=On(t);return null!==n&&vt(n),e.blockedOn=t,!1}return!0}function Ot(e,t,n){Rt(e)&&n.delete(t)}function Lt(){for(wt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=On(e.blockedOn))&&gt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==_t&&Rt(_t)&&(_t=null),null!==Et&&Rt(Et)&&(Et=null),null!==Tt&&Rt(Tt)&&(Tt=null),St.forEach(Ot),xt.forEach(Ot)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,wt||(wt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Lt)))}function Ft(e){function t(t){return Mt(t,e)}if(0<bt.length){Mt(bt[0],e);for(var n=1;n<bt.length;n++){var r=bt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Mt(_t,e),null!==Et&&Mt(Et,e),null!==Tt&&Mt(Tt,e),St.forEach(t),xt.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Pt(n),null===n.blockedOn&&It.shift()}var Vt={},Ut=new Map,Bt=new Map,zt=["abort","abort",Qe,"animationEnd",We,"animationIteration",Ye,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Xe,"transitionEnd","waiting","waiting"];function jt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},Bt.set(r,t),Ut.set(r,o),Vt[i]=o}}jt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),jt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),jt(zt,2);for(var qt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Gt=0;Gt<qt.length;Gt++)Bt.set(qt[Gt],0);var Kt=o.unstable_UserBlockingPriority,Ht=o.unstable_runWithPriority,Qt=!0;function Wt(e,t){Yt(t,e,!1)}function Yt(e,t,n){var r=Bt.get(t);switch(void 0===r?2:r){case 0:r=Xt.bind(null,t,1,e);break;case 1:r=$t.bind(null,t,1,e);break;default:r=Jt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Xt(e,t,n,r){V||M();var i=Jt,o=V;V=!0;try{L(i,e,t,n,r)}finally{(V=o)||B()}}function $t(e,t,n,r){Ht(Kt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){if(Qt)if(0<bt.length&&-1<kt.indexOf(e))e=At(null,e,t,n,r),bt.push(e);else{var i=Zt(e,t,n,r);if(null===i)Dt(e,r);else if(-1<kt.indexOf(e))e=At(i,e,t,n,r),bt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return _t=Nt(_t,e,t,n,r,i),!0;case"dragenter":return Et=Nt(Et,e,t,n,r,i),!0;case"mouseover":return Tt=Nt(Tt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return St.set(o,Nt(St.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,xt.set(o,Nt(xt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Dt(e,r),e=ft(e,r,null,t);try{z(pt,e)}finally{dt(e)}}}}function Zt(e,t,n,r){if(null!==(n=Rn(n=ut(r)))){var i=et(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=tt(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=ft(e,r,n,t);try{z(pt,e)}finally{dt(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var on=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sn(e,t){if(t){if(on[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62,""))}}function an(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ln=Oe;function un(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=x[t];for(var r=0;r<t.length;r++)mt(t[r],e,n)}function cn(){}function hn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fn(e,t){var n,r=dn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dn(r)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mn(){for(var e=window,t=hn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=hn((e=t.contentWindow).document)}return t}function gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vn="$",yn="/$",wn="$?",bn="$!",_n=null,En=null;function Tn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Sn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var xn="function"===typeof setTimeout?setTimeout:void 0,In="function"===typeof clearTimeout?clearTimeout:void 0;function kn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Cn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===vn||n===bn||n===wn){if(0===t)return e;t--}else n===yn&&t++}e=e.previousSibling}return null}var An=Math.random().toString(36).slice(2),Dn="__reactInternalInstance$"+An,Nn="__reactEventHandlers$"+An,Pn="__reactContainere$"+An;function Rn(e){var t=e[Dn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pn]||n[Dn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Cn(e);null!==e;){if(n=e[Dn])return n;e=Cn(e)}return t}n=(e=n).parentNode}return null}function On(e){return!(e=e[Dn]||e[Pn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ln(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Mn(e){return e[Nn]||null}function Fn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Vn(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}function Un(e,t,n){(t=Vn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Bn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Fn(t);for(t=n.length;0<t--;)Un(n[t],"captured",e);for(t=0;t<n.length;t++)Un(n[t],"bubbled",e)}}function zn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Vn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function jn(e){e&&e.dispatchConfig.registrationName&&zn(e._targetInst,null,e)}function qn(e){ot(e,Bn)}var Gn=null,Kn=null,Hn=null;function Qn(){if(Hn)return Hn;var e,t,n=Kn,r=n.length,i="value"in Gn?Gn.value:Gn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Hn=i.slice(e,1<t?1-t:void 0)}function Wn(){return!0}function Yn(){return!1}function Xn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Wn:Yn,this.isPropagationStopped=Yn,this}function $n(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Jn(e){if(!(e instanceof this))throw Error(s(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Zn(e){e.eventPool=[],e.getPooled=$n,e.release=Jn}i(Xn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){this.isPersistent=Wn},isPersistent:Yn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Yn,this._dispatchInstances=this._dispatchListeners=null}}),Xn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Xn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Zn(n),n},Zn(Xn);var er=Xn.extend({data:null}),tr=Xn.extend({data:null}),nr=[9,13,27,32],rr=k&&"CompositionEvent"in window,ir=null;k&&"documentMode"in document&&(ir=document.documentMode);var or=k&&"TextEvent"in window&&!ir,sr=k&&(!rr||ir&&8<ir&&11>=ir),ar=String.fromCharCode(32),lr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ur=!1;function cr(e,t){switch(e){case"keyup":return-1!==nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function hr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var dr=!1;var fr={eventTypes:lr,extractEvents:function(e,t,n,r){var i;if(rr)e:{switch(e){case"compositionstart":var o=lr.compositionStart;break e;case"compositionend":o=lr.compositionEnd;break e;case"compositionupdate":o=lr.compositionUpdate;break e}o=void 0}else dr?cr(e,n)&&(o=lr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=lr.compositionStart);return o?(sr&&"ko"!==n.locale&&(dr||o!==lr.compositionStart?o===lr.compositionEnd&&dr&&(i=Qn()):(Kn="value"in(Gn=r)?Gn.value:Gn.textContent,dr=!0)),o=er.getPooled(o,t,n,r),i?o.data=i:null!==(i=hr(n))&&(o.data=i),qn(o),i=o):i=null,(e=or?function(e,t){switch(e){case"compositionend":return hr(t);case"keypress":return 32!==t.which?null:(ur=!0,ar);case"textInput":return(e=t.data)===ar&&ur?null:e;default:return null}}(e,n):function(e,t){if(dr)return"compositionend"===e||!rr&&cr(e,t)?(e=Qn(),Hn=Kn=Gn=null,dr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sr&&"ko"!==t.locale?null:t.data}}(e,n))?((t=tr.getPooled(lr.beforeInput,t,n,r)).data=e,qn(t)):t=null,null===i?t:null===t?i:[i,t]}},pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!pr[e.type]:"textarea"===t}var gr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function vr(e,t,n){return(e=Xn.getPooled(gr.change,e,t,n)).type="change",P(n),qn(e),e}var yr=null,wr=null;function br(e){lt(e)}function _r(e){if(_e(Ln(e)))return e}function Er(e,t){if("change"===e)return t}var Tr=!1;function Sr(){yr&&(yr.detachEvent("onpropertychange",xr),wr=yr=null)}function xr(e){if("value"===e.propertyName&&_r(wr))if(e=vr(wr,e,ut(e)),V)lt(e);else{V=!0;try{O(br,e)}finally{V=!1,B()}}}function Ir(e,t,n){"focus"===e?(Sr(),wr=n,(yr=t).attachEvent("onpropertychange",xr)):"blur"===e&&Sr()}function kr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return _r(wr)}function Cr(e,t){if("click"===e)return _r(t)}function Ar(e,t){if("input"===e||"change"===e)return _r(t)}k&&(Tr=ct("input")&&(!document.documentMode||9<document.documentMode));var Dr={eventTypes:gr,_isInputEventSupported:Tr,extractEvents:function(e,t,n,r){var i=t?Ln(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var s=Er;else if(mr(i))if(Tr)s=Ar;else{s=kr;var a=Ir}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(s=Cr);if(s&&(s=s(e,t)))return vr(s,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&ke(i,"number",i.value)}},Nr=Xn.extend({view:null,detail:null}),Pr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Pr[e])&&!!t[e]}function Or(){return Rr}var Lr=0,Mr=0,Fr=!1,Vr=!1,Ur=Nr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Or,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Lr;return Lr=e.screenX,Fr?"mousemove"===e.type?e.screenX-t:0:(Fr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Mr;return Mr=e.screenY,Vr?"mousemove"===e.type?e.screenY-t:0:(Vr=!0,0)}}),Br=Ur.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),zr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},jr={eventTypes:zr,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,s="mouseout"===e||"pointerout"===e;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!s&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,s)?(s=t,null!==(t=(t=n.relatedTarget||n.toElement)?Rn(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):s=null;if(s===t)return null;if("mouseout"===e||"mouseover"===e)var a=Ur,l=zr.mouseLeave,u=zr.mouseEnter,c="mouse";else"pointerout"!==e&&"pointerover"!==e||(a=Br,l=zr.pointerLeave,u=zr.pointerEnter,c="pointer");if(e=null==s?o:Ln(s),o=null==t?o:Ln(t),(l=a.getPooled(l,s,n,r)).type=c+"leave",l.target=e,l.relatedTarget=o,(n=a.getPooled(u,t,n,r)).type=c+"enter",n.target=o,n.relatedTarget=e,c=t,(r=s)&&c)e:{for(u=c,s=0,e=a=r;e;e=Fn(e))s++;for(e=0,t=u;t;t=Fn(t))e++;for(;0<s-e;)a=Fn(a),s--;for(;0<e-s;)u=Fn(u),e--;for(;s--;){if(a===u||a===u.alternate)break e;a=Fn(a),u=Fn(u)}a=null}else a=null;for(u=a,a=[];r&&r!==u&&(null===(s=r.alternate)||s!==u);)a.push(r),r=Fn(r);for(r=[];c&&c!==u&&(null===(s=c.alternate)||s!==u);)r.push(c),c=Fn(c);for(c=0;c<a.length;c++)zn(a[c],"bubbled",l);for(c=r.length;0<c--;)zn(r[c],"captured",n);return 0===(64&i)?[l]:[l,n]}};var qr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Gr=Object.prototype.hasOwnProperty;function Kr(e,t){if(qr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Gr.call(t,n[r])||!qr(e[n[r]],t[n[r]]))return!1;return!0}var Hr=k&&"documentMode"in document&&11>=document.documentMode,Qr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Wr=null,Yr=null,Xr=null,$r=!1;function Jr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return $r||null==Wr||Wr!==hn(n)?null:("selectionStart"in(n=Wr)&&gn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Xr&&Kr(Xr,n)?null:(Xr=n,(e=Xn.getPooled(Qr.select,Yr,e,t)).type="select",e.target=Wr,qn(e),e))}var Zr={eventTypes:Qr,extractEvents:function(e,t,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ze(i),o=x.onSelect;for(var s=0;s<o.length;s++)if(!i.has(o[s])){i=!1;break e}i=!0}o=!i}if(o)return null;switch(i=t?Ln(t):window,e){case"focus":(mr(i)||"true"===i.contentEditable)&&(Wr=i,Yr=t,Xr=null);break;case"blur":Xr=Yr=Wr=null;break;case"mousedown":$r=!0;break;case"contextmenu":case"mouseup":case"dragend":return $r=!1,Jr(n,r);case"selectionchange":if(Hr)break;case"keydown":case"keyup":return Jr(n,r)}return null}},ei=Xn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ti=Xn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ni=Nr.extend({relatedTarget:null});function ri(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ii={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},si=Nr.extend({key:function(e){if(e.key){var t=ii[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ri(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?oi[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Or,charCode:function(e){return"keypress"===e.type?ri(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ri(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ai=Ur.extend({dataTransfer:null}),li=Nr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Or}),ui=Xn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ci=Ur.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),hi={eventTypes:Vt,extractEvents:function(e,t,n,r){var i=Ut.get(e);if(!i)return null;switch(e){case"keypress":if(0===ri(n))return null;case"keydown":case"keyup":e=si;break;case"blur":case"focus":e=ni;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Ur;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ai;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=li;break;case Qe:case We:case Ye:e=ei;break;case Xe:e=ui;break;case"scroll":e=Nr;break;case"wheel":e=ci;break;case"copy":case"cut":case"paste":e=ti;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Br;break;default:e=Xn}return qn(t=e.getPooled(i,t,n,r)),t}};if(y)throw Error(s(101));y=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),p=Mn,m=On,g=Ln,I({SimpleEventPlugin:hi,EnterLeaveEventPlugin:jr,ChangeEventPlugin:Dr,SelectEventPlugin:Zr,BeforeInputEventPlugin:fr});var di=[],fi=-1;function pi(e){0>fi||(e.current=di[fi],di[fi]=null,fi--)}function mi(e,t){fi++,di[fi]=e.current,e.current=t}var gi={},vi={current:gi},yi={current:!1},wi=gi;function bi(e,t){var n=e.type.contextTypes;if(!n)return gi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function _i(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ei(){pi(yi),pi(vi)}function Ti(e,t,n){if(vi.current!==gi)throw Error(s(168));mi(vi,t),mi(yi,n)}function Si(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(s(108,ge(t)||"Unknown",o));return i({},n,{},r)}function xi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gi,wi=vi.current,mi(vi,e),mi(yi,yi.current),!0}function Ii(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Si(e,t,wi),r.__reactInternalMemoizedMergedChildContext=e,pi(yi),pi(vi),mi(vi,e)):pi(yi),mi(yi,n)}var ki=o.unstable_runWithPriority,Ci=o.unstable_scheduleCallback,Ai=o.unstable_cancelCallback,Di=o.unstable_requestPaint,Ni=o.unstable_now,Pi=o.unstable_getCurrentPriorityLevel,Ri=o.unstable_ImmediatePriority,Oi=o.unstable_UserBlockingPriority,Li=o.unstable_NormalPriority,Mi=o.unstable_LowPriority,Fi=o.unstable_IdlePriority,Vi={},Ui=o.unstable_shouldYield,Bi=void 0!==Di?Di:function(){},zi=null,ji=null,qi=!1,Gi=Ni(),Ki=1e4>Gi?Ni:function(){return Ni()-Gi};function Hi(){switch(Pi()){case Ri:return 99;case Oi:return 98;case Li:return 97;case Mi:return 96;case Fi:return 95;default:throw Error(s(332))}}function Qi(e){switch(e){case 99:return Ri;case 98:return Oi;case 97:return Li;case 96:return Mi;case 95:return Fi;default:throw Error(s(332))}}function Wi(e,t){return e=Qi(e),ki(e,t)}function Yi(e,t,n){return e=Qi(e),Ci(e,t,n)}function Xi(e){return null===zi?(zi=[e],ji=Ci(Ri,Ji)):zi.push(e),Vi}function $i(){if(null!==ji){var e=ji;ji=null,Ai(e)}Ji()}function Ji(){if(!qi&&null!==zi){qi=!0;var e=0;try{var t=zi;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),zi=null}catch(n){throw null!==zi&&(zi=zi.slice(e+1)),Ci(Ri,$i),n}finally{qi=!1}}}function Zi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function eo(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var to={current:null},no=null,ro=null,io=null;function oo(){io=ro=no=null}function so(e){var t=to.current;pi(to),e.type._context._currentValue=t}function ao(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function lo(e,t){no=e,io=ro=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ms=!0),e.firstContext=null)}function uo(e,t){if(io!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(io=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ro){if(null===no)throw Error(s(308));ro=t,no.dependencies={expirationTime:0,firstContext:t,responders:null}}else ro=ro.next=t;return e._currentValue}var co=!1;function ho(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function po(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function mo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function go(e,t){var n=e.alternate;null!==n&&fo(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function vo(e,t,n,r){var o=e.updateQueue;co=!1;var s=o.baseQueue,a=o.shared.pending;if(null!==a){if(null!==s){var l=s.next;s.next=a.next,a.next=l}s=a,o.shared.pending=null,null!==(l=e.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=a))}if(null!==s){l=s.next;var u=o.baseState,c=0,h=null,d=null,f=null;if(null!==l)for(var p=l;;){if((a=p.expirationTime)<r){var m={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===f?(d=f=m,h=u):f=f.next=m,a>c&&(c=a)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),El(a,p.suspenseConfig);e:{var g=e,v=p;switch(a=t,m=n,v.tag){case 1:if("function"===typeof(g=v.payload)){u=g.call(m,u,a);break e}u=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null===(a="function"===typeof(g=v.payload)?g.call(m,u,a):g)||void 0===a)break e;u=i({},u,a);break e;case 2:co=!0}}null!==p.callback&&(e.effectTag|=32,null===(a=o.effects)?o.effects=[p]:a.push(p))}if(null===(p=p.next)||p===l){if(null===(a=o.shared.pending))break;p=s.next=a.next,a.next=l,o.baseQueue=s=a,o.shared.pending=null}}null===f?h=u:f.next=d,o.baseState=h,o.baseQueue=f,Tl(c),e.expirationTime=c,e.memoizedState=u}}function yo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var wo=X.ReactCurrentBatchConfig,bo=(new r.Component).refs;function _o(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var Eo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=ul(),i=wo.suspense;(i=po(r=cl(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),mo(e,i),hl(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=ul(),i=wo.suspense;(i=po(r=cl(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),mo(e,i),hl(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ul(),r=wo.suspense;(r=po(n=cl(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),mo(e,r),hl(e,n)}};function To(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!Kr(n,r)||!Kr(i,o))}function So(e,t,n){var r=!1,i=gi,o=t.contextType;return"object"===typeof o&&null!==o?o=uo(o):(i=_i(t)?wi:vi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?bi(e,i):gi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Eo,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function xo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Eo.enqueueReplaceState(t,t.state,null)}function Io(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=bo,ho(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=uo(o):(o=_i(t)?wi:vi.current,i.context=bi(e,o)),vo(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(_o(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Eo.enqueueReplaceState(i,i.state,null),vo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var ko=Array.isArray;function Co(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===bo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ao(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Do(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=ql(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Co(e,t,n),r.return=e,r):((r=Gl(n.type,n.key,n.props,null,e.mode,r)).ref=Co(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ql(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Kl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Hl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Gl(t.type,t.key,t.props,null,e.mode,n)).ref=Co(e,null,t),n.return=e,n;case te:return(t=Ql(t,e.mode,n)).return=e,t}if(ko(t)||me(t))return(t=Kl(t,e.mode,n,null)).return=e,t;Ao(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?h(e,t,n.props.children,r,i):u(e,t,n,r):null;case te:return n.key===i?c(e,t,n,r):null}if(ko(n)||me(n))return null!==i?null:h(e,t,n,r,null);Ao(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?h(t,e,r.props.children,i,r.key):u(t,e,r,i);case te:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ko(r)||me(r))return h(t,e=e.get(n)||null,r,i,null);Ao(t,r)}return null}function m(i,s,a,l){for(var u=null,c=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,m),null===c?u=v:c.sibling=v,c=v,h=g}if(m===a.length)return n(i,h),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),u}function g(i,a,l,u){var c=me(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,u);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?c=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,u))&&(a=o(y,a,g),null===h?c=y:h.sibling=y,h=y);return c}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?c=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,o,l){var u="object"===typeof o&&null!==o&&o.type===ne&&null===o.key;u&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case ee:e:{for(c=o.key,u=r;null!==u;){if(u.key===c){if(7===u.tag){if(o.type===ne){n(e,u.sibling),(r=i(u,o.props.children)).return=e,e=r;break e}}else if(u.elementType===o.type){n(e,u.sibling),(r=i(u,o.props)).ref=Co(e,u,o),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}o.type===ne?((r=Kl(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=Gl(o.type,o.key,o.props,null,e.mode,l)).ref=Co(e,r,o),l.return=e,e=l)}return a(e);case te:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ql(o,e.mode,l)).return=e,e=r}return a(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Hl(o,e.mode,l)).return=e,e=r),a(e);if(ko(o))return m(e,r,o,l);if(me(o))return g(e,r,o,l);if(c&&Ao(e,o),"undefined"===typeof o&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(s(152,e.displayName||e.name||"Component"))}return n(e,r)}}var No=Do(!0),Po=Do(!1),Ro={},Oo={current:Ro},Lo={current:Ro},Mo={current:Ro};function Fo(e){if(e===Ro)throw Error(s(174));return e}function Vo(e,t){switch(mi(Mo,t),mi(Lo,e),mi(Oo,Ro),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fe(null,"");break;default:t=Fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}pi(Oo),mi(Oo,t)}function Uo(){pi(Oo),pi(Lo),pi(Mo)}function Bo(e){Fo(Mo.current);var t=Fo(Oo.current),n=Fe(t,e.type);t!==n&&(mi(Lo,e),mi(Oo,n))}function zo(e){Lo.current===e&&(pi(Oo),pi(Lo))}var jo={current:0};function qo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===wn||n.data===bn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Go(e,t){return{responder:e,props:t}}var Ko=X.ReactCurrentDispatcher,Ho=X.ReactCurrentBatchConfig,Qo=0,Wo=null,Yo=null,Xo=null,$o=!1;function Jo(){throw Error(s(321))}function Zo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qr(e[n],t[n]))return!1;return!0}function es(e,t,n,r,i,o){if(Qo=o,Wo=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Ko.current=null===e||null===e.memoizedState?Ts:Ss,e=n(r,i),t.expirationTime===Qo){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(s(301));o+=1,Xo=Yo=null,t.updateQueue=null,Ko.current=xs,e=n(r,i)}while(t.expirationTime===Qo)}if(Ko.current=Es,t=null!==Yo&&null!==Yo.next,Qo=0,Xo=Yo=Wo=null,$o=!1,t)throw Error(s(300));return e}function ts(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Xo?Wo.memoizedState=Xo=e:Xo=Xo.next=e,Xo}function ns(){if(null===Yo){var e=Wo.alternate;e=null!==e?e.memoizedState:null}else e=Yo.next;var t=null===Xo?Wo.memoizedState:Xo.next;if(null!==t)Xo=t,Yo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Yo=e).memoizedState,baseState:Yo.baseState,baseQueue:Yo.baseQueue,queue:Yo.queue,next:null},null===Xo?Wo.memoizedState=Xo=e:Xo=Xo.next=e}return Xo}function rs(e,t){return"function"===typeof t?t(e):t}function is(e){var t=ns(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=Yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=a=o=null,u=i;do{var c=u.expirationTime;if(c<Qo){var h={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(a=l=h,o=r):l=l.next=h,c>Wo.expirationTime&&(Wo.expirationTime=c,Tl(c))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),El(c,u.suspenseConfig),r=u.eagerReducer===e?u.eagerState:e(r,u.action);u=u.next}while(null!==u&&u!==i);null===l?o=r:l.next=a,qr(r,t.memoizedState)||(Ms=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function os(e){var t=ns(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);qr(o,t.memoizedState)||(Ms=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ss(e){var t=ts();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:rs,lastRenderedState:e}).dispatch=_s.bind(null,Wo,e),[t.memoizedState,e]}function as(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Wo.updateQueue)?(t={lastEffect:null},Wo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ls(){return ns().memoizedState}function us(e,t,n,r){var i=ts();Wo.effectTag|=e,i.memoizedState=as(1|t,n,void 0,void 0===r?null:r)}function cs(e,t,n,r){var i=ns();r=void 0===r?null:r;var o=void 0;if(null!==Yo){var s=Yo.memoizedState;if(o=s.destroy,null!==r&&Zo(r,s.deps))return void as(t,n,o,r)}Wo.effectTag|=e,i.memoizedState=as(1|t,n,o,r)}function hs(e,t){return us(516,4,e,t)}function ds(e,t){return cs(516,4,e,t)}function fs(e,t){return cs(4,2,e,t)}function ps(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ms(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,cs(4,2,ps.bind(null,t,e),n)}function gs(){}function vs(e,t){return ts().memoizedState=[e,void 0===t?null:t],e}function ys(e,t){var n=ns();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Zo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ws(e,t){var n=ns();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Zo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function bs(e,t,n){var r=Hi();Wi(98>r?98:r,(function(){e(!0)})),Wi(97<r?97:r,(function(){var r=Ho.suspense;Ho.suspense=void 0===t?null:t;try{e(!1),n()}finally{Ho.suspense=r}}))}function _s(e,t,n){var r=ul(),i=wo.suspense;i={expirationTime:r=cl(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Wo||null!==o&&o===Wo)$o=!0,i.expirationTime=Qo,Wo.expirationTime=Qo;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.eagerReducer=o,i.eagerState=a,qr(a,s))return}catch(l){}hl(e,r)}}var Es={readContext:uo,useCallback:Jo,useContext:Jo,useEffect:Jo,useImperativeHandle:Jo,useLayoutEffect:Jo,useMemo:Jo,useReducer:Jo,useRef:Jo,useState:Jo,useDebugValue:Jo,useResponder:Jo,useDeferredValue:Jo,useTransition:Jo},Ts={readContext:uo,useCallback:vs,useContext:uo,useEffect:hs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,us(4,2,ps.bind(null,t,e),n)},useLayoutEffect:function(e,t){return us(4,2,e,t)},useMemo:function(e,t){var n=ts();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ts();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=_s.bind(null,Wo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ts().memoizedState=e},useState:ss,useDebugValue:gs,useResponder:Go,useDeferredValue:function(e,t){var n=ss(e),r=n[0],i=n[1];return hs((function(){var n=Ho.suspense;Ho.suspense=void 0===t?null:t;try{i(e)}finally{Ho.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ss(!1),n=t[0];return t=t[1],[vs(bs.bind(null,t,e),[t,e]),n]}},Ss={readContext:uo,useCallback:ys,useContext:uo,useEffect:ds,useImperativeHandle:ms,useLayoutEffect:fs,useMemo:ws,useReducer:is,useRef:ls,useState:function(){return is(rs)},useDebugValue:gs,useResponder:Go,useDeferredValue:function(e,t){var n=is(rs),r=n[0],i=n[1];return ds((function(){var n=Ho.suspense;Ho.suspense=void 0===t?null:t;try{i(e)}finally{Ho.suspense=n}}),[e,t]),r},useTransition:function(e){var t=is(rs),n=t[0];return t=t[1],[ys(bs.bind(null,t,e),[t,e]),n]}},xs={readContext:uo,useCallback:ys,useContext:uo,useEffect:ds,useImperativeHandle:ms,useLayoutEffect:fs,useMemo:ws,useReducer:os,useRef:ls,useState:function(){return os(rs)},useDebugValue:gs,useResponder:Go,useDeferredValue:function(e,t){var n=os(rs),r=n[0],i=n[1];return ds((function(){var n=Ho.suspense;Ho.suspense=void 0===t?null:t;try{i(e)}finally{Ho.suspense=n}}),[e,t]),r},useTransition:function(e){var t=os(rs),n=t[0];return t=t[1],[ys(bs.bind(null,t,e),[t,e]),n]}},Is=null,ks=null,Cs=!1;function As(e,t){var n=zl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ds(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ns(e){if(Cs){var t=ks;if(t){var n=t;if(!Ds(e,t)){if(!(t=kn(n.nextSibling))||!Ds(e,t))return e.effectTag=-1025&e.effectTag|2,Cs=!1,void(Is=e);As(Is,n)}Is=e,ks=kn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Cs=!1,Is=e}}function Ps(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Is=e}function Rs(e){if(e!==Is)return!1;if(!Cs)return Ps(e),Cs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Sn(t,e.memoizedProps))for(t=ks;t;)As(e,t),t=kn(t.nextSibling);if(Ps(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===yn){if(0===t){ks=kn(e.nextSibling);break e}t--}else n!==vn&&n!==bn&&n!==wn||t++}e=e.nextSibling}ks=null}}else ks=Is?kn(e.stateNode.nextSibling):null;return!0}function Os(){ks=Is=null,Cs=!1}var Ls=X.ReactCurrentOwner,Ms=!1;function Fs(e,t,n,r){t.child=null===e?Po(t,null,n,r):No(t,e.child,n,r)}function Vs(e,t,n,r,i){n=n.render;var o=t.ref;return lo(t,i),r=es(e,t,n,r,o,i),null===e||Ms?(t.effectTag|=1,Fs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ta(e,t,i))}function Us(e,t,n,r,i,o){if(null===e){var s=n.type;return"function"!==typeof s||jl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gl(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Bs(e,t,s,r,i,o))}return s=e.child,i<o&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:Kr)(i,r)&&e.ref===t.ref)?ta(e,t,o):(t.effectTag|=1,(e=ql(s,r)).ref=t.ref,e.return=t,t.child=e)}function Bs(e,t,n,r,i,o){return null!==e&&Kr(e.memoizedProps,r)&&e.ref===t.ref&&(Ms=!1,i<o)?(t.expirationTime=e.expirationTime,ta(e,t,o)):js(e,t,n,r,o)}function zs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function js(e,t,n,r,i){var o=_i(n)?wi:vi.current;return o=bi(t,o),lo(t,i),n=es(e,t,n,r,o,i),null===e||Ms?(t.effectTag|=1,Fs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ta(e,t,i))}function qs(e,t,n,r,i){if(_i(n)){var o=!0;xi(t)}else o=!1;if(lo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),So(t,n,r),Io(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=uo(u):u=bi(t,u=_i(n)?wi:vi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==u)&&xo(t,s,r,u),co=!1;var d=t.memoizedState;s.state=d,vo(t,r,s,i),l=t.memoizedState,a!==r||d!==l||yi.current||co?("function"===typeof c&&(_o(t,n,c,r),l=t.memoizedState),(a=co||To(t,n,a,r,d,l,u))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.effectTag|=4)):("function"===typeof s.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):("function"===typeof s.componentDidMount&&(t.effectTag|=4),r=!1)}else s=t.stateNode,fo(e,t),a=t.memoizedProps,s.props=t.type===t.elementType?a:eo(t.type,a),l=s.context,"object"===typeof(u=n.contextType)&&null!==u?u=uo(u):u=bi(t,u=_i(n)?wi:vi.current),(h="function"===typeof(c=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==u)&&xo(t,s,r,u),co=!1,l=t.memoizedState,s.state=l,vo(t,r,s,i),d=t.memoizedState,a!==r||l!==d||yi.current||co?("function"===typeof c&&(_o(t,n,c,r),d=t.memoizedState),(c=co||To(t,n,a,r,l,d,u))?(h||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,d,u),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,d,u)),"function"===typeof s.componentDidUpdate&&(t.effectTag|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),s.props=r,s.state=d,s.context=u,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return Gs(e,t,n,r,o,i)}function Gs(e,t,n,r,i,o){zs(e,t);var s=0!==(64&t.effectTag);if(!r&&!s)return i&&Ii(t,n,!1),ta(e,t,o);r=t.stateNode,Ls.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&s?(t.child=No(t,e.child,null,o),t.child=No(t,null,a,o)):Fs(e,t,a,o),t.memoizedState=r.state,i&&Ii(t,n,!0),t.child}function Ks(e){var t=e.stateNode;t.pendingContext?Ti(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ti(0,t.context,!1),Vo(e,t.containerInfo)}var Hs,Qs,Ws,Ys,Xs={dehydrated:null,retryTime:0};function $s(e,t,n){var r,i=t.mode,o=t.pendingProps,s=jo.current,a=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&s)&&(null===e||null!==e.memoizedState)),r?(a=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(s|=1),mi(jo,1&s),null===e){if(void 0!==o.fallback&&Ns(t),a){if(a=o.fallback,(o=Kl(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Kl(a,i,n,null)).return=t,o.sibling=n,t.memoizedState=Xs,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=Po(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,a){if(o=o.fallback,(n=ql(e,e.pendingProps)).return=t,0===(2&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(i=ql(i,o)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Xs,t.child=n,i}return n=No(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,a){if(a=o.fallback,(o=Kl(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Kl(a,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=Xs,t.child=o,n}return t.memoizedState=null,t.child=No(t,e,o.children,n)}function Js(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),ao(e.return,t)}function Zs(e,t,n,r,i,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailExpiration=0,s.tailMode=i,s.lastEffect=o)}function ea(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Fs(e,t,r.children,n),0!==(2&(r=jo.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Js(e,n);else if(19===e.tag)Js(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(mi(jo,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===qo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Zs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===qo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Zs(t,!0,n,null,o,t.lastEffect);break;case"together":Zs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ta(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&Tl(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=ql(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ql(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function na(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ra(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return _i(t.type)&&Ei(),null;case 3:return Uo(),pi(yi),pi(vi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Rs(t)||(t.effectTag|=4),Qs(t),null;case 5:zo(t),n=Fo(Mo.current);var o=t.type;if(null!==e&&null!=t.stateNode)Ws(e,t,o,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(s(166));return null}if(e=Fo(Oo.current),Rs(t)){r=t.stateNode,o=t.type;var a=t.memoizedProps;switch(r[Dn]=t,r[Nn]=a,o){case"iframe":case"object":case"embed":Wt("load",r);break;case"video":case"audio":for(e=0;e<$e.length;e++)Wt($e[e],r);break;case"source":Wt("error",r);break;case"img":case"image":case"link":Wt("error",r),Wt("load",r);break;case"form":Wt("reset",r),Wt("submit",r);break;case"details":Wt("toggle",r);break;case"input":Te(r,a),Wt("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Wt("invalid",r),un(n,"onChange");break;case"textarea":Ne(r,a),Wt("invalid",r),un(n,"onChange")}for(var l in sn(o,a),e=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(e=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(e=["children",""+u]):S.hasOwnProperty(l)&&null!=u&&un(n,l)}switch(o){case"input":be(r),Ie(r,a,!0);break;case"textarea":be(r),Re(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=cn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(l=9===n.nodeType?n:n.ownerDocument,e===ln&&(e=Me(o)),e===ln?"script"===o?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(o,{is:r.is}):(e=l.createElement(o),"select"===o&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,o),e[Dn]=t,e[Nn]=r,Hs(e,t,!1,!1),t.stateNode=e,l=an(o,r),o){case"iframe":case"object":case"embed":Wt("load",e),u=r;break;case"video":case"audio":for(u=0;u<$e.length;u++)Wt($e[u],e);u=r;break;case"source":Wt("error",e),u=r;break;case"img":case"image":case"link":Wt("error",e),Wt("load",e),u=r;break;case"form":Wt("reset",e),Wt("submit",e),u=r;break;case"details":Wt("toggle",e),u=r;break;case"input":Te(e,r),u=Ee(e,r),Wt("invalid",e),un(n,"onChange");break;case"option":u=Ce(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},u=i({},r,{value:void 0}),Wt("invalid",e),un(n,"onChange");break;case"textarea":Ne(e,r),u=De(e,r),Wt("invalid",e),un(n,"onChange");break;default:u=r}sn(o,u);var c=u;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?rn(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&Be(e,h):"children"===a?"string"===typeof h?("textarea"!==o||""!==h)&&ze(e,h):"number"===typeof h&&ze(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(S.hasOwnProperty(a)?null!=h&&un(n,a):null!=h&&$(e,a,h,l))}switch(o){case"input":be(e),Ie(e,r,!1);break;case"textarea":be(e),Re(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ye(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Ae(e,!!r.multiple,n,!1):null!=r.defaultValue&&Ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof u.onClick&&(e.onclick=cn)}Tn(o,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ys(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));n=Fo(Mo.current),Fo(Oo.current),Rs(t)?(n=t.stateNode,r=t.memoizedProps,n[Dn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Dn]=t,t.stateNode=n)}return null;case 13:return pi(jo),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Rs(t):(r=null!==(o=e.memoizedState),n||null===o||null!==(o=e.child.sibling)&&(null!==(a=t.firstEffect)?(t.firstEffect=o,o.nextEffect=a):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&jo.current)?qa===Ra&&(qa=Ma):(qa!==Ra&&qa!==Ma||(qa=Fa),0!==Wa&&null!==Ba&&(Xl(Ba,ja),$l(Ba,Wa)))),(n||r)&&(t.effectTag|=4),null);case 4:return Uo(),Qs(t),null;case 10:return so(t),null;case 19:if(pi(jo),null===(r=t.memoizedState))return null;if(o=0!==(64&t.effectTag),null===(a=r.rendering)){if(o)na(r,!1);else if(qa!==Ra||null!==e&&0!==(64&e.effectTag))for(a=t.child;null!==a;){if(null!==(e=qo(a))){for(t.effectTag|=64,na(r,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)a=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=a,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,a=e.dependencies,o.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),r=r.sibling;return mi(jo,1&jo.current|2),t.child}a=a.sibling}}else{if(!o)if(null!==(e=qo(a))){if(t.effectTag|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),na(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ki()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,o=!0,na(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Ki()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ki(),n.sibling=null,t=jo.current,mi(jo,o?1&t|2:1&t),n):null}throw Error(s(156,t.tag))}function ia(e){switch(e.tag){case 1:_i(e.type)&&Ei();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Uo(),pi(yi),pi(vi),0!==(64&(t=e.effectTag)))throw Error(s(285));return e.effectTag=-4097&t|64,e;case 5:return zo(e),null;case 13:return pi(jo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return pi(jo),null;case 4:return Uo(),null;case 10:return so(e),null;default:return null}}function oa(e,t){return{value:e,source:t,stack:ve(t)}}Hs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qs=function(){},Ws=function(e,t,n,r,o){var s=e.memoizedProps;if(s!==r){var a,l,u=t.stateNode;switch(Fo(Oo.current),e=null,n){case"input":s=Ee(u,s),r=Ee(u,r),e=[];break;case"option":s=Ce(u,s),r=Ce(u,r),e=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":s=De(u,s),r=De(u,r),e=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(u.onclick=cn)}for(a in sn(n,r),n=null,s)if(!r.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(l in u=s[a])u.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(S.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in r){var c=r[a];if(u=null!=s?s[a]:void 0,r.hasOwnProperty(a)&&c!==u&&(null!=c||null!=u))if("style"===a)if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(e||(e=[]),e.push(a,n)),n=c;else"dangerouslySetInnerHTML"===a?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(a,c)):"children"===a?u===c||"string"!==typeof c&&"number"!==typeof c||(e=e||[]).push(a,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(S.hasOwnProperty(a)?(null!=c&&un(o,a),e||u===c||(e=[])):(e=e||[]).push(a,c))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},Ys=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var sa="function"===typeof WeakSet?WeakSet:Set;function aa(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ve(n)),null!==n&&ge(n.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function la(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Ll(e,n)}else t.current=null}function ua(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:eo(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(s(163))}function ca(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function ha(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function da(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ha(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:eo(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&yo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}yo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&Tn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ft(n)))))}throw Error(s(163))}function fa(e,t,n){switch("function"===typeof Ul&&Ul(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Wi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(o){Ll(i,o)}}e=e.next}while(e!==r)}))}break;case 1:la(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Ll(e,n)}}(t,n);break;case 5:la(t);break;case 4:wa(e,t,n)}}function pa(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&pa(t)}function ma(e){return 5===e.tag||3===e.tag||4===e.tag}function ga(e){e:{for(var t=e.return;null!==t;){if(ma(t)){var n=t;break e}t=t.return}throw Error(s(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.effectTag&&(ze(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ma(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?va(e,n,t):ya(e,n,t)}function va(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=cn));else if(4!==r&&null!==(e=e.child))for(va(e,t,n),e=e.sibling;null!==e;)va(e,t,n),e=e.sibling}function ya(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ya(e,t,n),e=e.sibling;null!==e;)ya(e,t,n),e=e.sibling}function wa(e,t,n){for(var r,i,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag){e:for(var l=e,u=o,c=n,h=u;;)if(fa(l,h,c),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===u)break e;for(;null===h.sibling;){if(null===h.return||h.return===u)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(l=r,u=o.stateNode,8===l.nodeType?l.parentNode.removeChild(u):l.removeChild(u)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(fa(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function ba(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void ca(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[Nn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Se(n,r),an(e,i),t=an(e,r),i=0;i<o.length;i+=2){var a=o[i],l=o[i+1];"style"===a?rn(n,l):"dangerouslySetInnerHTML"===a?Be(n,l):"children"===a?ze(n,l):$(n,a,l,t)}switch(e){case"input":xe(n,r);break;case"textarea":Pe(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Ae(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Ae(n,!!r.multiple,r.defaultValue,!0):Ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Ft(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Xa=Ki()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=nn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void _a(t);case 19:return void _a(t)}throw Error(s(163))}function _a(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new sa),t.forEach((function(t){var r=Fl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var Ea="function"===typeof WeakMap?WeakMap:Map;function Ta(e,t,n){(n=po(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Za||(Za=!0,el=r),aa(e,t)},n}function Sa(e,t,n){(n=po(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return aa(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===tl?tl=new Set([this]):tl.add(this),aa(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var xa,Ia=Math.ceil,ka=X.ReactCurrentDispatcher,Ca=X.ReactCurrentOwner,Aa=0,Da=8,Na=16,Pa=32,Ra=0,Oa=1,La=2,Ma=3,Fa=4,Va=5,Ua=Aa,Ba=null,za=null,ja=0,qa=Ra,Ga=null,Ka=1073741823,Ha=1073741823,Qa=null,Wa=0,Ya=!1,Xa=0,$a=500,Ja=null,Za=!1,el=null,tl=null,nl=!1,rl=null,il=90,ol=null,sl=0,al=null,ll=0;function ul(){return(Ua&(Na|Pa))!==Aa?1073741821-(Ki()/10|0):0!==ll?ll:ll=1073741821-(Ki()/10|0)}function cl(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Hi();if(0===(4&t))return 99===r?1073741823:1073741822;if((Ua&Na)!==Aa)return ja;if(null!==n)e=Zi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Zi(e,150,100);break;case 97:case 96:e=Zi(e,5e3,250);break;case 95:e=2;break;default:throw Error(s(326))}return null!==Ba&&e===ja&&--e,e}function hl(e,t){if(50<sl)throw sl=0,al=null,Error(s(185));if(null!==(e=dl(e,t))){var n=Hi();1073741823===t?(Ua&Da)!==Aa&&(Ua&(Na|Pa))===Aa?gl(e):(pl(e),Ua===Aa&&$i()):pl(e),(4&Ua)===Aa||98!==n&&99!==n||(null===ol?ol=new Map([[e,t]]):(void 0===(n=ol.get(e))||n>t)&&ol.set(e,t))}}function dl(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ba===i&&(Tl(t),qa===Fa&&Xl(i,ja)),$l(i,t)),i}function fl(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Yl(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function pl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Xi(gl.bind(null,e));else{var t=fl(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=ul();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Vi&&Ai(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Xi(gl.bind(null,e)):Yi(r,ml.bind(null,e),{timeout:10*(1073741821-t)-Ki()}),e.callbackNode=t}}}function ml(e,t){if(ll=0,t)return Jl(e,t=ul()),pl(e),null;var n=fl(e);if(0!==n){if(t=e.callbackNode,(Ua&(Na|Pa))!==Aa)throw Error(s(327));if(Pl(),e===Ba&&n===ja||wl(e,n),null!==za){var r=Ua;Ua|=Na;for(var i=_l();;)try{xl();break}catch(l){bl(e,l)}if(oo(),Ua=r,ka.current=i,qa===Oa)throw t=Ga,wl(e,n),Xl(e,n),pl(e),t;if(null===za)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=qa,Ba=null,r){case Ra:case Oa:throw Error(s(345));case La:Jl(e,2<n?2:n);break;case Ma:if(Xl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Cl(i)),1073741823===Ka&&10<(i=Xa+$a-Ki())){if(Ya){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,wl(e,n);break}}if(0!==(o=fl(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=xn(Al.bind(null,e),i);break}Al(e);break;case Fa:if(Xl(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Cl(i)),Ya&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,wl(e,n);break}if(0!==(i=fl(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Ha?r=10*(1073741821-Ha)-Ki():1073741823===Ka?r=0:(r=10*(1073741821-Ka)-5e3,0>(r=(i=Ki())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ia(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=xn(Al.bind(null,e),r);break}Al(e);break;case Va:if(1073741823!==Ka&&null!==Qa){o=Ka;var a=Qa;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(o=Ki()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Xl(e,n),e.timeoutHandle=xn(Al.bind(null,e),r);break}}Al(e);break;default:throw Error(s(329))}if(pl(e),e.callbackNode===t)return ml.bind(null,e)}}return null}function gl(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(Ua&(Na|Pa))!==Aa)throw Error(s(327));if(Pl(),e===Ba&&t===ja||wl(e,t),null!==za){var n=Ua;Ua|=Na;for(var r=_l();;)try{Sl();break}catch(i){bl(e,i)}if(oo(),Ua=n,ka.current=r,qa===Oa)throw n=Ga,wl(e,t),Xl(e,t),pl(e),n;if(null!==za)throw Error(s(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ba=null,Al(e),pl(e)}return null}function vl(e,t){var n=Ua;Ua|=1;try{return e(t)}finally{(Ua=n)===Aa&&$i()}}function yl(e,t){var n=Ua;Ua&=-2,Ua|=Da;try{return e(t)}finally{(Ua=n)===Aa&&$i()}}function wl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,In(n)),null!==za)for(n=za.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ei();break;case 3:Uo(),pi(yi),pi(vi);break;case 5:zo(r);break;case 4:Uo();break;case 13:case 19:pi(jo);break;case 10:so(r)}n=n.return}Ba=e,za=ql(e.current,null),ja=t,qa=Ra,Ga=null,Ha=Ka=1073741823,Qa=null,Wa=0,Ya=!1}function bl(e,t){for(;;){try{if(oo(),Ko.current=Es,$o)for(var n=Wo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Qo=0,Xo=Yo=Wo=null,$o=!1,null===za||null===za.return)return qa=Oa,Ga=t,za=null;e:{var i=e,o=za.return,s=za,a=t;if(t=ja,s.effectTag|=2048,s.firstEffect=s.lastEffect=null,null!==a&&"object"===typeof a&&"function"===typeof a.then){var l=a;if(0===(2&s.mode)){var u=s.alternate;u?(s.updateQueue=u.updateQueue,s.memoizedState=u.memoizedState,s.expirationTime=u.expirationTime):(s.updateQueue=null,s.memoizedState=null)}var c=0!==(1&jo.current),h=o;do{var d;if(d=13===h.tag){var f=h.memoizedState;if(null!==f)d=null!==f.dehydrated;else{var p=h.memoizedProps;d=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!c)}}if(d){var m=h.updateQueue;if(null===m){var g=new Set;g.add(l),h.updateQueue=g}else m.add(l);if(0===(2&h.mode)){if(h.effectTag|=64,s.effectTag&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=po(1073741823,null);v.tag=2,mo(s,v)}s.expirationTime=1073741823;break e}a=void 0,s=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new Ea,a=new Set,y.set(l,a)):void 0===(a=y.get(l))&&(a=new Set,y.set(l,a)),!a.has(s)){a.add(s);var w=Ml.bind(null,i,l,s);l.then(w,w)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);a=Error((ge(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ve(s))}qa!==Va&&(qa=La),a=oa(a,s),h=o;do{switch(h.tag){case 3:l=a,h.effectTag|=4096,h.expirationTime=t,go(h,Ta(h,l,t));break e;case 1:l=a;var b=h.type,_=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof b.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===tl||!tl.has(_)))){h.effectTag|=4096,h.expirationTime=t,go(h,Sa(h,l,t));break e}}h=h.return}while(null!==h)}za=kl(za)}catch(E){t=E;continue}break}}function _l(){var e=ka.current;return ka.current=Es,null===e?Es:e}function El(e,t){e<Ka&&2<e&&(Ka=e),null!==t&&e<Ha&&2<e&&(Ha=e,Qa=t)}function Tl(e){e>Wa&&(Wa=e)}function Sl(){for(;null!==za;)za=Il(za)}function xl(){for(;null!==za&&!Ui();)za=Il(za)}function Il(e){var t=xa(e.alternate,e,ja);return e.memoizedProps=e.pendingProps,null===t&&(t=kl(e)),Ca.current=null,t}function kl(e){za=e;do{var t=za.alternate;if(e=za.return,0===(2048&za.effectTag)){if(t=ra(t,za,ja),1===ja||1!==za.childExpirationTime){for(var n=0,r=za.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}za.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=za.firstEffect),null!==za.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=za.firstEffect),e.lastEffect=za.lastEffect),1<za.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=za:e.firstEffect=za,e.lastEffect=za))}else{if(null!==(t=ia(za)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=za.sibling))return t;za=e}while(null!==za);return qa===Ra&&(qa=Va),null}function Cl(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Al(e){var t=Hi();return Wi(99,Dl.bind(null,e,t)),null}function Dl(e,t){do{Pl()}while(null!==rl);if((Ua&(Na|Pa))!==Aa)throw Error(s(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Cl(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ba&&(za=Ba=null,ja=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Ua;Ua|=Pa,Ca.current=null,_n=Qt;var a=mn();if(gn(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{var u=(l=(l=a.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(u&&0!==u.rangeCount){l=u.anchorNode;var c=u.anchorOffset,h=u.focusNode;u=u.focusOffset;try{l.nodeType,h.nodeType}catch(I){l=null;break e}var d=0,f=-1,p=-1,m=0,g=0,v=a,y=null;t:for(;;){for(var w;v!==l||0!==c&&3!==v.nodeType||(f=d+c),v!==h||0!==u&&3!==v.nodeType||(p=d+u),3===v.nodeType&&(d+=v.nodeValue.length),null!==(w=v.firstChild);)y=v,v=w;for(;;){if(v===a)break t;if(y===l&&++m===c&&(f=d),y===h&&++g===u&&(p=d),null!==(w=v.nextSibling))break;y=(v=y).parentNode}v=w}l=-1===f||-1===p?null:{start:f,end:p}}else l=null}l=l||{start:0,end:0}}else l=null;En={activeElementDetached:null,focusedElem:a,selectionRange:l},Qt=!1,Ja=i;do{try{Nl()}catch(I){if(null===Ja)throw Error(s(330));Ll(Ja,I),Ja=Ja.nextEffect}}while(null!==Ja);Ja=i;do{try{for(a=e,l=t;null!==Ja;){var b=Ja.effectTag;if(16&b&&ze(Ja.stateNode,""),128&b){var _=Ja.alternate;if(null!==_){var E=_.ref;null!==E&&("function"===typeof E?E(null):E.current=null)}}switch(1038&b){case 2:ga(Ja),Ja.effectTag&=-3;break;case 6:ga(Ja),Ja.effectTag&=-3,ba(Ja.alternate,Ja);break;case 1024:Ja.effectTag&=-1025;break;case 1028:Ja.effectTag&=-1025,ba(Ja.alternate,Ja);break;case 4:ba(Ja.alternate,Ja);break;case 8:wa(a,c=Ja,l),pa(c)}Ja=Ja.nextEffect}}catch(I){if(null===Ja)throw Error(s(330));Ll(Ja,I),Ja=Ja.nextEffect}}while(null!==Ja);if(E=En,_=mn(),b=E.focusedElem,l=E.selectionRange,_!==b&&b&&b.ownerDocument&&pn(b.ownerDocument.documentElement,b)){null!==l&&gn(b)&&(_=l.start,void 0===(E=l.end)&&(E=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(E,b.value.length)):(E=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(E=E.getSelection(),c=b.textContent.length,a=Math.min(l.start,c),l=void 0===l.end?a:Math.min(l.end,c),!E.extend&&a>l&&(c=l,l=a,a=c),c=fn(b,a),h=fn(b,l),c&&h&&(1!==E.rangeCount||E.anchorNode!==c.node||E.anchorOffset!==c.offset||E.focusNode!==h.node||E.focusOffset!==h.offset)&&((_=_.createRange()).setStart(c.node,c.offset),E.removeAllRanges(),a>l?(E.addRange(_),E.extend(h.node,h.offset)):(_.setEnd(h.node,h.offset),E.addRange(_))))),_=[];for(E=b;E=E.parentNode;)1===E.nodeType&&_.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<_.length;b++)(E=_[b]).element.scrollLeft=E.left,E.element.scrollTop=E.top}Qt=!!_n,En=_n=null,e.current=n,Ja=i;do{try{for(b=e;null!==Ja;){var T=Ja.effectTag;if(36&T&&da(b,Ja.alternate,Ja),128&T){_=void 0;var S=Ja.ref;if(null!==S){var x=Ja.stateNode;Ja.tag,_=x,"function"===typeof S?S(_):S.current=_}}Ja=Ja.nextEffect}}catch(I){if(null===Ja)throw Error(s(330));Ll(Ja,I),Ja=Ja.nextEffect}}while(null!==Ja);Ja=null,Bi(),Ua=o}else e.current=n;if(nl)nl=!1,rl=e,il=t;else for(Ja=i;null!==Ja;)t=Ja.nextEffect,Ja.nextEffect=null,Ja=t;if(0===(t=e.firstPendingTime)&&(tl=null),1073741823===t?e===al?sl++:(sl=0,al=e):sl=0,"function"===typeof Vl&&Vl(n.stateNode,r),pl(e),Za)throw Za=!1,e=el,el=null,e;return(Ua&Da)!==Aa||$i(),null}function Nl(){for(;null!==Ja;){var e=Ja.effectTag;0!==(256&e)&&ua(Ja.alternate,Ja),0===(512&e)||nl||(nl=!0,Yi(97,(function(){return Pl(),null}))),Ja=Ja.nextEffect}}function Pl(){if(90!==il){var e=97<il?97:il;return il=90,Wi(e,Rl)}}function Rl(){if(null===rl)return!1;var e=rl;if(rl=null,(Ua&(Na|Pa))!==Aa)throw Error(s(331));var t=Ua;for(Ua|=Pa,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ca(5,n),ha(5,n)}}catch(r){if(null===e)throw Error(s(330));Ll(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Ua=t,$i(),!0}function Ol(e,t,n){mo(e,t=Ta(e,t=oa(n,t),1073741823)),null!==(e=dl(e,1073741823))&&pl(e)}function Ll(e,t){if(3===e.tag)Ol(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ol(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===tl||!tl.has(r))){mo(n,e=Sa(n,e=oa(t,e),1073741823)),null!==(n=dl(n,1073741823))&&pl(n);break}}n=n.return}}function Ml(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Ba===e&&ja===n?qa===Fa||qa===Ma&&1073741823===Ka&&Ki()-Xa<$a?wl(e,ja):Ya=!0:Yl(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,pl(e)))}function Fl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=cl(t=ul(),e,null)),null!==(e=dl(e,t))&&pl(e)}xa=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||yi.current)Ms=!0;else{if(r<n){switch(Ms=!1,t.tag){case 3:Ks(t),Os();break;case 5:if(Bo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:_i(t.type)&&xi(t);break;case 4:Vo(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,mi(to,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?$s(e,t,n):(mi(jo,1&jo.current),null!==(t=ta(e,t,n))?t.sibling:null);mi(jo,1&jo.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return ea(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),mi(jo,jo.current),!r)return null}return ta(e,t,n)}Ms=!1}}else Ms=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=bi(t,vi.current),lo(t,n),i=es(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,_i(r)){var o=!0;xi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ho(t);var a=r.getDerivedStateFromProps;"function"===typeof a&&_o(t,r,a,e),i.updater=Eo,t.stateNode=i,i._reactInternalFiber=t,Io(t,r,e,n),t=Gs(null,t,r,!0,o,n)}else t.tag=0,Fs(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"===typeof e)return jl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===le)return 11;if(e===he)return 14}return 2}(i),e=eo(i,e),o){case 0:t=js(null,t,i,e,n);break e;case 1:t=qs(null,t,i,e,n);break e;case 11:t=Vs(null,t,i,e,n);break e;case 14:t=Us(null,t,i,eo(i.type,e),r,n);break e}throw Error(s(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,js(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 1:return r=t.type,i=t.pendingProps,qs(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 3:if(Ks(t),r=t.updateQueue,null===e||null===r)throw Error(s(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,fo(e,t),vo(t,r,null,n),(r=t.memoizedState.element)===i)Os(),t=ta(e,t,n);else{if((i=t.stateNode.hydrate)&&(ks=kn(t.stateNode.containerInfo.firstChild),Is=t,i=Cs=!0),i)for(n=Po(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Fs(e,t,r,n),Os();t=t.child}return t;case 5:return Bo(t),null===e&&Ns(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,Sn(r,i)?a=null:null!==o&&Sn(r,o)&&(t.effectTag|=16),zs(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Fs(e,t,a,n),t=t.child),t;case 6:return null===e&&Ns(t),null;case 13:return $s(e,t,n);case 4:return Vo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=No(t,null,r,n):Fs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Vs(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 7:return Fs(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fs(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var l=t.type._context;if(mi(to,l._currentValue),l._currentValue=o,null!==a)if(l=a.value,0===(o=qr(l,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(a.children===i.children&&!yi.current){t=ta(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){a=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!==(c.observedBits&o)){1===l.tag&&((c=po(n,null)).tag=2,mo(l,c)),l.expirationTime<n&&(l.expirationTime=n),null!==(c=l.alternate)&&c.expirationTime<n&&(c.expirationTime=n),ao(l.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Fs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,lo(t,n),r=r(i=uo(i,o.unstable_observedBits)),t.effectTag|=1,Fs(e,t,r,n),t.child;case 14:return o=eo(i=t.type,t.pendingProps),Us(e,t,i,o=eo(i.type,o),r,n);case 15:return Bs(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:eo(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,_i(r)?(e=!0,xi(t)):e=!1,lo(t,n),So(t,r,i),Io(t,r,i,n),Gs(null,t,r,!0,e,n);case 19:return ea(e,t,n)}throw Error(s(156,t.tag))};var Vl=null,Ul=null;function Bl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function zl(e,t,n,r){return new Bl(e,t,n,r)}function jl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ql(e,t){var n=e.alternate;return null===n?((n=zl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gl(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)jl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case ne:return Kl(n.children,i,o,t);case ae:a=8,i|=7;break;case re:a=8,i|=1;break;case ie:return(e=zl(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=o,e;case ue:return(e=zl(13,n,t,i)).type=ue,e.elementType=ue,e.expirationTime=o,e;case ce:return(e=zl(19,n,t,i)).elementType=ce,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case oe:a=10;break e;case se:a=9;break e;case le:a=11;break e;case he:a=14;break e;case de:a=16,r=null;break e;case fe:a=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=zl(a,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Kl(e,t,n,r){return(e=zl(7,e,r,t)).expirationTime=n,e}function Hl(e,t,n){return(e=zl(6,e,null,t)).expirationTime=n,e}function Ql(e,t,n){return(t=zl(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wl(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Yl(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Xl(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function $l(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Jl(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Zl(e,t,n,r){var i=t.current,o=ul(),a=wo.suspense;o=cl(o,i,a);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(s(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(_i(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(s(171))}if(1===n.tag){var u=n.type;if(_i(u)){n=Si(n,u,l);break e}}n=l}else n=gi;return null===t.context?t.context=n:t.pendingContext=n,(t=po(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),mo(i,t),hl(i,o),o}function eu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tu(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function nu(e,t){tu(e,t),(e=e.alternate)&&tu(e,t)}function ru(e,t,n){var r=new Wl(e,t,n=null!=n&&!0===n.hydrate),i=zl(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,ho(i),e[Pn]=r.current,n&&0!==t&&function(e,t){var n=Ze(t);kt.forEach((function(e){mt(e,t,n)})),Ct.forEach((function(e){mt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function iu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ou(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"===typeof i){var a=i;i=function(){var e=eu(s);a.call(e)}}Zl(t,s,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ru(e,0,t?{hydrate:!0}:void 0)}(n,r),s=o._internalRoot,"function"===typeof i){var l=i;i=function(){var e=eu(s);l.call(e)}}yl((function(){Zl(t,s,e,i)}))}return eu(s)}function su(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!iu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}ru.prototype.render=function(e){Zl(e,this._internalRoot,null,null)},ru.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zl(null,e,null,(function(){t[Pn]=null}))},gt=function(e){if(13===e.tag){var t=Zi(ul(),150,100);hl(e,t),nu(e,t)}},vt=function(e){13===e.tag&&(hl(e,3),nu(e,3))},yt=function(e){if(13===e.tag){var t=ul();hl(e,t=cl(t,e,null)),nu(e,t)}},C=function(e,t,n){switch(t){case"input":if(xe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Mn(r);if(!i)throw Error(s(90));_e(r),xe(r,i)}}}break;case"textarea":Pe(e,n);break;case"select":null!=(t=n.value)&&Ae(e,!!n.multiple,t,!1)}},O=vl,L=function(e,t,n,r,i){var o=Ua;Ua|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{(Ua=o)===Aa&&$i()}},M=function(){(Ua&(1|Na|Pa))===Aa&&(function(){if(null!==ol){var e=ol;ol=null,e.forEach((function(e,t){Jl(t,e),pl(t)})),$i()}}(),Pl())},F=function(e,t){var n=Ua;Ua|=2;try{return e(t)}finally{(Ua=n)===Aa&&$i()}};var au={Events:[On,Ln,Mn,I,T,qn,function(e){ot(e,jn)},P,R,Jt,lt,Pl,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Vl=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Ul=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Rn,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=au,t.createPortal=su,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if((Ua&(Na|Pa))!==Aa)throw Error(s(187));var n=Ua;Ua|=1;try{return Wi(99,e.bind(null,t))}finally{Ua=n,$i()}},t.hydrate=function(e,t,n){if(!iu(t))throw Error(s(200));return ou(null,e,t,!0,n)},t.render=function(e,t,n){if(!iu(t))throw Error(s(200));return ou(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!iu(e))throw Error(s(40));return!!e._reactRootContainer&&(yl((function(){ou(null,null,e,!1,(function(){e._reactRootContainer=null,e[Pn]=null}))})),!0)},t.unstable_batchedUpdates=vl,t.unstable_createPortal=function(e,t){return su(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!iu(n))throw Error(s(200));if(null==e||void 0===e._reactInternalFiber)throw Error(s(38));return ou(e,t,n,!1,r)},t.version="16.13.1"},164:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},117:(e,t,n)=>{var r=n(725),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function v(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function b(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||y}function _(){}function E(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||y}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(v(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=b.prototype;var T=E.prototype=new _;T.constructor=E,r(T,b.prototype),T.isPureReactComponent=!0;var S={current:null},x=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var r,i={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,r)&&!I.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:e,key:s,ref:a,props:i,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var A=/\/+/g,D=[];function N(e,t,n,r){if(D.length){var i=D.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>D.length&&D.push(e)}function R(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var a=!1;if(null===e)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case o:case s:a=!0}}if(a)return n(r,e,""===t?"."+L(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var u=t+L(i=e[l],l);a+=R(i,u,n,r)}else if(null===e||"object"!==typeof e?u=null:u="function"===typeof(u=g&&e[g]||e["@@iterator"])?u:null,"function"===typeof u)for(e=u.call(e),l=0;!(i=e.next()).done;)a+=R(i=i.value,u=t+L(i,l++),n,r);else if("object"===i)throw n=""+e,Error(v(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function O(e,t,n){return null==e?0:R(e,"",t,n)}function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function M(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?V(e,r,n,(function(e){return e})):null!=e&&(C(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(A,"$&/")+"/")+n)),r.push(e))}function V(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(A,"$&/")+"/"),O(e,F,t=N(t,o,r,i)),P(t)}var U={current:null};function B(){var e=U.current;if(null===e)throw Error(v(321));return e}var z={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return V(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;O(e,M,t=N(null,null,t,n)),P(t)},count:function(e){return O(e,(function(){return null}),null)},toArray:function(e){var t=[];return V(e,t,null,(function(e){return e})),t},only:function(e){if(!C(e))throw Error(v(143));return e}},t.Component=b,t.Fragment=a,t.Profiler=u,t.PureComponent=E,t.StrictMode=l,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(v(267,e));var i=r({},e.props),s=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];i.children=u}return{$$typeof:o,type:e.type,key:s,ref:a,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return B().useCallback(e,t)},t.useContext=function(e,t){return B().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return B().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return B().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return B().useLayoutEffect(e,t)},t.useMemo=function(e,t){return B().useMemo(e,t)},t.useReducer=function(e,t,n){return B().useReducer(e,t,n)},t.useRef=function(e){return B().useRef(e)},t.useState=function(e){return B().useState(e)},t.version="16.13.1"},791:(e,t,n)=>{e.exports=n(117)},813:(e,t)=>{var n,r,i,o,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var a=null,l=null,u=function(){if(null!==a)try{var e=t.unstable_now();a(!0,e),a=null}catch(n){throw setTimeout(u,0),n}},c=Date.now();t.unstable_now=function(){return Date.now()-c},n=function(e){null!==a?setTimeout(n,0,e):(a=e,setTimeout(u,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},o=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,d=window.Date,f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)t.unstable_now=function(){return h.now()};else{var g=d.now();t.unstable_now=function(){return d.now()-g}}var v=!1,y=null,w=-1,b=5,_=0;o=function(){return t.unstable_now()>=_},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):b=0<e?Math.floor(1e3/e):5};var E=new MessageChannel,T=E.port2;E.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();_=e+b;try{y(!0,e)?T.postMessage(null):(v=!1,y=null)}catch(n){throw T.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,T.postMessage(null))},r=function(e,n){w=f((function(){e(t.unstable_now())}),n)},i=function(){p(w),w=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<k(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,s=e[o],a=o+1,l=e[a];if(void 0!==s&&0>k(s,n))void 0!==l&&0>k(l,s)?(e[r]=l,e[a]=n,r=a):(e[r]=s,e[o]=n,r=o);else{if(!(void 0!==l&&0>k(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function k(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],A=[],D=1,N=null,P=3,R=!1,O=!1,L=!1;function M(e){for(var t=x(A);null!==t;){if(null===t.callback)I(A);else{if(!(t.startTime<=e))break;I(A),t.sortIndex=t.expirationTime,S(C,t)}t=x(A)}}function F(e){if(L=!1,M(e),!O)if(null!==x(C))O=!0,n(V);else{var t=x(A);null!==t&&r(F,t.startTime-e)}}function V(e,n){O=!1,L&&(L=!1,i()),R=!0;var s=P;try{for(M(n),N=x(C);null!==N&&(!(N.expirationTime>n)||e&&!o());){var a=N.callback;if(null!==a){N.callback=null,P=N.priorityLevel;var l=a(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?N.callback=l:N===x(C)&&I(C),M(n)}else I(C);N=x(C)}if(null!==N)var u=!0;else{var c=x(A);null!==c&&r(F,c.startTime-n),u=!1}return u}finally{N=null,P=s,R=!1}}function U(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var B=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||R||(O=!0,n(V))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return x(C)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=B,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,o,s){var a=t.unstable_now();if("object"===typeof s&&null!==s){var l=s.delay;l="number"===typeof l&&0<l?a+l:a,s="number"===typeof s.timeout?s.timeout:U(e)}else s=U(e),l=a;return e={id:D++,callback:o,priorityLevel:e,startTime:l,expirationTime:s=l+s,sortIndex:-1},l>a?(e.sortIndex=l,S(A,e),null===x(C)&&e===x(A)&&(L?i():L=!0,r(F,l-a))):(e.sortIndex=s,S(C,e),O||R||(O=!0,n(V))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();M(e);var n=x(C);return n!==N&&null!==N&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<N.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},296:(e,t,n)=>{e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={};n.r(e),n.d(e,{FirebaseError:()=>b,SDK_VERSION:()=>be,_DEFAULT_ENTRY_NAME:()=>le,_addComponent:()=>de,_addOrOverwriteComponent:()=>fe,_apps:()=>ce,_clearComponents:()=>ve,_components:()=>he,_getProvider:()=>me,_registerComponent:()=>pe,_removeServiceInstance:()=>ge,deleteApp:()=>Se,getApp:()=>Ee,getApps:()=>Te,initializeApp:()=>_e,onLog:()=>Ie,registerVersion:()=>xe,setLogLevel:()=>ke});var t=n(791),r=n(164);const i=()=>t.createElement("div",{className:"title"},t.createElement("h1",null,"MediaGallery"),t.createElement("h2",null,"Your Pictures"),t.createElement("p",null,"your personalized Media Gallery")),o=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|s>>4;let h=(15&s)<<2|l>>6,d=63&l;a||(d=64,o||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(o(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==l)throw new a;const u=t<<2|o>>4;if(r.push(u),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==l){const e=s<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(e){return function(e){const t=o(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},u=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=c(e[n],t[n]));return e}const h=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,d=()=>{try{return h()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/mediagallery",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&u(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},f=e=>{const t=(e=>{var t,n;return null===(n=null===(t=d())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},p=()=>{var e;return null===(e=d())||void 0===e?void 0:e.config};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function g(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(o)),""].join(".")}function v(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){return!function(){var e;const t=null===(e=d())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function w(){try{return"object"===typeof indexedDB}catch(e){return!1}}class b extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,b.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_.prototype.create)}}class _{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(E,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new b(n,o,t)}}const E=/\{\$([^}]+)}/g;function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function S(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(x(n)&&x(o)){if(!S(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function x(e){return null!==e&&"object"===typeof e}function I(e,t){const n=new k(e,t);return n.subscribe.bind(n)}class k{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function C(){}function A(e){return e&&e._delegate?e._delegate:e}class D{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const N="[DEFAULT]";class P{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new m;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:N})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===N?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;return this.component?this.component.multipleInstances?e:N:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class R{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new P(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const O=[];var L;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(L||(L={}));const M={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},F=L.INFO,V={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},U=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=V[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class B{constructor(e){this.name=e,this._logLevel=F,this._logHandler=U,this._userLogHandler=null,O.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in L))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?M[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...t),this._logHandler(this,L.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...t),this._logHandler(this,L.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.INFO,...t),this._logHandler(this,L.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.WARN,...t),this._logHandler(this,L.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,L.ERROR,...t),this._logHandler(this,L.ERROR,...t)}}const z=(e,t)=>t.some((t=>e instanceof t));let j,q;const G=new WeakMap,K=new WeakMap,H=new WeakMap,Q=new WeakMap,W=new WeakMap;let Y={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return K.get(e);if("objectStoreNames"===t)return e.objectStoreNames||H.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return J(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function X(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(q||(q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Z(this),n),J(G.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return J(e.apply(Z(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Z(this),t,...r);return H.set(o,t.sort?t.sort():[t]),J(o)}}function $(e){return"function"===typeof e?X(e):(e instanceof IDBTransaction&&function(e){if(K.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));K.set(e,t)}(e),z(e,j||(j=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Y):e)}function J(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(J(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&G.set(t,e)})).catch((()=>{})),W.set(t,e),t}(e);if(Q.has(e))return Q.get(e);const t=$(e);return t!==e&&(Q.set(e,t),W.set(t,e)),t}const Z=e=>W.get(e);const ee=["get","getKey","getAll","getAllKeys","count"],te=["put","add","delete","clear"],ne=new Map;function re(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ne.get(t))return ne.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=te.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ee.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return ne.set(t,o),o}Y=(e=>({...e,get:(t,n,r)=>re(t,n)||e.get(t,n,r),has:(t,n)=>!!re(t,n)||e.has(t,n)}))(Y);class ie{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const oe="@firebase/app",se="0.9.26",ae=new B("@firebase/app"),le="[DEFAULT]",ue={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ce=new Map,he=new Map;function de(e,t){try{e.container.addComponent(t)}catch(n){ae.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function fe(e,t){e.container.addOrOverwriteComponent(t)}function pe(e){const t=e.name;if(he.has(t))return ae.debug("There were multiple attempts to register component ".concat(t,".")),!1;he.set(t,e);for(const n of ce.values())de(n,e);return!0}function me(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ge(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:le;me(e,t).clearInstance(n)}function ve(){he.clear()}const ye=new _("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class we{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new D("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ye.create("app-deleted",{appName:this._name})}}const be="10.7.2";function _e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:le,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw ye.create("bad-app-name",{appName:String(i)});if(n||(n=p()),!n)throw ye.create("no-options");const o=ce.get(i);if(o){if(S(n,o.options)&&S(r,o.config))return o;throw ye.create("duplicate-app",{appName:i})}const s=new R(i);for(const l of he.values())s.addComponent(l);const a=new we(n,r,s);return ce.set(i,a),a}function Ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le;const t=ce.get(e);if(!t&&e===le&&p())return _e();if(!t)throw ye.create("no-app",{appName:e});return t}function Te(){return Array.from(ce.values())}async function Se(e){const t=e.name;ce.has(t)&&(ce.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function xe(e,t,n){var r;let i=null!==(r=ue[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ae.warn(e.join(" "))}pe(new D("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Ie(e,t){if(null!==e&&"function"!==typeof e)throw ye.create("invalid-log-argument");!function(e,t){for(const n of O){let r=null;t&&t.level&&(r=M[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];const a=o.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:L[n].toLowerCase(),message:a,args:o,type:t.name})}}}(e,t)}function ke(e){var t;t=e,O.forEach((e=>{e.setLogLevel(t)}))}const Ce="firebase-heartbeat-database",Ae=1,De="firebase-heartbeat-store";let Ne=null;function Pe(){return Ne||(Ne=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=J(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(J(s.result),e.oldVersion,e.newVersion,J(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Ce,Ae,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(De)}catch(n){console.warn(n)}}}).catch((e=>{throw ye.create("idb-open",{originalErrorMessage:e.message})}))),Ne}async function Re(e,t){try{const n=(await Pe()).transaction(De,"readwrite"),r=n.objectStore(De);await r.put(t,Oe(e)),await n.done}catch(n){if(n instanceof b)ae.warn(n.message);else{const e=ye.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ae.warn(e.message)}}}function Oe(e){return"".concat(e.name,"!").concat(e.options.appId)}class Le{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Fe(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Me();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Me(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Ve(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ve(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=l(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Me(){return(new Date).toISOString().substring(0,10)}class Fe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!w()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Pe();return await t.transaction(De).objectStore(De).get(Oe(e))}catch(t){if(t instanceof b)ae.warn(t.message);else{const e=ye.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ae.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ve(e){return l(JSON.stringify({version:2,heartbeats:e})).length}var Ue;Ue="",pe(new D("platform-logger",(e=>new ie(e)),"PRIVATE")),pe(new D("heartbeat",(e=>new Le(e)),"PRIVATE")),xe(oe,se,Ue),xe(oe,se,"esm2017"),xe("fire-js","");class Be{constructor(e,t){this._delegate=e,this.firebase=t,de(e,new D("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Se(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){de(this._delegate,e)}_addOrOverwriteComponent(e){fe(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ze=new _("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const je=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=_e(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(T(n,i.name))return n[i.name];const o=new t(i,r);return n[i.name]=o,o},app:i,registerVersion:xe,setLogLevel:ke,onLog:Ie,apps:null,SDK_VERSION:be,INTERNAL:{registerComponent:function(e){const n=e.name,o=n.replace("-compat","");if(pe(e)&&"PUBLIC"===e.type){const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw ze.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==e.serviceProps&&c(s,e.serviceProps),r[o]=s,t.prototype[o]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!T(n,e=e||le))throw ze.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Be);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){c(n,e)},createSubscribe:I,ErrorFactory:_,deepExtend:c}),n}(),qe=new B("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){qe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&qe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ge=je;!function(e){xe("@firebase/app-compat","0.2.26",e)}();Ge.registerVersion("firebase","10.7.2","app-compat");const Ke="firebasestorage.googleapis.com",He="storageBucket";class Qe extends b{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Xe(e),"Firebase Storage: ".concat(t," (").concat(Xe(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xe(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var We,Ye;function Xe(e){return"storage/"+e}function $e(){return new Qe(We.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Je(){return new Qe(We.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ze(){return new Qe(We.CANCELED,"User canceled the upload/download.")}function et(){return new Qe(We.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function tt(e){return new Qe(We.INVALID_ARGUMENT,e)}function nt(){return new Qe(We.APP_DELETED,"The Firebase app was deleted.")}function rt(e){return new Qe(We.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function it(e,t){return new Qe(We.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function ot(e){throw new Qe(We.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(We||(We={}));class st{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=st.makeFromUrl(e,t)}catch(i){return new st(e,"")}if(""===n.path)return n;throw r=e,new Qe(We.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===Ke?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new st(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Qe(We.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class at{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function lt(e){return"string"===typeof e||e instanceof String}function ut(e){return ct()&&e instanceof Blob}function ct(){return"undefined"!==typeof Blob}function ht(e,t,n,r){if(r<t)throw tt("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw tt("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function dt(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function ft(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function pt(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Ye||(Ye={}));class mt{constructor(e,t,n,r,i,o,s,a,l,u,c){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=c,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new gt(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Ye.NO_ERROR,i=n.getStatus();if(!t||pt(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Ye.ABORT;return void e(!1,new gt(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new gt(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(o){r(o)}else if(null!==i){const e=$e();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?nt():Ze())}else{r(Je())}};this.canceled_?t(0,new gt(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return 2===a}let u=!1;function c(){if(!u){u=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){o&&clearTimeout(o)}function f(e){if(u)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void c.call(null,e,...n);if(l()||s)return d(),void c.call(null,e,...n);let o;r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),h(o)}let p=!1;function m(e){p||(p=!0,d(),u||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),o=setTimeout((()=>{s=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class gt{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function vt(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function yt(){const e=vt();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(ct())return new Blob(n);throw new Qe(We.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function wt(e){if("undefined"===typeof atob)throw t="base-64",new Qe(We.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const bt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _t{constructor(e,t){this.data=e,this.contentType=t||null}}function Et(e,t){switch(e){case bt.RAW:return new _t(Tt(t));case bt.BASE64:case bt.BASE64URL:return new _t(St(e,t));case bt.DATA_URL:return new _t(function(e){const t=new xt(e);return t.base64?St(bt.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw it(bt.DATA_URL,"Malformed data URL.")}return Tt(t)}(t.rest)}(t),new xt(t).contentType)}throw $e()}function Tt(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function St(e,t){switch(e){case bt.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw it(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case bt.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw it(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=wt(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw it(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}class xt{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw it(bt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class It{constructor(e,t){let n=0,r="";ut(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(ut(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new It(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new It(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(ct()){const e=t.map((e=>e instanceof It?e.data_:e));return new It(yt.apply(null,e))}{const e=t.map((e=>lt(e)?Et(bt.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new It(r,!0)}}uploadData(){return this.data_}}function kt(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Ct(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function At(e,t){return t}class Dt{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||At}}let Nt=null;function Pt(){if(Nt)return Nt;const e=[];e.push(new Dt("bucket")),e.push(new Dt("generation")),e.push(new Dt("metageneration")),e.push(new Dt("name","fullPath",!0));const t=new Dt("name");t.xform=function(e,t){return function(e){return!lt(e)||e.length<2?e:Ct(e)}(t)},e.push(t);const n=new Dt("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Dt("timeCreated")),e.push(new Dt("updated")),e.push(new Dt("md5Hash",null,!0)),e.push(new Dt("cacheControl",null,!0)),e.push(new Dt("contentDisposition",null,!0)),e.push(new Dt("contentEncoding",null,!0)),e.push(new Dt("contentLanguage",null,!0)),e.push(new Dt("contentType",null,!0)),e.push(new Dt("metadata","customMetadata",!0)),Nt=e,Nt}function Rt(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new st(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Ot(e,t,n){const r=kt(t);if(null===r)return null;return Rt(e,r,n)}function Lt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const Mt="prefixes",Ft="items";function Vt(e,t,n){const r=kt(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Mt])for(const i of n[Mt]){const n=i.replace(/\/$/,""),o=e._makeStorageReference(new st(t,n));r.prefixes.push(o)}if(n[Ft])for(const i of n[Ft]){const n=e._makeStorageReference(new st(t,i.name));r.items.push(n)}return r}(e,t,r)}class Ut{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Bt(e){if(!e)throw $e()}function zt(e,t){return function(n,r){const i=Ot(e,r,t);return Bt(null!==i),i}}function jt(e,t){return function(n,r){const i=Ot(e,r,t);return Bt(null!==i),function(e,t,n,r){const i=kt(t);if(null===i)return null;if(!lt(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map((t=>{const i=e.bucket,o=e.fullPath;return dt("/b/"+s(i)+"/o/"+s(o),n,r)+ft({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function qt(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Qe(We.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Qe(We.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new Qe(We.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Qe(We.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Gt(e){const t=qt(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new Qe(We.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Kt(e,t,n){const r=dt(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new Ut(r,"GET",zt(e,n),i);return o.errorHandler=Gt(t),o}function Ht(e,t,n,r,i){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=dt(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new Ut(s,"GET",function(e,t){return function(n,r){const i=Vt(e,t,r);return Bt(null!==i),i}}(e,t.bucket),a);return l.urlParams=o,l.errorHandler=qt(t),l}function Qt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Wt(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;const l=Qt(t,r,i),u="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Lt(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",c="\r\n--"+a+"--",h=It.getBlob(u,r,c);if(null===h)throw et();const d={name:l.fullPath},f=dt(o,e.host,e._protocol),p=e.maxUploadRetryTime,m=new Ut(f,"POST",zt(e,n),p);return m.urlParams=d,m.headers=s,m.body=h.uploadData(),m.errorHandler=qt(t),m}class Yt{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function Xt(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Bt(!1)}return Bt(!!n&&-1!==(t||["active"]).indexOf(n)),n}const $t=262144;function Jt(e,t,n,r,i,o,s,a){const l=new Yt(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new Qe(We.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const u=l.total-l.current;let c=u;i>0&&(c=Math.min(c,i));const h=l.current,d=h+c;let f="";f=0===c?"finalize":u===c?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(l.current)},m=r.slice(h,d);if(null===m)throw et();const g=t.maxUploadRetryTime,v=new Ut(n,"POST",(function(e,n){const i=Xt(e,["active","final"]),s=l.current+c,a=r.size();let u;return u="final"===i?zt(t,o)(e,n):null,new Yt(s,a,"final"===i,u)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=a||null,v.errorHandler=qt(e),v}const Zt={STATE_CHANGED:"state_changed"},en={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function tn(e){switch(e){case"running":case"pausing":case"canceling":return en.RUNNING;case"paused":return en.PAUSED;case"success":return en.SUCCESS;case"canceled":return en.CANCELED;default:return en.ERROR}}class nn{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function rn(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let on=null;class sn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ye.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Ye.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Ye.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw ot("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ot("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ot("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw ot("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ot("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class an extends sn{initXhr(){this.xhr_.responseType="text"}}function ln(){return on?on():new an}class un{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Pt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(We.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(pt(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=Je()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(We.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s=Qt(t,r,i),a={name:s.fullPath},l=dt(o,e.host,e._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},c=Lt(s,n),h=e.maxUploadRetryTime,d=new Ut(l,"POST",(function(e){let t;Xt(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Bt(!1)}return Bt(lt(t)),t}),h);return d.urlParams=a,d.headers=u,d.body=c,d.errorHandler=qt(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,ln,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,o=new Ut(n,"POST",(function(e){const t=Xt(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){Bt(!1)}n||Bt(!1);const i=Number(n);return Bt(!isNaN(i)),new Yt(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=qt(t),o}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,ln,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=$t*this._chunkMultiplier,t=new Yt(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let o;try{o=Jt(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const s=this._ref.storage._makeRequest(o,ln,r,i,!1);this._request=s,s.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*($t*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=Kt(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,ln,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=Wt(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,ln,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ze(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=tn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new nn(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(tn(this._state)){case en.SUCCESS:rn(this._resolve.bind(null,this.snapshot))();break;case en.CANCELED:case en.ERROR:rn(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(tn(this._state)){case en.RUNNING:case en.PAUSED:e.next&&rn(e.next.bind(e,this.snapshot))();break;case en.SUCCESS:e.complete&&rn(e.complete.bind(e))();break;default:e.error&&rn(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class cn{constructor(e,t){this._service=e,this._location=t instanceof st?t:st.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new cn(e,t)}get root(){const e=new st(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ct(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new st(this._location.bucket,e);return new cn(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw rt(e)}}function hn(e){const t={prefixes:[],items:[]};return dn(e,t).then((()=>t))}async function dn(e,t,n){const r={pageToken:n},i=await fn(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await dn(e,t,i.nextPageToken)}function fn(e,t){null!=t&&"number"===typeof t.maxResults&&ht("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=Ht(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,ln)}function pn(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=dt(t.fullServerUrl(),e.host,e._protocol),o=Lt(n,r),s=e.maxOperationRetryTime,a=new Ut(i,"PATCH",zt(e,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Gt(t),a}(e.storage,e._location,t,Pt());return e.storage.makeRequestWithTokens(n,ln)}function mn(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=dt(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new Ut(r,"GET",jt(e,n),i);return o.errorHandler=Gt(t),o}(e.storage,e._location,Pt());return e.storage.makeRequestWithTokens(t,ln).then((e=>{if(null===e)throw new Qe(We.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function gn(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=dt(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Ut(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Gt(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,ln)}function vn(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new st(e._location.bucket,n);return new cn(e.storage,r)}function yn(e,t){if(e instanceof _n){const n=e;if(null==n._bucket)throw new Qe(We.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+He+"' property when initializing the app?");const r=new cn(n,n._bucket);return null!=t?yn(r,t):r}return void 0!==t?vn(e,t):e}function wn(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof _n)return new cn(e,t);throw tt("To use ref(service, url), the first argument must be a Storage instance.")}return yn(e,t)}function bn(e,t){const n=null===t||void 0===t?void 0:t[He];return null==n?null:st.makeFromBucketSpec(n,e)}class _n{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Ke,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?st.makeFromBucketSpec(r,this._host):bn(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=st.makeFromBucketSpec(this._url,e):this._bucket=bn(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ht("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ht("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cn(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new at(nt());{const o=function(e,t,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=ft(e.urlParams),l=e.url+a,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new mt(l,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const En="@firebase/storage",Tn="0.12.0",Sn="storage";function xn(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new un(e,new It(t),n)}(e=A(e),t,n)}function In(e){return function(e){e._throwIfRoot("getMetadata");const t=Kt(e.storage,e._location,Pt());return e.storage.makeRequestWithTokens(t,ln)}(e=A(e))}function kn(e){return gn(e=A(e))}function Cn(e,t){return wn(e=A(e),t)}function An(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:g(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function Dn(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new _n(r,i,o,n,be)}pe(new D(Sn,Dn,"PUBLIC").setMultipleInstances(!0)),xe(En,Tn,""),xe(En,Tn,"esm2017");class Nn{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Pn{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Nn(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new Nn(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new Nn(e,this,this._ref)):{next:t.next?e=>t.next(new Nn(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class Rn{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new On(e,this._service)))}get items(){return this._delegate.items.map((e=>new On(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class On{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return vn(e,t)}(this._delegate,e);return new On(t,this.storage)}get root(){return new On(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new On(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Pn(xn(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bt.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=Et(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Pn(new un(this._delegate,new It(r.data,!0),i),this)}listAll(){return function(e){return hn(e=A(e))}(this._delegate).then((e=>new Rn(e,this.storage)))}list(e){return function(e,t){return fn(e=A(e),t)}(this._delegate,e||void 0).then((e=>new Rn(e,this.storage)))}getMetadata(){return In(this._delegate)}updateMetadata(e){return function(e,t){return pn(e=A(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return mn(e=A(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),kn(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw rt(e)}}class Ln{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Mn(e))throw tt("ref() expected a child path but got a URL, use refFromURL instead.");return new On(Cn(this._delegate,e),this)}refFromURL(e){if(!Mn(e))throw tt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{st.makeFromUrl(e,this._delegate.host)}catch(t){throw tt("refFromUrl() expected a valid full URL but got an invalid one.")}return new On(Cn(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};An(this._delegate,e,t,n)}}function Mn(e){return/^[A-Za-z]+:\/\//.test(e)}function Fn(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new Ln(r,i)}!function(e){const t={TaskState:en,TaskEvent:Zt,StringFormat:bt,Storage:Ln,Reference:On};e.INTERNAL.registerComponent(new D("storage-compat",Fn,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.3")}(Ge);var Vn,Un="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Bn={},zn=zn||{},jn=Un||self;function qn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Gn(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Kn="closure_uid_"+(1e9*Math.random()>>>0),Hn=0;function Qn(e,t,n){return e.call.apply(e.bind,arguments)}function Wn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Yn(e,t,n){return(Yn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Qn:Wn).apply(null,arguments)}function Xn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function $n(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function Jn(){this.s=this.s,this.o=this.o}Jn.prototype.s=!1,Jn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,Kn)&&e[Kn]||(e[Kn]=++Hn)}(this)},Jn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Zn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function er(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function tr(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(qn(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function nr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}nr.prototype.h=function(){this.defaultPrevented=!0};var rr=function(){if(!jn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};jn.addEventListener("test",e,t),jn.removeEventListener("test",e,t)}catch(iE){}return e}();function ir(e){return/^[\s\xa0]*$/.test(e)}function or(){var e=jn.navigator;return e&&(e=e.userAgent)?e:""}function sr(e){return-1!=or().indexOf(e)}function ar(e){return ar[" "](e),e}ar[" "]=function(){};var lr,ur,cr=sr("Opera"),hr=sr("Trident")||sr("MSIE"),dr=sr("Edge"),fr=dr||hr,pr=sr("Gecko")&&!(-1!=or().toLowerCase().indexOf("webkit")&&!sr("Edge"))&&!(sr("Trident")||sr("MSIE"))&&!sr("Edge"),mr=-1!=or().toLowerCase().indexOf("webkit")&&!sr("Edge");function gr(){var e=jn.document;return e?e.documentMode:void 0}e:{var vr="",yr=function(){var e=or();return pr?/rv:([^\);]+)(\)|;)/.exec(e):dr?/Edge\/([\d\.]+)/.exec(e):hr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):mr?/WebKit\/(\S+)/.exec(e):cr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(yr&&(vr=yr?yr[1]:""),hr){var wr=gr();if(null!=wr&&wr>parseFloat(vr)){lr=String(wr);break e}}lr=vr}if(jn.document&&hr){var br=gr();ur=br||(parseInt(lr,10)||void 0)}else ur=void 0;var _r=ur;function Er(e,t){if(nr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(pr){e:{try{ar(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Tr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Er.$.h.call(this)}}$n(Er,nr);var Tr={2:"touch",3:"pen",4:"mouse"};Er.prototype.h=function(){Er.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Sr="closure_listenable_"+(1e6*Math.random()|0),xr=0;function Ir(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++xr,this.fa=this.ia=!1}function kr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Cr(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Ar(e){const t={};for(const n in e)t[n]=e[n];return t}const Dr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nr(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Dr.length;t++)n=Dr[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Pr(e){this.src=e,this.g={},this.h=0}function Rr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Zn(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(kr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Or(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}Pr.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=Or(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new Ir(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var Lr="closure_lm_"+(1e6*Math.random()|0),Mr={};function Fr(e,t,n,r,i){if(r&&r.once)return Ur(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)Fr(e,t[o],n,r,i);return null}return n=Hr(n),e&&e[Sr]?e.O(t,n,Gn(r)?!!r.capture:!!r,i):Vr(e,t,n,!1,r,i)}function Vr(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=Gn(i)?!!i.capture:!!i,a=Gr(e);if(a||(e[Lr]=a=new Pr(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=qr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)rr||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(jr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ur(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Ur(e,t[o],n,r,i);return null}return n=Hr(n),e&&e[Sr]?e.P(t,n,Gn(r)?!!r.capture:!!r,i):Vr(e,t,n,!0,r,i)}function Br(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Br(e,t[o],n,r,i);else r=Gn(r)?!!r.capture:!!r,n=Hr(n),e&&e[Sr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Or(o=e.g[t],n,r,i))&&(kr(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Gr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Or(t,n,r,i)),(n=-1<e?t[e]:null)&&zr(n))}function zr(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Sr])Rr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(jr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Gr(t))?(Rr(n,e),0==n.h&&(n.src=null,t[Lr]=null)):kr(e)}}}function jr(e){return e in Mr?Mr[e]:Mr[e]="on"+e}function qr(e,t){if(e.fa)e=!0;else{t=new Er(t,this);var n=e.listener,r=e.la||e.src;e.ia&&zr(e),e=n.call(r,t)}return e}function Gr(e){return(e=e[Lr])instanceof Pr?e:null}var Kr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hr(e){return"function"===typeof e?e:(e[Kr]||(e[Kr]=function(t){return e.handleEvent(t)}),e[Kr])}function Qr(){Jn.call(this),this.i=new Pr(this),this.S=this,this.J=null}function Wr(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new nr(t,e);else if(t instanceof nr)t.target=t.target||e;else{var i=t;Nr(t=new nr(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=Yr(s,r,!0,t)&&i}if(i=Yr(s=t.g=e,r,!0,t)&&i,i=Yr(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Yr(s=t.g=n[o],r,!1,t)&&i}function Yr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&Rr(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}$n(Qr,Jn),Qr.prototype[Sr]=!0,Qr.prototype.removeEventListener=function(e,t,n,r){Br(this,e,t,n,r)},Qr.prototype.N=function(){if(Qr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)kr(n[r]);delete t.g[e],t.h--}}this.J=null},Qr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Qr.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Xr=jn.JSON.stringify;function $r(){var e=ii;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Jr=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Zr),(e=>e.reset()));class Zr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ei(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ti(e){jn.setTimeout((()=>{throw e}),0)}let ni,ri=!1,ii=new class{constructor(){this.h=this.g=null}add(e,t){const n=Jr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},oi=()=>{const e=jn.Promise.resolve(void 0);ni=()=>{e.then(si)}};var si=()=>{for(var e;e=$r();){try{e.h.call(e.g)}catch(iE){ti(iE)}var t=Jr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ri=!1};function ai(e,t){Qr.call(this),this.h=e||1,this.g=t||jn,this.j=Yn(this.qb,this),this.l=Date.now()}function li(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function ui(e,t,n){if("function"===typeof e)n&&(e=Yn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Yn(e.handleEvent,e)}return 2147483647<Number(t)?-1:jn.setTimeout(e,t||0)}function ci(e){e.g=ui((()=>{e.g=null,e.i&&(e.i=!1,ci(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}$n(ai,Qr),(Vn=ai.prototype).ga=!1,Vn.T=null,Vn.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Wr(this,"tick"),this.ga&&(li(this),this.start()))}},Vn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Vn.N=function(){ai.$.N.call(this),li(this),delete this.g};class hi extends Jn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ci(this)}N(){super.N(),this.g&&(jn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function di(e){Jn.call(this),this.h=e,this.g={}}$n(di,Jn);var fi=[];function pi(e,t,n,r){Array.isArray(n)||(n&&(fi[0]=n.toString()),n=fi);for(var i=0;i<n.length;i++){var o=Fr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function mi(e){Cr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&zr(e)}),e),e.g={}}function gi(){this.g=!0}function vi(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Xr(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}di.prototype.N=function(){di.$.N.call(this),mi(this)},di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gi.prototype.Ea=function(){this.g=!1},gi.prototype.info=function(){};var yi={},wi=null;function bi(){return wi=wi||new Qr}function _i(e){nr.call(this,yi.Ta,e)}function Ei(e){const t=bi();Wr(t,new _i(t))}function Ti(e,t){nr.call(this,yi.STAT_EVENT,e),this.stat=t}function Si(e){const t=bi();Wr(t,new Ti(t,e))}function xi(e,t){nr.call(this,yi.Ua,e),this.size=t}function Ii(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return jn.setTimeout((function(){e()}),t)}yi.Ta="serverreachability",$n(_i,nr),yi.STAT_EVENT="statevent",$n(Ti,nr),yi.Ua="timingevent",$n(xi,nr);var ki={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ci={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ai(){}function Di(e){return e.h||(e.h=e.i())}function Ni(){}Ai.prototype.h=null;var Pi,Ri={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Oi(){nr.call(this,"d")}function Li(){nr.call(this,"c")}function Mi(){}function Fi(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new di(this),this.P=Ui,e=fr?125:void 0,this.V=new ai(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Vi}function Vi(){this.i=null,this.g="",this.h=!1}$n(Oi,nr),$n(Li,nr),$n(Mi,Ai),Mi.prototype.g=function(){return new XMLHttpRequest},Mi.prototype.i=function(){return{}},Pi=new Mi;var Ui=45e3,Bi={},zi={};function ji(e,t,n){e.L=1,e.A=ao(no(t)),e.u=n,e.S=!0,qi(e,null)}function qi(e,t){e.G=Date.now(),Qi(e),e.B=no(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),_o(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Vi,e.g=_s(e.l,n?t:null,!e.u),0<e.O&&(e.M=new hi(Yn(e.Pa,e,e.g),e.O)),pi(e.U,e.g,"readystatechange",e.nb),t=e.I?Ar(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Ei(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");s=2<=h.length&&"type"==h[1]?s+(c+"=")+u+"&":s+(c+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Gi(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Ki(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Hi(e,n),r==zi){4==t&&(e.s=4,Si(14),i=!1),vi(e.j,e.m,null,"[Incomplete Response]");break}if(r==Bi){e.s=4,Si(15),vi(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}vi(e.j,e.m,r,null),Ji(e,r)}Gi(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Si(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),fs(t),t.M=!0,Si(11))):(vi(e.j,e.m,n,"[Invalid Chunked Response]"),$i(e),Xi(e))}function Hi(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?zi:(n=Number(t.substring(n,r)),isNaN(n)?Bi:(r+=1)+n>t.length?zi:(t=t.slice(r,r+n),e.o=r+n,t))}function Qi(e){e.Y=Date.now()+e.P,Wi(e,e.P)}function Wi(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Ii(Yn(e.lb,e),t)}function Yi(e){e.C&&(jn.clearTimeout(e.C),e.C=null)}function Xi(e){0==e.l.H||e.J||gs(e.l,e)}function $i(e){Yi(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,li(e.V),mi(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Ji(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Co(n.i,e)))if(!e.K&&Co(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;ms(n),os(n)}ds(n),Si(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ii(Yn(n.ib,n),6e3));if(1>=ko(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else ys(n,11)}else if((e.K||n.g==e)&&ms(n),!ir(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Ao(o,o.h),o.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,so(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=bs(r,r.J?r.pa:null,r.Y),s.K){Do(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.C&&(Yi(a),Qi(a)),r.g=s}else hs(r);0<n.j.length&&as(n)}else"stop"!=u[0]&&"close"!=u[0]||ys(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?ys(n,7):is(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Ei()}catch(u){}}function Zi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(qn(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(qn(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(qn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(Vn=Fi.prototype).setTimeout=function(e){this.P=e},Vn.nb=function(e){e=e.target;const t=this.M;t&&3==Jo(e)?t.l():this.Pa(e)},Vn.Pa=function(e){try{if(e==this.g)e:{const c=Jo(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||fr||this.g&&(this.h.h||this.g.ja()||Zo(this.g)))){this.J||4!=c||7==t||Ei(),Yi(this);var n=this.g.da();this.ca=n;t:if(Gi(this)){var r=Zo(this.g);e="";var i=r.length,o=4==Jo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){$i(this),Xi(this);var s="";break t}this.h.i=new jn.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ir(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.s=3,Si(12),$i(this),Xi(this);break e}vi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ji(this,n)}this.S?(Ki(this,c,s),fr&&this.i&&3==c&&(pi(this.U,this.V,"tick",this.mb),this.V.start())):(vi(this.j,this.m,s,null),Ji(this,s)),4==c&&$i(this),this.i&&!this.J&&(4==c?gs(this.l,this):(this.i=!1,Qi(this)))}else(function(e){const t={};e=(e.g&&2<=Jo(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(ir(e[r]))continue;var n=ei(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Si(12)):(this.s=0,Si(13)),$i(this),Xi(this)}}}catch(c){}},Vn.mb=function(){if(this.g){var e=Jo(this.g),t=this.g.ja();this.o<t.length&&(Yi(this),Ki(this,e,t),this.i&&4!=e&&Qi(this))}},Vn.cancel=function(){this.J=!0,$i(this)},Vn.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Ei(),Si(17)),$i(this),this.s=2,Xi(this)):Wi(this,this.Y-e)};var eo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function to(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof to){this.h=e.h,ro(this,e.j),this.s=e.s,this.g=e.g,io(this,e.m),this.l=e.l;var t=e.i,n=new vo;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),oo(this,n),this.o=e.o}else e&&(t=String(e).match(eo))?(this.h=!1,ro(this,t[1]||"",!0),this.s=lo(t[2]||""),this.g=lo(t[3]||"",!0),io(this,t[4]),this.l=lo(t[5]||"",!0),oo(this,t[6]||"",!0),this.o=lo(t[7]||"")):(this.h=!1,this.i=new vo(null,this.h))}function no(e){return new to(e)}function ro(e,t,n){e.j=n?lo(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function io(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function oo(e,t,n){t instanceof vo?(e.i=t,function(e,t){t&&!e.j&&(yo(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(wo(this,t),_o(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=uo(t,mo)),e.i=new vo(t,e.h))}function so(e,t,n){e.i.set(t,n)}function ao(e){return so(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function lo(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function uo(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,co),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function co(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}to.prototype.toString=function(){var e=[],t=this.j;t&&e.push(uo(t,ho,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(uo(t,ho,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(uo(n,"/"==n.charAt(0)?po:fo,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",uo(n,go)),e.join("")};var ho=/[#\/\?@]/g,fo=/[#\?:]/g,po=/[#\?]/g,mo=/[#\?@]/g,go=/#/g;function vo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function yo(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function wo(e,t){yo(e),t=Eo(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function bo(e,t){return yo(e),t=Eo(e,t),e.g.has(t)}function _o(e,t,n){wo(e,t),0<n.length&&(e.i=null,e.g.set(Eo(e,t),er(n)),e.h+=n.length)}function Eo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Vn=vo.prototype).add=function(e,t){yo(this),this.i=null,e=Eo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Vn.forEach=function(e,t){yo(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Vn.ta=function(){yo(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Vn.Z=function(e){yo(this);let t=[];if("string"===typeof e)bo(this,e)&&(t=t.concat(this.g.get(Eo(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Vn.set=function(e,t){return yo(this),this.i=null,bo(this,e=Eo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Vn.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Vn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var To=class{constructor(e,t){this.g=e,this.map=t}};function So(e){this.l=e||xo,jn.PerformanceNavigationTiming?e=0<(e=jn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(jn.g&&jn.g.Ka&&jn.g.Ka()&&jn.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var xo=10;function Io(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ko(e){return e.h?1:e.g?e.g.size:0}function Co(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ao(e,t){e.g?e.g.add(t):e.h=t}function Do(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function No(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return er(e.i)}So.prototype.cancel=function(){if(this.i=No(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Po=class{stringify(e){return jn.JSON.stringify(e,void 0)}parse(e){return jn.JSON.parse(e,void 0)}};function Ro(){this.g=new Po}function Oo(e,t,n){const r=n||"";try{Zi(e,(function(e,n){let i=e;Gn(e)&&(i=Xr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Lo(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function Mo(e){this.l=e.ec||null,this.j=e.ob||!1}function Fo(e,t){Qr.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Vo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$n(Mo,Ai),Mo.prototype.g=function(){return new Fo(this.l,this.j)},Mo.prototype.i=function(e){return function(){return e}}({}),$n(Fo,Qr);var Vo=0;function Uo(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Bo(e){e.readyState=4,e.l=null,e.j=null,e.A=null,zo(e)}function zo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Vn=Fo.prototype).open=function(e,t){if(this.readyState!=Vo)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,zo(this)},Vn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||jn).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Vn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bo(this)),this.readyState=Vo},Vn.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,zo(this)),this.g&&(this.readyState=3,zo(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof jn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Uo(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Vn.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Bo(this):zo(this),3==this.readyState&&Uo(this)}},Vn.Za=function(e){this.g&&(this.response=this.responseText=e,Bo(this))},Vn.Ya=function(e){this.g&&(this.response=e,Bo(this))},Vn.ka=function(){this.g&&Bo(this)},Vn.setRequestHeader=function(e,t){this.v.append(e,t)},Vn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Vn.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Fo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var jo=jn.JSON.parse;function qo(e){Qr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Go,this.L=this.M=!1}$n(qo,Qr);var Go="",Ko=/^https?$/i,Ho=["POST","PUT"];function Qo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Wo(e),Xo(e)}function Wo(e){e.F||(e.F=!0,Wr(e,"complete"),Wr(e,"error"))}function Yo(e){if(e.h&&"undefined"!=typeof zn&&(!e.C[1]||4!=Jo(e)||2!=e.da()))if(e.v&&4==Jo(e))ui(e.La,0,e);else if(Wr(e,"readystatechange"),4==Jo(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(eo)[1]||null;!i&&jn.self&&jn.self.location&&(i=jn.self.location.protocol.slice(0,-1)),r=!Ko.test(i?i.toLowerCase():"")}n=r}if(n)Wr(e,"complete"),Wr(e,"success");else{e.m=6;try{var o=2<Jo(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",Wo(e)}}finally{Xo(e)}}}function Xo(e,t){if(e.g){$o(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Wr(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function $o(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(jn.clearTimeout(e.A),e.A=null)}function Jo(e){return e.g?e.g.readyState:0}function Zo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Go:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(sa){return null}}function es(e){let t="";return Cr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function ts(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=es(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):so(e,t,n))}function ns(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function rs(e){this.Ga=0,this.j=[],this.l=new gi,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ns("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ns("baseRetryDelayMs",5e3,e),this.hb=ns("retryDelaySeedMs",1e4,e),this.eb=ns("forwardChannelMaxRetries",2,e),this.xa=ns("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new So(e&&e.concurrentRequestLimit),this.Ja=new Ro,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function is(e){if(ss(e),3==e.H){var t=e.W++,n=no(e.I);if(so(n,"SID",e.K),so(n,"RID",t),so(n,"TYPE","terminate"),us(e,n),(t=new Fi(e,e.l,t)).L=2,t.A=ao(no(n)),n=!1,jn.navigator&&jn.navigator.sendBeacon)try{n=jn.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&jn.Image&&((new Image).src=t.A,n=!0),n||(t.g=_s(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Qi(t)}ws(e)}function os(e){e.g&&(fs(e),e.g.cancel(),e.g=null)}function ss(e){os(e),e.u&&(jn.clearTimeout(e.u),e.u=null),ms(e),e.i.cancel(),e.m&&("number"===typeof e.m&&jn.clearTimeout(e.m),e.m=null)}function as(e){if(!Io(e.i)&&!e.m){e.m=!0;var t=e.Na;ni||oi(),ri||(ni(),ri=!0),ii.add(t,e),e.C=0}}function ls(e,t){var n;n=t?t.m:e.W++;const r=no(e.I);so(r,"SID",e.K),so(r,"RID",n),so(r,"AID",e.V),us(e,r),e.o&&e.s&&ts(r,e.o,e.s),n=new Fi(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=cs(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ao(e.i,n),ji(n,r,t)}function us(e,t){e.na&&Cr(e.na,(function(e,n){so(t,n,e)})),e.h&&Zi({},(function(e,n){so(t,n,e)}))}function cs(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Yn(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{Oo(a,e,"req"+n+"_")}catch(Tl){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function hs(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ni||oi(),ri||(ni(),ri=!0),ii.add(t,e),e.A=0}}function ds(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Ii(Yn(e.Ma,e),vs(e,e.A)),e.A++,!0)}function fs(e){null!=e.B&&(jn.clearTimeout(e.B),e.B=null)}function ps(e){e.g=new Fi(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=no(e.wa);so(t,"RID","rpc"),so(t,"SID",e.K),so(t,"AID",e.V),so(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&so(t,"TO",e.qa),so(t,"TYPE","xmlhttp"),us(e,t),e.o&&e.s&&ts(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=ao(no(t)),n.u=null,n.S=!0,qi(n,e)}function ms(e){null!=e.v&&(jn.clearTimeout(e.v),e.v=null)}function gs(e,t){var n=null;if(e.g==t){ms(e),fs(e),e.g=null;var r=2}else{if(!Co(e.i,t))return;n=t.F,Do(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Wr(r=bi(),new xi(r,n)),as(e)}else hs(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(ko(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Ii(Yn(e.Na,e,t),vs(e,e.C)),e.C++,!0))}(e,t)||2==r&&ds(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ys(e,5);break;case 4:ys(e,10);break;case 3:ys(e,6);break;default:ys(e,2)}}function vs(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ys(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Yn(e.pb,e);n||(n=new to("//www.google.com/images/cleardot.gif"),jn.location&&"http"==jn.location.protocol||ro(n,"https"),ao(n)),function(e,t){const n=new gi;if(jn.Image){const r=new Image;r.onload=Xn(Lo,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Xn(Lo,n,r,"TestLoadImage: error",!1,t),r.onabort=Xn(Lo,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Xn(Lo,n,r,"TestLoadImage: timeout",!1,t),jn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Si(2);e.H=0,e.h&&e.h.za(t),ws(e),ss(e)}function ws(e){if(e.H=0,e.ma=[],e.h){const t=No(e.i);0==t.length&&0==e.j.length||(tr(e.ma,t),tr(e.ma,e.j),e.i.i.length=0,er(e.j),e.j.length=0),e.h.ya()}}function bs(e,t,n){var r=n instanceof to?no(n):new to(n);if(""!=r.g)t&&(r.g=t+"."+r.g),io(r,r.m);else{var i=jn.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new to(null);r&&ro(o,r),t&&(o.g=t),i&&io(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&so(r,n,t),so(r,"VER",e.ra),us(e,r),r}function _s(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new qo(new Mo({ob:n})):new qo(e.va)).Oa(e.J),t}function Es(){}function Ts(){if(hr&&!(10<=Number(_r)))throw Error("Environmental error: no available transport.")}function Ss(e,t){Qr.call(this),this.g=new rs(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ir(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ir(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ks(this)}function xs(e){Oi.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Is(){Li.call(this),this.status=1}function ks(e){this.g=e}function Cs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function As(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function Ds(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(Vn=qo.prototype).Oa=function(e){this.M=e},Vn.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Pi.g(),this.C=this.u?Di(this.u):Di(Pi),this.g.onreadystatechange=Yn(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void Qo(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=jn.FormData&&e instanceof jn.FormData,!(0<=Zn(Ho,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{$o(this),0<this.B&&((this.L=function(e){return hr&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yn(this.ua,this)):this.A=ui(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Qo(this,o)}},Vn.ua=function(){"undefined"!=typeof zn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wr(this,"timeout"),this.abort(8))},Vn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Wr(this,"complete"),Wr(this,"abort"),Xo(this))},Vn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xo(this,!0)),qo.$.N.call(this)},Vn.La=function(){this.s||(this.G||this.v||this.l?Yo(this):this.kb())},Vn.kb=function(){Yo(this)},Vn.isActive=function(){return!!this.g},Vn.da=function(){try{return 2<Jo(this)?this.g.status:-1}catch(nE){return-1}},Vn.ja=function(){try{return this.g?this.g.responseText:""}catch(nE){return""}},Vn.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),jo(t)}},Vn.Ia=function(){return this.m},Vn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Vn=rs.prototype).ra=8,Vn.H=1,Vn.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Fi(this,this.l,e);let o=this.s;if(this.U&&(o?(o=Ar(o),Nr(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=cs(this,i,t),so(n=no(this.I),"RID",e),so(n,"CVER",22),this.F&&so(n,"X-HTTP-Session-Id",this.F),us(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(es(o)))+"&"+t:this.o&&ts(n,this.o,o)),Ao(this.i,i),this.bb&&so(n,"TYPE","init"),this.P?(so(n,"$req",t),so(n,"SID","null"),i.aa=!0,ji(i,n,null)):ji(i,n,t),this.H=2}}else 3==this.H&&(e?ls(this,e):0==this.j.length||Io(this.i)||ls(this))},Vn.Ma=function(){if(this.u=null,ps(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ii(Yn(this.jb,this),e)}},Vn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Si(10),os(this),ps(this))},Vn.ib=function(){null!=this.v&&(this.v=null,os(this),ds(this),Si(19))},Vn.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Si(2)):(this.l.info("Failed to ping google.com"),Si(1))},Vn.isActive=function(){return!!this.h&&this.h.isActive(this)},(Vn=Es.prototype).Ba=function(){},Vn.Aa=function(){},Vn.za=function(){},Vn.ya=function(){},Vn.isActive=function(){return!0},Vn.Va=function(){},Ts.prototype.g=function(e,t){return new Ss(e,t)},$n(Ss,Qr),Ss.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Si(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=bs(e,null,e.Y),as(e)},Ss.prototype.close=function(){is(this.g)},Ss.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Xr(e),e=n);t.j.push(new To(t.fb++,e)),3==t.H&&as(t)},Ss.prototype.N=function(){this.g.h=null,delete this.j,is(this.g),delete this.g,Ss.$.N.call(this)},$n(xs,Oi),$n(Is,Li),$n(ks,Es),ks.prototype.Ba=function(){Wr(this.g,"a")},ks.prototype.Aa=function(e){Wr(this.g,new xs(e))},ks.prototype.za=function(e){Wr(this.g,new Is)},ks.prototype.ya=function(){Wr(this.g,"b")},$n(Cs,(function(){this.blockSize=-1})),Cs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Cs.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)As(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){As(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){As(this,r),i=0;break}}this.h=i,this.i+=t},Cs.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Ns={};function Ps(e){return-128<=e&&128>e?function(e,t){var n=Ns;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Ds([0|e],0>e?-1:0)})):new Ds([0|e],0>e?-1:0)}function Rs(e){if(isNaN(e)||!isFinite(e))return Ls;if(0>e)return Bs(Rs(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Os;return new Ds(t,0)}var Os=4294967296,Ls=Ps(0),Ms=Ps(1),Fs=Ps(16777216);function Vs(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Us(e){return-1==e.h}function Bs(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Ds(n,~e.h).add(Ms)}function zs(e,t){return e.add(Bs(t))}function js(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function qs(e,t){this.g=e,this.h=t}function Gs(e,t){if(Vs(t))throw Error("division by zero");if(Vs(e))return new qs(Ls,Ls);if(Us(e))return t=Gs(Bs(e),t),new qs(Bs(t.g),Bs(t.h));if(Us(t))return t=Gs(e,Bs(t)),new qs(Bs(t.g),t.h);if(30<e.g.length){if(Us(e)||Us(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Ms,r=t;0>=r.X(e);)n=Ks(n),r=Ks(r);var i=Hs(n,1),o=Hs(r,1);for(r=Hs(r,2),n=Hs(n,2);!Vs(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=Hs(r,1),n=Hs(n,1)}return t=zs(e,i.R(t)),new qs(i,t)}for(i=Ls;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=Rs(n)).R(t);Us(s)||0<s.X(e);)s=(o=Rs(n-=r)).R(t);Vs(o)&&(o=Ms),i=i.add(o),e=zs(e,s)}return new qs(i,e)}function Ks(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Ds(n,e.h)}function Hs(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new Ds(i,e.h)}(Vn=Ds.prototype).ea=function(){if(Us(this))return-Bs(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Os+r)*t,t*=Os}return e},Vn.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Vs(this))return"0";if(Us(this))return"-"+Bs(this).toString(e);for(var t=Rs(Math.pow(e,6)),n=this,r="";;){var i=Gs(n,t).g,o=((0<(n=zs(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Vs(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Vn.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Vn.X=function(e){return Us(e=zs(this,e))?-1:Vs(e)?0:1},Vn.abs=function(){return Us(this)?Bs(this):this},Vn.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new Ds(n,-2147483648&n[n.length-1]?-1:0)},Vn.R=function(e){if(Vs(this)||Vs(e))return Ls;if(Us(this))return Us(e)?Bs(this).R(Bs(e)):Bs(Bs(this).R(e));if(Us(e))return Bs(this.R(Bs(e)));if(0>this.X(Fs)&&0>e.X(Fs))return Rs(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=s*l,js(n,2*r+2*i),n[2*r+2*i+1]+=o*l,js(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,js(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,js(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Ds(n,0)},Vn.gb=function(e){return Gs(this,e).h},Vn.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Ds(n,this.h&e.h)},Vn.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Ds(n,this.h|e.h)},Vn.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Ds(n,this.h^e.h)},Ts.prototype.createWebChannel=Ts.prototype.g,Ss.prototype.send=Ss.prototype.u,Ss.prototype.open=Ss.prototype.m,Ss.prototype.close=Ss.prototype.close,ki.NO_ERROR=0,ki.TIMEOUT=8,ki.HTTP_ERROR=6,Ci.COMPLETE="complete",Ni.EventType=Ri,Ri.OPEN="a",Ri.CLOSE="b",Ri.ERROR="c",Ri.MESSAGE="d",Qr.prototype.listen=Qr.prototype.O,qo.prototype.listenOnce=qo.prototype.P,qo.prototype.getLastError=qo.prototype.Sa,qo.prototype.getLastErrorCode=qo.prototype.Ia,qo.prototype.getStatus=qo.prototype.da,qo.prototype.getResponseJson=qo.prototype.Wa,qo.prototype.getResponseText=qo.prototype.ja,qo.prototype.send=qo.prototype.ha,qo.prototype.setWithCredentials=qo.prototype.Oa,Cs.prototype.digest=Cs.prototype.l,Cs.prototype.reset=Cs.prototype.reset,Cs.prototype.update=Cs.prototype.j,Ds.prototype.add=Ds.prototype.add,Ds.prototype.multiply=Ds.prototype.R,Ds.prototype.modulo=Ds.prototype.gb,Ds.prototype.compare=Ds.prototype.X,Ds.prototype.toNumber=Ds.prototype.ea,Ds.prototype.toString=Ds.prototype.toString,Ds.prototype.getBits=Ds.prototype.D,Ds.fromNumber=Rs,Ds.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Bs(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Rs(Math.pow(n,8)),i=Ls,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=Rs(Math.pow(n,s)),i=i.R(s).add(Rs(a))):i=(i=i.R(r)).add(Rs(a))}return i};var Qs=Bn.createWebChannelTransport=function(){return new Ts},Ws=Bn.getStatEventTarget=function(){return bi()},Ys=Bn.ErrorCode=ki,Xs=Bn.EventType=Ci,$s=Bn.Event=yi,Js=Bn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Zs=(Bn.FetchXmlHttpFactory=Mo,Bn.WebChannel=Ni),ea=Bn.XhrIo=qo,ta=Bn.Md5=Cs,na=Bn.Integer=Ds;const ra="@firebase/firestore";class ia{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ia.UNAUTHENTICATED=new ia(null),ia.GOOGLE_CREDENTIALS=new ia("google-credentials-uid"),ia.FIRST_PARTY=new ia("first-party-uid"),ia.MOCK_USER=new ia("mock-user");let oa="10.7.2";const sa=new B("@firebase/firestore");function aa(){return sa.logLevel}function la(e){if(sa.logLevel<=L.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ha);sa.debug("Firestore (".concat(oa,"): ").concat(e),...i)}}function ua(e){if(sa.logLevel<=L.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ha);sa.error("Firestore (".concat(oa,"): ").concat(e),...i)}}function ca(e){if(sa.logLevel<=L.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(ha);sa.warn("Firestore (".concat(oa,"): ").concat(e),...i)}}function ha(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function da(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(oa,") INTERNAL ASSERTION FAILED: ")+e;throw ua(t),new Error(t)}function fa(e,t){e||da()}function pa(e,t){return e}const ma={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ga extends b{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class va{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ya{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class wa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ia.UNAUTHENTICATED)))}shutdown(){}}class ba{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class _a{constructor(e){this.t=e,this.currentUser=ia.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new va;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new va,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{la("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(la("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new va)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(la("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(fa("string"==typeof t.accessToken),new ya(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return fa(null===e||"string"==typeof e),new ia(e)}}class Ea{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ia.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ta{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Ea(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ia.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Sa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xa{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&la("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,la("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{la("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):la("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(fa("string"==typeof e.token),this.R=e.token,new Sa(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ia(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ka{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Ia(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Ca(e,t){return e<t?-1:e>t?1:0}function Aa(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Da(e){return e+"\0"}class Na{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ga(ma.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ga(ma.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ga(ma.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ga(ma.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Na.fromMillis(Date.now())}static fromDate(e){return Na.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Na(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ca(this.nanoseconds,e.nanoseconds):Ca(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Pa{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pa(e)}static min(){return new Pa(new Na(0,0))}static max(){return new Pa(new Na(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ra{constructor(e,t,n){void 0===t?t=0:t>e.length&&da(),void 0===n?n=e.length-t:n>e.length-t&&da(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ra.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ra?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Oa extends Ra{construct(e,t,n){return new Oa(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ga(ma.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Oa(e)}static emptyPath(){return new Oa([])}}const La=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ma extends Ra{construct(e,t,n){return new Ma(e,t,n)}static isValidIdentifier(e){return La.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ma.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ma(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ga(ma.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ga(ma.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ga(ma.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new ga(ma.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ma(t)}static emptyPath(){return new Ma([])}}class Fa{constructor(e){this.path=e}static fromPath(e){return new Fa(Oa.fromString(e))}static fromName(e){return new Fa(Oa.fromString(e).popFirst(5))}static empty(){return new Fa(Oa.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Oa.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Oa.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fa(new Oa(e.slice()))}}class Va{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Ua(e){return e.fields.find((e=>2===e.kind))}function Ba(e){return e.fields.filter((e=>2!==e.kind))}Va.UNKNOWN_ID=-1;class za{constructor(e,t){this.fieldPath=e,this.kind=t}}class ja{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ja(0,Ka.min())}}function qa(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Pa.fromTimestamp(1e9===r?new Na(n+1,0):new Na(n,r));return new Ka(i,Fa.empty(),t)}function Ga(e){return new Ka(e.readTime,e.key,-1)}class Ka{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ka(Pa.min(),Fa.empty(),-1)}static max(){return new Ka(Pa.max(),Fa.empty(),-1)}}function Ha(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Fa.comparator(e.documentKey,t.documentKey),0!==n?n:Ca(e.largestBatchId,t.largestBatchId))}const Qa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ya(e){if(e.code!==ma.FAILED_PRECONDITION||e.message!==Qa)throw e;la("LocalStore","Unexpectedly lost primary lease")}class Xa{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&da(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Xa(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Xa?t:Xa.resolve(t)}catch(e){return Xa.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Xa.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Xa.reject(t)}static resolve(e){return new Xa(((t,n)=>{t(e)}))}static reject(e){return new Xa(((t,n)=>{n(e)}))}static waitFor(e){return new Xa(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=Xa.resolve(!1);for(const n of e)t=t.next((e=>e?Xa.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Xa(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new Xa(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class $a{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new va,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new el(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=ol(t.target.error);this.V.reject(new el(e,n))}}static open(e,t,n,r){try{return new $a(t,e.transaction(r,n))}catch(e){throw new el(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(la("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new nl(t)}}class Ja{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Ja.S(v())&&ua("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return la("SimpleDb","Removing database:",e),rl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!w())return!1;if(Ja.C())return!0;const e=v(),t=Ja.S(e),n=0<t&&t<10,r=Ja.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(la("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new el(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new ga(ma.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new ga(ma.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new el(e,r))},r.onupgradeneeded=e=>{la("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{la("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.O(e);const t=$a.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Xa.reject(e)))).toPromise();return o.catch((()=>{})),await t.m,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(la("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Za{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return rl(this.k.delete())}}class el extends ga{constructor(e,t){super(ma.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function tl(e){return"IndexedDbTransactionError"===e.name}class nl{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(la("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(la("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),rl(n)}add(e){return la("SimpleDb","ADD",this.store.name,e,e),rl(this.store.add(e))}get(e){return rl(this.store.get(e)).next((t=>(void 0===t&&(t=null),la("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return la("SimpleDb","DELETE",this.store.name,e),rl(this.store.delete(e))}count(){return la("SimpleDb","COUNT",this.store.name),rl(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Xa(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Xa(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){la("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new Xa(((n,r)=>{t.onerror=e=>{const t=ol(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new Xa(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new Za(i),s=t(i.primaryKey,i.value,o);if(s instanceof Xa){const e=s.catch((e=>(o.done(),Xa.reject(e))));n.push(e)}o.isDone?r():null===o.$?i.continue():i.continue(o.$)}})).next((()=>Xa.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function rl(e){return new Xa(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=ol(e.target.error);n(t)}}))}let il=!1;function ol(e){const t=Ja.S(v());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new ga("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return il||(il=!0,setTimeout((()=>{throw e}),0)),e}}return e}class sl{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){la("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{la("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){tl(e)?la("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Ya(e)}await this.ee(6e4)}))}}class al{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return Xa.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return la("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(la("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Ga(t);Ha(r,n)>0&&(n=r)})),new Ka(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ll{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function ul(e){return null==e}function cl(e){return 0===e&&1/e==-1/0}function hl(e){return"number"==typeof e&&Number.isInteger(e)&&!cl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function dl(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=pl(t)),t=fl(e.get(n),t);return pl(t)}function fl(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function pl(e){return e+"\x01\x01"}function ml(e){const t=e.length;if(fa(t>=2),2===t)return fa("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Oa.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf("\x01",o);switch((t<0||t>n)&&da(),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let s;0===i.length?s=n:(i+=n,s=i,i=""),r.push(s);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:da()}o=t+2}return new Oa(r)}ll._e=-1;const gl=["userId","batchId"];function vl(e,t){return[e,dl(t)]}function yl(e,t,n){return[e,dl(t),n]}const wl={},bl=["prefixPath","collectionGroup","readTime","documentId"],_l=["prefixPath","collectionGroup","documentId"],El=["collectionGroup","readTime","prefixPath","documentId"],Tl=["canonicalId","targetId"],Sl=["targetId","path"],xl=["path","targetId"],Il=["collectionId","parent"],kl=["indexId","uid"],Cl=["uid","sequenceNumber"],Al=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Dl=["indexId","uid","orderedDocumentKey"],Nl=["userId","collectionPath","documentId"],Pl=["userId","collectionPath","largestBatchId"],Rl=["userId","collectionGroup","largestBatchId"],Ol=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ll=[...Ol,"documentOverlays"],Ml=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fl=Ml,Vl=[...Fl,"indexConfiguration","indexState","indexEntries"];class Ul extends Wa{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Bl(e,t){const n=pa(e);return Ja.M(n.ae,t)}function zl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function jl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ql(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Gl{constructor(e,t){this.comparator=e,this.root=t||Hl.EMPTY}insert(e,t){return new Gl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hl.BLACK,null,null))}remove(e){return new Gl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kl(this.root,e,this.comparator,!0)}}class Kl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Hl.RED,this.left=null!=r?r:Hl.EMPTY,this.right=null!=i?i:Hl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Hl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Hl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Hl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw da();if(this.right.isRed())throw da();const e=this.left.check();if(e!==this.right.check())throw da();return e+(this.isRed()?0:1)}}Hl.EMPTY=null,Hl.RED=!0,Hl.BLACK=!1,Hl.EMPTY=new class{constructor(){this.size=0}get key(){throw da()}get value(){throw da()}get color(){throw da()}get left(){throw da()}get right(){throw da()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Hl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ql{constructor(e){this.comparator=e,this.data=new Gl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wl(this.data.getIterator())}getIteratorFrom(e){return new Wl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Ql))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ql(this.comparator);return t.data=e,t}}class Wl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yl(e){return e.hasNext()?e.getNext():void 0}class Xl{constructor(e){this.fields=e,e.sort(Ma.comparator)}static empty(){return new Xl([])}unionWith(e){let t=new Ql(Ma.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Xl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Aa(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class $l extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Jl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new $l("Invalid base64 string: "+e):e}}(e);return new Jl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Jl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ca(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jl.EMPTY_BYTE_STRING=new Jl("");const Zl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eu(e){if(fa(!!e),"string"==typeof e){let t=0;const n=Zl.exec(e);if(fa(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:tu(e.seconds),nanos:tu(e.nanos)}}function tu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function nu(e){return"string"==typeof e?Jl.fromBase64String(e):Jl.fromUint8Array(e)}function ru(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function iu(e){const t=e.mapValue.fields.__previous_value__;return ru(t)?iu(t):t}function ou(e){const t=eu(e.mapValue.fields.__local_write_time__.timestampValue);return new Na(t.seconds,t.nanos)}class su{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class au{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new au("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof au&&e.projectId===this.projectId&&e.database===this.database}}const lu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},uu={nullValue:"NULL_VALUE"};function cu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ru(e)?4:Su(e)?9007199254740991:10:da()}function hu(e,t){if(e===t)return!0;const n=cu(e);if(n!==cu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ou(e).isEqual(ou(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=eu(e.timestampValue),r=eu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return nu(e.bytesValue).isEqual(nu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return tu(e.geoPointValue.latitude)===tu(t.geoPointValue.latitude)&&tu(e.geoPointValue.longitude)===tu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return tu(e.integerValue)===tu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=tu(e.doubleValue),r=tu(t.doubleValue);return n===r?cl(n)===cl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Aa(e.arrayValue.values||[],t.arrayValue.values||[],hu);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(zl(n)!==zl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!hu(n[i],r[i])))return!1;return!0}(e,t);default:return da()}}function du(e,t){return void 0!==(e.values||[]).find((e=>hu(e,t)))}function fu(e,t){if(e===t)return 0;const n=cu(e),r=cu(t);if(n!==r)return Ca(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ca(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=tu(e.integerValue||e.doubleValue),r=tu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return pu(e.timestampValue,t.timestampValue);case 4:return pu(ou(e),ou(t));case 5:return Ca(e.stringValue,t.stringValue);case 6:return function(e,t){const n=nu(e),r=nu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ca(n[i],r[i]);if(0!==e)return e}return Ca(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ca(tu(e.latitude),tu(t.latitude));return 0!==n?n:Ca(tu(e.longitude),tu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=fu(n[i],r[i]);if(e)return e}return Ca(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===lu.mapValue&&t===lu.mapValue)return 0;if(e===lu.mapValue)return 1;if(t===lu.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=Ca(r[s],o[s]);if(0!==e)return e;const t=fu(n[r[s]],i[o[s]]);if(0!==t)return t}return Ca(r.length,o.length)}(e.mapValue,t.mapValue);default:throw da()}}function pu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ca(e,t);const n=eu(e),r=eu(t),i=Ca(n.seconds,r.seconds);return 0!==i?i:Ca(n.nanos,r.nanos)}function mu(e){return gu(e)}function gu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=eu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return nu(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Fa.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=gu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(gu(e.fields[i]));return n+"}"}(e.mapValue):da()}function vu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function yu(e){return!!e&&"integerValue"in e}function wu(e){return!!e&&"arrayValue"in e}function bu(e){return!!e&&"nullValue"in e}function _u(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Eu(e){return!!e&&"mapValue"in e}function Tu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return jl(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Tu(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Tu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Su(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function xu(e){return"nullValue"in e?uu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?vu(au.empty(),Fa.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:da()}function Iu(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?vu(au.empty(),Fa.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?lu:da()}function ku(e,t){const n=fu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Cu(e,t){const n=fu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Au{constructor(e){this.value=e}static empty(){return new Au({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Eu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tu(t)}setAll(e){let t=Ma.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Tu(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Eu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Eu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){jl(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Au(Tu(this.value))}}function Du(e){const t=[];return jl(e.fields,((e,n)=>{const r=new Ma([e]);if(Eu(n)){const e=Du(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Xl(t)}class Nu{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Nu(e,0,Pa.min(),Pa.min(),Pa.min(),Au.empty(),0)}static newFoundDocument(e,t,n,r){return new Nu(e,1,t,Pa.min(),n,r,0)}static newNoDocument(e,t){return new Nu(e,2,t,Pa.min(),Pa.min(),Au.empty(),0)}static newUnknownDocument(e,t){return new Nu(e,3,t,Pa.min(),Pa.min(),Au.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pa.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Au.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Au.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pa.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Pu{constructor(e,t){this.position=e,this.inclusive=t}}function Ru(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?Fa.comparator(Fa.fromName(s.referenceValue),n.key):fu(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Ou(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!hu(e.position[n],t.position[n]))return!1;return!0}class Lu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Mu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Fu{}class Vu extends Fu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Wu(e,t,n):"array-contains"===t?new Ju(e,n):"in"===t?new Zu(e,n):"not-in"===t?new ec(e,n):"array-contains-any"===t?new tc(e,n):new Vu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Yu(e,n):new Xu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(fu(t,this.value)):null!==t&&cu(this.value)===cu(t)&&this.matchesComparison(fu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return da()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Uu extends Fu{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Uu(e,t)}matches(e){return Bu(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Bu(e){return"and"===e.op}function zu(e){return"or"===e.op}function ju(e){return qu(e)&&Bu(e)}function qu(e){for(const t of e.filters)if(t instanceof Uu)return!1;return!0}function Gu(e){if(e instanceof Vu)return e.field.canonicalString()+e.op.toString()+mu(e.value);if(ju(e))return e.filters.map((e=>Gu(e))).join(",");{const t=e.filters.map((e=>Gu(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Ku(e,t){return e instanceof Vu?function(e,t){return t instanceof Vu&&e.op===t.op&&e.field.isEqual(t.field)&&hu(e.value,t.value)}(e,t):e instanceof Uu?function(e,t){return t instanceof Uu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Ku(n,t.filters[r])),!0)}(e,t):void da()}function Hu(e,t){const n=e.filters.concat(t);return Uu.create(n,e.op)}function Qu(e){return e instanceof Vu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(mu(e.value))}(e):e instanceof Uu?function(e){return e.op.toString()+" {"+e.getFilters().map(Qu).join(" ,")+"}"}(e):"Filter"}class Wu extends Vu{constructor(e,t,n){super(e,t,n),this.key=Fa.fromName(n.referenceValue)}matches(e){const t=Fa.comparator(e.key,this.key);return this.matchesComparison(t)}}class Yu extends Vu{constructor(e,t){super(e,"in",t),this.keys=$u("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Xu extends Vu{constructor(e,t){super(e,"not-in",t),this.keys=$u("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function $u(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Fa.fromName(e.referenceValue)))}class Ju extends Vu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wu(t)&&du(t.arrayValue,this.value)}}class Zu extends Vu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&du(this.value.arrayValue,t)}}class ec extends Vu{constructor(e,t){super(e,"not-in",t)}matches(e){if(du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!du(this.value.arrayValue,t)}}class tc extends Vu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>du(this.value.arrayValue,e)))}}class nc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ce=null}}function rc(e){return new nc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ic(e){const t=pa(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Gu(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),ul(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>mu(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>mu(e))).join(",")),t.ce=e}return t.ce}function oc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Mu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ku(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ou(e.startAt,t.startAt)&&Ou(e.endAt,t.endAt)}function sc(e){return Fa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ac(e,t){return e.filters.filter((e=>e instanceof Vu&&e.field.isEqual(t)))}function lc(e,t,n){let r=uu,i=!0;for(const o of ac(e,t)){let e=uu,t=!0;switch(o.op){case"<":case"<=":e=xu(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=uu}ku({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];ku({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function uc(e,t,n){let r=lu,i=!0;for(const o of ac(e,t)){let e=lu,t=!0;switch(o.op){case">=":case">":e=Iu(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=lu}Cu({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Cu({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class cc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function hc(e,t,n,r,i,o,s,a){return new cc(e,t,n,r,i,o,s,a)}function dc(e){return new cc(e)}function fc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function pc(e){return null!==e.collectionGroup}function mc(e){const t=pa(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ql(Ma.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Lu(r,n))})),e.has(Ma.keyField().canonicalString())||t.le.push(new Lu(Ma.keyField(),n))}return t.le}function gc(e){const t=pa(e);return t.he||(t.he=vc(t,mc(e))),t.he}function vc(e,t){if("F"===e.limitType)return rc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Lu(e.field,t)}));const n=e.endAt?new Pu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Pu(e.startAt.position,e.startAt.inclusive):null;return rc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function yc(e,t){const n=e.filters.concat([t]);return new cc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function wc(e,t,n){return new cc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function bc(e,t){return oc(gc(e),gc(t))&&e.limitType===t.limitType}function _c(e){return"".concat(ic(gc(e)),"|lt:").concat(e.limitType)}function Ec(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Qu(e))).join(", "),"]")),ul(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>mu(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>mu(e))).join(",")),"Target(".concat(t,")")}(gc(e)),"; limitType=").concat(e.limitType,")")}function Tc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Fa.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of mc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ru(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,mc(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ru(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,mc(e),t))}(e,t)}function Sc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function xc(e){return(t,n)=>{let r=!1;for(const i of mc(e)){const e=Ic(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ic(e,t,n){const r=e.field.isKeyField()?Fa.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?fu(r,i):da()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return da()}}class kc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){jl(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return ql(this.inner)}size(){return this.innerSize}}const Cc=new Gl(Fa.comparator);function Ac(){return Cc}const Dc=new Gl(Fa.comparator);function Nc(){let e=Dc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Pc(e){let t=Dc;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Rc(){return Lc()}function Oc(){return Lc()}function Lc(){return new kc((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Mc=new Gl(Fa.comparator),Fc=new Ql(Fa.comparator);function Vc(){let e=Fc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Uc=new Ql(Ca);function Bc(){return Uc}function zc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cl(t)?"-0":t}}function jc(e){return{integerValue:""+e}}function qc(e,t){return hl(t)?jc(t):zc(e,t)}class Gc{constructor(){this._=void 0}}function Kc(e,t,n){return e instanceof Wc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ru(t)&&(t=iu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Yc?Xc(e,t):e instanceof $c?Jc(e,t):function(e,t){const n=Qc(e,t),r=eh(n)+eh(e.Ie);return yu(n)&&yu(e.Ie)?jc(r):zc(e.serializer,r)}(e,t)}function Hc(e,t,n){return e instanceof Yc?Xc(e,t):e instanceof $c?Jc(e,t):n}function Qc(e,t){return e instanceof Zc?function(e){return yu(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Wc extends Gc{}class Yc extends Gc{constructor(e){super(),this.elements=e}}function Xc(e,t){const n=th(t);for(const r of e.elements)n.some((e=>hu(e,r)))||n.push(r);return{arrayValue:{values:n}}}class $c extends Gc{constructor(e){super(),this.elements=e}}function Jc(e,t){let n=th(t);for(const r of e.elements)n=n.filter((e=>!hu(e,r)));return{arrayValue:{values:n}}}class Zc extends Gc{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function eh(e){return tu(e.integerValue||e.doubleValue)}function th(e){return wu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class nh{constructor(e,t){this.field=e,this.transform=t}}class rh{constructor(e,t){this.version=e,this.transformResults=t}}class ih{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ih}static exists(e){return new ih(void 0,e)}static updateTime(e){return new ih(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class sh{}function ah(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new vh(e.key,ih.none()):new dh(e.key,e.data,ih.none());{const n=e.data,r=Au.empty();let i=new Ql(Ma.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new fh(e.key,r,new Xl(i.toArray()),ih.none())}}function lh(e,t,n){e instanceof dh?function(e,t,n){const r=e.value.clone(),i=mh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof fh?function(e,t,n){if(!oh(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=mh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ph(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function uh(e,t,n,r){return e instanceof dh?function(e,t,n,r){if(!oh(e.precondition,t))return n;const i=e.value.clone(),o=gh(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof fh?function(e,t,n,r){if(!oh(e.precondition,t))return n;const i=gh(e.fieldTransforms,r,t),o=t.data;return o.setAll(ph(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return oh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ch(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Qc(r.transform,e||null);null!=i&&(null===n&&(n=Au.empty()),n.set(r.field,i))}return n||null}function hh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Aa(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Yc&&t instanceof Yc||e instanceof $c&&t instanceof $c?Aa(e.elements,t.elements,hu):e instanceof Zc&&t instanceof Zc?hu(e.Ie,t.Ie):e instanceof Wc&&t instanceof Wc}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class dh extends sh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class fh extends sh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ph(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function mh(e,t,n){const r=new Map;fa(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,Hc(s,a,n[i]))}return r}function gh(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Kc(e,o,t))}return r}class vh extends sh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yh extends sh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&lh(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=uh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=uh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Oc();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=ah(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(Pa.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Vc())}isEqual(e){return this.batchId===e.batchId&&Aa(this.mutations,e.mutations,((e,t)=>hh(e,t)))&&Aa(this.baseMutations,e.baseMutations,((e,t)=>hh(e,t)))}}class bh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){fa(e.mutations.length===n.length);let r=Mc;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new bh(e,t,n,r)}}class _h{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Eh{constructor(e,t){this.count=e,this.unchangedNames=t}}var Th,Sh;function xh(e){switch(e){default:return da();case ma.CANCELLED:case ma.UNKNOWN:case ma.DEADLINE_EXCEEDED:case ma.RESOURCE_EXHAUSTED:case ma.INTERNAL:case ma.UNAVAILABLE:case ma.UNAUTHENTICATED:return!1;case ma.INVALID_ARGUMENT:case ma.NOT_FOUND:case ma.ALREADY_EXISTS:case ma.PERMISSION_DENIED:case ma.FAILED_PRECONDITION:case ma.ABORTED:case ma.OUT_OF_RANGE:case ma.UNIMPLEMENTED:case ma.DATA_LOSS:return!0}}function Ih(e){if(void 0===e)return ua("GRPC error has no .code"),ma.UNKNOWN;switch(e){case Th.OK:return ma.OK;case Th.CANCELLED:return ma.CANCELLED;case Th.UNKNOWN:return ma.UNKNOWN;case Th.DEADLINE_EXCEEDED:return ma.DEADLINE_EXCEEDED;case Th.RESOURCE_EXHAUSTED:return ma.RESOURCE_EXHAUSTED;case Th.INTERNAL:return ma.INTERNAL;case Th.UNAVAILABLE:return ma.UNAVAILABLE;case Th.UNAUTHENTICATED:return ma.UNAUTHENTICATED;case Th.INVALID_ARGUMENT:return ma.INVALID_ARGUMENT;case Th.NOT_FOUND:return ma.NOT_FOUND;case Th.ALREADY_EXISTS:return ma.ALREADY_EXISTS;case Th.PERMISSION_DENIED:return ma.PERMISSION_DENIED;case Th.FAILED_PRECONDITION:return ma.FAILED_PRECONDITION;case Th.ABORTED:return ma.ABORTED;case Th.OUT_OF_RANGE:return ma.OUT_OF_RANGE;case Th.UNIMPLEMENTED:return ma.UNIMPLEMENTED;case Th.DATA_LOSS:return ma.DATA_LOSS;default:return da()}}(Sh=Th||(Th={}))[Sh.OK=0]="OK",Sh[Sh.CANCELLED=1]="CANCELLED",Sh[Sh.UNKNOWN=2]="UNKNOWN",Sh[Sh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Sh[Sh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Sh[Sh.NOT_FOUND=5]="NOT_FOUND",Sh[Sh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Sh[Sh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Sh[Sh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Sh[Sh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Sh[Sh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Sh[Sh.ABORTED=10]="ABORTED",Sh[Sh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Sh[Sh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Sh[Sh.INTERNAL=13]="INTERNAL",Sh[Sh.UNAVAILABLE=14]="UNAVAILABLE",Sh[Sh.DATA_LOSS=15]="DATA_LOSS";let kh=null;function Ch(){return new TextEncoder}const Ah=new na([4294967295,4294967295],0);function Dh(e){const t=Ch().encode(e),n=new ta;return n.update(t),new Uint8Array(n.digest())}function Nh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new na([n,r],0),new na([i,o],0)]}class Ph{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Rh("Invalid padding: ".concat(t));if(n<0)throw new Rh("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Rh("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Rh("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=na.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(na.fromNumber(n)));return 1===r.compare(Ah)&&(r=new na([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Dh(e),[n,r]=Nh(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ph(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Te)return;const t=Dh(e),[n,r]=Nh(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Rh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Oh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Lh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Oh(Pa.min(),r,new Gl(Ca),Ac(),Vc())}}class Lh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Lh(n,t,Vc(),Vc(),Vc())}}class Mh{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Fh{constructor(e,t){this.targetId=e,this.fe=t}}class Vh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Uh{constructor(){this.ge=0,this.pe=jh(),this.ye=Jl.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Vc(),t=Vc(),n=Vc();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:da()}})),new Lh(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=jh()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,fa(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Bh{constructor(e){this.Le=e,this.ke=new Map,this.qe=Ac(),this.Qe=zh(),this.Ke=new Gl(Ca)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:da()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(sc(i))if(0===n){const e=new Fa(i.path);this.We(t,e,Nu.newNoDocument(e,Pa.min()))}else fa(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==kh||kh.tt(function(e,t,n,r,i){var o,s,a,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(a=null===(s=null==d?void 0:d.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=nu(n).toUint8Array()}catch(e){if(e instanceof $l)return ca("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new Ph(o,r,i)}catch(e){return ca(e instanceof Rh?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Te?null:s}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&sc(i.target)){const t=new Fa(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Nu.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Vc();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Oh(e,t,this.Ke,this.qe,n);return this.qe=Ac(),this.Qe=zh(),this.Ke=new Gl(Ca),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Uh,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Ql(Ca),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||la("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Uh),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function zh(){return new Gl(Fa.comparator)}function jh(){return new Gl(Fa.comparator)}const qh={asc:"ASCENDING",desc:"DESCENDING"},Gh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kh={and:"AND",or:"OR"};class Hh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qh(e,t){return e.useProto3Json||ul(t)?t:{value:t}}function Wh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Yh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Xh(e,t){return Wh(e,t.toTimestamp())}function $h(e){return fa(!!e),Pa.fromTimestamp(function(e){const t=eu(e);return new Na(t.seconds,t.nanos)}(e))}function Jh(e,t){return Zh(e,t).canonicalString()}function Zh(e,t){const n=function(e){return new Oa(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ed(e){const t=Oa.fromString(e);return fa(Ed(t)),t}function td(e,t){return Jh(e.databaseId,t.path)}function nd(e,t){const n=ed(t);if(n.get(1)!==e.databaseId.projectId)throw new ga(ma.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ga(ma.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Fa(sd(n))}function rd(e,t){return Jh(e.databaseId,t)}function id(e){const t=ed(e);return 4===t.length?Oa.emptyPath():sd(t)}function od(e){return new Oa(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function sd(e){return fa(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ad(e,t,n){return{name:td(e,t),fields:n.value.mapValue.fields}}function ld(e,t,n){const r=nd(e,t.name),i=$h(t.updateTime),o=t.createTime?$h(t.createTime):Pa.min(),s=new Au({mapValue:{fields:t.fields}}),a=Nu.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function ud(e,t){let n;if(t instanceof dh)n={update:ad(e,t.key,t.value)};else if(t instanceof vh)n={delete:td(e,t.key)};else if(t instanceof fh)n={update:ad(e,t.key,t.data),updateMask:_d(t.fieldMask)};else{if(!(t instanceof yh))return da();n={verify:td(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Wc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Yc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof $c)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Zc)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw da()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Xh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:da()}(e,t.precondition)),n}function cd(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?ih.updateTime($h(e.updateTime)):void 0!==e.exists?ih.exists(e.exists):ih.none()}(t.currentDocument):ih.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)fa("REQUEST_TIME"===t.setToServerValue),n=new Wc;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Yc(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new $c(e)}else"increment"in t?n=new Zc(e,t.increment):da();const r=Ma.fromServerFormat(t.fieldPath);return new nh(r,n)}(e,t))):[];if(t.update){t.update.name;const i=nd(e,t.update.name),o=new Au({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Xl(t.map((e=>Ma.fromServerFormat(e))))}(t.updateMask);return new fh(i,o,e,n,r)}return new dh(i,o,n,r)}if(t.delete){const r=nd(e,t.delete);return new vh(r,n)}if(t.verify){const r=nd(e,t.verify);return new yh(r,n)}return da()}function hd(e,t){return{documents:[rd(e,t.path)]}}function dd(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rd(e,i);const o=function(e){if(0!==e.length)return bd(Uu.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:yd(e.field),direction:md(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Qh(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function fd(e){let t=id(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){fa(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=pd(e);return t instanceof Uu&&ju(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new Lu(wd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ul(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Pu(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Pu(n,t)}(n.endAt)),hc(t,i,s,o,a,"F",l,u)}function pd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=wd(e.unaryFilter.field);return Vu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=wd(e.unaryFilter.field);return Vu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=wd(e.unaryFilter.field);return Vu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=wd(e.unaryFilter.field);return Vu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return da()}}(e):void 0!==e.fieldFilter?function(e){return Vu.create(wd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return da()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Uu.create(e.compositeFilter.filters.map((e=>pd(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return da()}}(e.compositeFilter.op))}(e):da()}function md(e){return qh[e]}function gd(e){return Gh[e]}function vd(e){return Kh[e]}function yd(e){return{fieldPath:e.canonicalString()}}function wd(e){return Ma.fromServerFormat(e.fieldPath)}function bd(e){return e instanceof Vu?function(e){if("=="===e.op){if(_u(e.value))return{unaryFilter:{field:yd(e.field),op:"IS_NAN"}};if(bu(e.value))return{unaryFilter:{field:yd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(_u(e.value))return{unaryFilter:{field:yd(e.field),op:"IS_NOT_NAN"}};if(bu(e.value))return{unaryFilter:{field:yd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yd(e.field),op:gd(e.op),value:e.value}}}(e):e instanceof Uu?function(e){const t=e.getFilters().map((e=>bd(e)));return 1===t.length?t[0]:{compositeFilter:{op:vd(e.op),filters:t}}}(e):da()}function _d(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Ed(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Td{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Pa.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Pa.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Jl.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new Td(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Td(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Td(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Td(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Sd{constructor(e){this.ct=e}}function xd(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Id(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:td(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Wh(e,t.version.toTimestamp()),createTime:Wh(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:kd(t.version)};else{if(!t.isUnknownDocument())return da();r.unknownDocument={path:n.path.toArray(),version:kd(t.version)}}return r}function Id(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function kd(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Cd(e){const t=new Na(e.seconds,e.nanoseconds);return Pa.fromTimestamp(t)}function Ad(e,t){const n=(t.baseMutations||[]).map((t=>cd(e.ct,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>cd(e.ct,t))),i=Na.fromMillis(t.localWriteTimeMs);return new wh(t.batchId,i,n,r)}function Dd(e){const t=Cd(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Cd(e.lastLimboFreeSnapshotVersion):Pa.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return fa(1===e.documents.length),gc(dc(id(e.documents[0])))}(e.query):function(e){return gc(fd(e))}(e.query),new Td(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Jl.fromBase64String(e.resumeToken))}function Nd(e,t){const n=kd(t.snapshotVersion),r=kd(t.lastLimboFreeSnapshotVersion);let i;i=sc(t.target)?hd(e.ct,t.target):dd(e.ct,t.target).ut;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ic(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Pd(e){const t=fd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?wc(t,t.limit,"L"):t}function Rd(e,t){return new _h(t.largestBatchId,cd(e.ct,t.overlayMutation))}function Od(e,t){const n=t.path.lastSegment();return[e,dl(t.path.popLast()),n]}function Ld(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:kd(r.readTime),documentKey:dl(r.documentKey.path),largestBatchId:r.largestBatchId}}class Md{getBundleMetadata(e,t){return Fd(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Cd(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Fd(e).put(function(e){return{bundleId:e.id,createTime:kd($h(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Vd(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Pd(e.bundledQuery),readTime:Cd(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Vd(e).put(function(e){return{name:e.name,readTime:kd($h(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Fd(e){return Bl(e,"bundles")}function Vd(e){return Bl(e,"namedQueries")}class Ud{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new Ud(e,n)}getOverlay(e,t){return Bd(e).get(Od(this.userId,t)).next((e=>e?Rd(this.serializer,e):null))}getOverlays(e,t){const n=Rc();return Xa.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new _h(t,i);r.push(this.ht(e,o))})),Xa.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(dl(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Bd(e).H("collectionPathOverlayIndex",r))})),Xa.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Rc(),i=dl(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Bd(e).W("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=Rd(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Rc();let o;const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Bd(e).Y({index:"collectionGroupOverlayIndex",range:s},((e,t,n)=>{const s=Rd(this.serializer,t);i.size()<r||s.largestBatchId===o?(i.set(s.getKey(),s),o=s.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return Bd(e).put(function(e,t,n){const[r,i,o]=Od(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ud(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function Bd(e){return Bl(e,"documentOverlays")}class zd{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(tu(e.integerValue));else if("doubleValue"in e){const n=tu(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),cl(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(nu(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Su(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):da()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),Fa.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function jd(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function qd(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=jd(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}zd.bt=new zd;class Gd{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=qd(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Lt(e),n=qd(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Kd{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class Hd{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Qd{constructor(){this.Gt=new Gd,this.zt=new Kd(this.Gt),this.jt=new Hd(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Wd{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Wd(this.indexId,this.documentKey,this.arrayValue,n)}}function Yd(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Xd(e.arrayValue,t.arrayValue),0!==n?n:(n=Xd(e.directionalValue,t.directionalValue),0!==n?n:Fa.comparator(e.documentKey,t.documentKey)))}function Xd(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class $d{constructor(e){this.Yt=new Ql(((e,t)=>Ma.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(fa(e.collectionGroup===this.collectionId),this.en)return!1;const t=Ua(e);if(void 0!==t&&!this.nn(t))return!1;const n=Ba(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.Zt.length||!this.sn(this.Zt[o++],e))return!1}return!0}on(){if(this.en)return null;let e=new Ql(Ma.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new za(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new za(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new za(n.field,"asc"===n.dir?0:1)));return new Va(Va.UNKNOWN_ID,this.collectionId,t,ja.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Jd(e){var t,n;if(fa(e instanceof Vu||e instanceof Uu),e instanceof Vu){if(e instanceof Zu){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Vu.create(e.field,"==",t))))||[];return Uu.create(r,"or")}return e}const r=e.filters.map((e=>Jd(e)));return Uu.create(r,e.op)}function Zd(e){if(0===e.getFilters().length)return[];const t=rf(Jd(e));return fa(nf(t)),ef(t)||tf(t)?[t]:t.getFilters()}function ef(e){return e instanceof Vu}function tf(e){return e instanceof Uu&&ju(e)}function nf(e){return ef(e)||tf(e)||function(e){if(e instanceof Uu&&zu(e)){for(const t of e.getFilters())if(!ef(t)&&!tf(t))return!1;return!0}return!1}(e)}function rf(e){if(fa(e instanceof Vu||e instanceof Uu),e instanceof Vu)return e;if(1===e.filters.length)return rf(e.filters[0]);const t=e.filters.map((e=>rf(e)));let n=Uu.create(t,e.op);return n=af(n),nf(n)?n:(fa(n instanceof Uu),fa(Bu(n)),fa(n.filters.length>1),n.filters.reduce(((e,t)=>of(e,t))))}function of(e,t){let n;return fa(e instanceof Vu||e instanceof Uu),fa(t instanceof Vu||t instanceof Uu),n=e instanceof Vu?t instanceof Vu?function(e,t){return Uu.create([e,t],"and")}(e,t):sf(e,t):t instanceof Vu?sf(t,e):function(e,t){if(fa(e.filters.length>0&&t.filters.length>0),Bu(e)&&Bu(t))return Hu(e,t.getFilters());const n=zu(e)?e:t,r=zu(e)?t:e,i=n.filters.map((e=>of(e,r)));return Uu.create(i,"or")}(e,t),af(n)}function sf(e,t){if(Bu(t))return Hu(t,e.getFilters());{const n=t.filters.map((t=>of(e,t)));return Uu.create(n,"or")}}function af(e){if(fa(e instanceof Vu||e instanceof Uu),e instanceof Vu)return e;const t=e.getFilters();if(1===t.length)return af(t[0]);if(qu(e))return e;const n=t.map((e=>af(e))),r=[];return n.forEach((t=>{t instanceof Vu?r.push(t):t instanceof Uu&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Uu.create(r,e.op)}class lf{constructor(){this._n=new uf}addToCollectionParentIndex(e,t){return this._n.add(t),Xa.resolve()}getCollectionParents(e,t){return Xa.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Xa.resolve()}deleteFieldIndex(e,t){return Xa.resolve()}deleteAllFieldIndexes(e){return Xa.resolve()}createTargetIndexes(e,t){return Xa.resolve()}getDocumentsMatchingTarget(e,t){return Xa.resolve(null)}getIndexType(e,t){return Xa.resolve(0)}getFieldIndexes(e,t){return Xa.resolve([])}getNextCollectionGroupToUpdate(e){return Xa.resolve(null)}getMinOffset(e,t){return Xa.resolve(Ka.min())}getMinOffsetFromCollectionGroup(e,t){return Xa.resolve(Ka.min())}updateCollectionGroup(e,t,n){return Xa.resolve()}updateIndexEntries(e,t){return Xa.resolve()}}class uf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ql(Oa.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ql(Oa.comparator)).toArray()}}const cf=new Uint8Array(0);class hf{constructor(e,t){this.databaseId=t,this.an=new uf,this.un=new kc((e=>ic(e)),((e,t)=>oc(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:dl(r)};return df(e).put(i)}return Xa.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Da(t),""],!1,!0);return df(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(ml(r.parent))}return n}))}addFieldIndex(e,t){const n=pf(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=mf(e);return i.next((e=>{n.put(Ld(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=pf(e),r=mf(e),i=ff(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=pf(e),n=ff(e),r=mf(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return Xa.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new $d(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=ff(e);let r=!0;const i=new Map;return Xa.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Vc();const r=[];return Xa.forEach(i,((i,o)=>{la("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(ic(t)));const s=function(e,t){const n=Ua(t);if(void 0===n)return null;for(const r of ac(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),a=function(e,t){const n=new Map;for(const r of Ba(t))for(const t of ac(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),l=function(e,t){const n=[];let r=!0;for(const i of Ba(t)){const t=0===i.kind?lc(e,i.fieldPath,e.startAt):uc(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Pu(n,r)}(o,i),u=function(e,t){const n=[];let r=!0;for(const i of Ba(t)){const t=0===i.kind?uc(e,i.fieldPath,e.endAt):lc(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Pu(n,r)}(o,i),c=this.hn(i,o,l),h=this.hn(i,o,u),d=this.Pn(i,o,a),f=this.In(i.indexId,s,c,l.inclusive,h,u.inclusive,d);return Xa.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=Fa.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Xa.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Zd(Uu.create(e.filters,"and")).map((t=>rc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,o,s){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),u=[];for(let c=0;c<a;++c){const a=t?this.Tn(t[c/l]):cf,h=this.En(e,a,n[c%l],r),d=this.dn(e,a,i[c%l],o),f=s.map((t=>this.En(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}En(e,t,n,r){const i=new Wd(e,Fa.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new Wd(e,Fa.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new $d(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return Xa.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Ql(Ma.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new Qd;for(const r of Ba(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);zd.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new Qd;return zd.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new Qd;return zd.bt.Pt(vu(this.databaseId,t),n.Ht(function(e){const t=Ba(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new Qd);let i=0;for(const o of Ba(e)){const e=n[i++];for(const n of r)if(this.Vn(t,o.fieldPath)&&wu(e))r=this.mn(r,o,e);else{const t=n.Ht(o.kind);zd.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new Qd;n.seed(e.Wt()),zd.bt.Pt(o,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof Vu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=pf(e),r=mf(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return Xa.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new ja(t.sequenceNumber,new Ka(Cd(t.readTime),new Fa(ml(t.documentKey)),t.largestBatchId)):ja.empty(),r=e.fields.map((e=>{let[t,n]=e;return new za(Ma.fromServerFormat(t),n)}));return new Va(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ca(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=pf(e),i=mf(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Xa.forEach(t,(t=>i.put(Ld(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Xa.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Xa.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Xa.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?Xa.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return ff(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return ff(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=ff(e);let i=new Ql(Yd);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new Wd(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new Ql(Yd);const r=this.An(t,e);if(null==r)return n;const i=Ua(t);if(null!=i){const o=e.data.field(i.fieldPath);if(wu(o))for(const i of o.arrayValue.values||[])n=n.add(new Wd(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new Wd(t.indexId,e.key,cf,r));return n}wn(e,t,n,r,i){la("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),s=t.getIterator();let a=Yl(o),l=Yl(s);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Yl(s)):t?(i(a),a=Yl(o)):(a=Yl(o),l=Yl(s))}}(r,i,Yd,(r=>{o.push(this.Sn(e,t,n,r))}),(r=>{o.push(this.bn(e,t,n,r))})),Xa.waitFor(o)}gn(e){let t=1;return mf(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Yd(e,t))).filter(((e,t,n)=>!t||0!==Yd(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=Yd(o,e),i=Yd(o,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(o),r.push(o.Jt());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,cf,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,cf,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return Yd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(gf)}getMinOffset(e,t){return Xa.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||da())))).next(gf)}}function df(e){return Bl(e,"collectionParents")}function ff(e){return Bl(e,"indexEntries")}function pf(e){return Bl(e,"indexConfiguration")}function mf(e){return Bl(e,"indexState")}function gf(e){fa(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Ha(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ka(t.readTime,t.documentKey,n)}const vf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class yf{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new yf(e,yf.DEFAULT_COLLECTION_PERCENTILE,yf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function wf(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:s},((e,t,n)=>(a++,n.delete())));o.push(l.next((()=>{fa(1===a)})));const u=[];for(const c of n.mutations){const e=yl(t,c.key.path,n.batchId);o.push(i.delete(e)),u.push(c.key)}return Xa.waitFor(o).next((()=>u))}function bf(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw da();t=e.noDocument}return JSON.stringify(t).length}yf.DEFAULT_COLLECTION_PERCENTILE=10,yf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yf.DEFAULT=new yf(41943040,yf.DEFAULT_COLLECTION_PERCENTILE,yf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yf.DISABLED=new yf(-1,0,0);class _f{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){fa(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new _f(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Tf(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Sf(e),o=Tf(e);return o.add({}).next((s=>{fa("number"==typeof s);const a=new wh(s,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>ud(e.ct,t))),i=n.mutations.map((t=>ud(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let c=new Ql(((e,t)=>Ca(e.canonicalString(),t.canonicalString())));for(const e of r){const t=yl(this.userId,e.key.path,s);c=c.add(e.key.path.popLast()),u.push(o.put(l)),u.push(i.put(t,wl))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[s]=a.keys()})),Xa.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return Tf(e).get(t).next((e=>e?(fa(e.userId===this.userId),Ad(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?Xa.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Tf(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(fa(t.batchId>=n),i=Ad(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Tf(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Tf(e).W("userMutationsIndex",t).next((e=>e.map((e=>Ad(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=vl(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Sf(e).Y({range:r},((n,r,o)=>{const[s,a,l]=n,u=ml(a);if(s===this.userId&&t.path.isEqual(u))return Tf(e).get(l).next((e=>{if(!e)throw da();fa(e.userId===this.userId),i.push(Ad(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ql(Ca);const r=[];return t.forEach((t=>{const i=vl(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=Sf(e).Y({range:o},((e,r,i)=>{const[o,s,a]=e,l=ml(s);o===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(s)})),Xa.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=vl(this.userId,n),o=IDBKeyRange.lowerBound(i);let s=new Ql(Ca);return Sf(e).Y({range:o},((e,t,i)=>{const[o,a,l]=e,u=ml(a);o===this.userId&&n.isPrefixOf(u)?u.length===r&&(s=s.add(l)):i.done()})).next((()=>this.Fn(e,s)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Tf(e).get(t).next((e=>{if(null===e)throw da();fa(e.userId===this.userId),n.push(Ad(this.serializer,e))})))})),Xa.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return wf(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),Xa.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Xa.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Sf(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=ml(e[1]);r.push(t)}else n.done()})).next((()=>{fa(0===r.length)}))}))}containsKey(e,t){return Ef(e,this.userId,t)}xn(e){return xf(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Ef(e,t,n){const r=vl(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Sf(e).Y({range:o,J:!0},((e,n,r)=>{const[o,a,l]=e;o===t&&a===i&&(s=!0),r.done()})).next((()=>s))}function Tf(e){return Bl(e,"mutations")}function Sf(e){return Bl(e,"documentMutations")}function xf(e){return Bl(e,"mutationQueues")}class If{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new If(0)}static Bn(){return new If(-1)}}class kf{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new If(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>Pa.fromTimestamp(new Na(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Cf(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(fa(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Cf(e).Y(((o,s)=>{const a=Dd(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Xa.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Cf(e).Y(((e,n)=>{const r=Dd(n);t(r)}))}Ln(e){return Af(e).get("targetGlobalKey").next((e=>(fa(null!==e),e)))}kn(e,t){return Af(e).put("targetGlobalKey",t)}qn(e,t){return Cf(e).put(Nd(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=ic(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Cf(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const o=Dd(n);oc(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Df(e);return t.forEach((t=>{const o=dl(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),Xa.waitFor(r)}removeMatchingKeys(e,t,n){const r=Df(e);return Xa.forEach(t,(t=>{const i=dl(t.path);return Xa.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Df(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Df(e);let i=Vc();return r.Y({range:n,J:!0},((e,t,n)=>{const r=ml(e[1]),o=new Fa(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=dl(t.path),r=IDBKeyRange.bound([n],[Da(n)],!1,!0);let i=0;return Df(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Cf(e).get(t).next((e=>e?Dd(e):null))}}function Cf(e){return Bl(e,"targets")}function Af(e){return Bl(e,"targetGlobal")}function Df(e){return Bl(e,"targetDocuments")}function Nf(e,t){let[n,r]=e,[i,o]=t;const s=Ca(n,i);return 0===s?Ca(r,o):s}class Pf{constructor(e){this.Kn=e,this.buffer=new Ql(Nf),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Nf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Rf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){la("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){tl(e)?la("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Ya(e)}await this.zn(3e5)}))}}class Of{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Xa.resolve(ll._e);const n=new Pf(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(la("LruGarbageCollector","Garbage collection skipped; disabled"),Xa.resolve(vf)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(la("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),vf):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,o,s,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(la("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),aa()<=L.DEBUG&&la("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-u,"ms")),Xa.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Lf(e,t){return new Of(e,t)}class Mf{constructor(e,t){this.db=e,this.garbageCollector=Lf(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return Ff(e,n)}removeReference(e,t,n){return Ff(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Ff(e,t)}er(e,t){return function(e,t){let n=!1;return xf(e).Z((r=>Ef(e,r,t).next((e=>(e&&(n=!0),Xa.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((o,s)=>{if(s<=t){const t=this.er(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,Pa.min()),Df(e).delete(function(e){return[0,dl(e.path)]}(o)))))}));r.push(t)}})).next((()=>Xa.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Ff(e,t)}Xn(e,t){const n=Df(e);let r,i=ll._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[o,s]=e,{path:a,sequenceNumber:l}=n;0===o?(i!==ll._e&&t(new Fa(ml(r)),i),i=l,r=a):i=ll._e})).next((()=>{i!==ll._e&&t(new Fa(ml(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ff(e,t){return Df(e).put(function(e,t){return{targetId:0,path:dl(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Vf{constructor(){this.changes=new kc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Xa.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Uf{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return qf(e).put(n)}removeEntry(e,t,n){return qf(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Id(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=Nu.newInvalidDocument(t);return qf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Gf(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:Nu.newInvalidDocument(t)};return qf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Gf(t))},((e,r)=>{n={document:this.nr(t,r),size:bf(r)}})).next((()=>n))}getEntries(e,t){let n=Ac();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Ac(),r=new Gl(Fa.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,bf(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return Xa.resolve();let r=new Ql(Hf);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Gf(r.first()),Gf(r.last())),o=r.getIterator();let s=o.getNext();return qf(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Fa.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&Hf(s,i)<0;)n(s,null),s=o.getNext();s&&s.isEqual(i)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.U(Gf(s)):r.done()})).next((()=>{for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),Id(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qf(e).W(IDBKeyRange.bound(s,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Ac();for(const i of e){const e=this.nr(Fa.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Tc(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Ac();const o=Kf(t,n),s=Kf(t,Ka.max());return qf(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},((e,t,n)=>{const o=this.nr(Fa.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new zf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return jf(e).get("remoteDocumentGlobalKey").next((e=>(fa(!!e),e)))}tr(e,t){return jf(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=ld(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Fa.fromSegments(t.noDocument.path),r=Cd(t.noDocument.readTime);n=Nu.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return da();{const e=Fa.fromSegments(t.unknownDocument.path),r=Cd(t.unknownDocument.version);n=Nu.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Na(e[0],e[1]);return Pa.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Pa.min()))return e}return Nu.newInvalidDocument(e)}}function Bf(e){return new Uf(e)}class zf extends Vf{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new kc((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Ql(((e,t)=>Ca(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const s=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,s.readTime)),o.isValidDocument()){const a=xd(this.ar.serializer,o);r=r.add(i.path.popLast());const l=bf(a);n+=l-s.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=s.size,this.trackRemovals){const n=xd(this.ar.serializer,o.convertToNoDocument(Pa.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),Xa.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function jf(e){return Bl(e,"remoteDocumentGlobal")}function qf(e){return Bl(e,"remoteDocumentsV14")}function Gf(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Kf(e,t){const n=t.documentKey.path.toArray();return[e,Id(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Hf(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Ca(n[o],r[o]),i)return i;return i=Ca(n.length,r.length),i||(i=Ca(n[n.length-2],r[r.length-2]),i||Ca(n[n.length-1],r[r.length-1]))}class Qf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Wf{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&uh(n.mutation,e,Xl.empty(),Na.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Vc()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vc();const r=Rc();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Nc();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Rc();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Vc())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Ac();const o=Lc(),s=Lc();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof fh)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),uh(s.mutation,t,s.mutation.getFieldMask(),Na.now())):o.set(t.key,Xl.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new Qf(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=Lc();let r=new Gl(((e,t)=>e-t)),i=Vc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Xl.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Vc()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,u=Oc();l.forEach((e=>{if(!i.has(e)){const r=ah(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,u))}return Xa.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Fa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Xa.resolve(Rc());let s=-1,a=i;return o.next((t=>Xa.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Xa.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Vc()))).next((e=>({batchId:s,changes:Pc(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Fa(t)).next((e=>{let t=Nc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Nc();return this.indexManager.getCollectionParents(e,i).next((s=>Xa.forEach(s,(s=>{const a=function(e,t){return new cc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Nu.newInvalidDocument(r)))}));let n=Nc();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&uh(o.mutation,r,Xl.empty(),Na.now()),Tc(t,r)&&(n=n.insert(e,r))})),n}))}}class Yf{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Xa.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:$h(e.createTime)}}(t)),Xa.resolve()}getNamedQuery(e,t){return Xa.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Pd(e.bundledQuery),readTime:$h(e.readTime)}}(t)),Xa.resolve()}}class Xf{constructor(){this.overlays=new Gl(Fa.comparator),this.hr=new Map}getOverlay(e,t){return Xa.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Rc();return Xa.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Xa.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),Xa.resolve()}getOverlaysForCollection(e,t,n){const r=Rc(),i=t.length+1,o=new Fa(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Xa.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Gl(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Rc(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=Rc(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return Xa.resolve(s)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new _h(t,n));let i=this.hr.get(t);void 0===i&&(i=Vc(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class $f{constructor(){this.Pr=new Ql(Jf.Ir),this.Tr=new Ql(Jf.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Jf(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Jf(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new Fa(new Oa([])),n=new Jf(t,e),r=new Jf(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Fa(new Oa([])),n=new Jf(t,e),r=new Jf(t,e+1);let i=Vc();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Jf(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Jf{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Fa.comparator(e.key,t.key)||Ca(e.pr,t.pr)}static Er(e,t){return Ca(e.pr,t.pr)||Fa.comparator(e.key,t.key)}}class Zf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Ql(Jf.Ir)}checkEmpty(e){return Xa.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new wh(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.wr=this.wr.add(new Jf(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Xa.resolve(o)}lookupMutationBatch(e,t){return Xa.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return Xa.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Xa.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Xa.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Jf(t,0),r=new Jf(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),Xa.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ql(Ca);return t.forEach((e=>{const t=new Jf(e,0),r=new Jf(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),Xa.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Fa.isDocumentKey(i)||(i=i.child(""));const o=new Jf(new Fa(i),0);let s=new Ql(Ca);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.pr)),!0)}),o),Xa.resolve(this.Dr(s))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){fa(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Xa.forEach(t.mutations,(r=>{const i=new Jf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Jf(t,0),r=this.wr.firstAfterOrEqual(n);return Xa.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Xa.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ep{constructor(e){this.vr=e,this.docs=new Gl(Fa.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Xa.resolve(n?n.document.mutableCopy():Nu.newInvalidDocument(t))}getEntries(e,t){let n=Ac();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Nu.newInvalidDocument(e))})),Xa.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ac();const o=t.path,s=new Fa(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Ha(Ga(s),n)<=0||(r.has(s.key)||Tc(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return Xa.resolve(i)}getAllFromCollectionGroup(e,t,n,r){da()}Fr(e,t){return Xa.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new tp(this)}getSize(e){return Xa.resolve(this.size)}}class tp extends Vf{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),Xa.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class np{constructor(e){this.persistence=e,this.Mr=new kc((e=>ic(e)),oc),this.lastRemoteSnapshotVersion=Pa.min(),this.highestTargetId=0,this.Or=0,this.Nr=new $f,this.targetCount=0,this.Br=If.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),Xa.resolve()}getLastRemoteSnapshotVersion(e){return Xa.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xa.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),Xa.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),Xa.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new If(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Xa.resolve()}updateTargetData(e,t){return this.qn(t),Xa.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Xa.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),Xa.waitFor(i).next((()=>r))}getTargetCount(e){return Xa.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return Xa.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),Xa.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Xa.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Xa.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return Xa.resolve(n)}containsKey(e,t){return Xa.resolve(this.Nr.containsKey(t))}}class rp{constructor(e,t){this.Lr={},this.overlays={},this.kr=new ll(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new np(this),this.indexManager=new lf,this.remoteDocumentCache=function(e){return new ep(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Sd(t),this.$r=new Yf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Xf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new Zf(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){la("MemoryPersistence","Starting transaction:",e);const r=new ip(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return Xa.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class ip extends Wa{constructor(e){super(),this.currentSequenceNumber=e}}class op{constructor(e){this.persistence=e,this.zr=new $f,this.jr=null}static Hr(e){return new op(e)}get Jr(){if(this.jr)return this.jr;throw da()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),Xa.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),Xa.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Xa.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xa.forEach(this.Jr,(n=>{const r=Fa.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Pa.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return Xa.or([()=>Xa.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class sp{constructor(e){this.serializer=e}N(e,t,n,r){const i=new $a("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gl,{unique:!0}),e.createObjectStore("documentMutations")}(e),ap(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=Xa.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),ap(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pa.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gl,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Xa.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.Xr(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(o=o.next((()=>this.ti(i)))),n<8&&r>=8&&(o=o.next((()=>this.ni(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.ri(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Nl});t.createIndex("collectionPathOverlayIndex",Pl,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Rl,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:bl});t.createIndex("documentKeyIndex",_l),t.createIndex("collectionGroupIndex",El)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(o=o.next((()=>this.si(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:kl}).createIndex("sequenceNumberIndex",Cl,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Al}).createIndex("documentKeyIndex",Dl,{unique:!1})}(e)))),o}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=bf(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>Xa.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>Xa.forEach(n,(n=>{fa(n.userId===t.userId);const r=Ad(this.serializer,n);return wf(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const o=new Oa(n),s=function(e){return[0,dl(e)]}(o);r.push(t.get(s).next((n=>n?Xa.resolve():(n=>t.put({targetId:0,path:dl(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>Xa.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Il});const n=t.store("collectionParents"),r=new uf,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:dl(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new Oa(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,o]=e;const s=ml(r);return i(s.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=Dd(n),i=Nd(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),o=function(e){return e.document?new Fa(Oa.fromString(e.document.name).popFirst(5)):e.noDocument?Fa.fromSegments(e.noDocument.path):e.unknownDocument?Fa.fromSegments(e.unknownDocument.path):da()}(n).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))})).next((()=>Xa.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=Bf(this.serializer),i=new rp(op.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Vc();Ad(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Xa.forEach(n,((e,n)=>{const o=new ia(n),s=Ud.lt(this.serializer,o),a=i.getIndexManager(o),l=_f.lt(o,this.serializer,a,i.referenceDelegate);return new Wf(r,l,s,a).recalculateAndSaveOverlaysForDocumentKeys(new Ul(t,ll._e),e).next()}))}))}}function ap(e){e.createObjectStore("targetDocuments",{keyPath:Sl}).createIndex("documentTargetsIndex",xl,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Tl,{unique:!0}),e.createObjectStore("targetGlobal")}const lp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class up{constructor(e,t,n,r,i,o,s,a,l,u){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=o,this.document=s,this._i=l,this.ai=u,this.ui=c,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!up.D())throw new ga(ma.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Mf(this,r),this.Ti=t+"main",this.serializer=new Sd(a),this.Ei=new Ja(this.Ti,this.ui,new sp(this.serializer)),this.Qr=new kf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Bf(this.serializer),this.$r=new Md,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&ua("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ga(ma.FAILED_PRECONDITION,lp);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new ll(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>hp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(tl(e))return la("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return la("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return cp(e).get("owner").next((e=>Xa.resolve(this.Si(e))))}bi(e){return hp(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Bl(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Xa.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Xa.resolve(!0):cp(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new ga(ma.FAILED_PRECONDITION,lp);return!1}}return!(!this.networkEnabled||!this.inForeground)||hp(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&la("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Ul(e,ll._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Bi()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>hp(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return _f.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new hf(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ud.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){la("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?Vl:14===e?Fl:13===e?Ml:12===e?Ll:11===e?Ol:void da()}(this.ui);let o;return this.Ei.runTransaction(e,r,i,(r=>(o=new Ul(r,this.kr?this.kr.next():ll._e),"readwrite-primary"===t?this.gi(o).next((e=>!!e||this.pi(o))).next((t=>{if(!t)throw ua("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new ga(ma.FAILED_PRECONDITION,Qa);return n(o)})).next((e=>this.wi(o).next((()=>e)))):this.ki(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}ki(e){return cp(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ga(ma.FAILED_PRECONDITION,lp)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cp(e).put("owner",t)}static D(){return Ja.D()}yi(e){const t=cp(e);return t.get("owner").next((e=>this.Si(e)?(la("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Xa.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(ua("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;y()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return la("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ua("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){ua("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function cp(e){return Bl(e,"owner")}function hp(e){return Bl(e,"clientMetadata")}function dp(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class fp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Vc(),r=Vc();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new fp(e,t.fromCache,n,r)}}class pp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class mp{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=y()?8:Ja.v(v())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new pp;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(aa()<=L.DEBUG&&la("QueryEngine","SDK will not create cache indexes for query:",Ec(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Xa.resolve()):(aa()<=L.DEBUG&&la("QueryEngine","Query:",Ec(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(aa()<=L.DEBUG&&la("QueryEngine","The SDK decides to create cache indexes for query:",Ec(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gc(t))):Xa.resolve())}ji(e,t){if(fc(t))return Xa.resolve(null);let n=gc(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=wc(t,null,"F"),n=gc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Vc(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Zi(t,r);return this.Xi(t,o,i,n.readTime)?this.ji(e,wc(t,null,"F")):this.es(e,o,t,n)}))))})))))}Hi(e,t,n,r){return fc(t)||r.isEqual(Pa.min())?Xa.resolve(null):this.zi.getDocuments(e,n).next((i=>{const o=this.Zi(t,i);return this.Xi(t,o,n,r)?Xa.resolve(null):(aa()<=L.DEBUG&&la("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ec(t)),this.es(e,o,t,qa(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Ql(xc(e));return t.forEach(((t,r)=>{Tc(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return aa()<=L.DEBUG&&la("QueryEngine","Using full collection scan to execute query:",Ec(t)),this.zi.getDocumentsMatchingQuery(e,t,Ka.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class gp{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Gl(Ca),this.rs=new kc((e=>ic(e)),oc),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wf(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function vp(e,t,n,r){return new gp(e,t,n,r)}async function yp(e,t){const n=pa(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=Vc();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({us:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function wp(e){const t=pa(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function bp(e,t,n){let r=Vc(),i=Vc();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Ac();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Pa.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):la("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{cs:r,ls:i}}))}function _p(e,t){const n=pa(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Ep(e,t){const n=pa(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,Xa.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Td(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Tp(e,t,n){const r=pa(e),i=r.ns.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!tl(e))throw e;la("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Sp(e,t,n){const r=pa(e);let i=Pa.min(),o=Vc();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=pa(e),i=r.rs.get(n);return void 0!==i?Xa.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,gc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Pa.min(),n?o:Vc()))).next((e=>(kp(r,Sc(t),e),{documents:e,hs:o})))))}function xp(e,t){const n=pa(e),r=pa(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function Ip(e,t){const n=pa(e),r=n.ss.get(t)||Pa.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,qa(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(kp(n,t,e),e)))}function kp(e,t,n){let r=e.ss.get(t)||Pa.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Cp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vc();const r=await Ep(e,gc(Pd(t.bundledQuery))),i=pa(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const o=$h(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(e,t);const s=r.withResumeToken(Jl.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(s.targetId,s),i.Qr.updateTargetData(e,s).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function Ap(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Dp(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Np(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Pp{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new ga(r.error.code,r.error.message))),o?new Pp(e,t,r.state,i):(ua("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rp{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new ga(n.error.code,n.error.message))),i?new Rp(e,n.state,r):(ua("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Op{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Bc();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=hl(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Op(e,i):(ua("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Lp{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Lp(t.clientId,t.onlineState):(ua("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Mp{constructor(){this.activeTargetIds=Bc()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fp{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Gl(Ca),this.started=!1,this.ys=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Ap(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Mp),this.bs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(Ap(this.persistenceKey,n));if(e){const t=Op.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,n){this.Bs(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Np(this.persistenceKey,e));if(n){const r=Rp.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Np(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return la("SharedClientState","READ",e,t),t}setItem(e,t){la("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){la("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(la("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void ua("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=ll._e;if(null!=e)try{const n=JSON.parse(e);fa("number"==typeof n),t=n}catch(e){ua("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==ll._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,n){const r=new Pp(this.currentUser,e,t,n),i=Dp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Ls(e){const t=Dp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=Np(this.persistenceKey,e),i=new Rp(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return Op.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Pp.Es(new ia(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return Rp.Es(r,t)}xs(e){return Lp.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);la("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),o=[],s=[];return i.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{i.has(e)||s.push(e)})),this.syncEngine.eo(o,s).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Bc();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Vp{constructor(){this.no=new Mp,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Mp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Up{io(e){}shutdown(){}}class Bp{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){la("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){la("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let zp=null;function jp(){return null===zp?zp=268435456+Math.round(2147483648*Math.random()):zp++,"0x"+zp.toString(16)}const qp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gp{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Kp="WebChannelConnection";class Hp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const o=jp(),s=this.bo(e,t.toUriEncodedString());la("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,s,a,n).then((t=>(la("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw ca("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}vo(e,t,n,r,i,o){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+oa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=qp[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=jp();return new Promise(((o,s)=>{const a=new ea;a.setWithCredentials(!0),a.listenOnce(Xs.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ys.NO_ERROR:const t=a.getResponseJson();la(Kp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case Ys.TIMEOUT:la(Kp,"RPC '".concat(e,"' ").concat(i," timed out")),s(new ga(ma.DEADLINE_EXCEEDED,"Request time out"));break;case Ys.HTTP_ERROR:const n=a.getStatus();if(la(Kp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ma).indexOf(t)>=0?t:ma.UNKNOWN}(t.status);s(new ga(e,t.message))}else s(new ga(ma.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new ga(ma.UNAVAILABLE,"Connection failed."));break;default:da()}}finally{la(Kp,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);la(Kp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=jp(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Qs(),s=Ws(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");la(Kp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const c=o.createWebChannel(u,a);let h=!1,d=!1;const f=new Gp({lo:t=>{d?la(Kp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(la(Kp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),h=!0),la(Kp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},ho:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,Zs.EventType.OPEN,(()=>{d||la(Kp,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(c,Zs.EventType.CLOSE,(()=>{d||(d=!0,la(Kp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(c,Zs.EventType.ERROR,(t=>{d||(d=!0,ca(Kp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new ga(ma.UNAVAILABLE,"The operation could not be completed")))})),p(c,Zs.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];fa(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){la(Kp,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Th[e];if(void 0!==t)return Ih(t)}(t),i=s.message;void 0===n&&(n=ma.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.Vo(new ga(n,i)),c.close()}else la(Kp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(s,$s.STAT_EVENT,(t=>{t.stat===Js.PROXY?la(Kp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Js.NOPROXY&&la(Kp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function Qp(){return"undefined"!=typeof window?window:null}function Wp(){return"undefined"!=typeof document?document:null}function Yp(e){return new Hh(e,!0)}class Xp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&la("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class $p{constructor(e,t,n,r,i,o,s,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Xp(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===ma.RESOURCE_EXHAUSTED?(ua(t.toString()),ua("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===ma.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new ga(ma.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return la("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(la("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Jp extends $p{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:da()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(fa(void 0===t||"string"==typeof t),Jl.fromBase64String(t||"")):(fa(void 0===t||t instanceof Uint8Array),Jl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?ma.UNKNOWN:Ih(e.code);return new ga(t,e.message||"")}(s);n=new Vh(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=nd(e,r.document.name),o=$h(r.document.updateTime),s=r.document.createTime?$h(r.document.createTime):Pa.min(),a=new Au({mapValue:{fields:r.document.fields}}),l=Nu.newFoundDocument(i,o,s,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Mh(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=nd(e,r.document),o=r.readTime?$h(r.readTime):Pa.min(),s=Nu.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Mh([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=nd(e,r.document),o=r.removedTargetIds||[];n=new Mh([],o,i,null)}else{if(!("filter"in t))return da();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Eh(r,i),s=e.targetId;n=new Fh(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Pa.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Pa.min():t.readTime?$h(t.readTime):Pa.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=od(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=sc(r)?{documents:hd(e,r)}:{query:dd(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Yh(e,t.resumeToken);const r=Qh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Pa.min())>0){n.readTime=Wh(e,t.snapshotVersion.toTimestamp());const r=Qh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return da()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=od(this.serializer),t.removeTarget=e,this.t_(t)}}class Zp extends $p{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(fa(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(fa(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?$h(e.updateTime):$h(t);return n.isEqual(Pa.min())&&(n=$h(t)),new rh(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=$h(e.commitTime);return this.listener.T_(n,t)}return fa(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=od(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>ud(this.serializer,e)))};this.t_(t)}}class em extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new ga(ma.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.So(e,Zh(t,n),r,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ma.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ga(ma.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[s,a]=o;return this.connection.vo(e,Zh(t,n),r,s,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ma.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ga(ma.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class tm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(ua(t),this.g_=!1):la("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class nm{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{hm(this)&&(la("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=pa(e);t.v_.add(4),await im(t),t.x_.set("Unknown"),t.v_.delete(4),await rm(t)}(this))}))})),this.x_=new tm(n,r)}}async function rm(e){if(hm(e))for(const t of e.F_)await t(!0)}async function im(e){for(const t of e.F_)await t(!1)}function om(e,t){const n=pa(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),cm(n)?um(n):Am(n).Jo()&&am(n,t))}function sm(e,t){const n=pa(e),r=Am(n);n.C_.delete(t),r.Jo()&&lm(n,t),0===n.C_.size&&(r.Jo()?r.Xo():hm(n)&&n.x_.set("Unknown"))}function am(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Pa.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Am(e).c_(t)}function lm(e,t){e.O_.Oe(t),Am(e).l_(t)}function um(e){e.O_=new Bh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Am(e).start(),e.x_.p_()}function cm(e){return hm(e)&&!Am(e).Ho()&&e.C_.size>0}function hm(e){return 0===pa(e).v_.size}function dm(e){e.O_=void 0}async function fm(e){e.C_.forEach(((t,n)=>{am(e,t)}))}async function pm(e,t){dm(e),cm(e)?(e.x_.S_(t),um(e)):e.x_.set("Unknown")}async function mm(e,t,n){if(e.x_.set("Online"),t instanceof Vh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){la("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await gm(e,n)}else if(t instanceof Mh?e.O_.$e(t):t instanceof Fh?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(Pa.min()))try{const t=await wp(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Jl.EMPTY_BYTE_STRING,r.snapshotVersion)),lm(e,t);const i=new Td(r.target,t,n,r.sequenceNumber);am(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){la("RemoteStore","Failed to raise snapshot:",t),await gm(e,t)}}async function gm(e,t,n){if(!tl(t))throw t;e.v_.add(1),await im(e),e.x_.set("Offline"),n||(n=()=>wp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{la("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await rm(e)}))}function vm(e,t){return t().catch((n=>gm(e,n,t)))}async function ym(e){const t=pa(e),n=Dm(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;wm(t);)try{const e=await _p(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,bm(t,e)}catch(e){await gm(t,e)}_m(t)&&Em(t)}function wm(e){return hm(e)&&e.D_.length<10}function bm(e,t){e.D_.push(t);const n=Dm(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function _m(e){return hm(e)&&!Dm(e).Ho()&&e.D_.length>0}function Em(e){Dm(e).start()}async function Tm(e){Dm(e).d_()}async function Sm(e){const t=Dm(e);for(const n of e.D_)t.I_(n.mutations)}async function xm(e,t,n){const r=e.D_.shift(),i=bh.from(r,t,n);await vm(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ym(e)}async function Im(e,t){t&&Dm(e).P_&&await async function(e,t){if(function(e){return xh(e)&&e!==ma.ABORTED}(t.code)){const n=e.D_.shift();Dm(e).Zo(),await vm(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ym(e)}}(e,t),_m(e)&&Em(e)}async function km(e,t){const n=pa(e);n.asyncQueue.verifyOperationInProgress(),la("RemoteStore","RemoteStore received new credentials");const r=hm(n);n.v_.add(3),await im(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await rm(n)}async function Cm(e,t){const n=pa(e);t?(n.v_.delete(2),await rm(n)):t||(n.v_.add(2),await im(n),n.x_.set("Unknown"))}function Am(e){return e.N_||(e.N_=function(e,t,n){const r=pa(e);return r.R_(),new Jp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:fm.bind(null,e),To:pm.bind(null,e),u_:mm.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),cm(e)?um(e):e.x_.set("Unknown")):(await e.N_.stop(),dm(e))}))),e.N_}function Dm(e){return e.B_||(e.B_=function(e,t,n){const r=pa(e);return r.R_(),new Zp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Tm.bind(null,e),To:Im.bind(null,e),E_:Sm.bind(null,e),T_:xm.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await ym(e)):(await e.B_.stop(),e.D_.length>0&&(la("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class Nm{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new va,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new Nm(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ga(ma.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pm(e,t){if(ua("AsyncQueue","".concat(t,": ").concat(e)),tl(e))return new ga(ma.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Rm{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Fa.comparator(t.key,n.key):(e,t)=>Fa.comparator(e.key,t.key),this.keyedMap=Nc(),this.sortedSet=new Gl(this.comparator)}static emptySet(e){return new Rm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Rm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Om{constructor(){this.L_=new Gl(Fa.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):da():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Lm{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new Lm(e,t,Rm.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Mm{constructor(){this.q_=void 0,this.Q_=[]}}class Fm{constructor(){this.queries=new kc((e=>_c(e)),bc),this.onlineState="Unknown",this.K_=new Set}}async function Vm(e,t){const n=pa(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new Mm),i)try{o.q_=await n.onListen(r)}catch(e){const n=Pm(e,"Initialization of query '".concat(Ec(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.Q_.push(t),t.U_(n.onlineState),o.q_&&t.W_(o.q_)&&jm(n)}async function Um(e,t){const n=pa(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.Q_.indexOf(t);e>=0&&(o.Q_.splice(e,1),i=0===o.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Bm(e,t){const n=pa(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&jm(n)}function zm(e,t,n){const r=pa(e),i=r.queries.get(t);if(i)for(const o of i.Q_)o.onError(n);r.queries.delete(t)}function jm(e){e.K_.forEach((e=>{e.next()}))}class qm{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Lm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=Lm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class Gm{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class Km{constructor(e){this.serializer=e}Ps(e){return nd(this.serializer,e)}Is(e){return e.metadata.exists?ld(this.serializer,e.document,!1):Nu.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return $h(e)}}class Hm{constructor(e,t,n){this.ta=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Qm(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const n=Oa.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,n=new Km(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Vc()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=pa(e);let o=Vc(),s=Ac();for(const u of n){const e=t.Ps(u.metadata.name);u.document&&(o=o.add(e));const n=t.Is(u);n.setReadTime(t.Ts(u.metadata.readTime)),s=s.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await Ep(i,function(e){return gc(dc(Oa.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>bp(e,a,s).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,o,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new Km(this.serializer),this.documents,this.ta.id),t=this.ra(this.documents);for(const n of this.queries)await Cp(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function Qm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Wm{constructor(e){this.key=e}}class Ym{constructor(e){this.key=e}}class Xm{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Vc(),this.mutatedKeys=Vc(),this.ua=xc(e),this.ca=new Rm(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new Om,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=Tc(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Ia(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.ua(c,a)>0||l&&this.ua(c,l)<0)&&(s=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(s=!0)),f&&(c?(o=o.add(c),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:o,Pa:n,Xi:s,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return da()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const s=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,l=a!==this._a;return this._a=a,0!==o.length||l?{snapshot:new Lm(this.query,e.ca,i,o,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:s}:{da:s}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Om,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Vc(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new Ym(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new Wm(n))})),t}Ra(e){this.oa=e.hs,this.aa=Vc();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return Lm.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class $m{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Jm{constructor(e){this.key=e,this.ma=!1}}class Zm{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new kc((e=>_c(e)),bc),this.pa=new Map,this.ya=new Set,this.wa=new Gl(Fa.comparator),this.Sa=new Map,this.ba=new $f,this.Da={},this.Ca=new Map,this.va=If.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function eg(e,t){const n=Ig(e);let r,i;const o=n.ga.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{const e=await Ep(n.localStore,gc(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await tg(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&om(n.remoteStore,e)}return i}async function tg(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await Sp(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return dg(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const o=await Sp(e.localStore,t,!0),s=new Xm(t,o.hs),a=s.ha(o.documents),l=Lh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=s.applyChanges(a,e.isPrimaryClient,l);dg(e,n,u.da);const c=new $m(t,n,s);return e.ga.set(t,c),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),u.snapshot}async function ng(e,t){const n=pa(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!bc(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Tp(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),sm(n.remoteStore,r.targetId),cg(n,r.targetId)})).catch(Ya)):(cg(n,r.targetId),await Tp(n.localStore,r.targetId,!0))}async function rg(e,t){const n=pa(e);try{const e=await function(e,t){const n=pa(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const s=[];t.targetChanges.forEach(((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Qr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,o.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Jl.EMPTY_BYTE_STRING,Pa.min()).withLastLimboFreeSnapshotVersion(Pa.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,o)&&s.push(n.Qr.updateTargetData(e,u))}));let a=Ac(),l=Vc();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(bp(e,o,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(Pa.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return Xa.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(fa(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?fa(r.ma):e.removedDocuments.size>0&&(fa(r.ma),r.ma=!1))})),await mg(n,e,t)}catch(e){await Ya(e)}}function ig(e,t,n){const r=pa(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=pa(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&jm(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function og(e,t,n){const r=pa(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),o=i&&i.key;if(o){let e=new Gl(Fa.comparator);e=e.insert(o,Nu.newNoDocument(o,Pa.min()));const n=Vc().add(o),i=new Oh(Pa.min(),new Map,new Gl(Ca),e,n);await rg(r,i),r.wa=r.wa.remove(o),r.Sa.delete(t),pg(r)}else await Tp(r.localStore,t,!1).then((()=>cg(r,t,n))).catch(Ya)}async function sg(e,t){const n=pa(e),r=t.batch.batchId;try{const e=await function(e,t){const n=pa(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=Xa.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);fa(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Vc();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);ug(n,r,null),lg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mg(n,e)}catch(e){await Ya(e)}}async function ag(e,t,n){const r=pa(e);try{const e=await function(e,t){const n=pa(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(fa(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);ug(r,t,n),lg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await mg(r,e)}catch(n){await Ya(n)}}function lg(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function ug(e,t,n){const r=pa(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function cg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||hg(e,t)}))}function hg(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(sm(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),pg(e))}function dg(e,t,n){for(const r of n)r instanceof Wm?(e.ba.addReference(r.key,t),fg(e,r)):r instanceof Ym?(la("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||hg(e,r.key)):da()}function fg(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(la("SyncEngine","New document in limbo: "+n),e.ya.add(r),pg(e))}function pg(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new Fa(Oa.fromString(t)),r=e.va.next();e.Sa.set(r,new Jm(n)),e.wa=e.wa.insert(n,r),om(e.remoteStore,new Td(gc(dc(n.path)),r,"TargetPurposeLimboResolution",ll._e))}}async function mg(e,t,n){const r=pa(e),i=[],o=[],s=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{s.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=fp.Ki(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.fa.u_(i),await async function(e,t){const n=pa(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Xa.forEach(t,(t=>Xa.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Xa.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!tl(e))throw e;la("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,o))}async function gg(e,t){const n=pa(e);if(!n.currentUser.isEqual(t)){la("SyncEngine","User change. New user:",t.toKey());const e=await yp(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new ga(ma.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await mg(n,e.us)}}function vg(e,t){const n=pa(e),r=n.Sa.get(t);if(r&&r.ma)return Vc().add(r.key);{let e=Vc();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}async function yg(e,t){const n=pa(e),r=await Sp(n.localStore,t.query,!0),i=t.view.Ra(r);return n.isPrimaryClient&&dg(n,t.targetId,i.da),i}async function wg(e,t){const n=pa(e);return Ip(n.localStore,t).then((e=>mg(n,e)))}async function bg(e,t,n,r){const i=pa(e),o=await function(e,t){const n=pa(e),r=pa(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Xa.resolve(null)))))}(i.localStore,t);null!==o?("pending"===n?await ym(i.remoteStore):"acknowledged"===n||"rejected"===n?(ug(i,t,r||null),lg(i,t),function(e,t){pa(pa(e).mutationQueue).Mn(t)}(i.localStore,t)):da(),await mg(i,o)):la("SyncEngine","Cannot apply mutation batch with id: "+t)}async function _g(e,t,n){const r=pa(e),i=[],o=[];for(const s of t){let e;const t=r.pa.get(s);if(t&&0!==t.length){e=await Ep(r.localStore,gc(t[0]));for(const e of t){const t=r.ga.get(e),n=await yg(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await xp(r.localStore,s);e=await Ep(r.localStore,t),await tg(r,Eg(t),s,!1,e.resumeToken)}i.push(e)}return r.fa.u_(o),i}function Eg(e){return hc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Tg(e){return function(e){return pa(pa(e).persistence).Li()}(pa(e).localStore)}async function Sg(e,t,n,r){const i=pa(e);if(i.Fa)return void la("SyncEngine","Ignoring unexpected query state notification.");const o=i.pa.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await Ip(i.localStore,Sc(o[0])),r=Oh.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Jl.EMPTY_BYTE_STRING);await mg(i,e,r);break}case"rejected":await Tp(i.localStore,t,!0),cg(i,t,r);break;default:da()}}async function xg(e,t,n){const r=Ig(e);if(r.Fa){for(const e of t){if(r.pa.has(e)){la("SyncEngine","Adding an already active target "+e);continue}const t=await xp(r.localStore,e),n=await Ep(r.localStore,t);await tg(r,Eg(t),n.targetId,!1,n.resumeToken),om(r.remoteStore,n)}for(const e of n)r.pa.has(e)&&await Tp(r.localStore,e,!1).then((()=>{sm(r.remoteStore,e),cg(r,e)})).catch(Ya)}}function Ig(e){const t=pa(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=rg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=og.bind(null,t),t.fa.u_=Bm.bind(null,t.eventManager),t.fa.xa=zm.bind(null,t.eventManager),t}function kg(e){const t=pa(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=sg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ag.bind(null,t),t}class Cg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Yp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return vp(this.persistence,new mp,e.initialUser,this.serializer)}createPersistence(e){return new rp(op.Hr,this.serializer)}createSharedClientState(e){return new Vp}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Ag extends Cg{constructor(e,t,n){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await kg(this.Na.syncEngine),await ym(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return vp(this.persistence,new mp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Rf(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new al(t,this.persistence);return new sl(e.asyncQueue,n)}createPersistence(e){const t=dp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?yf.withCacheSize(this.cacheSizeBytes):yf.DEFAULT;return new up(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Qp(),Wp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Vp}}class Dg extends Ag{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Na.syncEngine;this.sharedClientState instanceof Fp&&(this.sharedClientState.syncEngine={Zs:bg.bind(null,t),Xs:Sg.bind(null,t),eo:xg.bind(null,t),Li:Tg.bind(null,t),Ys:wg.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=pa(e);if(Ig(n),kg(n),!0===t&&!0!==n.Fa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await _g(n,e.toArray());n.Fa=!0,await Cm(n.remoteStore,!0);for(const r of t)om(n.remoteStore,r)}else if(!1===t&&!1!==n.Fa){const e=[];let t=Promise.resolve();n.pa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(cg(n,i),Tp(n.localStore,i,!0)))),sm(n.remoteStore,i)})),await t,await _g(n,e),function(e){const t=pa(e);t.Sa.forEach(((e,n)=>{sm(t.remoteStore,n)})),t.ba.mr(),t.Sa=new Map,t.wa=new Gl(Fa.comparator)}(n),n.Fa=!1,await Cm(n.remoteStore,!1)}}(this.Na.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Qp();if(!Fp.D(t))throw new ga(ma.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=dp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Ng{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ig(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=gg.bind(null,this.syncEngine),await Cm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Fm}createDatastore(e){const t=Yp(e.databaseInfo.databaseId),n=function(e){return new Hp(e)}(e.databaseInfo);return function(e,t,n,r){return new em(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new nm(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>ig(this.syncEngine,e,0)),Bp.D()?new Bp:new Up)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new Zm(e,t,n,r,i,o);return s&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=pa(e);la("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await im(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function Pg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Rg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):ua("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Og{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new va,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((e=>{e&&e.ea()?this.metadata.resolve(e.X_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(e=>this.metadata.reject(e)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(null===e)return null;const t=this.qa.decode(e),n=Number(t);isNaN(n)&&this.$a("length string (".concat(t,") is not valid number"));const r=await this.Ua(n);return new Gm(JSON.parse(r),e.length+n)}Wa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(0===this.buffer.length)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const t=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}$a(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ga(){const e=await this.ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Lg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ga(ma.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=pa(e),r={documents:t.map((e=>td(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,Oa.emptyPath(),r,t.length),o=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){fa(!!t.found),t.found.name,t.found.updateTime;const n=nd(e,t.found.name),r=$h(t.found.updateTime),i=t.found.createTime?$h(t.found.createTime):Pa.min(),o=new Au({mapValue:{fields:t.found.fields}});return Nu.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){fa(!!t.missing),fa(!!t.readTime);const n=nd(e,t.missing),r=$h(t.readTime);return Nu.newNoDocument(n,r)}(e,t):da()}(n.serializer,e);o.set(t.key.toString(),t)}));const s=[];return t.forEach((e=>{const t=o.get(e.toString());fa(!!t),s.push(t)})),s}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new vh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Fa.fromPath(t);this.mutations.push(new yh(n,this.precondition(n)))})),await async function(e,t){const n=pa(e),r={writes:t.map((e=>ud(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,Oa.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw da();t=Pa.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ga(ma.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Pa.min())?ih.exists(!1):ih.updateTime(t):ih.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pa.min()))throw new ga(ma.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ih.updateTime(t)}return ih.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Mg{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.za=n.maxAttempts,this.jo=new Xp(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const e=new Lg(this.datastore),t=this.Ja(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ya(e)}))))})).catch((e=>{this.Ya(e)}))}))}Ja(e){try{const t=this.updateFunction(e);return!ul(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!xh(t)}return!1}}class Fg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ia.UNAUTHENTICATED,this.clientId=ka.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{la("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(la("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ga(ma.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new va;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Pm(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Vg(e,t){e.asyncQueue.verifyOperationInProgress(),la("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await yp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Ug(e,t){e.asyncQueue.verifyOperationInProgress();const n=await zg(e);la("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>km(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>km(t.remoteStore,n))),e._onlineComponents=t}function Bg(e){return"FirebaseError"===e.name?e.code===ma.FAILED_PRECONDITION||e.code===ma.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function zg(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){la("FirestoreClient","Using user provided OfflineComponentProvider");try{await Vg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Bg(n))throw n;ca("Error using user provided cache. Falling back to memory cache: "+n),await Vg(e,new Cg)}}else la("FirestoreClient","Using default OfflineComponentProvider"),await Vg(e,new Cg);return e._offlineComponents}async function jg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(la("FirestoreClient","Using user provided OnlineComponentProvider"),await Ug(e,e._uninitializedComponentsProvider._online)):(la("FirestoreClient","Using default OnlineComponentProvider"),await Ug(e,new Ng))),e._onlineComponents}function qg(e){return zg(e).then((e=>e.persistence))}function Gg(e){return zg(e).then((e=>e.localStore))}function Kg(e){return jg(e).then((e=>e.remoteStore))}function Hg(e){return jg(e).then((e=>e.syncEngine))}function Qg(e){return jg(e).then((e=>e.datastore))}async function Wg(e){const t=await jg(e),n=t.eventManager;return n.onListen=eg.bind(null,t.syncEngine),n.onUnlisten=ng.bind(null,t.syncEngine),n}function Yg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new va;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Rg({next:o=>{t.enqueueAndForget((()=>Um(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new ga(ma.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new ga(ma.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new qm(dc(n.path),o,{includeMetadataChanges:!0,Z_:!0});return Vm(e,s)}(await Wg(e),e.asyncQueue,t,n,r))),r.promise}function Xg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new va;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Rg({next:n=>{t.enqueueAndForget((()=>Um(e,s))),n.fromCache&&"server"===r.source?i.reject(new ga(ma.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new qm(n,o,{includeMetadataChanges:!0,Z_:!0});return Vm(e,s)}(await Wg(e),e.asyncQueue,t,n,r))),r.promise}function $g(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Ch().encode(e):e,function(e,t){return new Og(e,t)}(function(e,t){if(e instanceof Uint8Array)return Pg(e,t);if(e instanceof ArrayBuffer)return Pg(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Yp(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=pa(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=pa(e),r=$h(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Qm(r));const i=new Hm(r,e.localStore,t.serializer);let o=await t.Oa();for(;o;){const e=await i.na(o);e&&n._updateProgress(e),o=await t.Oa()}const s=await i.complete();return await mg(e,s.sa,void 0),await function(e,t){const n=pa(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(s.progress),Promise.resolve(s.ia)}catch(e){return ca("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Hg(e),i,r)}))}function Jg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Zg=new Map;function ev(e,t,n){if(!n)throw new ga(ma.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function tv(e,t,n,r){if(!0===t&&!0===r)throw new ga(ma.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function nv(e){if(!Fa.isDocumentKey(e))throw new ga(ma.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function rv(e){if(Fa.isDocumentKey(e))throw new ga(ma.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function iv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":da()}function ov(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ga(ma.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=iv(e);throw new ga(ma.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function sv(e,t){if(t<=0)throw new ga(ma.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class av{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ga(ma.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ga(ma.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ga(ma.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ga(ma.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ga(ma.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lv{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new av({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ga(ma.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ga(ma.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new av(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new wa;switch(e.type){case"firstParty":return new Ta(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ga(ma.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Zg.get(e);t&&(la("ComponentProvider","Removing Datastore"),Zg.delete(e),t.terminate())}(this),Promise.resolve()}}function uv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=ov(e,lv))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ia.MOCK_USER;else{t=g(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new ga(ma.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ia(o)}e._authCredentials=new ba(new ya(t,n))}}class cv{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new cv(this.firestore,e,this._query)}}class hv{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dv(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hv(this.firestore,e,this._key)}}class dv extends cv{constructor(e,t,n){super(e,t,dc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hv(this.firestore,null,new Fa(e))}withConverter(e){return new dv(this.firestore,e,this._path)}}function fv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=A(e),ev("collection","path",t),e instanceof lv){const n=Oa.fromString(t,...r);return rv(n),new dv(e,null,n)}{if(!(e instanceof hv||e instanceof dv))throw new ga(ma.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Oa.fromString(t,...r));return rv(n),new dv(e.firestore,null,n)}}function pv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=A(e),1===arguments.length&&(t=ka.newId()),ev("doc","path",t),e instanceof lv){const n=Oa.fromString(t,...r);return nv(n),new hv(e,null,new Fa(n))}{if(!(e instanceof hv||e instanceof dv))throw new ga(ma.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Oa.fromString(t,...r));return nv(n),new hv(e.firestore,e instanceof dv?e.converter:null,new Fa(n))}}function mv(e,t){return e=A(e),t=A(t),(e instanceof hv||e instanceof dv)&&(t instanceof hv||t instanceof dv)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function gv(e,t){return e=A(e),t=A(t),e instanceof cv&&t instanceof cv&&e.firestore===t.firestore&&bc(e._query,t._query)&&e.converter===t.converter}class vv{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Xp(this,"async_queue_retry"),this._u=()=>{const e=Wp();e&&la("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=Wp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=Wp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new va;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!tl(e))throw e;la("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ua("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=Nm.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&da()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function yv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class wv{constructor(){this._progressObserver={},this._taskCompletionResolver=new va,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class bv extends lv{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new vv,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ev(this),this._firestoreClient.terminate()}}function _v(e){return e._firestoreClient||Ev(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ev(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new su(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Jg(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Fg(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Tv(e,t,n){const r=new va;return e.asyncQueue.enqueue((async()=>{try{await Vg(e,n),await Ug(e,t),r.resolve()}catch(e){const n=e;if(!Bg(n))throw n;ca("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Sv(e){return function(e){const t=new va;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=pa(e);hm(n.remoteStore)||la("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=pa(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ca.get(e)||[];r.push(t),n.Ca.set(e,r)}catch(e){const n=Pm(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Hg(e),t))),t.promise}(_v(e=ov(e,bv)))}function xv(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await qg(e),n=await Kg(e);return t.setNetworkEnabled(!0),function(e){const t=pa(e);return t.v_.delete(0),rm(t)}(n)}))}(_v(e=ov(e,bv)))}function Iv(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await qg(e),n=await Kg(e);return t.setNetworkEnabled(!1),async function(e){const t=pa(e);t.v_.add(0),await im(t),t.x_.set("Offline")}(n)}))}(_v(e=ov(e,bv)))}function kv(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=pa(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await Gg(e),t)))}(_v(e=ov(e,bv)),t).then((t=>t?new cv(e,null,t.query):null))}function Cv(e){if(e._initialized||e._terminated)throw new ga(ma.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Av{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Av(Jl.fromBase64String(e))}catch(e){throw new ga(ma.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Av(Jl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Dv{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ga(ma.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ma(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Nv{constructor(e){this._methodName=e}}class Pv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ga(ma.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ga(ma.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ca(this._lat,e._lat)||Ca(this._long,e._long)}}const Rv=/^__.*__$/;class Ov{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new fh(e,this.data,this.fieldMask,t,this.fieldTransforms):new dh(e,this.data,t,this.fieldTransforms)}}class Lv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new fh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Mv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw da()}}class Fv{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Fv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return ry(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(Mv(this.du)&&Rv.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Vv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Yp(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Fv({du:e,methodName:t,wu:n,path:Ma.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uv(e){const t=e._freezeSettings(),n=Yp(e._databaseId);return new Vv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Bv(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Su(o.merge||o.mergeFields?2:0,t,n,i);Zv("Data must be an object, but it was:",s,r);const a=$v(r,s);let l,u;if(o.merge)l=new Xl(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=ey(t,r,n);if(!s.contains(i))throw new ga(ma.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));iy(e,i)||e.push(i)}l=new Xl(e),u=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=s.fieldTransforms;return new Ov(new Au(a),l,u)}class zv extends Nv{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zv}}function jv(e,t,n){return new Fv({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class qv extends Nv{_toFieldTransform(e){return new nh(e.path,new Wc)}isEqual(e){return e instanceof qv}}class Gv extends Nv{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=jv(this,e,!0),n=this.bu.map((e=>Xv(e,t))),r=new Yc(n);return new nh(e.path,r)}isEqual(e){return e instanceof Gv&&S(this.bu,e.bu)}}class Kv extends Nv{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=jv(this,e,!0),n=this.bu.map((e=>Xv(e,t))),r=new $c(n);return new nh(e.path,r)}isEqual(e){return e instanceof Kv&&S(this.bu,e.bu)}}class Hv extends Nv{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new Zc(e.serializer,qc(e.serializer,this.Du));return new nh(e.path,t)}isEqual(e){return e instanceof Hv&&this.Du===e.Du}}function Qv(e,t,n,r){const i=e.Su(1,t,n);Zv("Data must be an object, but it was:",i,r);const o=[],s=Au.empty();jl(r,((e,r)=>{const a=ny(t,e,n);r=A(r);const l=i.fu(a);if(r instanceof zv)o.push(a);else{const e=Xv(r,l);null!=e&&(o.push(a),s.set(a,e))}}));const a=new Xl(o);return new Lv(s,a,i.fieldTransforms)}function Wv(e,t,n,r,i,o){const s=e.Su(1,t,n),a=[ey(t,r,n)],l=[i];if(o.length%2!=0)throw new ga(ma.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)a.push(ey(t,o[d])),l.push(o[d+1]);const u=[],c=Au.empty();for(let d=a.length-1;d>=0;--d)if(!iy(u,a[d])){const e=a[d];let t=l[d];t=A(t);const n=s.fu(e);if(t instanceof zv)u.push(e);else{const r=Xv(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new Xl(u);return new Lv(c,h,s.fieldTransforms)}function Yv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Xv(n,e.Su(r?4:3,t))}function Xv(e,t){if(Jv(e=A(e)))return Zv("Unsupported field value:",t,e),$v(e,t);if(e instanceof Nv)return function(e,t){if(!Mv(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Xv(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=A(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return qc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Na.fromDate(e);return{timestampValue:Wh(t.serializer,n)}}if(e instanceof Na){const n=new Na(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Wh(t.serializer,n)}}if(e instanceof Pv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Av)return{bytesValue:Yh(t.serializer,e._byteString)};if(e instanceof hv){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Jh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(iv(e)))}(e,t)}function $v(e,t){const n={};return ql(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):jl(e,((e,r)=>{const i=Xv(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Jv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Na||e instanceof Pv||e instanceof Av||e instanceof hv||e instanceof Nv)}function Zv(e,t,n){if(!Jv(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=iv(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function ey(e,t,n){if((t=A(t))instanceof Dv)return t._internalPath;if("string"==typeof t)return ny(e,t);throw ry("Field path arguments must be of type string or ",e,!1,void 0,n)}const ty=new RegExp("[~\\*/\\[\\]]");function ny(e,t,n){if(t.search(ty)>=0)throw ry("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Dv(...t.split("."))._internalPath}catch($n){throw ry("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function ry(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new ga(ma.INVALID_ARGUMENT,a+e+l)}function iy(e,t){return e.some((e=>e.isEqual(t)))}class oy{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new hv(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ay("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sy extends oy{data(){return super.data()}}function ay(e,t){return"string"==typeof t?ny(e,t):t instanceof Dv?t._internalPath:t._delegate._internalPath}function ly(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ga(ma.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uy{}class cy extends uy{}function hy(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof uy&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof fy)).length,n=e.filter((e=>e instanceof dy)).length;if(t>1||t>0&&n>0)throw new ga(ma.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class dy extends cy{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new dy(e,t,n)}_apply(e){const t=this._parse(e);return _y(e._query,t),new cv(e.firestore,e.converter,yc(e._query,t))}_parse(e){const t=Uv(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new ga(ma.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){by(s,o);const t=[];for(const n of s)t.push(wy(r,e,n));a={arrayValue:{values:t}}}else a=wy(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||by(s,o),a=Yv(n,t,s,"in"===o||"not-in"===o);return Vu.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class fy extends uy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fy(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Uu.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)_y(n,i),n=yc(n,i)}(e._query,t),new cv(e.firestore,e.converter,yc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class py extends cy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new py(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ga(ma.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ga(ma.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lu(t,n)}(e._query,this._field,this._direction);return new cv(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new cc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class my extends cy{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new my(e,t,n)}_apply(e){return new cv(e.firestore,e.converter,wc(e._query,this._limit,this._limitType))}}class gy extends cy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new gy(e,t,n)}_apply(e){const t=yy(e,this.type,this._docOrFields,this._inclusive);return new cv(e.firestore,e.converter,function(e,t){return new cc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class vy extends cy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new vy(e,t,n)}_apply(e){const t=yy(e,this.type,this._docOrFields,this._inclusive);return new cv(e.firestore,e.converter,function(e,t){return new cc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function yy(e,t,n,r){if(n[0]=A(n[0]),n[0]instanceof oy)return function(e,t,n,r,i){if(!r)throw new ga(ma.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const s of mc(e))if(s.field.isKeyField())o.push(vu(t,r.key));else{const e=r.data.field(s.field);if(ru(e))throw new ga(ma.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=s.field.canonicalString();throw new ga(ma.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}o.push(e)}return new Pu(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Uv(e.firestore);return function(e,t,n,r,i,o){const s=e.explicitOrderBy;if(i.length>s.length)throw new ga(ma.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const o=i[l];if(s[l].field.isKeyField()){if("string"!=typeof o)throw new ga(ma.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof o));if(!pc(e)&&-1!==o.indexOf("/"))throw new ga(ma.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=e.path.child(Oa.fromString(o));if(!Fa.isDocumentKey(n))throw new ga(ma.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Fa(n);a.push(vu(t,i))}else{const e=Yv(n,r,o);a.push(e)}}return new Pu(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function wy(e,t,n){if("string"==typeof(n=A(n))){if(""===n)throw new ga(ma.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pc(t)&&-1!==n.indexOf("/"))throw new ga(ma.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Oa.fromString(n));if(!Fa.isDocumentKey(r))throw new ga(ma.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return vu(e,new Fa(r))}if(n instanceof hv)return vu(e,n._key);throw new ga(ma.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(iv(n),"."))}function by(e,t){if(!Array.isArray(e)||0===e.length)throw new ga(ma.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function _y(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ga(ma.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ga(ma.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Ey{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(cu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw da()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return jl(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Pv(tu(e.latitude),tu(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=iu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){const t=eu(e);return new Na(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Oa.fromString(e);fa(Ed(n));const r=new au(n.get(1),n.get(3)),i=new Fa(n.popFirst(5));return r.isEqual(t)||ua("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Ty(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Sy extends Ey{constructor(e){super(),this.firestore=e}convertBytes(e){return new Av(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hv(this.firestore,null,t)}}class xy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Iy extends oy{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new ky(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(ay("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class ky extends Iy{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Cy{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new xy(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new ky(this._firestore,this._userDataWriter,n.key,n,new xy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ga(ma.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new ky(e._firestore,e._userDataWriter,n.doc.key,n.doc,new xy(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new ky(e._firestore,e._userDataWriter,t.doc.key,t.doc,new xy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:Ay(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Ay(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return da()}}function Dy(e,t){return e instanceof Iy&&t instanceof Iy?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Cy&&t instanceof Cy&&e._firestore===t._firestore&&gv(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class Ny extends Ey{constructor(e){super(),this.firestore=e}convertBytes(e){return new Av(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hv(this.firestore,null,t)}}function Py(e){e=ov(e,hv);const t=ov(e.firestore,bv),n=_v(t),r=new Ny(t);return function(e,t){const n=new va;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=pa(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new ga(ma.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Pm(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Gg(e),t,n))),n.promise}(n,e._key).then((n=>new Iy(t,r,e._key,n,new xy(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Ry(e){e=ov(e,cv);const t=ov(e.firestore,bv),n=_v(t),r=new Ny(t);return function(e,t){const n=new va;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Sp(e,t,!0),i=new Xm(t,r.hs),o=i.ha(r.documents),s=i.applyChanges(o,!1);n.resolve(s.snapshot)}catch(e){const r=Pm(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Gg(e),t,n))),n.promise}(n,e._query).then((n=>new Cy(t,r,e,n)))}function Oy(e,t,n){e=ov(e,hv);const r=ov(e.firestore,bv),i=Ty(e.converter,t,n);return Uy(r,[Bv(Uv(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ih.none())])}function Ly(e,t,n){e=ov(e,hv);const r=ov(e.firestore,bv),i=Uv(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=A(t))||t instanceof Dv?Wv(i,"updateDoc",e._key,t,n,a):Qv(i,"updateDoc",e._key,t),Uy(r,[o.toMutation(e._key,ih.exists(!0))])}function My(e){return Uy(ov(e.firestore,bv),[new vh(e._key,ih.none())])}function Fy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=A(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||yv(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges};if(yv(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[l+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let c,h,d;if(e instanceof hv)h=ov(e.firestore,bv),d=dc(e._key.path),c={next:t=>{n[l]&&n[l](By(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=ov(e,cv);h=ov(t.firestore,bv),d=t._query;const r=new Ny(h);c={next:e=>{n[l]&&n[l](new Cy(h,r,t,e))},error:n[l+1],complete:n[l+2]},ly(e._query)}return function(e,t,n,r){const i=new Rg(r),o=new qm(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Vm(await Wg(e),o))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>Um(await Wg(e),o)))}}(_v(h),d,u,c)}function Vy(e,t){return function(e,t){const n=new Rg(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){pa(e).K_.add(t),t.next()}(await Wg(e),n))),()=>{n.La(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){pa(e).K_.delete(t)}(await Wg(e),n)))}}(_v(e=ov(e,bv)),yv(t)?t:{next:t})}function Uy(e,t){return function(e,t){const n=new va;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=kg(e);try{const e=await function(e,t){const n=pa(e),r=Na.now(),i=t.reduce(((e,t)=>e.add(t.key)),Vc());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Ac(),l=Vc();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=ch(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new fh(e.key,t,Du(t.value.mapValue),ih.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:Pc(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new Gl(Ca)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await mg(r,e.changes),await ym(r.remoteStore)}catch(e){const t=Pm(e,"Failed to persist write");n.reject(t)}}(await Hg(e),t,n))),n.promise}(_v(e),t)}function By(e,t,n){const r=n.docs.get(t._key),i=new Ny(e);return new Iy(e,i,t._key,r,new xy(n.hasPendingWrites,n.fromCache),t.converter)}const zy={maxAttempts:5};class jy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Uv(e)}set(e,t,n){this._verifyNotCommitted();const r=qy(e,this._firestore),i=Ty(r.converter,t,n),o=Bv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,ih.none())),this}update(e,t,n){this._verifyNotCommitted();const r=qy(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=A(t))||t instanceof Dv?Wv(this._dataReader,"WriteBatch.update",r._key,t,n,s):Qv(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,ih.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=qy(e,this._firestore);return this._mutations=this._mutations.concat(new vh(t._key,ih.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ga(ma.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qy(e,t){if((e=A(e)).firestore!==t)throw new ga(ma.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Gy extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Uv(e)}get(e){const t=qy(e,this._firestore),n=new Sy(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return da();const r=e[0];if(r.isFoundDocument())return new oy(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new oy(this._firestore,n,t._key,null,t.converter);throw da()}))}set(e,t,n){const r=qy(e,this._firestore),i=Ty(r.converter,t,n),o=Bv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=qy(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=A(t))||t instanceof Dv?Wv(this._dataReader,"Transaction.update",r._key,t,n,s):Qv(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=qy(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=qy(e,this._firestore),n=new Ny(this._firestore);return super.get(e).then((e=>new Iy(this._firestore,n,t._key,e._document,new xy(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){oa=e}(be),pe(new D("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new bv(new _a(e.getProvider("auth-internal")),new xa(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ga(ma.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new au(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),xe(ra,"4.4.1",e),xe(ra,"4.4.1","esm2017")}();function Ky(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ga("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Hy(){if("undefined"===typeof Uint8Array)throw new ga("unimplemented","Uint8Arrays are not available in this environment.")}function Qy(){if("undefined"==typeof atob)throw new ga("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Wy{constructor(e){this._delegate=e}static fromBase64String(e){return Qy(),new Wy(Av.fromBase64String(e))}static fromUint8Array(e){return Hy(),new Wy(Av.fromUint8Array(e))}toBase64(){return Qy(),this._delegate.toBase64()}toUint8Array(){return Hy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Yy(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Xy{enableIndexedDbPersistence(e,t){return function(e,t){Cv(e=ov(e,bv));const n=_v(e);if(n._uninitializedComponentsProvider)throw new ga(ma.FAILED_PRECONDITION,"SDK cache is already specified.");ca("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Ng;return Tv(n,i,new Ag(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Cv(e=ov(e,bv));const t=_v(e);if(t._uninitializedComponentsProvider)throw new ga(ma.FAILED_PRECONDITION,"SDK cache is already specified.");ca("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Ng;return Tv(t,r,new Dg(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new ga(ma.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new va;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Ja.D())return Promise.resolve();const t=e+"main";await Ja.delete(t)}(dp(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class $y{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof au||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||ca("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};uv(this._delegate,e,t,n)}enableNetwork(){return xv(this._delegate)}disableNetwork(){return Iv(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,tv("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Sv(this._delegate)}onSnapshotsInSync(e){return Vy(this._delegate,e)}get app(){if(!this._appCompat)throw new ga("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hw(this,fv(this._delegate,e))}catch(t){throw rw(t,"collection()","Firestore.collection()")}}doc(e){try{return new nw(this,pv(this._delegate,e))}catch(t){throw rw(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new lw(this,function(e,t){if(e=ov(e,lv),ev("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ga(ma.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new cv(e,null,function(e){return new cc(Oa.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw rw(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=ov(e,bv);const r=Object.assign(Object.assign({},zy),n);return function(e){if(e.maxAttempts<1)throw new ga(ma.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new va;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Qg(e);new Mg(e.asyncQueue,i,n,t,r).ja()})),r.promise}(_v(e),(n=>t(new Gy(e,n))),r)}(this._delegate,(t=>e(new Zy(this,t))))}batch(){return _v(this._delegate),new ew(new jy(this._delegate,(e=>Uy(this._delegate,e))))}loadBundle(e){return function(e,t){const n=_v(e=ov(e,bv)),r=new wv;return $g(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return kv(this._delegate,e).then((e=>e?new lw(this,e):null))}}class Jy extends Ey{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wy(new Av(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return nw.forKey(t,this.firestore,null)}}class Zy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Jy(e)}get(e){const t=dw(e);return this._delegate.get(t).then((e=>new sw(this._firestore,new Iy(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=dw(e);return n?(Ky("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=dw(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=dw(e);return this._delegate.delete(t),this}}class ew{constructor(e){this._delegate=e}set(e,t,n){const r=dw(e);return n?(Ky("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=dw(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=dw(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class tw{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new ky(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new aw(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=tw.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new tw(e,new Jy(e),t),r.set(t,i)),i}}tw.INSTANCES=new WeakMap;class nw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jy(e)}static forPath(e,t,n){if(e.length%2!==0)throw new ga("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new nw(t,new hv(t._delegate,n,new Fa(e)))}static forKey(e,t,n){return new nw(t,new hv(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new hw(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hw(this.firestore,fv(this._delegate,e))}catch(t){throw rw(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=A(e))instanceof hv&&mv(this._delegate,e)}set(e,t){t=Ky("DocumentReference.set",t);try{return t?Oy(this._delegate,e,t):Oy(this._delegate,e)}catch(n){throw rw(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Ly(this._delegate,e):Ly(this._delegate,e,t,...r)}catch(o){throw rw(o,"updateDoc()","DocumentReference.update()")}}delete(){return My(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=iw(t),i=ow(t,(e=>new sw(this.firestore,new Iy(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Fy(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Py(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ov(e,hv);const t=ov(e.firestore,bv);return Yg(_v(t),e._key,{source:"server"}).then((n=>By(t,e,n)))}(this._delegate):function(e){e=ov(e,hv);const t=ov(e.firestore,bv);return Yg(_v(t),e._key).then((n=>By(t,e,n)))}(this._delegate),t.then((e=>new sw(this.firestore,new Iy(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new nw(this.firestore,e?this._delegate.withConverter(tw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function rw(e,t,n){return e.message=e.message.replace(t,n),e}function iw(e){for(const t of e)if("object"===typeof t&&!Yy(t))return t;return{}}function ow(e,t){var n,r;let i;return i=Yy(e[0])?e[0]:Yy(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class sw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new nw(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Dy(this._delegate,e._delegate)}}class aw extends sw{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||da(),t}}class lw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jy(e)}where(e,t,n){try{return new lw(this.firestore,hy(this._delegate,function(e,t,n){const r=t,i=ay("where",e);return dy._create(i,r,n)}(e,t,n)))}catch(r){throw rw(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new lw(this.firestore,hy(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ay("orderBy",e);return py._create(n,t)}(e,t)))}catch(n){throw rw(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new lw(this.firestore,hy(this._delegate,(sv("limit",t=e),my._create("limit",t,"F"))))}catch(t){throw rw(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new lw(this.firestore,hy(this._delegate,(sv("limitToLast",t=e),my._create("limitToLast",t,"L"))))}catch(t){throw rw(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new lw(this.firestore,hy(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gy._create("startAt",t,!0)}(...arguments)))}catch(e){throw rw(e,"startAt()","Query.startAt()")}}startAfter(){try{return new lw(this.firestore,hy(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gy._create("startAfter",t,!1)}(...arguments)))}catch(e){throw rw(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new lw(this.firestore,hy(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vy._create("endBefore",t,!1)}(...arguments)))}catch(e){throw rw(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new lw(this.firestore,hy(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vy._create("endAt",t,!0)}(...arguments)))}catch(e){throw rw(e,"endAt()","Query.endAt()")}}isEqual(e){return gv(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Ry(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ov(e,cv);const t=ov(e.firestore,bv),n=_v(t),r=new Ny(t);return Xg(n,e._query,{source:"server"}).then((n=>new Cy(t,r,e,n)))}(this._delegate):function(e){e=ov(e,cv);const t=ov(e.firestore,bv),n=_v(t),r=new Ny(t);return ly(e._query),Xg(n,e._query).then((n=>new Cy(t,r,e,n)))}(this._delegate),t.then((e=>new cw(this.firestore,new Cy(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=iw(t),i=ow(t,(e=>new cw(this.firestore,new Cy(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Fy(this._delegate,r,i)}withConverter(e){return new lw(this.firestore,e?this._delegate.withConverter(tw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class uw{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new aw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class cw{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new lw(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new aw(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new uw(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new aw(this._firestore,n))}))}isEqual(e){return Dy(this._delegate,e._delegate)}}class hw extends lw{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new nw(this.firestore,e):null}doc(e){try{return new nw(this.firestore,void 0===e?pv(this._delegate):pv(this._delegate,e))}catch(t){throw rw(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=ov(e.firestore,bv),r=pv(e),i=Ty(e.converter,t);return Uy(n,[Bv(Uv(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ih.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new nw(this.firestore,e)))}isEqual(e){return mv(this._delegate,e._delegate)}withConverter(e){return new hw(this.firestore,e?this._delegate.withConverter(tw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function dw(e){return ov(e,hv)}class fw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Dv(...t)}static documentId(){return new fw(Ma.keyField().canonicalString())}isEqual(e){return(e=A(e))instanceof Dv&&this._delegate._internalPath.isEqual(e._internalPath)}}class pw{constructor(e){this._delegate=e}static serverTimestamp(){const e=new qv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new pw(e)}static delete(){const e=new zv("deleteField");return e._methodName="FieldValue.delete",new pw(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Gv("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new pw(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Kv("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new pw(e)}static increment(e){const t=new Hv("increment",e);return t._methodName="FieldValue.increment",new pw(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const mw={Firestore:$y,GeoPoint:Pv,Timestamp:Na,Blob:Wy,Transaction:Zy,WriteBatch:ew,DocumentReference:nw,DocumentSnapshot:sw,Query:lw,QueryDocumentSnapshot:aw,QuerySnapshot:cw,CollectionReference:hw,FieldPath:fw,FieldValue:pw,setLogLevel:function(e){var t;t=e,sa.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var gw;(function(e,t){e.INTERNAL.registerComponent(new D("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},mw)))})(gw=Ge,((e,t)=>new $y(e,t,new Xy))),gw.registerVersion("@firebase/firestore-compat","0.3.24");const vw=Ge.initializeApp({apiKey:"AIzaSyBWpu79eLc-qRgx1QMlJA81254h-4caJ8o",authDomain:"mediagallery-19bd6.firebaseapp.com",projectId:"mediagallery-19bd6",storageBucket:"mediagallery-19bd6.appspot.com",messagingSenderId:"440566078762",appId:"1:440566078762:web:5bfe7cdb1de97590b11253"}),yw=Ge.storage(),ww=Ge.firestore(),bw=Ge.firestore.FieldValue.serverTimestamp,_w=e=>{const[n,r]=(0,t.useState)(0),[i,o]=(0,t.useState)(null),[s,a]=(0,t.useState)(null);return(0,t.useEffect)((()=>{const t=yw.ref(e.name),n=ww.collection("images");t.put(e).on("state_changed",(e=>{let t=e.bytesTransferred/e.totalBytes*100;r(t)}),(e=>{o(e)}),(async()=>{const e=await t.getDownloadURL(),r=bw();n.add({url:e,createdAt:r}),a(e)}))}),[e]),{progress:n,url:s,error:i}};var Ew=function(e,t){return Ew=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Ew(e,t)};function Tw(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ew(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Sw=function(){return Sw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Sw.apply(this,arguments)};function xw(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;function Iw(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function kw(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Cw=function(e){return{isEnabled:function(t){return e.some((function(e){return!!t[e]}))}}},Aw={measureLayout:Cw(["layout","layoutId","drag"]),animation:Cw(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:Cw(["exit"]),drag:Cw(["drag","dragControls"]),focus:Cw(["whileFocus"]),hover:Cw(["whileHover","onHoverStart","onHoverEnd"]),tap:Cw(["whileTap","onTap","onTapStart","onTapCancel"]),pan:Cw(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:Cw(["whileInView","onViewportEnter","onViewportLeave"])};var Dw=(0,t.createContext)({strict:!1}),Nw=Object.keys(Aw),Pw=Nw.length;var Rw=(0,t.createContext)({transformPagePoint:function(e){return e},isStatic:!1}),Ow=(0,t.createContext)({});var Lw=(0,t.createContext)(null),Mw="undefined"!==typeof window,Fw=Mw?t.useLayoutEffect:t.useEffect;function Vw(e,n,r,i){var o=(0,t.useContext)(Dw),s=(0,t.useContext)(Ow).visualElement,a=(0,t.useContext)(Lw),l=(0,t.useRef)(void 0);i||(i=o.renderer),!l.current&&i&&(l.current=i(e,{visualState:n,parent:s,props:r,presenceId:null===a||void 0===a?void 0:a.id,blockInitialAnimation:!1===(null===a||void 0===a?void 0:a.initial)}));var u=l.current;return Fw((function(){null===u||void 0===u||u.syncRender()})),(0,t.useEffect)((function(){var e;null===(e=null===u||void 0===u?void 0:u.animationState)||void 0===e||e.animateChanges()})),Fw((function(){return function(){return null===u||void 0===u?void 0:u.notifyUnmount()}}),[]),u}function Uw(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Bw(e){return Array.isArray(e)}function zw(e){return"string"===typeof e||Bw(e)}function jw(e,t,n,r,i){var o;return void 0===r&&(r={}),void 0===i&&(i={}),"function"===typeof t&&(t=t(null!==n&&void 0!==n?n:e.custom,r,i)),"string"===typeof t&&(t=null===(o=e.variants)||void 0===o?void 0:o[t]),"function"===typeof t&&(t=t(null!==n&&void 0!==n?n:e.custom,r,i)),t}function qw(e,t,n){var r=e.getProps();return jw(r,t,null!==n&&void 0!==n?n:r.custom,function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.getVelocity()})),t}(e))}function Gw(e){var t;return"function"===typeof(null===(t=e.animate)||void 0===t?void 0:t.start)||zw(e.initial)||zw(e.animate)||zw(e.whileHover)||zw(e.whileDrag)||zw(e.whileTap)||zw(e.whileFocus)||zw(e.exit)}function Kw(e){return Boolean(Gw(e)||e.variants)}function Hw(e){var n=function(e,t){if(Gw(e)){var n=e.initial,r=e.animate;return{initial:!1===n||zw(n)?n:void 0,animate:zw(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(Ow)),r=n.initial,i=n.animate;return(0,t.useMemo)((function(){return{initial:r,animate:i}}),[Qw(r),Qw(i)])}function Qw(e){return Array.isArray(e)?e.join(" "):e}function Ww(e){var n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}const Yw=1/60*1e3,Xw="undefined"!==typeof performance?()=>performance.now():()=>Date.now(),$w="undefined"!==typeof window?e=>window.requestAnimationFrame(e):e=>setTimeout((()=>e(Xw())),Yw);let Jw=!0,Zw=!1,eb=!1;const tb={delta:0,timestamp:0},nb=["read","update","preRender","render","postRender"],rb=nb.reduce(((e,t)=>(e[t]=function(e){let t=[],n=[],r=0,i=!1,o=!1;const s=new WeakSet,a={schedule:function(e){const o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,a=o?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&s.add(e),-1===a.indexOf(e)&&(a.push(e),o&&i&&(r=t.length)),e},cancel:e=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1),s.delete(e)},process:l=>{if(i)o=!0;else{if(i=!0,[t,n]=[n,t],n.length=0,r=t.length,r)for(let n=0;n<r;n++){const r=t[n];r(l),s.has(r)&&(a.schedule(r),e())}i=!1,o&&(o=!1,a.process(l))}}};return a}((()=>Zw=!0)),e)),{}),ib=nb.reduce(((e,t)=>{const n=rb[t];return e[t]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Zw||ub(),n.schedule(e,t,r)},e}),{}),ob=nb.reduce(((e,t)=>(e[t]=rb[t].cancel,e)),{}),sb=nb.reduce(((e,t)=>(e[t]=()=>rb[t].process(tb),e)),{}),ab=e=>rb[e].process(tb),lb=e=>{Zw=!1,tb.delta=Jw?Yw:Math.max(Math.min(e-tb.timestamp,40),1),tb.timestamp=e,eb=!0,nb.forEach(ab),eb=!1,Zw&&(Jw=!1,$w(lb))},ub=()=>{Zw=!0,Jw=!0,eb||$w(lb)},cb=()=>tb,hb=ib,db=(e,t,n)=>-n*e+n*t+e;function fb(e,t){return t?e*(1e3/t):0}function pb(e,t){-1===e.indexOf(t)&&e.push(t)}function mb(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var gb=function(){function e(){this.subscriptions=[]}return e.prototype.add=function(e){var t=this;return pb(this.subscriptions,e),function(){return mb(t.subscriptions,e)}},e.prototype.notify=function(e,t,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(var i=0;i<r;i++){var o=this.subscriptions[i];o&&o(e,t,n)}},e.prototype.getSize=function(){return this.subscriptions.length},e.prototype.clear=function(){this.subscriptions.length=0},e}(),vb=function(){function e(e){var t,n=this;this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new gb,this.velocityUpdateSubscribers=new gb,this.renderSubscribers=new gb,this.canTrackVelocity=!1,this.updateAndNotify=function(e,t){void 0===t&&(t=!0),n.prev=n.current,n.current=e;var r=cb(),i=r.delta,o=r.timestamp;n.lastUpdated!==o&&(n.timeDelta=i,n.lastUpdated=o,hb.postRender(n.scheduleVelocityCheck)),n.prev!==n.current&&n.updateSubscribers.notify(n.current),n.velocityUpdateSubscribers.getSize()&&n.velocityUpdateSubscribers.notify(n.getVelocity()),t&&n.renderSubscribers.notify(n.current)},this.scheduleVelocityCheck=function(){return hb.postRender(n.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==n.lastUpdated&&(n.prev=n.current,n.velocityUpdateSubscribers.notify(n.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t)))}return e.prototype.onChange=function(e){return this.updateSubscribers.add(e)},e.prototype.clearListeners=function(){this.updateSubscribers.clear()},e.prototype.onRenderRequest=function(e){return e(this.get()),this.renderSubscribers.add(e)},e.prototype.attach=function(e){this.passiveEffect=e},e.prototype.set=function(e,t){void 0===t&&(t=!0),t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)},e.prototype.get=function(){return this.current},e.prototype.getPrevious=function(){return this.prev},e.prototype.getVelocity=function(){return this.canTrackVelocity?fb(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},e.prototype.start=function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.stopAnimation=e(n)})).then((function(){return t.clearAnimation()}))},e.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},e.prototype.isAnimating=function(){return!!this.stopAnimation},e.prototype.clearAnimation=function(){this.stopAnimation=null},e.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},e}();function yb(e){return new vb(e)}var wb=function(e){return Boolean(null!==e&&"object"===typeof e&&e.getVelocity)},bb=function(){},_b=function(){};const Eb=(e,t,n)=>Math.min(Math.max(n,e),t),Tb=.001,Sb=.01,xb=10,Ib=.05,kb=1;function Cb(e){let t,n,{duration:r=800,bounce:i=.25,velocity:o=0,mass:s=1}=e;bb(r<=1e3*xb,"Spring duration must be 10 seconds or less");let a=1-i;a=Eb(Ib,kb,a),r=Eb(Sb,xb,r/1e3),a<1?(t=e=>{const t=e*a,n=t*r,i=t-o,s=Db(e,a),l=Math.exp(-n);return Tb-i/s*l},n=e=>{const n=e*a*r,i=n*o+o,s=Math.pow(a,2)*Math.pow(e,2)*r,l=Math.exp(-n),u=Db(Math.pow(e,2),a);return(-t(e)+Tb>0?-1:1)*((i-s)*l)/u}):(t=e=>Math.exp(-e*r)*((e-o)*r+1)-Tb,n=e=>Math.exp(-e*r)*(r*r*(o-e)));const l=function(e,t,n){let r=n;for(let i=1;i<Ab;i++)r-=e(r)/t(r);return r}(t,n,5/r);if(r*=1e3,isNaN(l))return{stiffness:100,damping:10,duration:r};{const e=Math.pow(l,2)*s;return{stiffness:e,damping:2*a*Math.sqrt(s*e),duration:r}}}const Ab=12;function Db(e,t){return e*Math.sqrt(1-t*t)}const Nb=["duration","bounce"],Pb=["stiffness","damping","mass"];function Rb(e,t){return t.some((t=>void 0!==e[t]))}function Ob(e){var{from:t=0,to:n=1,restSpeed:r=2,restDelta:i}=e,o=xw(e,["from","to","restSpeed","restDelta"]);const s={done:!1,value:t};let{stiffness:a,damping:l,mass:u,velocity:c,duration:h,isResolvedFromDuration:d}=function(e){let t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!Rb(e,Pb)&&Rb(e,Nb)){const n=Cb(e);t=Object.assign(Object.assign(Object.assign({},t),n),{velocity:0,mass:1}),t.isResolvedFromDuration=!0}return t}(o),f=Lb,p=Lb;function m(){const e=c?-c/1e3:0,r=n-t,o=l/(2*Math.sqrt(a*u)),s=Math.sqrt(a/u)/1e3;if(void 0===i&&(i=Math.min(Math.abs(n-t)/100,.4)),o<1){const t=Db(s,o);f=i=>{const a=Math.exp(-o*s*i);return n-a*((e+o*s*r)/t*Math.sin(t*i)+r*Math.cos(t*i))},p=n=>{const i=Math.exp(-o*s*n);return o*s*i*(Math.sin(t*n)*(e+o*s*r)/t+r*Math.cos(t*n))-i*(Math.cos(t*n)*(e+o*s*r)-t*r*Math.sin(t*n))}}else if(1===o)f=t=>n-Math.exp(-s*t)*(r+(e+s*r)*t);else{const t=s*Math.sqrt(o*o-1);f=i=>{const a=Math.exp(-o*s*i),l=Math.min(t*i,300);return n-a*((e+o*s*r)*Math.sinh(l)+t*r*Math.cosh(l))/t}}}return m(),{next:e=>{const t=f(e);if(d)s.done=e>=h;else{const o=1e3*p(e),a=Math.abs(o)<=r,l=Math.abs(n-t)<=i;s.done=a&&l}return s.value=s.done?n:t,s},flipTarget:()=>{c=-c,[t,n]=[n,t],m()}}}Ob.needsInterpolation=(e,t)=>"string"===typeof e||"string"===typeof t;const Lb=e=>0,Mb=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},Fb=(e,t)=>n=>Math.max(Math.min(n,t),e),Vb=e=>e%1?Number(e.toFixed(5)):e,Ub=/(-)?([\d]*\.?[\d])+/g,Bb=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,zb=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function jb(e){return"string"===typeof e}const qb={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Gb=Object.assign(Object.assign({},qb),{transform:Fb(0,1)}),Kb=Object.assign(Object.assign({},qb),{default:1}),Hb=(e,t)=>n=>Boolean(jb(n)&&zb.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Qb=(e,t,n)=>r=>{if(!jb(r))return r;const[i,o,s,a]=r.match(Ub);return{[e]:parseFloat(i),[t]:parseFloat(o),[n]:parseFloat(s),alpha:void 0!==a?parseFloat(a):1}},Wb=Fb(0,255),Yb=Object.assign(Object.assign({},qb),{transform:e=>Math.round(Wb(e))}),Xb={test:Hb("rgb","red"),parse:Qb("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:i=1}=e;return"rgba("+Yb.transform(t)+", "+Yb.transform(n)+", "+Yb.transform(r)+", "+Vb(Gb.transform(i))+")"}};const $b={test:Hb("#"),parse:function(e){let t="",n="",r="",i="";return e.length>5?(t=e.substr(1,2),n=e.substr(3,2),r=e.substr(5,2),i=e.substr(7,2)):(t=e.substr(1,1),n=e.substr(2,1),r=e.substr(3,1),i=e.substr(4,1),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:Xb.transform},Jb=e=>({test:t=>jb(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),Zb=Jb("deg"),e_=Jb("%"),t_=Jb("px"),n_=Jb("vh"),r_=Jb("vw"),i_=Object.assign(Object.assign({},e_),{parse:e=>e_.parse(e)/100,transform:e=>e_.transform(100*e)}),o_={test:Hb("hsl","hue"),parse:Qb("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:i=1}=e;return"hsla("+Math.round(t)+", "+e_.transform(Vb(n))+", "+e_.transform(Vb(r))+", "+Vb(Gb.transform(i))+")"}};function s_(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function a_(e){let{hue:t,saturation:n,lightness:r,alpha:i}=e;t/=360,n/=100,r/=100;let o=0,s=0,a=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,i=2*r-e;o=s_(i,e,t+1/3),s=s_(i,e,t),a=s_(i,e,t-1/3)}else o=s=a=r;return{red:Math.round(255*o),green:Math.round(255*s),blue:Math.round(255*a),alpha:i}}const l_=(e,t,n)=>{const r=e*e,i=t*t;return Math.sqrt(Math.max(0,n*(i-r)+r))},u_=[$b,Xb,o_],c_=e=>u_.find((t=>t.test(e))),h_=e=>"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."),d_=(e,t)=>{let n=c_(e),r=c_(t);_b(!!n,h_(e)),_b(!!r,h_(t));let i=n.parse(e),o=r.parse(t);n===o_&&(i=a_(i),n=Xb),r===o_&&(o=a_(o),r=Xb);const s=Object.assign({},i);return e=>{for(const t in s)"alpha"!==t&&(s[t]=l_(i[t],o[t],e));return s.alpha=db(i.alpha,o.alpha,e),n.transform(s)}},f_={test:e=>Xb.test(e)||$b.test(e)||o_.test(e),parse:e=>Xb.test(e)?Xb.parse(e):o_.test(e)?o_.parse(e):$b.parse(e),transform:e=>jb(e)?e:e.hasOwnProperty("red")?Xb.transform(e):o_.transform(e)},p_="${c}",m_="${n}";function g_(e){"number"===typeof e&&(e="".concat(e));const t=[];let n=0;const r=e.match(Bb);r&&(n=r.length,e=e.replace(Bb,p_),t.push(...r.map(f_.parse)));const i=e.match(Ub);return i&&(e=e.replace(Ub,m_),t.push(...i.map(qb.parse))),{values:t,numColors:n,tokenised:e}}function v_(e){return g_(e).values}function y_(e){const{values:t,numColors:n,tokenised:r}=g_(e),i=t.length;return e=>{let t=r;for(let r=0;r<i;r++)t=t.replace(r<n?p_:m_,r<n?f_.transform(e[r]):Vb(e[r]));return t}}const w_=e=>"number"===typeof e?0:e;const b_={test:function(e){var t,n,r,i;return isNaN(e)&&jb(e)&&(null!==(n=null===(t=e.match(Ub))||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(i=null===(r=e.match(Bb))||void 0===r?void 0:r.length)&&void 0!==i?i:0)>0},parse:v_,createTransformer:y_,getAnimatableNone:function(e){const t=v_(e);return y_(e)(t.map(w_))}},__=e=>"number"===typeof e,E_=(e,t)=>n=>t(e(n)),T_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(E_)};function S_(e,t){return __(e)?n=>db(e,t,n):f_.test(e)?d_(e,t):C_(e,t)}const x_=(e,t)=>{const n=[...e],r=n.length,i=e.map(((e,n)=>S_(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}},I_=(e,t)=>{const n=Object.assign(Object.assign({},e),t),r={};for(const i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=S_(e[i],t[i]));return e=>{for(const t in r)n[t]=r[t](e);return n}};function k_(e){const t=b_.parse(e),n=t.length;let r=0,i=0,o=0;for(let s=0;s<n;s++)r||"number"===typeof t[s]?r++:void 0!==t[s].hue?o++:i++;return{parsed:t,numNumbers:r,numRGB:i,numHSL:o}}const C_=(e,t)=>{const n=b_.createTransformer(t),r=k_(e),i=k_(t);return r.numHSL===i.numHSL&&r.numRGB===i.numRGB&&r.numNumbers>=i.numNumbers?T_(x_(r.parsed,i.parsed),n):(bb(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),n=>"".concat(n>0?t:e))},A_=(e,t)=>n=>db(e,t,n);function D_(e,t,n){const r=[],i=n||function(e){return"number"===typeof e?A_:"string"===typeof e?f_.test(e)?d_:C_:Array.isArray(e)?x_:"object"===typeof e?I_:void 0}(e[0]),o=e.length-1;for(let s=0;s<o;s++){let n=i(e[s],e[s+1]);if(t){const e=Array.isArray(t)?t[s]:t;n=T_(e,n)}r.push(n)}return r}function N_(e,t){let{clamp:n=!0,ease:r,mixer:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=e.length;_b(o===t.length,"Both input and output ranges must be the same length"),_b(!r||!Array.isArray(r)||r.length===o-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),e[0]>e[o-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());const s=D_(t,r,i),a=2===o?function(e,t){let[n,r]=e,[i]=t;return e=>i(Mb(n,r,e))}(e,s):function(e,t){const n=e.length,r=n-1;return i=>{let o=0,s=!1;if(i<=e[0]?s=!0:i>=e[r]&&(o=r-1,s=!0),!s){let t=1;for(;t<n&&!(e[t]>i||t===r);t++);o=t-1}const a=Mb(e[o],e[o+1],i);return t[o](a)}}(e,s);return n?t=>a(Eb(e[0],e[o-1],t)):a}const P_=e=>t=>1-e(1-t),R_=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,O_=e=>t=>t*t*((e+1)*t-e),L_=e=>e,M_=(F_=2,e=>Math.pow(e,F_));var F_;const V_=P_(M_),U_=R_(M_),B_=e=>1-Math.sin(Math.acos(e)),z_=P_(B_),j_=R_(z_),q_=O_(1.525),G_=P_(q_),K_=R_(q_),H_=(e=>{const t=O_(e);return e=>(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))})(1.525),Q_=e=>{if(1===e||0===e)return e;const t=e*e;return e<.36363636363636365?7.5625*t:e<.7272727272727273?9.075*t-9.9*e+3.4:e<.9?12.066481994459833*t-19.63545706371191*e+8.898060941828255:10.8*e*e-20.52*e+10.72},W_=P_(Q_);function Y_(e,t){return e.map((()=>t||U_)).splice(0,e.length-1)}function X_(e){let{from:t=0,to:n=1,ease:r,offset:i,duration:o=300}=e;const s={done:!1,value:t},a=Array.isArray(n)?n:[t,n],l=function(e,t){return e.map((e=>e*t))}(i&&i.length===a.length?i:function(e){const t=e.length;return e.map(((e,n)=>0!==n?n/(t-1):0))}(a),o);function u(){return N_(l,a,{ease:Array.isArray(r)?r:Y_(a,r)})}let c=u();return{next:e=>(s.value=c(e),s.done=e>=o,s),flipTarget:()=>{a.reverse(),c=u()}}}const $_={keyframes:X_,spring:Ob,decay:function(e){let{velocity:t=0,from:n=0,power:r=.8,timeConstant:i=350,restDelta:o=.5,modifyTarget:s}=e;const a={done:!1,value:n};let l=r*t;const u=n+l,c=void 0===s?u:s(u);return c!==u&&(l=c-n),{next:e=>{const t=-l*Math.exp(-e/i);return a.done=!(t>o||t<-o),a.value=a.done?c:c+t,a},flipTarget:()=>{}}}};function J_(e,t){return e-t-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)}const Z_=e=>{const t=t=>{let{delta:n}=t;return e(n)};return{start:()=>hb.update(t,!0),stop:()=>ob.update(t)}};function eE(e){var t,n,{from:r,autoplay:i=!0,driver:o=Z_,elapsed:s=0,repeat:a=0,repeatType:l="loop",repeatDelay:u=0,onPlay:c,onStop:h,onComplete:d,onRepeat:f,onUpdate:p}=e,m=xw(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]);let g,v,y,{to:w}=m,b=0,_=m.duration,E=!1,T=!0;const S=function(e){if(Array.isArray(e.to))return X_;if($_[e.type])return $_[e.type];const t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?X_:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?Ob:X_}(m);(null===(n=(t=S).needsInterpolation)||void 0===n?void 0:n.call(t,r,w))&&(y=N_([0,100],[r,w],{clamp:!1}),r=0,w=100);const x=S(Object.assign(Object.assign({},m),{from:r,to:w}));function I(){b++,"reverse"===l?(T=b%2===0,s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?t-(e-t)+n:J_(t+-e,t,n)}(s,_,u,T)):(s=J_(s,_,u),"mirror"===l&&x.flipTarget()),E=!1,f&&f()}function k(e){if(T||(e=-e),s+=e,!E){const e=x.next(Math.max(0,s));v=e.value,y&&(v=y(v)),E=T?e.done:s<=0}null===p||void 0===p||p(v),E&&(0===b&&(null!==_&&void 0!==_||(_=s)),b<a?function(e,t,n,r){return r?e>=t+n:e<=-n}(s,_,u,T)&&I():(g.stop(),d&&d()))}return i&&(null===c||void 0===c||c(),g=o(k),g.start()),{stop:()=>{null===h||void 0===h||h(),g.stop()}}}var tE=function(e){return 1e3*e};const nE=(e,t)=>1-3*t+3*e,rE=(e,t)=>3*t-6*e,iE=e=>3*e,oE=(e,t,n)=>((nE(t,n)*e+rE(t,n))*e+iE(t))*e,sE=(e,t,n)=>3*nE(t,n)*e*e+2*rE(t,n)*e+iE(t),aE=1e-7,lE=10;const uE=8;const cE=.1;function hE(e,t,n,r){if(e===t&&n===r)return L_;const i=new Float32Array(11);for(let s=0;s<11;++s)i[s]=oE(s*cE,e,n);function o(t){let r=0,o=1;for(;10!==o&&i[o]<=t;++o)r+=cE;--o;const s=r+(t-i[o])/(i[o+1]-i[o])*cE,a=sE(s,e,n);return a>=.001?function(e,t,n,r){for(let i=0;i<uE;++i){const i=sE(t,n,r);if(0===i)return t;t-=(oE(t,n,r)-e)/i}return t}(t,s,e,n):0===a?s:function(e,t,n,r,i){let o,s,a=0;do{s=t+(n-t)/2,o=oE(s,r,i)-e,o>0?n=s:t=s}while(Math.abs(o)>aE&&++a<lE);return s}(t,r,r+cE,e,n)}return e=>0===e||1===e?e:oE(o(e),t,r)}var dE={linear:L_,easeIn:M_,easeInOut:U_,easeOut:V_,circIn:B_,circInOut:j_,circOut:z_,backIn:q_,backInOut:K_,backOut:G_,anticipate:H_,bounceIn:W_,bounceInOut:e=>e<.5?.5*(1-Q_(1-2*e)):.5*Q_(2*e-1)+.5,bounceOut:Q_},fE=function(e){if(Array.isArray(e)){_b(4===e.length,"Cubic bezier arrays must contain four numerical values.");var t=Iw(e,4);return hE(t[0],t[1],t[2],t[3])}return"string"===typeof e?(_b(void 0!==dE[e],"Invalid easing type '".concat(e,"'")),dE[e]):e},pE=function(e){return Array.isArray(e)&&"number"!==typeof e[0]},mE=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!b_.test(t)||t.startsWith("url(")))},gE=function(e){return Array.isArray(e)},vE=function(){return{type:"spring",stiffness:500,damping:25,restSpeed:10}},yE=function(e){return{type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}},wE=function(){return{type:"keyframes",ease:"linear",duration:.3}},bE=function(e){return{type:"keyframes",duration:.8,values:e}},_E={x:vE,y:vE,z:vE,rotate:vE,rotateX:vE,rotateY:vE,rotateZ:vE,scaleX:yE,scaleY:yE,scale:yE,opacity:wE,backgroundColor:wE,color:wE,default:yE},EE=function(e,t){var n;return n=gE(t)?bE:_E[e]||_E.default,Sw({to:t},n(t))};const TE=new Set(["brightness","contrast","saturate","opacity"]);function SE(e){let[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(Ub)||[];if(!r)return e;const i=n.replace(r,"");let o=TE.has(t)?1:0;return r!==n&&(o*=100),t+"("+o+i+")"}const xE=/([a-z-]*)\(.*?\)/g,IE=Object.assign(Object.assign({},b_),{getAnimatableNone:e=>{const t=e.match(xE);return t?t.map(SE).join(" "):e}});var kE=Sw(Sw({},qb),{transform:Math.round}),CE={borderWidth:t_,borderTopWidth:t_,borderRightWidth:t_,borderBottomWidth:t_,borderLeftWidth:t_,borderRadius:t_,radius:t_,borderTopLeftRadius:t_,borderTopRightRadius:t_,borderBottomRightRadius:t_,borderBottomLeftRadius:t_,width:t_,maxWidth:t_,height:t_,maxHeight:t_,size:t_,top:t_,right:t_,bottom:t_,left:t_,padding:t_,paddingTop:t_,paddingRight:t_,paddingBottom:t_,paddingLeft:t_,margin:t_,marginTop:t_,marginRight:t_,marginBottom:t_,marginLeft:t_,rotate:Zb,rotateX:Zb,rotateY:Zb,rotateZ:Zb,scale:Kb,scaleX:Kb,scaleY:Kb,scaleZ:Kb,skew:Zb,skewX:Zb,skewY:Zb,distance:t_,translateX:t_,translateY:t_,translateZ:t_,x:t_,y:t_,z:t_,perspective:t_,transformPerspective:t_,opacity:Gb,originX:i_,originY:i_,originZ:t_,zIndex:kE,fillOpacity:Gb,strokeOpacity:Gb,numOctaves:kE},AE=Sw(Sw({},CE),{color:f_,backgroundColor:f_,outlineColor:f_,fill:f_,stroke:f_,borderColor:f_,borderTopColor:f_,borderRightColor:f_,borderBottomColor:f_,borderLeftColor:f_,filter:IE,WebkitFilter:IE}),DE=function(e){return AE[e]};function NE(e,t){var n,r=DE(e);return r!==IE&&(r=b_),null===(n=r.getAnimatableNone)||void 0===n?void 0:n.call(r,t)}var PE={current:!1},RE=function(e){return Boolean(e&&"object"===typeof e&&e.mix&&e.toValue)},OE=function(e){return gE(e)?e[e.length-1]||0:e};var LE=!1;function ME(e,t,n){var r;return Array.isArray(t.to)&&(null!==(r=e.duration)&&void 0!==r||(e.duration=.8)),function(e){Array.isArray(e.to)&&null===e.to[0]&&(e.to=kw([],Iw(e.to),!1),e.to[0]=e.from)}(t),function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from;var t=xw(e,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(t).length}(e)||(e=Sw(Sw({},e),EE(n,t.to))),Sw(Sw({},t),function(e){var t=e.ease,n=e.times,r=e.yoyo,i=e.flip,o=e.loop,s=xw(e,["ease","times","yoyo","flip","loop"]),a=Sw({},s);return n&&(a.offset=n),s.duration&&(a.duration=tE(s.duration)),s.repeatDelay&&(a.repeatDelay=tE(s.repeatDelay)),t&&(a.ease=pE(t)?t.map(fE):fE(t)),"tween"===s.type&&(a.type="keyframes"),(r||o||i)&&(bb(!LE,"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options."),LE=!0,r?a.repeatType="reverse":o?a.repeatType="loop":i&&(a.repeatType="mirror"),a.repeat=o||r||i||s.repeat),"spring"!==s.type&&(a.type="keyframes"),a}(e))}function FE(e,t,n,r,i){var o,s=BE(r,e),a=null!==(o=s.from)&&void 0!==o?o:t.get(),l=mE(e,n);"none"===a&&l&&"string"===typeof n?a=NE(e,n):VE(a)&&"string"===typeof n?a=UE(n):!Array.isArray(n)&&VE(n)&&"string"===typeof a&&(n=UE(a));var u=mE(e,a);return bb(u===l,"You are trying to animate ".concat(e,' from "').concat(a,'" to "').concat(n,'". ').concat(a," is not an animatable value - to enable this animation set ").concat(a," to a value animatable to ").concat(n," via the `style` property.")),u&&l&&!1!==s.type?function(){var r={from:a,to:n,velocity:t.getVelocity(),onComplete:i,onUpdate:function(e){return t.set(e)}};return"inertia"===s.type||"decay"===s.type?function(e){let t,{from:n=0,velocity:r=0,min:i,max:o,power:s=.8,timeConstant:a=750,bounceStiffness:l=500,bounceDamping:u=10,restDelta:c=1,modifyTarget:h,driver:d,onUpdate:f,onComplete:p,onStop:m}=e;function g(e){return void 0!==i&&e<i||void 0!==o&&e>o}function v(e){return void 0===i?o:void 0===o||Math.abs(i-e)<Math.abs(o-e)?i:o}function y(e){null===t||void 0===t||t.stop(),t=eE(Object.assign(Object.assign({},e),{driver:d,onUpdate:t=>{var n;null===f||void 0===f||f(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:p,onStop:m}))}function w(e){y(Object.assign({type:"spring",stiffness:l,damping:u,restDelta:c},e))}if(g(n))w({from:n,velocity:r,to:v(n)});else{let e=s*r+n;"undefined"!==typeof h&&(e=h(e));const t=v(e),o=t===i?-1:1;let l,u;const d=e=>{l=u,u=e,r=fb(e-l,cb().delta),(1===o&&e>t||-1===o&&e<t)&&w({from:e,to:t,velocity:r})};y({type:"decay",from:n,velocity:r,timeConstant:a,power:s,restDelta:c,modifyTarget:h,onUpdate:g(e)?d:void 0})}return{stop:()=>null===t||void 0===t?void 0:t.stop()}}(Sw(Sw({},r),s)):eE(Sw(Sw({},ME(s,r,e)),{onUpdate:function(e){var t;r.onUpdate(e),null===(t=s.onUpdate)||void 0===t||t.call(s,e)},onComplete:function(){var e;r.onComplete(),null===(e=s.onComplete)||void 0===e||e.call(s)}}))}:function(){var e,r,o=OE(n);return t.set(o),i(),null===(e=null===s||void 0===s?void 0:s.onUpdate)||void 0===e||e.call(s,o),null===(r=null===s||void 0===s?void 0:s.onComplete)||void 0===r||r.call(s),{stop:function(){}}}}function VE(e){return 0===e||"string"===typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function UE(e){return"number"===typeof e?0:NE("",e)}function BE(e,t){return e[t]||e.default||e}function zE(e,t,n,r){return void 0===r&&(r={}),PE.current&&(r={type:!1}),t.start((function(i){var o,s,a=FE(e,t,n,r,i),l=function(e,t){var n,r;return null!==(r=null!==(n=(BE(e,t)||{}).delay)&&void 0!==n?n:e.delay)&&void 0!==r?r:0}(r,e),u=function(){return s=a()};return l?o=window.setTimeout(u,tE(l)):u(),function(){clearTimeout(o),null===s||void 0===s||s.stop()}}))}var jE=["TopLeft","TopRight","BottomLeft","BottomRight"],qE=jE.length,GE=function(e){return"string"===typeof e?parseFloat(e):e},KE=function(e){return"number"===typeof e||t_.test(e)};function HE(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e.borderRadius}var QE=YE(0,.5,z_),WE=YE(.5,.95,L_);function YE(e,t,n){return function(r){return r<e?0:r>t?1:n(Mb(e,t,r))}}function XE(e,t){e.min=t.min,e.max=t.max}function $E(e,t){XE(e.x,t.x),XE(e.y,t.y)}function JE(e){return void 0===e||1===e}function ZE(e){var t=e.scale,n=e.scaleX,r=e.scaleY;return!JE(t)||!JE(n)||!JE(r)}function eT(e){return ZE(e)||tT(e.x)||tT(e.y)||e.z||e.rotate||e.rotateX||e.rotateY}function tT(e){return e&&"0%"!==e}function nT(e,t,n){return n+t*(e-n)}function rT(e,t,n,r,i){return void 0!==i&&(e=nT(e,i,r)),nT(e,n,r)+t}function iT(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),e.min=rT(e.min,t,n,r,i),e.max=rT(e.max,t,n,r,i)}function oT(e,t){var n=t.x,r=t.y;iT(e.x,n.translate,n.scale,n.originPoint),iT(e.y,r.translate,r.scale,r.originPoint)}function sT(e,t){e.min=e.min+t,e.max=e.max+t}function aT(e,t,n){var r=Iw(n,3),i=r[0],o=r[1],s=r[2],a=void 0!==t[s]?t[s]:.5,l=db(e.min,e.max,a);iT(e,t[i],t[o],l,t.scale)}var lT=["x","scaleX","originX"],uT=["y","scaleY","originY"];function cT(e,t){aT(e.x,t,lT),aT(e.y,t,uT)}const hT=e=>e.hasOwnProperty("x")&&e.hasOwnProperty("y"),dT=e=>hT(e)&&e.hasOwnProperty("z"),fT=(e,t)=>Math.abs(e-t);function pT(e,t){if(__(e)&&__(t))return fT(e,t);if(hT(e)&&hT(t)){const n=fT(e.x,t.x),r=fT(e.y,t.y),i=dT(e)&&dT(t)?fT(e.z,t.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(i,2))}}function mT(e){return e.max-e.min}function gT(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=.01),pT(e,t)<n}function vT(e,t,n,r){void 0===r&&(r=.5),e.origin=r,e.originPoint=db(t.min,t.max,e.origin),e.scale=mT(n)/mT(t),(gT(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=db(n.min,n.max,e.origin)-e.originPoint,(gT(e.translate)||isNaN(e.translate))&&(e.translate=0)}function yT(e,t,n,r){vT(e.x,t.x,n.x,null===r||void 0===r?void 0:r.originX),vT(e.y,t.y,n.y,null===r||void 0===r?void 0:r.originY)}function wT(e,t,n){e.min=n.min+t.min,e.max=e.min+mT(t)}function bT(e,t,n){e.min=t.min-n.min,e.max=e.min+mT(t)}function _T(e,t,n){bT(e.x,t.x,n.x),bT(e.y,t.y,n.y)}function ET(e,t,n,r,i){return e=nT(e-=t,1/n,r),void 0!==i&&(e=nT(e,1/i,r)),e}function TT(e,t,n,r,i){var o=Iw(n,3),s=o[0],a=o[1],l=o[2];!function(e,t,n,r,i,o,s){if(void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=.5),void 0===o&&(o=e),void 0===s&&(s=e),e_.test(t)&&(t=parseFloat(t),t=db(s.min,s.max,t/100)-s.min),"number"===typeof t){var a=db(o.min,o.max,r);e===o&&(a-=t),e.min=ET(e.min,t,n,a,i),e.max=ET(e.max,t,n,a,i)}}(e,t[s],t[a],t[l],t.scale,r,i)}var ST=["x","scaleX","originX"],xT=["y","scaleY","originY"];function IT(e,t,n,r){TT(e.x,t,ST,null===n||void 0===n?void 0:n.x,null===r||void 0===r?void 0:r.x),TT(e.y,t,xT,null===n||void 0===n?void 0:n.y,null===r||void 0===r?void 0:r.y)}var kT=function(){return{x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}},CT=function(){return{x:{min:0,max:0},y:{min:0,max:0}}};function AT(e){return 0===e.translate&&1===e.scale}function DT(e){return AT(e.x)&&AT(e.y)}function NT(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}var PT=function(){function e(){this.members=[]}return e.prototype.add=function(e){pb(this.members,e),e.scheduleRender()},e.prototype.remove=function(e){if(mb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}},e.prototype.relegate=function(e){var t,n=this.members.findIndex((function(t){return e===t}));if(0===n)return!1;for(var r=n;r>=0;r--){var i=this.members[r];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)},e.prototype.promote=function(e,t){var n,r=this.lead;e!==r&&(this.prevLead=r,this.lead=e,e.show(),r&&(r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues,e.snapshot.isShared=!0),(null===(n=e.root)||void 0===n?void 0:n.isUpdating)&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&r.hide()))},e.prototype.exitAnimationComplete=function(){this.members.forEach((function(e){var t,n,r,i,o;null===(n=(t=e.options).onExitComplete)||void 0===n||n.call(t),null===(o=null===(r=e.resumingFrom)||void 0===r?void 0:(i=r.options).onExitComplete)||void 0===o||o.call(i)}))},e.prototype.scheduleRender=function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))},e.prototype.removeLeadSnapshot=function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)},e}(),RT={};var OT="translate3d(0px, 0px, 0) scale(1, 1)";function LT(e,t,n){var r=e.x.translate/t.x,i=e.y.translate/t.y,o="translate3d(".concat(r,"px, ").concat(i,"px, 0) ");if(n){var s=n.rotate,a=n.rotateX,l=n.rotateY;s&&(o+="rotate(".concat(s,"deg) ")),a&&(o+="rotateX(".concat(a,"deg) ")),l&&(o+="rotateY(".concat(l,"deg) "))}return(o+="scale(".concat(e.x.scale,", ").concat(e.y.scale,")"))===OT?"none":o}function MT(e){return[e("x"),e("y")]}var FT=["","X","Y","Z"],VT=["transformPerspective","x","y","z"];function UT(e,t){return VT.indexOf(e)-VT.indexOf(t)}["translate","scale","rotate","skew"].forEach((function(e){return FT.forEach((function(t){return VT.push(e+t)}))}));var BT=new Set(VT);function zT(e){return BT.has(e)}var jT=new Set(["originX","originY","originZ"]);function qT(e){return jT.has(e)}var GT=function(e,t){return e.depth-t.depth},KT=function(){function e(){this.children=[],this.isDirty=!1}return e.prototype.add=function(e){pb(this.children,e),this.isDirty=!0},e.prototype.remove=function(e){mb(this.children,e),this.isDirty=!0},e.prototype.forEach=function(e){this.isDirty&&this.children.sort(GT),this.isDirty=!1,this.children.forEach(e)},e}();function HT(e){var t=wb(e)?e.get():e;return RE(t)?t.toValue():t}var QT={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function WT(e){var t=e.attachResizeListener,n=e.defaultParent,r=e.measureScroll,i=e.resetTransform;return function(){function e(e,t,r){var i=this;void 0===t&&(t={}),void 0===r&&(r=null===n||void 0===n?void 0:n()),this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){i.isUpdating&&(i.isUpdating=!1,i.clearAllSnapshots())},this.updateProjection=function(){i.nodes.forEach(tS),i.nodes.forEach(nS)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=e,this.latestValues=t,this.root=r?r.root||r:this,this.path=r?kw(kw([],Iw(r.path),!1),[r],!1):[],this.parent=r,this.depth=r?r.depth+1:0,e&&this.root.registerPotentialNode(e,this);for(var o=0;o<this.path.length;o++)this.path[o].shouldResetTransform=!0;this.root===this&&(this.nodes=new KT)}return e.prototype.addEventListener=function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new gb),this.eventHandlers.get(e).add(t)},e.prototype.notifyListeners=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.eventHandlers.get(e);null===r||void 0===r||r.notify.apply(r,kw([],Iw(t),!1))},e.prototype.hasListeners=function(e){return this.eventHandlers.has(e)},e.prototype.registerPotentialNode=function(e,t){this.potentialNodes.set(e,t)},e.prototype.mount=function(e,n){var r,i=this;if(void 0===n&&(n=!1),!this.instance){this.isSVG=e instanceof SVGElement&&"svg"!==e.tagName,this.instance=e;var o=this.options,s=o.layoutId,a=o.layout,l=o.visualElement;if(l&&!l.getInstance()&&l.mount(e),this.root.nodes.add(this),null===(r=this.parent)||void 0===r||r.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),n&&(a||s)&&(this.isLayoutDirty=!0),t){var u,c=function(){return i.root.updateBlockedByResize=!1};t(e,(function(){i.root.updateBlockedByResize=!0,clearTimeout(u),u=window.setTimeout(c,250),QT.hasAnimatedSinceResize&&(QT.hasAnimatedSinceResize=!1,i.nodes.forEach(eS))}))}s&&this.root.registerSharedNode(s,this),!1!==this.options.animate&&l&&(s||a)&&this.addEventListener("didUpdate",(function(e){var t,n,r,o,s,a=e.delta,u=e.hasLayoutChanged,c=e.hasRelativeTargetChanged,h=e.layout;if(i.isTreeAnimationBlocked())return i.target=void 0,void(i.relativeTarget=void 0);var d=null!==(n=null!==(t=i.options.transition)&&void 0!==t?t:l.getDefaultTransition())&&void 0!==n?n:lS,f=l.getProps().onLayoutAnimationComplete,p=!i.targetLayout||!NT(i.targetLayout,h)||c,m=!u&&c;(null===(r=i.resumeFrom)||void 0===r?void 0:r.instance)||m||u&&(p||!i.currentAnimation)?(i.resumeFrom&&(i.resumingFrom=i.resumeFrom,i.resumingFrom.resumingFrom=void 0),i.setAnimationOrigin(a,m),i.startAnimation(Sw(Sw({},BE(d,"layout")),{onComplete:f}))):i.isLead()&&(null===(s=(o=i.options).onExitComplete)||void 0===s||s.call(o)),i.targetLayout=h}))}},e.prototype.unmount=function(){var e,t;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(e=this.getStack())||void 0===e||e.remove(this),null===(t=this.parent)||void 0===t||t.children.delete(this),this.instance=void 0,ob.preRender(this.updateProjection)},e.prototype.blockUpdate=function(){this.updateManuallyBlocked=!0},e.prototype.unblockUpdate=function(){this.updateManuallyBlocked=!1},e.prototype.isUpdateBlocked=function(){return this.updateManuallyBlocked||this.updateBlockedByResize},e.prototype.isTreeAnimationBlocked=function(){var e;return this.isAnimationBlocked||(null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimationBlocked())||!1},e.prototype.startUpdate=function(){var e;this.isUpdateBlocked()||(this.isUpdating=!0,null===(e=this.nodes)||void 0===e||e.forEach(rS))},e.prototype.willUpdate=function(e){var t,n,r;if(void 0===e&&(e=!0),this.root.isUpdateBlocked())null===(n=(t=this.options).onExitComplete)||void 0===n||n.call(t);else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var i=0;i<this.path.length;i++){var o=this.path[i];o.shouldResetTransform=!0,o.updateScroll()}var s=this.options,a=s.layoutId,l=s.layout;if(void 0!==a||l){var u=null===(r=this.options.visualElement)||void 0===r?void 0:r.getProps().transformTemplate;this.prevTransformTemplateValue=null===u||void 0===u?void 0:u(this.latestValues,""),this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}}},e.prototype.didUpdate=function(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(JT);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(uS),this.potentialNodes.clear()),this.nodes.forEach(ZT),this.nodes.forEach(YT),this.nodes.forEach(XT),this.clearAllSnapshots(),sb.update(),sb.preRender(),sb.render())},e.prototype.clearAllSnapshots=function(){this.nodes.forEach($T),this.sharedNodes.forEach(iS)},e.prototype.scheduleUpdateProjection=function(){hb.preRender(this.updateProjection,!1,!0)},e.prototype.scheduleCheckAfterUnmount=function(){var e=this;hb.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))},e.prototype.updateSnapshot=function(){if(!this.snapshot&&this.instance){var e=this.measure(),t=this.removeTransform(this.removeElementScroll(e));hS(t),this.snapshot={measured:e,layout:t,latestValues:{}}}},e.prototype.updateLayout=function(){var e;if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var t=0;t<this.path.length;t++){this.path[t].updateScroll()}var n=this.measure();hS(n);var r=this.layout;this.layout={measured:n,actual:this.removeElementScroll(n)},this.layoutCorrected=CT(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),null===(e=this.options.visualElement)||void 0===e||e.notifyLayoutMeasure(this.layout.actual,null===r||void 0===r?void 0:r.actual)}},e.prototype.updateScroll=function(){this.options.layoutScroll&&this.instance&&(this.scroll=r(this.instance))},e.prototype.resetTransform=function(){var e;if(i){var t=this.isLayoutDirty||this.shouldResetTransform,n=this.projectionDelta&&!DT(this.projectionDelta),r=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate,o=null===r||void 0===r?void 0:r(this.latestValues,""),s=o!==this.prevTransformTemplateValue;t&&(n||eT(this.latestValues)||s)&&(i(this.instance,o),this.shouldResetTransform=!1,this.scheduleRender())}},e.prototype.measure=function(){var e=this.options.visualElement;if(!e)return CT();var t=e.measureViewportBox(),n=this.root.scroll;return n&&(sT(t.x,n.x),sT(t.y,n.y)),t},e.prototype.removeElementScroll=function(e){var t=CT();$E(t,e);for(var n=0;n<this.path.length;n++){var r=this.path[n],i=r.scroll,o=r.options;r!==this.root&&i&&o.layoutScroll&&(sT(t.x,i.x),sT(t.y,i.y))}return t},e.prototype.applyTransform=function(e,t){void 0===t&&(t=!1);var n=CT();$E(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&cT(n,{x:-i.scroll.x,y:-i.scroll.y}),eT(i.latestValues)&&cT(n,i.latestValues)}return eT(this.latestValues)&&cT(n,this.latestValues),n},e.prototype.removeTransform=function(e){var t,n=CT();$E(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];if(i.instance&&eT(i.latestValues)){ZE(i.latestValues)&&i.updateSnapshot();var o=CT();$E(o,i.measure()),IT(n,i.latestValues,null===(t=i.snapshot)||void 0===t?void 0:t.layout,o)}}return eT(this.latestValues)&&IT(n,this.latestValues),n},e.prototype.setTargetDelta=function(e){this.targetDelta=e,this.root.scheduleUpdateProjection()},e.prototype.setOptions=function(e){var t;this.options=Sw(Sw(Sw({},this.options),e),{crossfade:null===(t=e.crossfade)||void 0===t||t})},e.prototype.clearMeasurements=function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1},e.prototype.resolveTargetDelta=function(){var e,t,n,r,i=this.options,o=i.layout,s=i.layoutId;this.layout&&(o||s)&&(this.targetDelta||this.relativeTarget||(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget=CT(),this.relativeTargetOrigin=CT(),_T(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),$E(this.relativeTarget,this.relativeTargetOrigin))),(this.relativeTarget||this.targetDelta)&&(this.target||(this.target=CT(),this.targetWithTransforms=CT()),this.relativeTarget&&this.relativeTargetOrigin&&(null===(e=this.relativeParent)||void 0===e?void 0:e.target)?(t=this.target,n=this.relativeTarget,r=this.relativeParent.target,wT(t.x,n.x,r.x),wT(t.y,n.y,r.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.actual):$E(this.target,this.layout.actual),oT(this.target,this.targetDelta)):$E(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&Boolean(this.relativeParent.resumingFrom)===Boolean(this.resumingFrom)&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget=CT(),this.relativeTargetOrigin=CT(),_T(this.relativeTargetOrigin,this.target,this.relativeParent.target),$E(this.relativeTarget,this.relativeTargetOrigin)))))},e.prototype.getClosestProjectingParent=function(){if(this.parent&&!eT(this.parent.latestValues))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()},e.prototype.calcProjection=function(){var e,t=this.options,n=t.layout,r=t.layoutId;if(this.isTreeAnimating=Boolean((null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(n||r)){var i=this.getLead();$E(this.layoutCorrected,this.layout.actual),function(e,t,n,r){var i,o;void 0===r&&(r=!1);var s=n.length;if(s){var a,l;t.x=t.y=1;for(var u=0;u<s;u++)l=(a=n[u]).projectionDelta,"contents"!==(null===(o=null===(i=a.instance)||void 0===i?void 0:i.style)||void 0===o?void 0:o.display)&&(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&cT(e,{x:-a.scroll.x,y:-a.scroll.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,oT(e,l)),r&&eT(a.latestValues)&&cT(e,a.latestValues))}}(this.layoutCorrected,this.treeScale,this.path,Boolean(this.resumingFrom)||this!==i);var o=i.target;if(o){this.projectionDelta||(this.projectionDelta=kT(),this.projectionDeltaWithTransform=kT());var s=this.treeScale.x,a=this.treeScale.y,l=this.projectionTransform;yT(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.projectionTransform=LT(this.projectionDelta,this.treeScale),this.projectionTransform===l&&this.treeScale.x===s&&this.treeScale.y===a||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o))}}},e.prototype.hide=function(){this.isVisible=!1},e.prototype.show=function(){this.isVisible=!0},e.prototype.scheduleRender=function(e){var t,n,r;void 0===e&&(e=!0),null===(n=(t=this.options).scheduleRender)||void 0===n||n.call(t),e&&(null===(r=this.getStack())||void 0===r||r.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)},e.prototype.setAnimationOrigin=function(e,t){var n,r=this;void 0===t&&(t=!1);var i=this.snapshot,o=(null===i||void 0===i?void 0:i.latestValues)||{},s=Sw({},this.latestValues),a=kT();this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!t;var l=CT(),u=null===i||void 0===i?void 0:i.isShared,c=((null===(n=this.getStack())||void 0===n?void 0:n.members.length)||0)<=1,h=Boolean(u&&!c&&!0===this.options.crossfade&&!this.path.some(aS));this.mixTargetDelta=function(t){var n,i=t/1e3;oS(a.x,e.x,i),oS(a.y,e.y,i),r.setTargetDelta(a),r.relativeTarget&&r.relativeTargetOrigin&&r.layout&&(null===(n=r.relativeParent)||void 0===n?void 0:n.layout)&&(_T(l,r.layout.actual,r.relativeParent.layout.actual),function(e,t,n,r){sS(e.x,t.x,n.x,r),sS(e.y,t.y,n.y,r)}(r.relativeTarget,r.relativeTargetOrigin,l,i)),u&&(r.animationValues=s,function(e,t,n,r,i,o){var s,a,l,u;i?(e.opacity=db(0,null!==(s=n.opacity)&&void 0!==s?s:1,QE(r)),e.opacityExit=db(null!==(a=t.opacity)&&void 0!==a?a:1,0,WE(r))):o&&(e.opacity=db(null!==(l=t.opacity)&&void 0!==l?l:1,null!==(u=n.opacity)&&void 0!==u?u:1,r));for(var c=0;c<qE;c++){var h="border".concat(jE[c],"Radius"),d=HE(t,h),f=HE(n,h);void 0===d&&void 0===f||(d||(d=0),f||(f=0),0===d||0===f||KE(d)===KE(f)?(e[h]=Math.max(db(GE(d),GE(f),r),0),(e_.test(f)||e_.test(d))&&(e[h]+="%")):e[h]=f)}(t.rotate||n.rotate)&&(e.rotate=db(t.rotate||0,n.rotate||0,r))}(s,o,r.latestValues,i,h,c)),r.root.scheduleUpdateProjection(),r.scheduleRender()},this.mixTargetDelta(0)},e.prototype.startAnimation=function(e){var t,n,r=this;null===(t=this.currentAnimation)||void 0===t||t.stop(),this.resumingFrom&&(null===(n=this.resumingFrom.currentAnimation)||void 0===n||n.stop()),this.pendingAnimation&&(ob.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=hb.update((function(){QT.hasAnimatedSinceResize=!0,r.currentAnimation=function(e,t,n){void 0===n&&(n={});var r=wb(e)?e:yb(e);return zE("",r,t,n),{stop:function(){return r.stop()},isAnimating:function(){return r.isAnimating()}}}(0,1e3,Sw(Sw({},e),{onUpdate:function(t){var n;r.mixTargetDelta(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:function(){var t;null===(t=e.onComplete)||void 0===t||t.call(e),r.completeAnimation()}})),r.resumingFrom&&(r.resumingFrom.currentAnimation=r.currentAnimation),r.pendingAnimation=void 0}))},e.prototype.completeAnimation=function(){var e;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(e=this.getStack())||void 0===e||e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")},e.prototype.finishAnimation=function(){var e;this.currentAnimation&&(null===(e=this.mixTargetDelta)||void 0===e||e.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()},e.prototype.applyTransformsToTarget=function(){var e=this.getLead(),t=e.targetWithTransforms,n=e.target,r=e.layout,i=e.latestValues;t&&n&&r&&($E(t,n),cT(t,i),yT(this.projectionDeltaWithTransform,this.layoutCorrected,t,i))},e.prototype.registerSharedNode=function(e,t){var n,r,i;this.sharedNodes.has(e)||this.sharedNodes.set(e,new PT),this.sharedNodes.get(e).add(t),t.promote({transition:null===(n=t.options.initialPromotionConfig)||void 0===n?void 0:n.transition,preserveFollowOpacity:null===(i=null===(r=t.options.initialPromotionConfig)||void 0===r?void 0:r.shouldPreserveFollowOpacity)||void 0===i?void 0:i.call(r,t)})},e.prototype.isLead=function(){var e=this.getStack();return!e||e.lead===this},e.prototype.getLead=function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this},e.prototype.getPrevLead=function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0},e.prototype.getStack=function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)},e.prototype.promote=function(e){var t=void 0===e?{}:e,n=t.needsReset,r=t.transition,i=t.preserveFollowOpacity,o=this.getStack();o&&o.promote(this,i),n&&(this.projectionDelta=void 0,this.needsReset=!0),r&&this.setOptions({transition:r})},e.prototype.relegate=function(){var e=this.getStack();return!!e&&e.relegate(this)},e.prototype.resetRotation=function(){var e=this.options.visualElement;if(e){for(var t=!1,n={},r=0;r<FT.length;r++){var i="rotate"+FT[r];e.getStaticValue(i)&&(t=!0,n[i]=e.getStaticValue(i),e.setStaticValue(i,0))}if(t){for(var i in null===e||void 0===e||e.syncRender(),n)e.setStaticValue(i,n[i]);e.scheduleRender()}}},e.prototype.getProjectionStyles=function(e){var t,n,r,i,o,s;void 0===e&&(e={});var a={};if(!this.instance||this.isSVG)return a;if(!this.isVisible)return{visibility:"hidden"};a.visibility="";var l=null===(t=this.options.visualElement)||void 0===t?void 0:t.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=HT(e.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none",a;var u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){var c={};return this.options.layoutId&&(c.opacity=null!==(n=this.latestValues.opacity)&&void 0!==n?n:1,c.pointerEvents=HT(e.pointerEvents)||""),this.hasProjected&&!eT(this.latestValues)&&(c.transform=l?l({},""):"none",this.hasProjected=!1),c}var h=u.animationValues||u.latestValues;this.applyTransformsToTarget(),a.transform=LT(this.projectionDeltaWithTransform,this.treeScale,h),l&&(a.transform=l(h,a.transform));var d=this.projectionDelta,f=d.x,p=d.y;for(var m in a.transformOrigin="".concat(100*f.origin,"% ").concat(100*p.origin,"% 0"),u.animationValues?a.opacity=u===this?null!==(i=null!==(r=h.opacity)&&void 0!==r?r:this.latestValues.opacity)&&void 0!==i?i:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:a.opacity=u===this?null!==(o=h.opacity)&&void 0!==o?o:"":null!==(s=h.opacityExit)&&void 0!==s?s:0,RT)if(void 0!==h[m]){var g=RT[m],v=g.correct,y=g.applyTo,w=v(h[m],u);if(y)for(var b=y.length,_=0;_<b;_++)a[y[_]]=w;else a[m]=w}return this.options.layoutId&&(a.pointerEvents=u===this?HT(e.pointerEvents)||"":"none"),a},e.prototype.clearSnapshot=function(){this.resumeFrom=this.snapshot=void 0},e.prototype.resetTree=function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(JT),this.root.sharedNodes.clear()},e}()}function YT(e){e.updateLayout()}function XT(e){var t,n,r,i,o=null!==(n=null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)&&void 0!==n?n:e.snapshot;if(e.isLead()&&e.layout&&o&&e.hasListeners("didUpdate")){var s=e.layout,a=s.actual,l=s.measured;"size"===e.options.animationType?MT((function(e){var t=o.isShared?o.measured[e]:o.layout[e],n=mT(t);t.min=a[e].min,t.max=t.min+n})):"position"===e.options.animationType&&MT((function(e){var t=o.isShared?o.measured[e]:o.layout[e],n=mT(a[e]);t.max=t.min+n}));var u=kT();yT(u,a,o.layout);var c=kT();o.isShared?yT(c,e.applyTransform(l,!0),o.measured):yT(c,a,o.layout);var h=!DT(u),d=!1;if(!e.resumeFrom&&(e.relativeParent=e.getClosestProjectingParent(),e.relativeParent&&!e.relativeParent.resumeFrom)){var f=e.relativeParent,p=f.snapshot,m=f.layout;if(p&&m){var g=CT();_T(g,o.layout,p.layout);var v=CT();_T(v,a,m.actual),NT(g,v)||(d=!0)}}e.notifyListeners("didUpdate",{layout:a,snapshot:o,delta:c,layoutDelta:u,hasLayoutChanged:h,hasRelativeTargetChanged:d})}else e.isLead()&&(null===(i=(r=e.options).onExitComplete)||void 0===i||i.call(r));e.options.transition=void 0}function $T(e){e.clearSnapshot()}function JT(e){e.clearMeasurements()}function ZT(e){e.resetTransform()}function eS(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function tS(e){e.resolveTargetDelta()}function nS(e){e.calcProjection()}function rS(e){e.resetRotation()}function iS(e){e.removeLeadSnapshot()}function oS(e,t,n){e.translate=db(t.translate,0,n),e.scale=db(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function sS(e,t,n,r){e.min=db(t.min,n.min,r),e.max=db(t.max,n.max,r)}function aS(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var lS={duration:.45,ease:[.4,0,.1,1]};function uS(e,t){for(var n=e.root,r=e.path.length-1;r>=0;r--)if(Boolean(e.path[r].instance)){n=e.path[r];break}var i=(n&&n!==e.root?n.instance:document).querySelector('[data-projection-id="'.concat(t,'"]'));i&&e.mount(i,!0)}function cS(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function hS(e){cS(e.x),cS(e.y)}var dS=1;var fS=(0,t.createContext)({}),pS=(0,t.createContext)({});var mS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Tw(t,e),t.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},t.prototype.componentDidUpdate=function(){},t.prototype.updateProps=function(){var e=this.props,t=e.visualElement,n=e.props;t&&t.setProps(n)},t.prototype.render=function(){return this.props.children},t}(t.Component);function gS(e){var n=e.preloadedFeatures,r=e.createVisualElement,i=e.projectionNodeConstructor,o=e.useRender,s=e.useVisualState,a=e.Component;return n&&function(e){for(var t in e)null!==e[t]&&("projectionNodeConstructor"===t?Aw.projectionNodeConstructor=e[t]:Aw[t].Component=e[t])}(n),(0,t.forwardRef)((function(e,n){var l=function(e){var n,r=e.layoutId,i=null===(n=(0,t.useContext)(fS))||void 0===n?void 0:n.id;return i&&void 0!==r?i+"-"+r:r}(e);e=Sw(Sw({},e),{layoutId:l});var u=(0,t.useContext)(Rw),c=null,h=Hw(e),d=u.isStatic?void 0:Ww((function(){if(QT.hasEverUpdated)return dS++})),f=s(e,u.isStatic);return!u.isStatic&&Mw&&(h.visualElement=Vw(a,f,Sw(Sw({},u),e),r),function(e,n,r,i){var o,s=n.layoutId,a=n.layout,l=n.drag,u=n.dragConstraints,c=n.layoutScroll,h=(0,t.useContext)(pS);i&&r&&!(null===r||void 0===r?void 0:r.projection)&&(r.projection=new i(e,r.getLatestValues(),null===(o=r.parent)||void 0===o?void 0:o.projection),r.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:Boolean(l)||u&&Uw(u),visualElement:r,scheduleRender:function(){return r.scheduleRender()},animationType:"string"===typeof a?a:"both",initialPromotionConfig:h,layoutScroll:c}))}(d,e,h.visualElement,i||Aw.projectionNodeConstructor),c=function(e,n,r){var i=[];if((0,t.useContext)(Dw),!n)return null;for(var o=0;o<Pw;o++){var s=Nw[o],a=Aw[s],l=a.isEnabled,u=a.Component;l(e)&&u&&i.push(t.createElement(u,Sw({key:s},e,{visualElement:n})))}return i}(e,h.visualElement)),t.createElement(mS,{visualElement:h.visualElement,props:Sw(Sw({},u),e)},c,t.createElement(Ow.Provider,{value:h},o(a,e,d,function(e,n,r){return(0,t.useCallback)((function(t){var i;t&&(null===(i=e.mount)||void 0===i||i.call(e,t)),n&&(t?n.mount(t):n.unmount()),r&&("function"===typeof r?r(t):Uw(r)&&(r.current=t))}),[n])}(f,h.visualElement,n),f,u.isStatic,h.visualElement)))}))}function vS(e){function t(t,n){return void 0===n&&(n={}),gS(e(t,n))}if("undefined"===typeof Proxy)return t;var n=new Map;return new Proxy(t,{get:function(e,r){return n.has(r)||n.set(r,t(r)),n.get(r)}})}var yS=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function wS(e){return"string"===typeof e&&!e.includes("-")&&!!(yS.indexOf(e)>-1||/[A-Z]/.test(e))}function bS(e,t){var n=t.layout,r=t.layoutId;return zT(e)||qT(e)||(n||void 0!==r)&&(!!RT[e]||"opacity"===e)}var _S={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function ES(e){return e.startsWith("--")}var TS=function(e,t){return t&&"number"===typeof e?t.transform(e):e};function SS(e,t,n,r){var i,o=e.style,s=e.vars,a=e.transform,l=e.transformKeys,u=e.transformOrigin;l.length=0;var c=!1,h=!1,d=!0;for(var f in t){var p=t[f];if(ES(f))s[f]=p;else{var m=CE[f],g=TS(p,m);if(zT(f)){if(c=!0,a[f]=g,l.push(f),!d)continue;p!==(null!==(i=m.default)&&void 0!==i?i:0)&&(d=!1)}else qT(f)?(u[f]=g,h=!0):o[f]=g}}c?o.transform=function(e,t,n,r){var i=e.transform,o=e.transformKeys,s=t.enableHardwareAcceleration,a=void 0===s||s,l=t.allowTransformNone,u=void 0===l||l,c="";o.sort(UT);for(var h=!1,d=o.length,f=0;f<d;f++){var p=o[f];c+="".concat(_S[p]||p,"(").concat(i[p],") "),"z"===p&&(h=!0)}return!h&&a?c+="translateZ(0)":c=c.trim(),r?c=r(i,n?"":c):u&&n&&(c="none"),c}(e,n,d,r):r?o.transform=r({},""):!t.transform&&o.transform&&(o.transform="none"),h&&(o.transformOrigin=function(e){var t=e.originX,n=void 0===t?"50%":t,r=e.originY,i=void 0===r?"50%":r,o=e.originZ,s=void 0===o?0:o;return"".concat(n," ").concat(i," ").concat(s)}(u))}var xS=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function IS(e,t,n){for(var r in t)wb(t[r])||bS(r,n)||(e[r]=t[r])}function kS(e,n,r){var i={};return IS(i,e.style||{},e),Object.assign(i,function(e,n,r){var i=e.transformTemplate;return(0,t.useMemo)((function(){var e=xS();SS(e,n,{enableHardwareAcceleration:!r},i);var t=e.vars,o=e.style;return Sw(Sw({},t),o)}),[n])}(e,n,r)),e.transformValues&&(i=e.transformValues(i)),i}function CS(e,t,n){var r={},i=kS(e,t,n);return Boolean(e.drag)&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),r.style=i,r}var AS=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function DS(e){return AS.has(e)}var NS,PS=function(e){return!DS(e)};try{(NS=require("@emotion/is-prop-valid").default)&&(PS=function(e){return e.startsWith("on")?!DS(e):NS(e)})}catch(Uk){}function RS(e,t,n){return"string"===typeof e?e:t_.transform(t+n*e)}var OS={offset:"stroke-dashoffset",array:"stroke-dasharray"},LS={offset:"strokeDashoffset",array:"strokeDasharray"};function MS(e,t,n,r){var i=t.attrX,o=t.attrY,s=t.originX,a=t.originY,l=t.pathLength,u=t.pathSpacing,c=void 0===u?1:u,h=t.pathOffset,d=void 0===h?0:h;SS(e,xw(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),n,r),e.attrs=e.style,e.style={};var f=e.attrs,p=e.style,m=e.dimensions;f.transform&&(m&&(p.transform=f.transform),delete f.transform),m&&(void 0!==s||void 0!==a||p.transform)&&(p.transformOrigin=function(e,t,n){var r=RS(t,e.x,e.width),i=RS(n,e.y,e.height);return"".concat(r," ").concat(i)}(m,void 0!==s?s:.5,void 0!==a?a:.5)),void 0!==i&&(f.x=i),void 0!==o&&(f.y=o),void 0!==l&&function(e,t,n,r,i){void 0===n&&(n=1),void 0===r&&(r=0),void 0===i&&(i=!0),e.pathLength=1;var o=i?OS:LS;e[o.offset]=t_.transform(-r);var s=t_.transform(t),a=t_.transform(n);e[o.array]="".concat(s," ").concat(a)}(f,l,c,d,!1)}var FS=function(){return Sw(Sw({},xS()),{attrs:{}})};function VS(e,n){var r=(0,t.useMemo)((function(){var t=FS();return MS(t,n,{enableHardwareAcceleration:!1},e.transformTemplate),Sw(Sw({},t.attrs),{style:Sw({},t.style)})}),[n]);if(e.style){var i={};IS(i,e.style,e),r.style=Sw(Sw({},i),r.style)}return r}function US(e){void 0===e&&(e=!1);return function(n,r,i,o,s,a){var l=s.latestValues,u=(wS(n)?VS:CS)(r,l,a),c=function(e,t,n){var r={};for(var i in e)(PS(i)||!0===n&&DS(i)||!t&&!DS(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(r,"string"===typeof n,e),h=Sw(Sw(Sw({},c),u),{ref:o});return i&&(h["data-projection-id"]=i),(0,t.createElement)(n,h)}}var BS=/([a-z])([A-Z])/g,zS=function(e){return e.replace(BS,"$1-$2").toLowerCase()};function jS(e,t,n,r){var i=t.style,o=t.vars;for(var s in Object.assign(e.style,i,r&&r.getProjectionStyles(n)),o)e.style.setProperty(s,o[s])}var qS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function GS(e,t){for(var n in jS(e,t),t.attrs)e.setAttribute(qS.has(n)?n:zS(n),t.attrs[n])}function KS(e){var t=e.style,n={};for(var r in t)(wb(t[r])||bS(r,e))&&(n[r]=t[r]);return n}function HS(e){var t=KS(e);for(var n in e){if(wb(e[n]))t["x"===n||"y"===n?"attr"+n.toUpperCase():n]=e[n]}return t}function QS(e){return"object"===typeof e&&"function"===typeof e.start}function WS(e,t,n,r){var i=e.scrapeMotionValuesFromProps,o=e.createRenderState,s=e.onMount,a={latestValues:XS(t,n,r,i),renderState:o()};return s&&(a.mount=function(e){return s(t,e,a)}),a}var YS=function(e){return function(n,r){var i=(0,t.useContext)(Ow),o=(0,t.useContext)(Lw);return r?WS(e,n,i,o):Ww((function(){return WS(e,n,i,o)}))}};function XS(e,t,n,r){var i={},o=!1===(null===n||void 0===n?void 0:n.initial),s=r(e);for(var a in s)i[a]=HT(s[a]);var l=e.initial,u=e.animate,c=Gw(e),h=Kw(e);t&&h&&!c&&!1!==e.inherit&&(null!==l&&void 0!==l||(l=t.initial),null!==u&&void 0!==u||(u=t.animate));var d=o||!1===l,f=d?u:l;f&&"boolean"!==typeof f&&!QS(f)&&(Array.isArray(f)?f:[f]).forEach((function(t){var n=jw(e,t);if(n){var r=n.transitionEnd;n.transition;var o=xw(n,["transitionEnd","transition"]);for(var s in o){var a=o[s];if(Array.isArray(a))a=a[d?a.length-1:0];null!==a&&(i[s]=a)}for(var s in r)i[s]=r[s]}}));return i}var $S,JS={useVisualState:YS({scrapeMotionValuesFromProps:HS,createRenderState:FS,onMount:function(e,t,n){var r=n.renderState,i=n.latestValues;try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(o){r.dimensions={x:0,y:0,width:0,height:0}}MS(r,i,{enableHardwareAcceleration:!1},e.transformTemplate),GS(t,r)}})},ZS={useVisualState:YS({scrapeMotionValuesFromProps:KS,createRenderState:xS})};function ex(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}function tx(e,n,r,i){(0,t.useEffect)((function(){var t=e.current;if(r&&t)return ex(t,n,r,i)}),[e,n,r,i])}function nx(e){return"undefined"!==typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function rx(e){return!!e.touches}!function(e){e.Animate="animate",e.Hover="whileHover",e.Tap="whileTap",e.Drag="whileDrag",e.Focus="whileFocus",e.InView="whileInView",e.Exit="exit"}($S||($S={}));var ix={pageX:0,pageY:0};function ox(e,t){void 0===t&&(t="page");var n=e.touches[0]||e.changedTouches[0]||ix;return{x:n[t+"X"],y:n[t+"Y"]}}function sx(e,t){return void 0===t&&(t="page"),{x:e[t+"X"],y:e[t+"Y"]}}function ax(e,t){return void 0===t&&(t="page"),{point:rx(e)?ox(e,t):sx(e,t)}}var lx=function(e,t){void 0===t&&(t=!1);var n,r=function(t){return e(t,ax(t))};return t?(n=r,function(e){var t=e instanceof MouseEvent;(!t||t&&0===e.button)&&n(e)}):r},ux=function(){return Mw&&null===window.onpointerdown},cx=function(){return Mw&&null===window.ontouchstart},hx=function(){return Mw&&null===window.onmousedown},dx={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},fx={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function px(e){return ux()?e:cx()?fx[e]:hx()?dx[e]:e}function mx(e,t,n,r){return ex(e,px(t),lx(n,"pointerdown"===t),r)}function gx(e,t,n,r){return tx(e,px(t),n&&lx(n,"pointerdown"===t),r)}function vx(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var yx=vx("dragHorizontal"),wx=vx("dragVertical");function bx(e){var t=!1;if("y"===e)t=wx();else if("x"===e)t=yx();else{var n=yx(),r=wx();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}function _x(){var e=bx(!0);return!e||(e(),!1)}function Ex(e,t,n){return function(r,i){var o;nx(r)&&!_x()&&(null===(o=e.animationState)||void 0===o||o.setActive($S.Hover,t),null===n||void 0===n||n(r,i))}}var Tx=function(e,t){return!!t&&(e===t||Tx(e,t.parentElement))};function Sx(e){return(0,t.useEffect)((function(){return function(){return e()}}),[])}var xx=new WeakMap,Ix=new WeakMap,kx=function(e){var t;null===(t=xx.get(e.target))||void 0===t||t(e)},Cx=function(e){e.forEach(kx)};function Ax(e,t,n){var r=function(e){var t=e.root,n=xw(e,["root"]),r=t||document;Ix.has(r)||Ix.set(r,{});var i=Ix.get(r),o=JSON.stringify(n);return i[o]||(i[o]=new IntersectionObserver(Cx,Sw({root:t},n))),i[o]}(t);return xx.set(e,n),r.observe(e),function(){xx.delete(e),r.unobserve(e)}}var Dx={some:0,all:1};function Nx(e,n,r,i){var o=i.root,s=i.margin,a=i.amount,l=void 0===a?"some":a,u=i.once;(0,t.useEffect)((function(){if(e){var t={root:null===o||void 0===o?void 0:o.current,rootMargin:s,threshold:"number"===typeof l?l:Dx[l]};return Ax(r.getInstance(),t,(function(e){var t,i=e.isIntersecting;if(n.isInView!==i&&(n.isInView=i,!u||i||!n.hasEnteredView)){i&&(n.hasEnteredView=!0),null===(t=r.animationState)||void 0===t||t.setActive($S.InView,i);var o=r.getProps(),s=i?o.onViewportEnter:o.onViewportLeave;null===s||void 0===s||s(e)}}))}}),[e,o,s,l])}function Px(e,n,r){(0,t.useEffect)((function(){e&&requestAnimationFrame((function(){var e;n.hasEnteredView=!0;var t=r.getProps().onViewportEnter;null===t||void 0===t||t(null),null===(e=r.animationState)||void 0===e||e.setActive($S.InView,!0)}))}),[e])}var Rx=function(e){return function(t){return e(t),null}},Ox={inView:Rx((function(e){var n=e.visualElement,r=e.whileInView,i=e.onViewportEnter,o=e.onViewportLeave,s=e.viewport,a=void 0===s?{}:s,l=(0,t.useRef)({hasEnteredView:!1,isInView:!1}),u=Boolean(r||i||o);a.once&&l.current.hasEnteredView&&(u=!1),("undefined"===typeof IntersectionObserver?Px:Nx)(u,l.current,n,a)})),tap:Rx((function(e){var n=e.onTap,r=e.onTapStart,i=e.onTapCancel,o=e.whileTap,s=e.visualElement,a=n||r||i||o,l=(0,t.useRef)(!1),u=(0,t.useRef)(null);function c(){var e;null===(e=u.current)||void 0===e||e.call(u),u.current=null}function h(){var e;return c(),l.current=!1,null===(e=s.animationState)||void 0===e||e.setActive($S.Tap,!1),!_x()}function d(e,t){h()&&(Tx(s.getInstance(),e.target)?null===n||void 0===n||n(e,t):null===i||void 0===i||i(e,t))}function f(e,t){h()&&(null===i||void 0===i||i(e,t))}gx(s,"pointerdown",a?function(e,t){var n;c(),l.current||(l.current=!0,u.current=T_(mx(window,"pointerup",d),mx(window,"pointercancel",f)),null===(n=s.animationState)||void 0===n||n.setActive($S.Tap,!0),null===r||void 0===r||r(e,t))}:void 0),Sx(c)})),focus:Rx((function(e){var t=e.whileFocus,n=e.visualElement;tx(n,"focus",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive($S.Focus,!0)}:void 0),tx(n,"blur",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive($S.Focus,!1)}:void 0)})),hover:Rx((function(e){var t=e.onHoverStart,n=e.onHoverEnd,r=e.whileHover,i=e.visualElement;gx(i,"pointerenter",t||r?Ex(i,!0,t):void 0),gx(i,"pointerleave",n||r?Ex(i,!1,n):void 0)}))};function Lx(){var e=(0,t.useContext)(Lw);if(null===e)return[!0,null];var n=e.isPresent,r=e.onExitComplete,i=e.register,o=Vx();(0,t.useEffect)((function(){return i(o)}),[]);return!n&&r?[!1,function(){return null===r||void 0===r?void 0:r(o)}]:[!0]}var Mx=0,Fx=function(){return Mx++},Vx=function(){return Ww(Fx)};function Ux(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var Bx=function(e){return/^\-?\d*\.?\d+$/.test(e)},zx=function(e){return/^0[^.\s]+$/.test(e)},jx=function(e){return function(t){return t.test(e)}},qx=[qb,t_,e_,Zb,r_,n_,{test:function(e){return"auto"===e},parse:function(e){return e}}],Gx=function(e){return qx.find(jx(e))},Kx=kw(kw([],Iw(qx),!1),[f_,b_],!1),Hx=function(e){return Kx.find(jx(e))};function Qx(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,yb(n))}function Wx(e,t){var n=qw(e,t),r=n?e.makeTargetAnimatable(n,!1):{},i=r.transitionEnd,o=void 0===i?{}:i;r.transition;var s=xw(r,["transitionEnd","transition"]);for(var a in s=Sw(Sw({},s),o)){Qx(e,a,OE(s[a]))}}function Yx(e,t){if(t)return(t[e]||t.default||t).from}function Xx(e,t,n){var r;void 0===n&&(n={});var i=qw(e,t,n.custom),o=(i||{}).transition,s=void 0===o?e.getDefaultTransition()||{}:o;n.transitionOverride&&(s=n.transitionOverride);var a=i?function(){return $x(e,i,n)}:function(){return Promise.resolve()},l=(null===(r=e.variantChildren)||void 0===r?void 0:r.size)?function(r){void 0===r&&(r=0);var i=s.delayChildren,o=void 0===i?0:i,a=s.staggerChildren,l=s.staggerDirection;return function(e,t,n,r,i,o){void 0===n&&(n=0);void 0===r&&(r=0);void 0===i&&(i=1);var s=[],a=(e.variantChildren.size-1)*r,l=1===i?function(e){return void 0===e&&(e=0),e*r}:function(e){return void 0===e&&(e=0),a-e*r};return Array.from(e.variantChildren).sort(Jx).forEach((function(e,r){s.push(Xx(e,t,Sw(Sw({},o),{delay:n+l(r)})).then((function(){return e.notifyAnimationComplete(t)})))})),Promise.all(s)}(e,t,o+r,a,l,n)}:function(){return Promise.resolve()},u=s.when;if(u){var c=Iw("beforeChildren"===u?[a,l]:[l,a],2),h=c[0],d=c[1];return h().then(d)}return Promise.all([a(),l(n.delay)])}function $x(e,t,n){var r,i=void 0===n?{}:n,o=i.delay,s=void 0===o?0:o,a=i.transitionOverride,l=i.type,u=e.makeTargetAnimatable(t),c=u.transition,h=void 0===c?e.getDefaultTransition():c,d=u.transitionEnd,f=xw(u,["transition","transitionEnd"]);a&&(h=a);var p=[],m=l&&(null===(r=e.animationState)||void 0===r?void 0:r.getState()[l]);for(var g in f){var v=e.getValue(g),y=f[g];if(!(!v||void 0===y||m&&Zx(m,g))){var w=zE(g,v,y,Sw({delay:s},h));p.push(w)}}return Promise.all(p).then((function(){d&&Wx(e,d)}))}function Jx(e,t){return e.sortNodePosition(t)}function Zx(e,t){var n=e.protectedKeys,r=e.needsAnimating,i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}var eI=[$S.Animate,$S.InView,$S.Focus,$S.Hover,$S.Tap,$S.Drag,$S.Exit],tI=kw([],Iw(eI),!1).reverse(),nI=eI.length;function rI(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,r=t.options;return function(e,t,n){var r;if(void 0===n&&(n={}),e.notifyAnimationStart(t),Array.isArray(t)){var i=t.map((function(t){return Xx(e,t,n)}));r=Promise.all(i)}else if("string"===typeof t)r=Xx(e,t,n);else{var o="function"===typeof t?qw(e,t,n.custom):t;r=$x(e,o,n)}return r.then((function(){return e.notifyAnimationComplete(t)}))}(e,n,r)})))}}function iI(e){var t=rI(e),n=function(){var e;return(e={})[$S.Animate]=oI(!0),e[$S.InView]=oI(),e[$S.Hover]=oI(),e[$S.Tap]=oI(),e[$S.Drag]=oI(),e[$S.Focus]=oI(),e[$S.Exit]=oI(),e}(),r={},i=!0,o=function(t,n){var r=qw(e,n);if(r){r.transition;var i=r.transitionEnd,o=xw(r,["transition","transitionEnd"]);t=Sw(Sw(Sw({},t),o),i)}return t};function s(s,a){for(var l,u=e.getProps(),c=e.getVariantContext(!0)||{},h=[],d=new Set,f={},p=1/0,m=function(t){var r=tI[t],m=n[r],g=null!==(l=u[r])&&void 0!==l?l:c[r],v=zw(g),y=r===a?m.isActive:null;!1===y&&(p=t);var w=g===c[r]&&g!==u[r]&&v;if(w&&i&&e.manuallyAnimateOnMount&&(w=!1),m.protectedKeys=Sw({},f),!m.isActive&&null===y||!g&&!m.prevProp||QS(g)||"boolean"===typeof g)return"continue";var b=function(e,t){if("string"===typeof t)return t!==e;if(Bw(t))return!Ux(t,e);return!1}(m.prevProp,g),_=b||r===a&&m.isActive&&!w&&v||t>p&&v,E=Array.isArray(g)?g:[g],T=E.reduce(o,{});!1===y&&(T={});var S=m.prevResolvedValues,x=void 0===S?{}:S,I=Sw(Sw({},x),T),k=function(e){_=!0,d.delete(e),m.needsAnimating[e]=!0};for(var C in I){var A=T[C],D=x[C];f.hasOwnProperty(C)||(A!==D?gE(A)&&gE(D)?!Ux(A,D)||b?k(C):m.protectedKeys[C]=!0:void 0!==A?k(C):d.add(C):void 0!==A&&d.has(C)?k(C):m.protectedKeys[C]=!0)}m.prevProp=g,m.prevResolvedValues=T,m.isActive&&(f=Sw(Sw({},f),T)),i&&e.blockInitialAnimation&&(_=!1),_&&!w&&h.push.apply(h,kw([],Iw(E.map((function(e){return{animation:e,options:Sw({type:r},s)}}))),!1))},g=0;g<nI;g++)m(g);if(r=Sw({},f),d.size){var v={};d.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(v[t]=n)})),h.push({animation:v})}var y=Boolean(h.length);return i&&!1===u.initial&&!e.manuallyAnimateOnMount&&(y=!1),i=!1,y?t(h):Promise.resolve()}return{isAnimated:function(e){return void 0!==r[e]},animateChanges:s,setActive:function(t,r,i){var o;return n[t].isActive===r?Promise.resolve():(null===(o=e.variantChildren)||void 0===o||o.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r,s(i,t))},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function oI(e){return void 0===e&&(e=!1),{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var sI={animation:Rx((function(e){var n=e.visualElement,r=e.animate;n.animationState||(n.animationState=iI(n)),QS(r)&&(0,t.useEffect)((function(){return r.subscribe(n)}),[r])})),exit:Rx((function(e){var n=e.custom,r=e.visualElement,i=Iw(Lx(),2),o=i[0],s=i[1],a=(0,t.useContext)(Lw);(0,t.useEffect)((function(){var e,t;r.isPresent=o;var i=null===(e=r.animationState)||void 0===e?void 0:e.setActive($S.Exit,!o,{custom:null!==(t=null===a||void 0===a?void 0:a.custom)&&void 0!==t?t:n});!o&&(null===i||void 0===i||i.then(s))}),[o])}))},aI=function(){function e(e,t,n){var r=this,i=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e=cI(r.lastMoveEventInfo,r.history),t=null!==r.startEvent,n=pT(e.offset,{x:0,y:0})>=3;if(t||n){var i=e.point,o=cb().timestamp;r.history.push(Sw(Sw({},i),{timestamp:o}));var s=r.handlers,a=s.onStart,l=s.onMove;t||(a&&a(r.lastMoveEvent,e),r.startEvent=r.lastMoveEvent),l&&l(r.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){r.lastMoveEvent=e,r.lastMoveEventInfo=lI(t,r.transformPagePoint),nx(e)&&0===e.buttons?r.handlePointerUp(e,t):hb.update(r.updatePoint,!0)},this.handlePointerUp=function(e,t){r.end();var n=r.handlers,i=n.onEnd,o=n.onSessionEnd,s=cI(lI(t,r.transformPagePoint),r.history);r.startEvent&&i&&i(e,s),o&&o(e,s)},!(rx(e)&&e.touches.length>1)){this.handlers=t,this.transformPagePoint=i;var o=lI(ax(e),this.transformPagePoint),s=o.point,a=cb().timestamp;this.history=[Sw(Sw({},s),{timestamp:a})];var l=t.onSessionStart;l&&l(e,cI(o,this.history)),this.removeListeners=T_(mx(window,"pointermove",this.handlePointerMove),mx(window,"pointerup",this.handlePointerUp),mx(window,"pointercancel",this.handlePointerUp))}}return e.prototype.updateHandlers=function(e){this.handlers=e},e.prototype.end=function(){this.removeListeners&&this.removeListeners(),ob.update(this.updatePoint)},e}();function lI(e,t){return t?{point:t(e.point)}:e}function uI(e,t){return{x:e.x-t.x,y:e.y-t.y}}function cI(e,t){var n=e.point;return{point:n,delta:uI(n,dI(t)),offset:uI(n,hI(t)),velocity:fI(t,.1)}}function hI(e){return e[0]}function dI(e){return e[e.length-1]}function fI(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,i=dI(e);n>=0&&(r=e[n],!(i.timestamp-r.timestamp>tE(t)));)n--;if(!r)return{x:0,y:0};var o=(i.timestamp-r.timestamp)/1e3;if(0===o)return{x:0,y:0};var s={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function pI(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function mI(e,t){var n,r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&(r=(n=Iw([i,r],2))[0],i=n[1]),{min:r,max:i}}var gI=.35;function vI(e,t,n){return{min:yI(e,t),max:yI(e,n)}}function yI(e,t){var n;return"number"===typeof e?e:null!==(n=e[t])&&void 0!==n?n:0}function wI(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function bI(e,t){return wI(function(e,t){if(!t)return e;var n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}var _I=new WeakMap,EI=function(){function e(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=CT(),this.visualElement=e}return e.prototype.start=function(e,t){var n=this,r=(void 0===t?{}:t).snapToCursor,i=void 0!==r&&r;if(!1!==this.visualElement.isPresent){this.panSession=new aI(e,{onSessionStart:function(e){n.stopAnimation(),i&&n.snapToCursor(ax(e,"page").point)},onStart:function(e,t){var r,i=n.getProps(),o=i.drag,s=i.dragPropagation,a=i.onDragStart;(!o||s||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=bx(o),n.openGlobalLock))&&(n.isDragging=!0,n.currentDirection=null,n.resolveConstraints(),n.visualElement.projection&&(n.visualElement.projection.isAnimationBlocked=!0,n.visualElement.projection.target=void 0),MT((function(e){var t,r,i=n.getAxisMotionValue(e).get()||0;if(e_.test(i)){var o=null===(r=null===(t=n.visualElement.projection)||void 0===t?void 0:t.layout)||void 0===r?void 0:r.actual[e];if(o)i=mT(o)*(parseFloat(i)/100)}n.originPoint[e]=i})),null===a||void 0===a||a(e,t),null===(r=n.visualElement.animationState)||void 0===r||r.setActive($S.Drag,!0))},onMove:function(e,t){var r=n.getProps(),i=r.dragPropagation,o=r.dragDirectionLock,s=r.onDirectionLock,a=r.onDrag;if(i||n.openGlobalLock){var l=t.offset;if(o&&null===n.currentDirection)return n.currentDirection=function(e,t){void 0===t&&(t=10);var n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(l),void(null!==n.currentDirection&&(null===s||void 0===s||s(n.currentDirection)));n.updateAxis("x",t.point,l),n.updateAxis("y",t.point,l),n.visualElement.syncRender(),null===a||void 0===a||a(e,t)}},onSessionEnd:function(e,t){return n.stop(e,t)}},{transformPagePoint:this.visualElement.getTransformPagePoint()})}},e.prototype.stop=function(e,t){var n=this.isDragging;if(this.cancel(),n){var r=t.velocity;this.startAnimation(r);var i=this.getProps().onDragEnd;null===i||void 0===i||i(e,t)}},e.prototype.cancel=function(){var e,t;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(e=this.panSession)||void 0===e||e.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive($S.Drag,!1)},e.prototype.updateAxis=function(e,t,n){var r=this.getProps().drag;if(n&&TI(e,r,this.currentDirection)){var i=this.getAxisMotionValue(e),o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=function(e,t,n){var r=t.min,i=t.max;return void 0!==r&&e<r?e=n?db(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?db(i,e,n.max):Math.min(e,i)),e}(o,this.constraints[e],this.elastic[e])),i.set(o)}},e.prototype.resolveConstraints=function(){var e=this,t=this.getProps(),n=t.dragConstraints,r=t.dragElastic,i=(this.visualElement.projection||{}).layout,o=this.constraints;n&&Uw(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!n||!i)&&function(e,t){var n=t.top,r=t.left,i=t.bottom,o=t.right;return{x:pI(e.x,r,o),y:pI(e.y,n,i)}}(i.actual,n),this.elastic=function(e){return void 0===e&&(e=gI),!1===e?e=0:!0===e&&(e=gI),{x:vI(e,"left","right"),y:vI(e,"top","bottom")}}(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&MT((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.actual[t],e.constraints[t]))}))},e.prototype.resolveRefConstraints=function(){var e=this.getProps(),t=e.dragConstraints,n=e.onMeasureDragConstraints;if(!t||!Uw(t))return!1;var r=t.current;_b(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");var i=this.visualElement.projection;if(!i||!i.layout)return!1;var o=function(e,t,n){var r=bI(e,n),i=t.scroll;return i&&(sT(r.x,i.x),sT(r.y,i.y)),r}(r,i.root,this.visualElement.getTransformPagePoint()),s=function(e,t){return{x:mI(e.x,t.x),y:mI(e.y,t.y)}}(i.layout.actual,o);if(n){var a=n(function(e){var t=e.x,n=e.y;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(s));this.hasMutatedConstraints=!!a,a&&(s=wI(a))}return s},e.prototype.startAnimation=function(e){var t=this,n=this.getProps(),r=n.drag,i=n.dragMomentum,o=n.dragElastic,s=n.dragTransition,a=n.dragSnapToOrigin,l=n.onDragTransitionEnd,u=this.constraints||{},c=MT((function(n){var l;if(TI(n,r,t.currentDirection)){var c=null!==(l=null===u||void 0===u?void 0:u[n])&&void 0!==l?l:{};a&&(c={min:0,max:0});var h=o?200:1e6,d=o?40:1e7,f=Sw(Sw({type:"inertia",velocity:i?e[n]:0,bounceStiffness:h,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},s),c);return t.startAxisValueAnimation(n,f)}}));return Promise.all(c).then(l)},e.prototype.startAxisValueAnimation=function(e,t){return zE(e,this.getAxisMotionValue(e),0,t)},e.prototype.stopAnimation=function(){var e=this;MT((function(t){return e.getAxisMotionValue(t).stop()}))},e.prototype.getAxisMotionValue=function(e){var t,n,r="_drag"+e.toUpperCase(),i=this.visualElement.getProps()[r];return i||this.visualElement.getValue(e,null!==(n=null===(t=this.visualElement.getProps().initial)||void 0===t?void 0:t[e])&&void 0!==n?n:0)},e.prototype.snapToCursor=function(e){var t=this;MT((function(n){if(TI(n,t.getProps().drag,t.currentDirection)){var r=t.visualElement.projection,i=t.getAxisMotionValue(n);if(r&&r.layout){var o=r.layout.actual[n],s=o.min,a=o.max;i.set(e[n]-db(s,a,.5))}}}))},e.prototype.scalePositionWithinConstraints=function(){var e,t=this,n=this.getProps(),r=n.drag,i=n.dragConstraints,o=this.visualElement.projection;if(Uw(i)&&o&&this.constraints){this.stopAnimation();var s={x:0,y:0};MT((function(e){var n=t.getAxisMotionValue(e);if(n){var r=n.get();s[e]=function(e,t){var n=.5,r=mT(e),i=mT(t);return i>r?n=Mb(t.min,t.max-r,e.min):r>i&&(n=Mb(e.min,e.max-i,t.min)),Eb(0,1,n)}({min:r,max:r},t.constraints[e])}}));var a=this.visualElement.getProps().transformTemplate;this.visualElement.getInstance().style.transform=a?a({},""):"none",null===(e=o.root)||void 0===e||e.updateScroll(),o.updateLayout(),this.resolveConstraints(),MT((function(e){if(TI(e,r,null)){var n=t.getAxisMotionValue(e),i=t.constraints[e],o=i.min,a=i.max;n.set(db(o,a,s[e]))}}))}},e.prototype.addListeners=function(){var e,t=this;_I.set(this.visualElement,this);var n=mx(this.visualElement.getInstance(),"pointerdown",(function(e){var n=t.getProps(),r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&t.start(e)})),r=function(){Uw(t.getProps().dragConstraints)&&(t.constraints=t.resolveRefConstraints())},i=this.visualElement.projection,o=i.addEventListener("measure",r);i&&!i.layout&&(null===(e=i.root)||void 0===e||e.updateScroll(),i.updateLayout()),r();var s=ex(window,"resize",(function(){t.scalePositionWithinConstraints()}));return i.addEventListener("didUpdate",(function(e){var n=e.delta,r=e.hasLayoutChanged;t.isDragging&&r&&(MT((function(e){var r=t.getAxisMotionValue(e);r&&(t.originPoint[e]+=n[e].translate,r.set(r.get()+n[e].translate))})),t.visualElement.syncRender())})),function(){s(),n(),o()}},e.prototype.getProps=function(){var e=this.visualElement.getProps(),t=e.drag,n=void 0!==t&&t,r=e.dragDirectionLock,i=void 0!==r&&r,o=e.dragPropagation,s=void 0!==o&&o,a=e.dragConstraints,l=void 0!==a&&a,u=e.dragElastic,c=void 0===u?gI:u,h=e.dragMomentum,d=void 0===h||h;return Sw(Sw({},e),{drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:l,dragElastic:c,dragMomentum:d})},e}();function TI(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}var SI={pan:Rx((function(e){var n=e.onPan,r=e.onPanStart,i=e.onPanEnd,o=e.onPanSessionStart,s=e.visualElement,a=n||r||i||o,l=(0,t.useRef)(null),u=(0,t.useContext)(Rw).transformPagePoint,c={onSessionStart:o,onStart:r,onMove:n,onEnd:function(e,t){l.current=null,i&&i(e,t)}};(0,t.useEffect)((function(){null!==l.current&&l.current.updateHandlers(c)})),gx(s,"pointerdown",a&&function(e){l.current=new aI(e,c,{transformPagePoint:u})}),Sx((function(){return l.current&&l.current.end()}))})),drag:Rx((function(e){var n=e.dragControls,r=e.visualElement,i=Ww((function(){return new EI(r)}));(0,t.useEffect)((function(){return n&&n.subscribe(i)}),[i,n]),(0,t.useEffect)((function(){return i.addListeners()}),[i])}))},xI=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","SetAxisTarget","Unmount"];var II=function(e){var t=e.treeType,n=void 0===t?"":t,r=e.build,i=e.getBaseTarget,o=e.makeTargetAnimatable,s=e.measureViewportBox,a=e.render,l=e.readValueFromInstance,u=e.removeValueFromRenderState,c=e.sortNodePosition,h=e.scrapeMotionValuesFromProps;return function(e,t){var d=e.parent,f=e.props,p=e.presenceId,m=e.blockInitialAnimation,g=e.visualState;void 0===t&&(t={});var v,y,w=!1,b=g.latestValues,_=g.renderState,E=function(){var e=xI.map((function(){return new gb})),t={},n={clearAllListeners:function(){return e.forEach((function(e){return e.clear()}))},updatePropListeners:function(e){xI.forEach((function(r){var i,o="on"+r,s=e[o];null===(i=t[r])||void 0===i||i.call(t),s&&(t[r]=n[o](s))}))}};return e.forEach((function(e,t){n["on"+xI[t]]=function(t){return e.add(t)},n["notify"+xI[t]]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.notify.apply(e,kw([],Iw(t),!1))}})),n}(),T=new Map,S=new Map,x={},I=Sw({},b);function k(){v&&w&&(C(),a(v,_,f.style,L.projection))}function C(){r(L,_,b,t,f)}function A(){E.notifyUpdate(b)}var D=h(f);for(var N in D){var P=D[N];void 0!==b[N]&&wb(P)&&P.set(b[N],!1)}var R=Gw(f),O=Kw(f),L=Sw(Sw({treeType:n,current:null,depth:d?d.depth+1:0,parent:d,children:new Set,presenceId:p,variantChildren:O?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null===d||void 0===d?void 0:d.isMounted()),blockInitialAnimation:m,isMounted:function(){return Boolean(v)},mount:function(e){w=!0,v=L.current=e,L.projection&&L.projection.mount(e),O&&d&&!R&&(y=null===d||void 0===d?void 0:d.addVariantChild(L)),null===d||void 0===d||d.children.add(L),L.setProps(f)},unmount:function(){var e;null===(e=L.projection)||void 0===e||e.unmount(),ob.update(A),ob.render(k),S.forEach((function(e){return e()})),null===y||void 0===y||y(),null===d||void 0===d||d.children.delete(L),E.clearAllListeners(),v=void 0,w=!1},addVariantChild:function(e){var t,n=L.getClosestVariantNode();if(n)return null===(t=n.variantChildren)||void 0===t||t.add(e),function(){return n.variantChildren.delete(e)}},sortNodePosition:function(e){return c&&n===e.treeType?c(L.getInstance(),e.getInstance()):0},getClosestVariantNode:function(){return O?L:null===d||void 0===d?void 0:d.getClosestVariantNode()},getLayoutId:function(){return f.layoutId},getInstance:function(){return v},getStaticValue:function(e){return b[e]},setStaticValue:function(e,t){return b[e]=t},getLatestValues:function(){return b},setVisibility:function(e){L.isVisible!==e&&(L.isVisible=e,L.scheduleRender())},makeTargetAnimatable:function(e,t){return void 0===t&&(t=!0),o(L,e,f,t)},measureViewportBox:function(){return s(v,f)},addValue:function(e,t){L.hasValue(e)&&L.removeValue(e),T.set(e,t),b[e]=t.get(),function(e,t){var n=t.onChange((function(t){b[e]=t,f.onUpdate&&hb.update(A,!1,!0)})),r=t.onRenderRequest(L.scheduleRender);S.set(e,(function(){n(),r()}))}(e,t)},removeValue:function(e){var t;T.delete(e),null===(t=S.get(e))||void 0===t||t(),S.delete(e),delete b[e],u(e,_)},hasValue:function(e){return T.has(e)},getValue:function(e,t){var n=T.get(e);return void 0===n&&void 0!==t&&(n=yb(t),L.addValue(e,n)),n},forEachValue:function(e){return T.forEach(e)},readValue:function(e){var n;return null!==(n=b[e])&&void 0!==n?n:l(v,e,t)},setBaseTarget:function(e,t){I[e]=t},getBaseTarget:function(e){if(i){var t=i(f,e);if(void 0!==t&&!wb(t))return t}return I[e]}},E),{build:function(){return C(),_},scheduleRender:function(){hb.render(k,!1,!0)},syncRender:k,setProps:function(e){(e.transformTemplate||f.transformTemplate)&&L.scheduleRender(),f=e,E.updatePropListeners(e),x=function(e,t,n){var r;for(var i in t){var o=t[i],s=n[i];if(wb(o))e.addValue(i,o);else if(wb(s))e.addValue(i,yb(o));else if(s!==o)if(e.hasValue(i)){var a=e.getValue(i);!a.hasAnimated&&a.set(o)}else e.addValue(i,yb(null!==(r=e.getStaticValue(i))&&void 0!==r?r:o))}for(var i in n)void 0===t[i]&&e.removeValue(i);return t}(L,h(f),x)},getProps:function(){return f},getVariant:function(e){var t;return null===(t=f.variants)||void 0===t?void 0:t[e]},getDefaultTransition:function(){return f.transition},getTransformPagePoint:function(){return f.transformPagePoint},getVariantContext:function(e){if(void 0===e&&(e=!1),e)return null===d||void 0===d?void 0:d.getVariantContext();if(!R){var t=(null===d||void 0===d?void 0:d.getVariantContext())||{};return void 0!==f.initial&&(t.initial=f.initial),t}for(var n={},r=0;r<CI;r++){var i=kI[r],o=f[i];(zw(o)||!1===o)&&(n[i]=o)}return n}});return L}},kI=kw(["initial"],Iw(eI),!1),CI=kI.length;function AI(e){return"string"===typeof e&&e.startsWith("var(--")}var DI=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;var NI=4;function PI(e,t,n){void 0===n&&(n=1),_b(n<=NI,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));var r=Iw(function(e){var t=DI.exec(e);if(!t)return[,];var n=Iw(t,3);return[n[1],n[2]]}(e),2),i=r[0],o=r[1];if(i){var s=window.getComputedStyle(t).getPropertyValue(i);return s?s.trim():AI(o)?PI(o,t,n+1):o}}var RI,OI=new Set(["width","height","top","left","right","bottom","x","y"]),LI=function(e){return OI.has(e)},MI=function(e,t){e.set(t,!1),e.set(t)},FI=function(e){return e===qb||e===t_};!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(RI||(RI={}));var VI=function(e,t){return parseFloat(e.split(", ")[t])},UI=function(e,t){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var o=i.match(/^matrix3d\((.+)\)$/);if(o)return VI(o[1],t);var s=i.match(/^matrix\((.+)\)$/);return s?VI(s[1],e):0}},BI=new Set(["x","y","z"]),zI=VT.filter((function(e){return!BI.has(e)}));var jI={width:function(e,t){var n=e.x,r=t.paddingLeft,i=void 0===r?"0":r,o=t.paddingRight,s=void 0===o?"0":o;return n.max-n.min-parseFloat(i)-parseFloat(s)},height:function(e,t){var n=e.y,r=t.paddingTop,i=void 0===r?"0":r,o=t.paddingBottom,s=void 0===o?"0":o;return n.max-n.min-parseFloat(i)-parseFloat(s)},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,r=t.top;return parseFloat(r)+(n.max-n.min)},right:function(e,t){var n=e.x,r=t.left;return parseFloat(r)+(n.max-n.min)},x:UI(4,13),y:UI(5,14)},qI=function(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r={}),t=Sw({},t),r=Sw({},r);var i=Object.keys(t).filter(LI),o=[],s=!1,a=[];if(i.forEach((function(i){var l=e.getValue(i);if(e.hasValue(i)){var u,c=n[i],h=Gx(c),d=t[i];if(gE(d)){var f=d.length,p=null===d[0]?1:0;c=d[p],h=Gx(c);for(var m=p;m<f;m++)u?_b(Gx(d[m])===u,"All keyframes must be of the same type"):(u=Gx(d[m]),_b(u===h||FI(h)&&FI(u),"Keyframes must be of the same dimension as the current value"))}else u=Gx(d);if(h!==u)if(FI(h)&&FI(u)){var g=l.get();"string"===typeof g&&l.set(parseFloat(g)),"string"===typeof d?t[i]=parseFloat(d):Array.isArray(d)&&u===t_&&(t[i]=d.map(parseFloat))}else(null===h||void 0===h?void 0:h.transform)&&(null===u||void 0===u?void 0:u.transform)&&(0===c||0===d)?0===c?l.set(u.transform(c)):t[i]=h.transform(d):(s||(o=function(e){var t=[];return zI.forEach((function(n){var r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.syncRender(),t}(e),s=!0),a.push(i),r[i]=void 0!==r[i]?r[i]:t[i],MI(l,d))}})),a.length){var l=function(e,t,n){var r=t.measureViewportBox(),i=t.getInstance(),o=getComputedStyle(i),s=o.display,a={};"none"===s&&t.setStaticValue("display",e.display||"block"),n.forEach((function(e){a[e]=jI[e](r,o)})),t.syncRender();var l=t.measureViewportBox();return n.forEach((function(n){var r=t.getValue(n);MI(r,a[n]),e[n]=jI[n](l,o)})),e}(t,e,a);return o.length&&o.forEach((function(t){var n=Iw(t,2),r=n[0],i=n[1];e.getValue(r).set(i)})),e.syncRender(),{target:l,transitionEnd:r}}return{target:t,transitionEnd:r}};function GI(e,t,n,r){return function(e){return Object.keys(e).some(LI)}(t)?qI(e,t,n,r):{target:t,transitionEnd:r}}var KI=function(e,t,n,r){var i=function(e,t,n){var r,i=xw(t,[]),o=e.getInstance();if(!(o instanceof Element))return{target:i,transitionEnd:n};for(var s in n&&(n=Sw({},n)),e.forEachValue((function(e){var t=e.get();if(AI(t)){var n=PI(t,o);n&&e.set(n)}})),i){var a=i[s];if(AI(a)){var l=PI(a,o);l&&(i[s]=l,n&&(null!==(r=n[s])&&void 0!==r||(n[s]=a)))}}return{target:i,transitionEnd:n}}(e,t,r);return GI(e,t=i.target,n,r=i.transitionEnd)};var HI={treeType:"dom",readValueFromInstance:function(e,t){if(zT(t)){var n=DE(t);return n&&n.default||0}var r,i=(r=e,window.getComputedStyle(r));return(ES(t)?i.getPropertyValue(t):i[t])||0},sortNodePosition:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1},getBaseTarget:function(e,t){var n;return null===(n=e.style)||void 0===n?void 0:n[t]},measureViewportBox:function(e,t){return bI(e,t.transformPagePoint)},resetTransform:function(e,t,n){var r=n.transformTemplate;t.style.transform=r?r({},""):"none",e.scheduleRender()},restoreTransform:function(e,t){e.style.transform=t.style.transform},removeValueFromRenderState:function(e,t){var n=t.vars,r=t.style;delete n[e],delete r[e]},makeTargetAnimatable:function(e,t,n,r){var i=n.transformValues;void 0===r&&(r=!0);var o=t.transition,s=t.transitionEnd,a=xw(t,["transition","transitionEnd"]),l=function(e,t,n){var r,i,o={};for(var s in e)o[s]=null!==(r=Yx(s,t))&&void 0!==r?r:null===(i=n.getValue(s))||void 0===i?void 0:i.get();return o}(a,o||{},e);if(i&&(s&&(s=i(s)),a&&(a=i(a)),l&&(l=i(l))),r){!function(e,t,n){var r,i,o,s,a=Object.keys(t).filter((function(t){return!e.hasValue(t)})),l=a.length;if(l)for(var u=0;u<l;u++){var c=a[u],h=t[c],d=null;Array.isArray(h)&&(d=h[0]),null===d&&(d=null!==(i=null!==(r=n[c])&&void 0!==r?r:e.readValue(c))&&void 0!==i?i:t[c]),void 0!==d&&null!==d&&("string"===typeof d&&(Bx(d)||zx(d))?d=parseFloat(d):!Hx(d)&&b_.test(h)&&(d=NE(c,h)),e.addValue(c,yb(d)),null!==(o=(s=n)[c])&&void 0!==o||(s[c]=d),e.setBaseTarget(c,d))}}(e,a,l);var u=KI(e,a,l,s);s=u.transitionEnd,a=u.target}return Sw({transition:o,transitionEnd:s},a)},scrapeMotionValuesFromProps:KS,build:function(e,t,n,r,i){void 0!==e.isVisible&&(t.style.visibility=e.isVisible?"visible":"hidden"),SS(t,n,r,i.transformTemplate)},render:jS},QI=II(HI),WI=II(Sw(Sw({},HI),{getBaseTarget:function(e,t){return e[t]},readValueFromInstance:function(e,t){var n;return zT(t)?(null===(n=DE(t))||void 0===n?void 0:n.default)||0:(t=qS.has(t)?t:zS(t),e.getAttribute(t))},scrapeMotionValuesFromProps:HS,build:function(e,t,n,r,i){MS(t,n,r,i.transformTemplate)},render:GS})),YI=function(e,t){return wS(e)?WI(t,{enableHardwareAcceleration:!1}):QI(t,{enableHardwareAcceleration:!0})};function XI(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var $I={correct:function(e,t){if(!t.target)return e;if("string"===typeof e){if(!t_.test(e))return e;e=parseFloat(e)}var n=XI(e,t.target.x),r=XI(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},JI="_$css",ZI={correct:function(e,t){var n=t.treeScale,r=t.projectionDelta,i=e,o=e.includes("var("),s=[];o&&(e=e.replace(DI,(function(e){return s.push(e),JI})));var a=b_.parse(e);if(a.length>5)return i;var l=b_.createTransformer(e),u="number"!==typeof a[0]?1:0,c=r.x.scale*n.x,h=r.y.scale*n.y;a[0+u]/=c,a[1+u]/=h;var d=db(c,h,.5);"number"===typeof a[2+u]&&(a[2+u]/=d),"number"===typeof a[3+u]&&(a[3+u]/=d);var f=l(a);if(o){var p=0;f=f.replace(JI,(function(){var e=s[p];return p++,e}))}return f}},ek=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Tw(t,e),t.prototype.componentDidMount=function(){var e,t=this,n=this.props,r=n.visualElement,i=n.layoutGroup,o=n.switchLayoutGroup,s=n.layoutId,a=r.projection;e=tk,Object.assign(RT,e),a&&((null===i||void 0===i?void 0:i.group)&&i.group.add(a),(null===o||void 0===o?void 0:o.register)&&s&&o.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",(function(){t.safeToRemove()})),a.setOptions(Sw(Sw({},a.options),{onExitComplete:function(){return t.safeToRemove()}}))),QT.hasEverUpdated=!0},t.prototype.getSnapshotBeforeUpdate=function(e){var t=this,n=this.props,r=n.layoutDependency,i=n.visualElement,o=n.drag,s=n.isPresent,a=i.projection;return a?(a.isPresent=s,o||e.layoutDependency!==r||void 0===r?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||hb.postRender((function(){var e;(null===(e=a.getStack())||void 0===e?void 0:e.members.length)||t.safeToRemove()}))),null):null},t.prototype.componentDidUpdate=function(){var e=this.props.visualElement.projection;e&&(e.root.didUpdate(),!e.currentAnimation&&e.isLead()&&this.safeToRemove())},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.visualElement,n=e.layoutGroup,r=e.switchLayoutGroup,i=t.projection;i&&(i.scheduleCheckAfterUnmount(),(null===n||void 0===n?void 0:n.group)&&n.group.remove(i),(null===r||void 0===r?void 0:r.deregister)&&r.deregister(i))},t.prototype.safeToRemove=function(){var e=this.props.safeToRemove;null===e||void 0===e||e()},t.prototype.render=function(){return null},t}(t.Component);var tk={borderRadius:Sw(Sw({},$I),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:$I,borderTopRightRadius:$I,borderBottomLeftRadius:$I,borderBottomRightRadius:$I,boxShadow:ZI},nk={measureLayout:function(e){var n=Iw(Lx(),2),r=n[0],i=n[1],o=(0,t.useContext)(fS);return t.createElement(ek,Sw({},e,{layoutGroup:o,switchLayoutGroup:(0,t.useContext)(pS),isPresent:r,safeToRemove:i}))}},rk=WT({attachResizeListener:function(e,t){return e.addEventListener("resize",t,{passive:!0}),function(){return e.removeEventListener("resize",t)}},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}}}),ik={current:void 0},ok=WT({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!ik.current){var e=new rk(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),ik.current=e}return ik.current},resetTransform:function(e,t){e.style.transform=null!==t&&void 0!==t?t:"none"}}),sk=Sw(Sw(Sw(Sw({},sI),Ox),SI),nk),ak=vS((function(e,t){return function(e,t,n,r,i){var o=t.forwardMotionProps,s=void 0!==o&&o,a=wS(e)?JS:ZS;return Sw(Sw({},a),{preloadedFeatures:n,useRender:US(s),createVisualElement:r,projectionNodeConstructor:i,Component:e})}(e,t,sk,YI,ok)}));const lk=e=>{let{file:n,setFile:r}=e;const{url:i,progress:o}=_w(n);return(0,t.useEffect)((()=>{i&&r(null)}),[i,r]),t.createElement(ak.div,{className:"progress-bar",initial:{width:0},animate:{width:o+"%"}}," ")},uk=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)(null),o=["image/png","image/jpeg"];return t.createElement("form",null,t.createElement("label",null,t.createElement("input",{type:"file",onChange:e=>{let t=e.target.files[0];t&&o.includes(t.type)?(n(t),i(null)):(n(null),i("Please select an Image file (png or jpeg)"))}}),t.createElement("span",null,"+")),t.createElement("div",{className:"output"},r&&t.createElement("div",{className:"error"},r),e&&t.createElement("div",null,e.name),e&&t.createElement(lk,{file:e,setFile:n})))},ck=e=>{const[n,r]=(0,t.useState)([]);return(0,t.useEffect)((()=>{const t=ww.collection(e).orderBy("createdAt","desc").onSnapshot((e=>{let t=[];e.forEach((e=>{t.push({...e.data(),id:e.id})})),r(t)}));return()=>t()}),[e]),{docs:n}};const hk=function(e){const{text:n,tipClass:r,children:i}=e;return t.createElement("div",{className:"tooltip"},i,t.createElement("span",{className:r},n))};var dk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},fk=t.createContext&&t.createContext(dk),pk=["attr","size","title"];function mk(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gk(){return gk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gk.apply(this,arguments)}function vk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vk(Object(n),!0).forEach((function(t){wk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bk(e){return e&&e.map(((e,n)=>t.createElement(e.tag,yk({key:n},e.attr),bk(e.child))))}function _k(e){return n=>t.createElement(Ek,gk({attr:yk({},e.attr)},n),bk(e.child))}function Ek(e){var n=n=>{var r,{attr:i,size:o,title:s}=e,a=mk(e,pk),l=o||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",gk({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:r,style:yk(yk({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&t.createElement("title",null,s),e.children)};return void 0!==fk?t.createElement(fk.Consumer,null,(e=>n(e))):n(dk)}function Tk(e){return _k({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm52.7 283.3L256 278.6l-52.7 52.7c-6.2 6.2-16.4 6.2-22.6 0-3.1-3.1-4.7-7.2-4.7-11.3 0-4.1 1.6-8.2 4.7-11.3l52.7-52.7-52.7-52.7c-3.1-3.1-4.7-7.2-4.7-11.3 0-4.1 1.6-8.2 4.7-11.3 6.2-6.2 16.4-6.2 22.6 0l52.7 52.7 52.7-52.7c6.2-6.2 16.4-6.2 22.6 0 6.2 6.2 6.2 16.4 0 22.6L278.6 256l52.7 52.7c6.2 6.2 6.2 16.4 0 22.6-6.2 6.3-16.4 6.3-22.6 0z"},child:[]}]})(e)}const Sk=e=>{let{setSelectimg:n,docu:r}=e;const[i,o]=(0,t.useState)("Delete"),[s,a]=(0,t.useState)("tooltiptext"),l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee(),t=arguments.length>1?arguments[1]:void 0;e=A(e);const n=me(e,Sn).getImmediate({identifier:t}),r=f("storage");return r&&An(n,...r),n}(),u=function(e,t){const n="string"==typeof e?e:t||"(default)",r=me("object"==typeof e?e:Ee(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=f("firestore");e&&uv(r,...e)}return r}(vw);return t.createElement("div",null,t.createElement(ak.div,{className:"img-wrap",layout:!0,whileHover:{opacity:1}},t.createElement(ak.img,{src:r.url,alt:"image gallery",onClick:()=>n(r.url),initial:{opacity:0},animate:{opacity:1},transition:{delay:1}}),t.createElement(hk,{text:i,tipClass:s},t.createElement(Tk,{className:"remove-img",onClick:()=>((e,t)=>{const n=Cn(l,e);a("tooltipactive"),o("Deleting..."),kn(n).then((async()=>{console.log("deleted",r.id),await My(pv(u,"images",t))})).then((()=>{console.log("updated store")})).catch((async e=>{await My(pv(u,"images",t)),console.error("Error occured",e)}))})(r.url,r.id)}))))},xk=e=>{let{setSelectimg:n,setFilelen:r}=e;const{docs:i}=ck("images");return r(i.length),t.createElement("div",{className:"img-grid"},0!==i.length?i.map((e=>t.createElement(Sk,{setSelectimg:n,docu:e,key:e.id}))):t.createElement("h3",{style:{textAlign:"center"}},"Start Adding Images"))},Ik=e=>{let{selectimg:n,setSelectimg:r}=e;return t.createElement("div",{className:"backdrop",onClick:e=>{e.target.classList.contains("backdrop")&&r(null)}},t.createElement("img",{src:n,alt:""}))},kk=()=>{const[e,n]=(0,t.useState)(!1),[r,i]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=e=>{e.preventDefault(),console.log("we are being triggered :D"),n(!0),i(e)};return window.addEventListener("beforeinstallprompt",e),()=>window.removeEventListener("transitionend",e)}),[]);return e?t.createElement("button",{style:{backgroundColor:"purple",position:"fixed"},className:"btn btn-install","aria-label":"Install app",title:"Install app",onClick:e=>{e.preventDefault(),r&&r.prompt()}},"Install"):null};function Ck(e){return _k({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 0 0-44.4 0L77.5 505a63.9 63.9 0 0 0-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0 0 18.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"},child:[]}]})(e)}function Ak(e){return _k({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M858.5 763.6a374 374 0 0 0-80.6-119.5 375.63 375.63 0 0 0-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 0 0-80.6 119.5A371.7 371.7 0 0 0 136 901.8a8 8 0 0 0 8 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 0 0 8-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"},child:[]}]})(e)}function Dk(e){return _k({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 8v11c0 2.201 1.794 3 3 3h15v-2H6.012C5.55 19.988 5 19.806 5 19c0-.101.009-.191.024-.273.112-.576.584-.717.988-.727H21V4c0-1.103-.897-2-2-2H6c-1.206 0-3 .799-3 3v3zm3-4h13v12H5V5c0-.806.55-.988 1-1z"},child:[]},{tag:"path",attr:{d:"M11 14h2v-3h3V9h-3V6h-2v3H8v2h3z"},child:[]}]})(e)}function Nk(e){return _k({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14.1213 10.4796C13.7308 10.0891 13.0976 10.0891 12.7071 10.4796L12 11.1868C11.2189 11.9678 9.95259 11.9678 9.17154 11.1868C8.39049 10.4057 8.39049 9.13937 9.17154 8.35832L14.8022 2.72617C16.9061 2.25022 19.2008 2.83124 20.8388 4.46924C23.2582 6.8886 23.3716 10.7407 21.1792 13.2944L19.071 15.4294L14.1213 10.4796ZM3.16113 4.46924C5.33452 2.29584 8.66411 1.98332 11.17 3.53165L7.75732 6.94411C6.19523 8.50621 6.19523 11.0389 7.75732 12.601C9.27209 14.1157 11.6995 14.1616 13.2695 12.7387L13.4142 12.601L17.6568 16.8436L13.4142 21.0862C12.6331 21.8673 11.3668 21.8673 10.5858 21.0862L3.16113 13.6616C0.622722 11.1232 0.622722 7.00764 3.16113 4.46924Z"},child:[]}]})(e)}function Pk(e){return _k({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 4h16v12H5.17L4 17.17V4m0-2c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2H4zm2 10h12v2H6v-2zm0-3h12v2H6V9zm0-3h12v2H6V6z"},child:[]}]})(e)}const Rk=()=>{const[e,n]=(0,t.useState)("#");return t.createElement("nav",null,t.createElement("a",{href:"https://ms-mayank.github.io/",onClick:()=>n("#"),className:"#"===e?"active":""},t.createElement(Ck,null)),t.createElement("a",{href:"https://ms-mayank.github.io/#about",onClick:()=>n("#about"),className:"#about"===e?"active":""},t.createElement(Ak,null)),t.createElement("a",{href:"https://ms-mayank.github.io/#experience",onClick:()=>n("#experience"),className:"#experience"===e?"active":""},t.createElement(Dk,null)),t.createElement("a",{href:"https://ms-mayank.github.io/#portfolio",onClick:()=>n("#services"),className:"#services"===e?"active":""},t.createElement(Nk,null)),t.createElement("a",{href:"https://ms-mayank.github.io/#contact",onClick:()=>n("#contact"),className:"#contact"===e?"active":""},t.createElement(Pk,null)))};function Ok(e){return _k({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"},child:[]}]})(e)}function Lk(e){return _k({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"},child:[]}]})(e)}function Mk(e){return _k({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31.4 31.4 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788 0 0 1 7.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z"},child:[]}]})(e)}const Fk=()=>t.createElement("footer",null,t.createElement("a",{href:"https://ms-mayank.github.io/",className:"footer__logo"},"Mayank Shukla"),t.createElement("ul",{className:"permalinks"},t.createElement("li",null,t.createElement("a",{href:"https://ms-mayank.github.io/#"},"Home")),t.createElement("li",null,t.createElement("a",{href:"https://ms-mayank.github.io/#about"},"About")),t.createElement("li",null,t.createElement("a",{href:"https://ms-mayank.github.io/#experience"},"Experience")),t.createElement("li",null,t.createElement("a",{href:"https://ms-mayank.github.io/#portfolio"},"Portfolio")),t.createElement("li",null,t.createElement("a",{href:"https://ms-mayank.github.io/#contact"},"Contact"))),t.createElement("div",{className:"footer__socials"},t.createElement("a",{href:"https://www.linkedin.com/in/msmayank/"},t.createElement(Lk,null)),t.createElement("a",{href:"https://github.com/ms-mayank"},t.createElement(Ok,null)),t.createElement("a",{href:"https://www.youtube.com/channel/UCmefvzYXttYVHwyds4SITYw"},t.createElement(Mk,null))));const Vk=function(){const[e,n]=(0,t.useState)(null),[r,o]=(0,t.useState)(4);return t.createElement(t.Fragment,null,t.createElement("div",{className:"App"},t.createElement(Rk,null),t.createElement(kk,null),t.createElement(i,null),r>=4?t.createElement("h2",{style:{textAlign:"center"}},"Max 4 Files Allowed"):t.createElement(uk,null),t.createElement(xk,{setSelectimg:n,setFilelen:o}),e&&t.createElement(Ik,{selectimg:e,setSelectimg:n})),t.createElement(Fk,null))};r.render(t.createElement(t.StrictMode,null,t.createElement(Vk,null)),document.getElementById("root"))})()})();
//# sourceMappingURL=main.3263e248.js.map